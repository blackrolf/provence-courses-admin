function M9(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function R9(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var yx={exports:{}},Sd={},xx={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO;function D9(){if(LO)return pt;LO=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function x(I,H,ne){this.props=I,this.context=H,this.refs=b,this.updater=ne||g}x.prototype.isReactComponent={},x.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},x.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function j(){}j.prototype=x.prototype;function S(I,H,ne){this.props=I,this.context=H,this.refs=b,this.updater=ne||g}var C=S.prototype=new j;C.constructor=S,y(C,x.prototype),C.isPureReactComponent=!0;var E=Array.isArray,N=Object.prototype.hasOwnProperty,P={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function L(I,H,ne){var ge,K={},de=null,ue=null;if(H!=null)for(ge in H.ref!==void 0&&(ue=H.ref),H.key!==void 0&&(de=""+H.key),H)N.call(H,ge)&&!O.hasOwnProperty(ge)&&(K[ge]=H[ge]);var he=arguments.length-2;if(he===1)K.children=ne;else if(1<he){for(var ce=Array(he),te=0;te<he;te++)ce[te]=arguments[te+2];K.children=ce}if(I&&I.defaultProps)for(ge in he=I.defaultProps,he)K[ge]===void 0&&(K[ge]=he[ge]);return{$$typeof:t,type:I,key:de,ref:ue,props:K,_owner:P.current}}function A(I,H){return{$$typeof:t,type:I.type,key:H,ref:I.ref,props:I.props,_owner:I._owner}}function R(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function M(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ne){return H[ne]})}var D=/\/+/g;function B(I,H){return typeof I=="object"&&I!==null&&I.key!=null?M(""+I.key):H.toString(36)}function F(I,H,ne,ge,K){var de=typeof I;(de==="undefined"||de==="boolean")&&(I=null);var ue=!1;if(I===null)ue=!0;else switch(de){case"string":case"number":ue=!0;break;case"object":switch(I.$$typeof){case t:case e:ue=!0}}if(ue)return ue=I,K=K(ue),I=ge===""?"."+B(ue,0):ge,E(K)?(ne="",I!=null&&(ne=I.replace(D,"$&/")+"/"),F(K,H,ne,"",function(te){return te})):K!=null&&(R(K)&&(K=A(K,ne+(!K.key||ue&&ue.key===K.key?"":(""+K.key).replace(D,"$&/")+"/")+I)),H.push(K)),1;if(ue=0,ge=ge===""?".":ge+":",E(I))for(var he=0;he<I.length;he++){de=I[he];var ce=ge+B(de,he);ue+=F(de,H,ne,ce,K)}else if(ce=m(I),typeof ce=="function")for(I=ce.call(I),he=0;!(de=I.next()).done;)de=de.value,ce=ge+B(de,he++),ue+=F(de,H,ne,ce,K);else if(de==="object")throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ue}function V(I,H,ne){if(I==null)return I;var ge=[],K=0;return F(I,ge,"","",function(de){return H.call(ne,de,K++)}),ge}function J(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(ne){(I._status===0||I._status===-1)&&(I._status=1,I._result=ne)},function(ne){(I._status===0||I._status===-1)&&(I._status=2,I._result=ne)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var G={current:null},q={transition:null},U={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:q,ReactCurrentOwner:P};function W(){throw Error("act(...) is not supported in production builds of React.")}return pt.Children={map:V,forEach:function(I,H,ne){V(I,function(){H.apply(this,arguments)},ne)},count:function(I){var H=0;return V(I,function(){H++}),H},toArray:function(I){return V(I,function(H){return H})||[]},only:function(I){if(!R(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},pt.Component=x,pt.Fragment=r,pt.Profiler=s,pt.PureComponent=S,pt.StrictMode=n,pt.Suspense=c,pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,pt.act=W,pt.cloneElement=function(I,H,ne){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var ge=y({},I.props),K=I.key,de=I.ref,ue=I._owner;if(H!=null){if(H.ref!==void 0&&(de=H.ref,ue=P.current),H.key!==void 0&&(K=""+H.key),I.type&&I.type.defaultProps)var he=I.type.defaultProps;for(ce in H)N.call(H,ce)&&!O.hasOwnProperty(ce)&&(ge[ce]=H[ce]===void 0&&he!==void 0?he[ce]:H[ce])}var ce=arguments.length-2;if(ce===1)ge.children=ne;else if(1<ce){he=Array(ce);for(var te=0;te<ce;te++)he[te]=arguments[te+2];ge.children=he}return{$$typeof:t,type:I.type,key:K,ref:de,props:ge,_owner:ue}},pt.createContext=function(I){return I={$$typeof:a,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:i,_context:I},I.Consumer=I},pt.createElement=L,pt.createFactory=function(I){var H=L.bind(null,I);return H.type=I,H},pt.createRef=function(){return{current:null}},pt.forwardRef=function(I){return{$$typeof:l,render:I}},pt.isValidElement=R,pt.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:J}},pt.memo=function(I,H){return{$$typeof:d,type:I,compare:H===void 0?null:H}},pt.startTransition=function(I){var H=q.transition;q.transition={};try{I()}finally{q.transition=H}},pt.unstable_act=W,pt.useCallback=function(I,H){return G.current.useCallback(I,H)},pt.useContext=function(I){return G.current.useContext(I)},pt.useDebugValue=function(){},pt.useDeferredValue=function(I){return G.current.useDeferredValue(I)},pt.useEffect=function(I,H){return G.current.useEffect(I,H)},pt.useId=function(){return G.current.useId()},pt.useImperativeHandle=function(I,H,ne){return G.current.useImperativeHandle(I,H,ne)},pt.useInsertionEffect=function(I,H){return G.current.useInsertionEffect(I,H)},pt.useLayoutEffect=function(I,H){return G.current.useLayoutEffect(I,H)},pt.useMemo=function(I,H){return G.current.useMemo(I,H)},pt.useReducer=function(I,H,ne){return G.current.useReducer(I,H,ne)},pt.useRef=function(I){return G.current.useRef(I)},pt.useState=function(I){return G.current.useState(I)},pt.useSyncExternalStore=function(I,H,ne){return G.current.useSyncExternalStore(I,H,ne)},pt.useTransition=function(){return G.current.useTransition()},pt.version="18.3.1",pt}var MO;function Ih(){return MO||(MO=1,xx.exports=D9()),xx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RO;function I9(){if(RO)return Sd;RO=1;var t=Ih(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,d){var f,p={},m=null,g=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(g=c.ref);for(f in c)n.call(c,f)&&!i.hasOwnProperty(f)&&(p[f]=c[f]);if(l&&l.defaultProps)for(f in c=l.defaultProps,c)p[f]===void 0&&(p[f]=c[f]);return{$$typeof:e,type:l,key:m,ref:g,props:p,_owner:s.current}}return Sd.Fragment=r,Sd.jsx=a,Sd.jsxs=a,Sd}var DO;function $9(){return DO||(DO=1,yx.exports=I9()),yx.exports}var o=$9(),w=Ih();const z=Pt(w),F9=M9({__proto__:null,default:z},[w]);var um={},bx={exports:{}},An={},wx={exports:{}},_x={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IO;function B9(){return IO||(IO=1,function(t){function e(q,U){var W=q.length;q.push(U);e:for(;0<W;){var I=W-1>>>1,H=q[I];if(0<s(H,U))q[I]=U,q[W]=H,W=I;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var U=q[0],W=q.pop();if(W!==U){q[0]=W;e:for(var I=0,H=q.length,ne=H>>>1;I<ne;){var ge=2*(I+1)-1,K=q[ge],de=ge+1,ue=q[de];if(0>s(K,W))de<H&&0>s(ue,K)?(q[I]=ue,q[de]=W,I=de):(q[I]=K,q[ge]=W,I=ge);else if(de<H&&0>s(ue,W))q[I]=ue,q[de]=W,I=de;else break e}}return U}function s(q,U){var W=q.sortIndex-U.sortIndex;return W!==0?W:q.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],f=1,p=null,m=3,g=!1,y=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var U=r(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=q)n(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=r(d)}}function E(q){if(b=!1,C(q),!y)if(r(c)!==null)y=!0,J(N);else{var U=r(d);U!==null&&G(E,U.startTime-q)}}function N(q,U){y=!1,b&&(b=!1,j(L),L=-1),g=!0;var W=m;try{for(C(U),p=r(c);p!==null&&(!(p.expirationTime>U)||q&&!M());){var I=p.callback;if(typeof I=="function"){p.callback=null,m=p.priorityLevel;var H=I(p.expirationTime<=U);U=t.unstable_now(),typeof H=="function"?p.callback=H:p===r(c)&&n(c),C(U)}else n(c);p=r(c)}if(p!==null)var ne=!0;else{var ge=r(d);ge!==null&&G(E,ge.startTime-U),ne=!1}return ne}finally{p=null,m=W,g=!1}}var P=!1,O=null,L=-1,A=5,R=-1;function M(){return!(t.unstable_now()-R<A)}function D(){if(O!==null){var q=t.unstable_now();R=q;var U=!0;try{U=O(!0,q)}finally{U?B():(P=!1,O=null)}}else P=!1}var B;if(typeof S=="function")B=function(){S(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,V=F.port2;F.port1.onmessage=D,B=function(){V.postMessage(null)}}else B=function(){x(D,0)};function J(q){O=q,P||(P=!0,B())}function G(q,U){L=x(function(){q(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,J(N))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var W=m;m=U;try{return q()}finally{m=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,U){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var W=m;m=q;try{return U()}finally{m=W}},t.unstable_scheduleCallback=function(q,U,W){var I=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?I+W:I):W=I,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=W+H,q={id:f++,callback:U,priorityLevel:q,startTime:W,expirationTime:H,sortIndex:-1},W>I?(q.sortIndex=W,e(d,q),r(c)===null&&q===r(d)&&(b?(j(L),L=-1):b=!0,G(E,W-I))):(q.sortIndex=H,e(c,q),y||g||(y=!0,J(N))),q},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(q){var U=m;return function(){var W=m;m=U;try{return q.apply(this,arguments)}finally{m=W}}}}(_x)),_x}var $O;function z9(){return $O||($O=1,wx.exports=B9()),wx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FO;function U9(){if(FO)return An;FO=1;var t=Ih(),e=z9();function r(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(u,h){a(u,h),a(u+"Capture",h)}function a(u,h){for(s[u]=h,u=0;u<h.length;u++)n.add(h[u])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(u){return c.call(p,u)?!0:c.call(f,u)?!1:d.test(u)?p[u]=!0:(f[u]=!0,!1)}function g(u,h,v,_){if(v!==null&&v.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return _?!1:v!==null?!v.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function y(u,h,v,_){if(h===null||typeof h>"u"||g(u,h,v,_))return!0;if(_)return!1;if(v!==null)switch(v.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function b(u,h,v,_,k,T,$){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=_,this.attributeNamespace=k,this.mustUseProperty=v,this.propertyName=u,this.type=h,this.sanitizeURL=T,this.removeEmptyString=$}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){x[u]=new b(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var h=u[0];x[h]=new b(h,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){x[u]=new b(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){x[u]=new b(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){x[u]=new b(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){x[u]=new b(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){x[u]=new b(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){x[u]=new b(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){x[u]=new b(u,5,!1,u.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function S(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var h=u.replace(j,S);x[h]=new b(h,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var h=u.replace(j,S);x[h]=new b(h,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var h=u.replace(j,S);x[h]=new b(h,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){x[u]=new b(u,1,!1,u.toLowerCase(),null,!1,!1)}),x.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){x[u]=new b(u,1,!1,u.toLowerCase(),null,!0,!0)});function C(u,h,v,_){var k=x.hasOwnProperty(h)?x[h]:null;(k!==null?k.type!==0:_||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(y(h,v,k,_)&&(v=null),_||k===null?m(h)&&(v===null?u.removeAttribute(h):u.setAttribute(h,""+v)):k.mustUseProperty?u[k.propertyName]=v===null?k.type===3?!1:"":v:(h=k.attributeName,_=k.attributeNamespace,v===null?u.removeAttribute(h):(k=k.type,v=k===3||k===4&&v===!0?"":""+v,_?u.setAttributeNS(_,h,v):u.setAttribute(h,v))))}var E=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),P=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),q=Symbol.iterator;function U(u){return u===null||typeof u!="object"?null:(u=q&&u[q]||u["@@iterator"],typeof u=="function"?u:null)}var W=Object.assign,I;function H(u){if(I===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);I=h&&h[1]||""}return`
`+I+u}var ne=!1;function ge(u,h){if(!u||ne)return"";ne=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(le){var _=le}Reflect.construct(u,[],h)}else{try{h.call()}catch(le){_=le}u.call(h.prototype)}else{try{throw Error()}catch(le){_=le}u()}}catch(le){if(le&&_&&typeof le.stack=="string"){for(var k=le.stack.split(`
`),T=_.stack.split(`
`),$=k.length-1,X=T.length-1;1<=$&&0<=X&&k[$]!==T[X];)X--;for(;1<=$&&0<=X;$--,X--)if(k[$]!==T[X]){if($!==1||X!==1)do if($--,X--,0>X||k[$]!==T[X]){var ee=`
`+k[$].replace(" at new "," at ");return u.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",u.displayName)),ee}while(1<=$&&0<=X);break}}}finally{ne=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?H(u):""}function K(u){switch(u.tag){case 5:return H(u.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return u=ge(u.type,!1),u;case 11:return u=ge(u.type.render,!1),u;case 1:return u=ge(u.type,!0),u;default:return""}}function de(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case O:return"Fragment";case P:return"Portal";case A:return"Profiler";case L:return"StrictMode";case B:return"Suspense";case F:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case M:return(u.displayName||"Context")+".Consumer";case R:return(u._context.displayName||"Context")+".Provider";case D:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case V:return h=u.displayName||null,h!==null?h:de(u.type)||"Memo";case J:h=u._payload,u=u._init;try{return de(u(h))}catch{}}return null}function ue(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(h);case 8:return h===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function he(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ce(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function te(u){var h=ce(u)?"checked":"value",v=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),_=""+u[h];if(!u.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var k=v.get,T=v.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return k.call(this)},set:function($){_=""+$,T.call(this,$)}}),Object.defineProperty(u,h,{enumerable:v.enumerable}),{getValue:function(){return _},setValue:function($){_=""+$},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function pe(u){u._valueTracker||(u._valueTracker=te(u))}function ae(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var v=h.getValue(),_="";return u&&(_=ce(u)?u.checked?"true":"false":u.value),u=_,u!==v?(h.setValue(u),!0):!1}function Oe(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Ee(u,h){var v=h.checked;return W({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??u._wrapperState.initialChecked})}function ke(u,h){var v=h.defaultValue==null?"":h.defaultValue,_=h.checked!=null?h.checked:h.defaultChecked;v=he(h.value!=null?h.value:v),u._wrapperState={initialChecked:_,initialValue:v,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function We(u,h){h=h.checked,h!=null&&C(u,"checked",h,!1)}function St(u,h){We(u,h);var v=he(h.value),_=h.type;if(v!=null)_==="number"?(v===0&&u.value===""||u.value!=v)&&(u.value=""+v):u.value!==""+v&&(u.value=""+v);else if(_==="submit"||_==="reset"){u.removeAttribute("value");return}h.hasOwnProperty("value")?ir(u,h.type,v):h.hasOwnProperty("defaultValue")&&ir(u,h.type,he(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(u.defaultChecked=!!h.defaultChecked)}function fr(u,h,v){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var _=h.type;if(!(_!=="submit"&&_!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+u._wrapperState.initialValue,v||h===u.value||(u.value=h),u.defaultValue=h}v=u.name,v!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,v!==""&&(u.name=v)}function ir(u,h,v){(h!=="number"||Oe(u.ownerDocument)!==u)&&(v==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+v&&(u.defaultValue=""+v))}var Bt=Array.isArray;function Tt(u,h,v,_){if(u=u.options,h){h={};for(var k=0;k<v.length;k++)h["$"+v[k]]=!0;for(v=0;v<u.length;v++)k=h.hasOwnProperty("$"+u[v].value),u[v].selected!==k&&(u[v].selected=k),k&&_&&(u[v].defaultSelected=!0)}else{for(v=""+he(v),h=null,k=0;k<u.length;k++){if(u[k].value===v){u[k].selected=!0,_&&(u[k].defaultSelected=!0);return}h!==null||u[k].disabled||(h=u[k])}h!==null&&(h.selected=!0)}}function Q(u,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return W({},h,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function ie(u,h){var v=h.value;if(v==null){if(v=h.children,h=h.defaultValue,v!=null){if(h!=null)throw Error(r(92));if(Bt(v)){if(1<v.length)throw Error(r(93));v=v[0]}h=v}h==null&&(h=""),v=h}u._wrapperState={initialValue:he(v)}}function Z(u,h){var v=he(h.value),_=he(h.defaultValue);v!=null&&(v=""+v,v!==u.value&&(u.value=v),h.defaultValue==null&&u.defaultValue!==v&&(u.defaultValue=v)),_!=null&&(u.defaultValue=""+_)}function ye(u){var h=u.textContent;h===u._wrapperState.initialValue&&h!==""&&h!==null&&(u.value=h)}function Pe(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xe(u,h){return u==null||u==="http://www.w3.org/1999/xhtml"?Pe(h):u==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var Te,nt=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,v,_,k){MSApp.execUnsafeLocalFunction(function(){return u(h,v,_,k)})}:u}(function(u,h){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=h;else{for(Te=Te||document.createElement("div"),Te.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Te.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;h.firstChild;)u.appendChild(h.firstChild)}});function Nt(u,h){if(h){var v=u.firstChild;if(v&&v===u.lastChild&&v.nodeType===3){v.nodeValue=h;return}}u.textContent=h}var yt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ri=["Webkit","ms","Moz","O"];Object.keys(yt).forEach(function(u){Ri.forEach(function(h){h=h+u.charAt(0).toUpperCase()+u.substring(1),yt[h]=yt[u]})});function $n(u,h,v){return h==null||typeof h=="boolean"||h===""?"":v||typeof h!="number"||h===0||yt.hasOwnProperty(u)&&yt[u]?(""+h).trim():h+"px"}function Ts(u,h){u=u.style;for(var v in h)if(h.hasOwnProperty(v)){var _=v.indexOf("--")===0,k=$n(v,h[v],_);v==="float"&&(v="cssFloat"),_?u.setProperty(v,k):u[v]=k}}var os=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ls(u,h){if(h){if(os[u]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,u));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function cs(u,h){if(u.indexOf("-")===-1)return typeof h.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var us=null;function li(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var ba=null,Ls=null,zt=null;function gr(u){if(u=cd(u)){if(typeof ba!="function")throw Error(r(280));var h=u.stateNode;h&&(h=Sp(h),ba(u.stateNode,u.type,h))}}function kr(u){Ls?zt?zt.push(u):zt=[u]:Ls=u}function rn(){if(Ls){var u=Ls,h=zt;if(zt=Ls=null,gr(u),h)for(u=0;u<h.length;u++)gr(h[u])}}function Ir(u,h){return u(h)}function vr(){}var Xr=!1;function Ms(u,h,v){if(Xr)return u(h,v);Xr=!0;try{return Ir(u,h,v)}finally{Xr=!1,(Ls!==null||zt!==null)&&(vr(),rn())}}function Lt(u,h){var v=u.stateNode;if(v===null)return null;var _=Sp(v);if(_===null)return null;v=_[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(u=u.type,_=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!_;break e;default:u=!1}if(u)return null;if(v&&typeof v!="function")throw Error(r(231,h,typeof v));return v}var He=!1;if(l)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){He=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{He=!1}function Rs(u,h,v,_,k,T,$,X,ee){var le=Array.prototype.slice.call(arguments,3);try{h.apply(v,le)}catch(we){this.onError(we)}}var Ds=!1,ci=null,Fn=!1,Di=null,Vu={onError:function(u){Ds=!0,ci=u}};function Uq(u,h,v,_,k,T,$,X,ee){Ds=!1,ci=null,Rs.apply(Vu,arguments)}function qq(u,h,v,_,k,T,$,X,ee){if(Uq.apply(this,arguments),Ds){if(Ds){var le=ci;Ds=!1,ci=null}else throw Error(r(198));Fn||(Fn=!0,Di=le)}}function Ao(u){var h=u,v=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(v=h.return),u=h.return;while(u)}return h.tag===3?v:null}function rk(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function nk(u){if(Ao(u)!==u)throw Error(r(188))}function Vq(u){var h=u.alternate;if(!h){if(h=Ao(u),h===null)throw Error(r(188));return h!==u?null:u}for(var v=u,_=h;;){var k=v.return;if(k===null)break;var T=k.alternate;if(T===null){if(_=k.return,_!==null){v=_;continue}break}if(k.child===T.child){for(T=k.child;T;){if(T===v)return nk(k),u;if(T===_)return nk(k),h;T=T.sibling}throw Error(r(188))}if(v.return!==_.return)v=k,_=T;else{for(var $=!1,X=k.child;X;){if(X===v){$=!0,v=k,_=T;break}if(X===_){$=!0,_=k,v=T;break}X=X.sibling}if(!$){for(X=T.child;X;){if(X===v){$=!0,v=T,_=k;break}if(X===_){$=!0,_=T,v=k;break}X=X.sibling}if(!$)throw Error(r(189))}}if(v.alternate!==_)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?u:h}function sk(u){return u=Vq(u),u!==null?ik(u):null}function ik(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=ik(u);if(h!==null)return h;u=u.sibling}return null}var ak=e.unstable_scheduleCallback,ok=e.unstable_cancelCallback,Wq=e.unstable_shouldYield,Hq=e.unstable_requestPaint,yr=e.unstable_now,Gq=e.unstable_getCurrentPriorityLevel,$y=e.unstable_ImmediatePriority,lk=e.unstable_UserBlockingPriority,sp=e.unstable_NormalPriority,Kq=e.unstable_LowPriority,ck=e.unstable_IdlePriority,ip=null,ui=null;function Zq(u){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(ip,u,void 0,(u.current.flags&128)===128)}catch{}}var Is=Math.clz32?Math.clz32:Jq,Xq=Math.log,Yq=Math.LN2;function Jq(u){return u>>>=0,u===0?32:31-(Xq(u)/Yq|0)|0}var ap=64,op=4194304;function Wu(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function lp(u,h){var v=u.pendingLanes;if(v===0)return 0;var _=0,k=u.suspendedLanes,T=u.pingedLanes,$=v&268435455;if($!==0){var X=$&~k;X!==0?_=Wu(X):(T&=$,T!==0&&(_=Wu(T)))}else $=v&~k,$!==0?_=Wu($):T!==0&&(_=Wu(T));if(_===0)return 0;if(h!==0&&h!==_&&(h&k)===0&&(k=_&-_,T=h&-h,k>=T||k===16&&(T&4194240)!==0))return h;if((_&4)!==0&&(_|=v&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=_;0<h;)v=31-Is(h),k=1<<v,_|=u[v],h&=~k;return _}function Qq(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eV(u,h){for(var v=u.suspendedLanes,_=u.pingedLanes,k=u.expirationTimes,T=u.pendingLanes;0<T;){var $=31-Is(T),X=1<<$,ee=k[$];ee===-1?((X&v)===0||(X&_)!==0)&&(k[$]=Qq(X,h)):ee<=h&&(u.expiredLanes|=X),T&=~X}}function Fy(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function uk(){var u=ap;return ap<<=1,(ap&4194240)===0&&(ap=64),u}function By(u){for(var h=[],v=0;31>v;v++)h.push(u);return h}function Hu(u,h,v){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-Is(h),u[h]=v}function tV(u,h){var v=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var _=u.eventTimes;for(u=u.expirationTimes;0<v;){var k=31-Is(v),T=1<<k;h[k]=0,_[k]=-1,u[k]=-1,v&=~T}}function zy(u,h){var v=u.entangledLanes|=h;for(u=u.entanglements;v;){var _=31-Is(v),k=1<<_;k&h|u[_]&h&&(u[_]|=h),v&=~k}}var Mt=0;function dk(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var fk,Uy,hk,pk,mk,qy=!1,cp=[],wa=null,_a=null,ja=null,Gu=new Map,Ku=new Map,Sa=[],rV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gk(u,h){switch(u){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":Gu.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(h.pointerId)}}function Zu(u,h,v,_,k,T){return u===null||u.nativeEvent!==T?(u={blockedOn:h,domEventName:v,eventSystemFlags:_,nativeEvent:T,targetContainers:[k]},h!==null&&(h=cd(h),h!==null&&Uy(h)),u):(u.eventSystemFlags|=_,h=u.targetContainers,k!==null&&h.indexOf(k)===-1&&h.push(k),u)}function nV(u,h,v,_,k){switch(h){case"focusin":return wa=Zu(wa,u,h,v,_,k),!0;case"dragenter":return _a=Zu(_a,u,h,v,_,k),!0;case"mouseover":return ja=Zu(ja,u,h,v,_,k),!0;case"pointerover":var T=k.pointerId;return Gu.set(T,Zu(Gu.get(T)||null,u,h,v,_,k)),!0;case"gotpointercapture":return T=k.pointerId,Ku.set(T,Zu(Ku.get(T)||null,u,h,v,_,k)),!0}return!1}function vk(u){var h=To(u.target);if(h!==null){var v=Ao(h);if(v!==null){if(h=v.tag,h===13){if(h=rk(v),h!==null){u.blockedOn=h,mk(u.priority,function(){hk(v)});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){u.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}u.blockedOn=null}function up(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var v=Wy(u.domEventName,u.eventSystemFlags,h[0],u.nativeEvent);if(v===null){v=u.nativeEvent;var _=new v.constructor(v.type,v);us=_,v.target.dispatchEvent(_),us=null}else return h=cd(v),h!==null&&Uy(h),u.blockedOn=v,!1;h.shift()}return!0}function yk(u,h,v){up(u)&&v.delete(h)}function sV(){qy=!1,wa!==null&&up(wa)&&(wa=null),_a!==null&&up(_a)&&(_a=null),ja!==null&&up(ja)&&(ja=null),Gu.forEach(yk),Ku.forEach(yk)}function Xu(u,h){u.blockedOn===h&&(u.blockedOn=null,qy||(qy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sV)))}function Yu(u){function h(k){return Xu(k,u)}if(0<cp.length){Xu(cp[0],u);for(var v=1;v<cp.length;v++){var _=cp[v];_.blockedOn===u&&(_.blockedOn=null)}}for(wa!==null&&Xu(wa,u),_a!==null&&Xu(_a,u),ja!==null&&Xu(ja,u),Gu.forEach(h),Ku.forEach(h),v=0;v<Sa.length;v++)_=Sa[v],_.blockedOn===u&&(_.blockedOn=null);for(;0<Sa.length&&(v=Sa[0],v.blockedOn===null);)vk(v),v.blockedOn===null&&Sa.shift()}var Rl=E.ReactCurrentBatchConfig,dp=!0;function iV(u,h,v,_){var k=Mt,T=Rl.transition;Rl.transition=null;try{Mt=1,Vy(u,h,v,_)}finally{Mt=k,Rl.transition=T}}function aV(u,h,v,_){var k=Mt,T=Rl.transition;Rl.transition=null;try{Mt=4,Vy(u,h,v,_)}finally{Mt=k,Rl.transition=T}}function Vy(u,h,v,_){if(dp){var k=Wy(u,h,v,_);if(k===null)l0(u,h,_,fp,v),gk(u,_);else if(nV(k,u,h,v,_))_.stopPropagation();else if(gk(u,_),h&4&&-1<rV.indexOf(u)){for(;k!==null;){var T=cd(k);if(T!==null&&fk(T),T=Wy(u,h,v,_),T===null&&l0(u,h,_,fp,v),T===k)break;k=T}k!==null&&_.stopPropagation()}else l0(u,h,_,null,v)}}var fp=null;function Wy(u,h,v,_){if(fp=null,u=li(_),u=To(u),u!==null)if(h=Ao(u),h===null)u=null;else if(v=h.tag,v===13){if(u=rk(h),u!==null)return u;u=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null);return fp=u,null}function xk(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gq()){case $y:return 1;case lk:return 4;case sp:case Kq:return 16;case ck:return 536870912;default:return 16}default:return 16}}var Na=null,Hy=null,hp=null;function bk(){if(hp)return hp;var u,h=Hy,v=h.length,_,k="value"in Na?Na.value:Na.textContent,T=k.length;for(u=0;u<v&&h[u]===k[u];u++);var $=v-u;for(_=1;_<=$&&h[v-_]===k[T-_];_++);return hp=k.slice(u,1<_?1-_:void 0)}function pp(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function mp(){return!0}function wk(){return!1}function Bn(u){function h(v,_,k,T,$){this._reactName=v,this._targetInst=k,this.type=_,this.nativeEvent=T,this.target=$,this.currentTarget=null;for(var X in u)u.hasOwnProperty(X)&&(v=u[X],this[X]=v?v(T):T[X]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?mp:wk,this.isPropagationStopped=wk,this}return W(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=mp)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=mp)},persist:function(){},isPersistent:mp}),h}var Dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gy=Bn(Dl),Ju=W({},Dl,{view:0,detail:0}),oV=Bn(Ju),Ky,Zy,Qu,gp=W({},Ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yy,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Qu&&(Qu&&u.type==="mousemove"?(Ky=u.screenX-Qu.screenX,Zy=u.screenY-Qu.screenY):Zy=Ky=0,Qu=u),Ky)},movementY:function(u){return"movementY"in u?u.movementY:Zy}}),_k=Bn(gp),lV=W({},gp,{dataTransfer:0}),cV=Bn(lV),uV=W({},Ju,{relatedTarget:0}),Xy=Bn(uV),dV=W({},Dl,{animationName:0,elapsedTime:0,pseudoElement:0}),fV=Bn(dV),hV=W({},Dl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),pV=Bn(hV),mV=W({},Dl,{data:0}),jk=Bn(mV),gV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xV(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=yV[u])?!!h[u]:!1}function Yy(){return xV}var bV=W({},Ju,{key:function(u){if(u.key){var h=gV[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=pp(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?vV[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yy,charCode:function(u){return u.type==="keypress"?pp(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?pp(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),wV=Bn(bV),_V=W({},gp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sk=Bn(_V),jV=W({},Ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yy}),SV=Bn(jV),NV=W({},Dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),EV=Bn(NV),CV=W({},gp,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),kV=Bn(CV),PV=[9,13,27,32],Jy=l&&"CompositionEvent"in window,ed=null;l&&"documentMode"in document&&(ed=document.documentMode);var OV=l&&"TextEvent"in window&&!ed,Nk=l&&(!Jy||ed&&8<ed&&11>=ed),Ek=" ",Ck=!1;function kk(u,h){switch(u){case"keyup":return PV.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pk(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Il=!1;function AV(u,h){switch(u){case"compositionend":return Pk(h);case"keypress":return h.which!==32?null:(Ck=!0,Ek);case"textInput":return u=h.data,u===Ek&&Ck?null:u;default:return null}}function TV(u,h){if(Il)return u==="compositionend"||!Jy&&kk(u,h)?(u=bk(),hp=Hy=Na=null,Il=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Nk&&h.locale!=="ko"?null:h.data;default:return null}}var LV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ok(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!LV[u.type]:h==="textarea"}function Ak(u,h,v,_){kr(_),h=wp(h,"onChange"),0<h.length&&(v=new Gy("onChange","change",null,v,_),u.push({event:v,listeners:h}))}var td=null,rd=null;function MV(u){Zk(u,0)}function vp(u){var h=Ul(u);if(ae(h))return u}function RV(u,h){if(u==="change")return h}var Tk=!1;if(l){var Qy;if(l){var e0="oninput"in document;if(!e0){var Lk=document.createElement("div");Lk.setAttribute("oninput","return;"),e0=typeof Lk.oninput=="function"}Qy=e0}else Qy=!1;Tk=Qy&&(!document.documentMode||9<document.documentMode)}function Mk(){td&&(td.detachEvent("onpropertychange",Rk),rd=td=null)}function Rk(u){if(u.propertyName==="value"&&vp(rd)){var h=[];Ak(h,rd,u,li(u)),Ms(MV,h)}}function DV(u,h,v){u==="focusin"?(Mk(),td=h,rd=v,td.attachEvent("onpropertychange",Rk)):u==="focusout"&&Mk()}function IV(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return vp(rd)}function $V(u,h){if(u==="click")return vp(h)}function FV(u,h){if(u==="input"||u==="change")return vp(h)}function BV(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var $s=typeof Object.is=="function"?Object.is:BV;function nd(u,h){if($s(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var v=Object.keys(u),_=Object.keys(h);if(v.length!==_.length)return!1;for(_=0;_<v.length;_++){var k=v[_];if(!c.call(h,k)||!$s(u[k],h[k]))return!1}return!0}function Dk(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Ik(u,h){var v=Dk(u);u=0;for(var _;v;){if(v.nodeType===3){if(_=u+v.textContent.length,u<=h&&_>=h)return{node:v,offset:h-u};u=_}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Dk(v)}}function $k(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?$k(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function Fk(){for(var u=window,h=Oe();h instanceof u.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)u=h.contentWindow;else break;h=Oe(u.document)}return h}function t0(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}function zV(u){var h=Fk(),v=u.focusedElem,_=u.selectionRange;if(h!==v&&v&&v.ownerDocument&&$k(v.ownerDocument.documentElement,v)){if(_!==null&&t0(v)){if(h=_.start,u=_.end,u===void 0&&(u=h),"selectionStart"in v)v.selectionStart=h,v.selectionEnd=Math.min(u,v.value.length);else if(u=(h=v.ownerDocument||document)&&h.defaultView||window,u.getSelection){u=u.getSelection();var k=v.textContent.length,T=Math.min(_.start,k);_=_.end===void 0?T:Math.min(_.end,k),!u.extend&&T>_&&(k=_,_=T,T=k),k=Ik(v,T);var $=Ik(v,_);k&&$&&(u.rangeCount!==1||u.anchorNode!==k.node||u.anchorOffset!==k.offset||u.focusNode!==$.node||u.focusOffset!==$.offset)&&(h=h.createRange(),h.setStart(k.node,k.offset),u.removeAllRanges(),T>_?(u.addRange(h),u.extend($.node,$.offset)):(h.setEnd($.node,$.offset),u.addRange(h)))}}for(h=[],u=v;u=u.parentNode;)u.nodeType===1&&h.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<h.length;v++)u=h[v],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var UV=l&&"documentMode"in document&&11>=document.documentMode,$l=null,r0=null,sd=null,n0=!1;function Bk(u,h,v){var _=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;n0||$l==null||$l!==Oe(_)||(_=$l,"selectionStart"in _&&t0(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),sd&&nd(sd,_)||(sd=_,_=wp(r0,"onSelect"),0<_.length&&(h=new Gy("onSelect","select",null,h,v),u.push({event:h,listeners:_}),h.target=$l)))}function yp(u,h){var v={};return v[u.toLowerCase()]=h.toLowerCase(),v["Webkit"+u]="webkit"+h,v["Moz"+u]="moz"+h,v}var Fl={animationend:yp("Animation","AnimationEnd"),animationiteration:yp("Animation","AnimationIteration"),animationstart:yp("Animation","AnimationStart"),transitionend:yp("Transition","TransitionEnd")},s0={},zk={};l&&(zk=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function xp(u){if(s0[u])return s0[u];if(!Fl[u])return u;var h=Fl[u],v;for(v in h)if(h.hasOwnProperty(v)&&v in zk)return s0[u]=h[v];return u}var Uk=xp("animationend"),qk=xp("animationiteration"),Vk=xp("animationstart"),Wk=xp("transitionend"),Hk=new Map,Gk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(u,h){Hk.set(u,h),i(h,[u])}for(var i0=0;i0<Gk.length;i0++){var a0=Gk[i0],qV=a0.toLowerCase(),VV=a0[0].toUpperCase()+a0.slice(1);Ea(qV,"on"+VV)}Ea(Uk,"onAnimationEnd"),Ea(qk,"onAnimationIteration"),Ea(Vk,"onAnimationStart"),Ea("dblclick","onDoubleClick"),Ea("focusin","onFocus"),Ea("focusout","onBlur"),Ea(Wk,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WV=new Set("cancel close invalid load scroll toggle".split(" ").concat(id));function Kk(u,h,v){var _=u.type||"unknown-event";u.currentTarget=v,qq(_,h,void 0,u),u.currentTarget=null}function Zk(u,h){h=(h&4)!==0;for(var v=0;v<u.length;v++){var _=u[v],k=_.event;_=_.listeners;e:{var T=void 0;if(h)for(var $=_.length-1;0<=$;$--){var X=_[$],ee=X.instance,le=X.currentTarget;if(X=X.listener,ee!==T&&k.isPropagationStopped())break e;Kk(k,X,le),T=ee}else for($=0;$<_.length;$++){if(X=_[$],ee=X.instance,le=X.currentTarget,X=X.listener,ee!==T&&k.isPropagationStopped())break e;Kk(k,X,le),T=ee}}}if(Fn)throw u=Di,Fn=!1,Di=null,u}function Kt(u,h){var v=h[p0];v===void 0&&(v=h[p0]=new Set);var _=u+"__bubble";v.has(_)||(Xk(h,u,2,!1),v.add(_))}function o0(u,h,v){var _=0;h&&(_|=4),Xk(v,u,_,h)}var bp="_reactListening"+Math.random().toString(36).slice(2);function ad(u){if(!u[bp]){u[bp]=!0,n.forEach(function(v){v!=="selectionchange"&&(WV.has(v)||o0(v,!1,u),o0(v,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[bp]||(h[bp]=!0,o0("selectionchange",!1,h))}}function Xk(u,h,v,_){switch(xk(h)){case 1:var k=iV;break;case 4:k=aV;break;default:k=Vy}v=k.bind(null,h,v,u),k=void 0,!He||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(k=!0),_?k!==void 0?u.addEventListener(h,v,{capture:!0,passive:k}):u.addEventListener(h,v,!0):k!==void 0?u.addEventListener(h,v,{passive:k}):u.addEventListener(h,v,!1)}function l0(u,h,v,_,k){var T=_;if((h&1)===0&&(h&2)===0&&_!==null)e:for(;;){if(_===null)return;var $=_.tag;if($===3||$===4){var X=_.stateNode.containerInfo;if(X===k||X.nodeType===8&&X.parentNode===k)break;if($===4)for($=_.return;$!==null;){var ee=$.tag;if((ee===3||ee===4)&&(ee=$.stateNode.containerInfo,ee===k||ee.nodeType===8&&ee.parentNode===k))return;$=$.return}for(;X!==null;){if($=To(X),$===null)return;if(ee=$.tag,ee===5||ee===6){_=T=$;continue e}X=X.parentNode}}_=_.return}Ms(function(){var le=T,we=li(v),je=[];e:{var be=Hk.get(u);if(be!==void 0){var Re=Gy,Fe=u;switch(u){case"keypress":if(pp(v)===0)break e;case"keydown":case"keyup":Re=wV;break;case"focusin":Fe="focus",Re=Xy;break;case"focusout":Fe="blur",Re=Xy;break;case"beforeblur":case"afterblur":Re=Xy;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=_k;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=cV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=SV;break;case Uk:case qk:case Vk:Re=fV;break;case Wk:Re=EV;break;case"scroll":Re=oV;break;case"wheel":Re=kV;break;case"copy":case"cut":case"paste":Re=pV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=Sk}var ze=(h&4)!==0,xr=!ze&&u==="scroll",se=ze?be!==null?be+"Capture":null:be;ze=[];for(var re=le,oe;re!==null;){oe=re;var Ce=oe.stateNode;if(oe.tag===5&&Ce!==null&&(oe=Ce,se!==null&&(Ce=Lt(re,se),Ce!=null&&ze.push(od(re,Ce,oe)))),xr)break;re=re.return}0<ze.length&&(be=new Re(be,Fe,null,v,we),je.push({event:be,listeners:ze}))}}if((h&7)===0){e:{if(be=u==="mouseover"||u==="pointerover",Re=u==="mouseout"||u==="pointerout",be&&v!==us&&(Fe=v.relatedTarget||v.fromElement)&&(To(Fe)||Fe[Ii]))break e;if((Re||be)&&(be=we.window===we?we:(be=we.ownerDocument)?be.defaultView||be.parentWindow:window,Re?(Fe=v.relatedTarget||v.toElement,Re=le,Fe=Fe?To(Fe):null,Fe!==null&&(xr=Ao(Fe),Fe!==xr||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(Re=null,Fe=le),Re!==Fe)){if(ze=_k,Ce="onMouseLeave",se="onMouseEnter",re="mouse",(u==="pointerout"||u==="pointerover")&&(ze=Sk,Ce="onPointerLeave",se="onPointerEnter",re="pointer"),xr=Re==null?be:Ul(Re),oe=Fe==null?be:Ul(Fe),be=new ze(Ce,re+"leave",Re,v,we),be.target=xr,be.relatedTarget=oe,Ce=null,To(we)===le&&(ze=new ze(se,re+"enter",Fe,v,we),ze.target=oe,ze.relatedTarget=xr,Ce=ze),xr=Ce,Re&&Fe)t:{for(ze=Re,se=Fe,re=0,oe=ze;oe;oe=Bl(oe))re++;for(oe=0,Ce=se;Ce;Ce=Bl(Ce))oe++;for(;0<re-oe;)ze=Bl(ze),re--;for(;0<oe-re;)se=Bl(se),oe--;for(;re--;){if(ze===se||se!==null&&ze===se.alternate)break t;ze=Bl(ze),se=Bl(se)}ze=null}else ze=null;Re!==null&&Yk(je,be,Re,ze,!1),Fe!==null&&xr!==null&&Yk(je,xr,Fe,ze,!0)}}e:{if(be=le?Ul(le):window,Re=be.nodeName&&be.nodeName.toLowerCase(),Re==="select"||Re==="input"&&be.type==="file")var qe=RV;else if(Ok(be))if(Tk)qe=FV;else{qe=IV;var Ge=DV}else(Re=be.nodeName)&&Re.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(qe=$V);if(qe&&(qe=qe(u,le))){Ak(je,qe,v,we);break e}Ge&&Ge(u,be,le),u==="focusout"&&(Ge=be._wrapperState)&&Ge.controlled&&be.type==="number"&&ir(be,"number",be.value)}switch(Ge=le?Ul(le):window,u){case"focusin":(Ok(Ge)||Ge.contentEditable==="true")&&($l=Ge,r0=le,sd=null);break;case"focusout":sd=r0=$l=null;break;case"mousedown":n0=!0;break;case"contextmenu":case"mouseup":case"dragend":n0=!1,Bk(je,v,we);break;case"selectionchange":if(UV)break;case"keydown":case"keyup":Bk(je,v,we)}var Ke;if(Jy)e:{switch(u){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Il?kk(u,v)&&(rt="onCompositionEnd"):u==="keydown"&&v.keyCode===229&&(rt="onCompositionStart");rt&&(Nk&&v.locale!=="ko"&&(Il||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Il&&(Ke=bk()):(Na=we,Hy="value"in Na?Na.value:Na.textContent,Il=!0)),Ge=wp(le,rt),0<Ge.length&&(rt=new jk(rt,u,null,v,we),je.push({event:rt,listeners:Ge}),Ke?rt.data=Ke:(Ke=Pk(v),Ke!==null&&(rt.data=Ke)))),(Ke=OV?AV(u,v):TV(u,v))&&(le=wp(le,"onBeforeInput"),0<le.length&&(we=new jk("onBeforeInput","beforeinput",null,v,we),je.push({event:we,listeners:le}),we.data=Ke))}Zk(je,h)})}function od(u,h,v){return{instance:u,listener:h,currentTarget:v}}function wp(u,h){for(var v=h+"Capture",_=[];u!==null;){var k=u,T=k.stateNode;k.tag===5&&T!==null&&(k=T,T=Lt(u,v),T!=null&&_.unshift(od(u,T,k)),T=Lt(u,h),T!=null&&_.push(od(u,T,k))),u=u.return}return _}function Bl(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function Yk(u,h,v,_,k){for(var T=h._reactName,$=[];v!==null&&v!==_;){var X=v,ee=X.alternate,le=X.stateNode;if(ee!==null&&ee===_)break;X.tag===5&&le!==null&&(X=le,k?(ee=Lt(v,T),ee!=null&&$.unshift(od(v,ee,X))):k||(ee=Lt(v,T),ee!=null&&$.push(od(v,ee,X)))),v=v.return}$.length!==0&&u.push({event:h,listeners:$})}var HV=/\r\n?/g,GV=/\u0000|\uFFFD/g;function Jk(u){return(typeof u=="string"?u:""+u).replace(HV,`
`).replace(GV,"")}function _p(u,h,v){if(h=Jk(h),Jk(u)!==h&&v)throw Error(r(425))}function jp(){}var c0=null,u0=null;function d0(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var f0=typeof setTimeout=="function"?setTimeout:void 0,KV=typeof clearTimeout=="function"?clearTimeout:void 0,Qk=typeof Promise=="function"?Promise:void 0,ZV=typeof queueMicrotask=="function"?queueMicrotask:typeof Qk<"u"?function(u){return Qk.resolve(null).then(u).catch(XV)}:f0;function XV(u){setTimeout(function(){throw u})}function h0(u,h){var v=h,_=0;do{var k=v.nextSibling;if(u.removeChild(v),k&&k.nodeType===8)if(v=k.data,v==="/$"){if(_===0){u.removeChild(k),Yu(h);return}_--}else v!=="$"&&v!=="$?"&&v!=="$!"||_++;v=k}while(v);Yu(h)}function Ca(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return u}function eP(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var v=u.data;if(v==="$"||v==="$!"||v==="$?"){if(h===0)return u;h--}else v==="/$"&&h++}u=u.previousSibling}return null}var zl=Math.random().toString(36).slice(2),di="__reactFiber$"+zl,ld="__reactProps$"+zl,Ii="__reactContainer$"+zl,p0="__reactEvents$"+zl,YV="__reactListeners$"+zl,JV="__reactHandles$"+zl;function To(u){var h=u[di];if(h)return h;for(var v=u.parentNode;v;){if(h=v[Ii]||v[di]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(u=eP(u);u!==null;){if(v=u[di])return v;u=eP(u)}return h}u=v,v=u.parentNode}return null}function cd(u){return u=u[di]||u[Ii],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Ul(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(r(33))}function Sp(u){return u[ld]||null}var m0=[],ql=-1;function ka(u){return{current:u}}function Zt(u){0>ql||(u.current=m0[ql],m0[ql]=null,ql--)}function Ut(u,h){ql++,m0[ql]=u.current,u.current=h}var Pa={},sn=ka(Pa),En=ka(!1),Lo=Pa;function Vl(u,h){var v=u.type.contextTypes;if(!v)return Pa;var _=u.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===h)return _.__reactInternalMemoizedMaskedChildContext;var k={},T;for(T in v)k[T]=h[T];return _&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=k),k}function Cn(u){return u=u.childContextTypes,u!=null}function Np(){Zt(En),Zt(sn)}function tP(u,h,v){if(sn.current!==Pa)throw Error(r(168));Ut(sn,h),Ut(En,v)}function rP(u,h,v){var _=u.stateNode;if(h=h.childContextTypes,typeof _.getChildContext!="function")return v;_=_.getChildContext();for(var k in _)if(!(k in h))throw Error(r(108,ue(u)||"Unknown",k));return W({},v,_)}function Ep(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Pa,Lo=sn.current,Ut(sn,u),Ut(En,En.current),!0}function nP(u,h,v){var _=u.stateNode;if(!_)throw Error(r(169));v?(u=rP(u,h,Lo),_.__reactInternalMemoizedMergedChildContext=u,Zt(En),Zt(sn),Ut(sn,u)):Zt(En),Ut(En,v)}var $i=null,Cp=!1,g0=!1;function sP(u){$i===null?$i=[u]:$i.push(u)}function QV(u){Cp=!0,sP(u)}function Oa(){if(!g0&&$i!==null){g0=!0;var u=0,h=Mt;try{var v=$i;for(Mt=1;u<v.length;u++){var _=v[u];do _=_(!0);while(_!==null)}$i=null,Cp=!1}catch(k){throw $i!==null&&($i=$i.slice(u+1)),ak($y,Oa),k}finally{Mt=h,g0=!1}}return null}var Wl=[],Hl=0,kp=null,Pp=0,ds=[],fs=0,Mo=null,Fi=1,Bi="";function Ro(u,h){Wl[Hl++]=Pp,Wl[Hl++]=kp,kp=u,Pp=h}function iP(u,h,v){ds[fs++]=Fi,ds[fs++]=Bi,ds[fs++]=Mo,Mo=u;var _=Fi;u=Bi;var k=32-Is(_)-1;_&=~(1<<k),v+=1;var T=32-Is(h)+k;if(30<T){var $=k-k%5;T=(_&(1<<$)-1).toString(32),_>>=$,k-=$,Fi=1<<32-Is(h)+k|v<<k|_,Bi=T+u}else Fi=1<<T|v<<k|_,Bi=u}function v0(u){u.return!==null&&(Ro(u,1),iP(u,1,0))}function y0(u){for(;u===kp;)kp=Wl[--Hl],Wl[Hl]=null,Pp=Wl[--Hl],Wl[Hl]=null;for(;u===Mo;)Mo=ds[--fs],ds[fs]=null,Bi=ds[--fs],ds[fs]=null,Fi=ds[--fs],ds[fs]=null}var zn=null,Un=null,rr=!1,Fs=null;function aP(u,h){var v=gs(5,null,null,0);v.elementType="DELETED",v.stateNode=h,v.return=u,h=u.deletions,h===null?(u.deletions=[v],u.flags|=16):h.push(v)}function oP(u,h){switch(u.tag){case 5:var v=u.type;return h=h.nodeType!==1||v.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(u.stateNode=h,zn=u,Un=Ca(h.firstChild),!0):!1;case 6:return h=u.pendingProps===""||h.nodeType!==3?null:h,h!==null?(u.stateNode=h,zn=u,Un=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(v=Mo!==null?{id:Fi,overflow:Bi}:null,u.memoizedState={dehydrated:h,treeContext:v,retryLane:1073741824},v=gs(18,null,null,0),v.stateNode=h,v.return=u,u.child=v,zn=u,Un=null,!0):!1;default:return!1}}function x0(u){return(u.mode&1)!==0&&(u.flags&128)===0}function b0(u){if(rr){var h=Un;if(h){var v=h;if(!oP(u,h)){if(x0(u))throw Error(r(418));h=Ca(v.nextSibling);var _=zn;h&&oP(u,h)?aP(_,v):(u.flags=u.flags&-4097|2,rr=!1,zn=u)}}else{if(x0(u))throw Error(r(418));u.flags=u.flags&-4097|2,rr=!1,zn=u}}}function lP(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;zn=u}function Op(u){if(u!==zn)return!1;if(!rr)return lP(u),rr=!0,!1;var h;if((h=u.tag!==3)&&!(h=u.tag!==5)&&(h=u.type,h=h!=="head"&&h!=="body"&&!d0(u.type,u.memoizedProps)),h&&(h=Un)){if(x0(u))throw cP(),Error(r(418));for(;h;)aP(u,h),h=Ca(h.nextSibling)}if(lP(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8){var v=u.data;if(v==="/$"){if(h===0){Un=Ca(u.nextSibling);break e}h--}else v!=="$"&&v!=="$!"&&v!=="$?"||h++}u=u.nextSibling}Un=null}}else Un=zn?Ca(u.stateNode.nextSibling):null;return!0}function cP(){for(var u=Un;u;)u=Ca(u.nextSibling)}function Gl(){Un=zn=null,rr=!1}function w0(u){Fs===null?Fs=[u]:Fs.push(u)}var e9=E.ReactCurrentBatchConfig;function ud(u,h,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(r(309));var _=v.stateNode}if(!_)throw Error(r(147,u));var k=_,T=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===T?h.ref:(h=function($){var X=k.refs;$===null?delete X[T]:X[T]=$},h._stringRef=T,h)}if(typeof u!="string")throw Error(r(284));if(!v._owner)throw Error(r(290,u))}return u}function Ap(u,h){throw u=Object.prototype.toString.call(h),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function uP(u){var h=u._init;return h(u._payload)}function dP(u){function h(se,re){if(u){var oe=se.deletions;oe===null?(se.deletions=[re],se.flags|=16):oe.push(re)}}function v(se,re){if(!u)return null;for(;re!==null;)h(se,re),re=re.sibling;return null}function _(se,re){for(se=new Map;re!==null;)re.key!==null?se.set(re.key,re):se.set(re.index,re),re=re.sibling;return se}function k(se,re){return se=$a(se,re),se.index=0,se.sibling=null,se}function T(se,re,oe){return se.index=oe,u?(oe=se.alternate,oe!==null?(oe=oe.index,oe<re?(se.flags|=2,re):oe):(se.flags|=2,re)):(se.flags|=1048576,re)}function $(se){return u&&se.alternate===null&&(se.flags|=2),se}function X(se,re,oe,Ce){return re===null||re.tag!==6?(re=fx(oe,se.mode,Ce),re.return=se,re):(re=k(re,oe),re.return=se,re)}function ee(se,re,oe,Ce){var qe=oe.type;return qe===O?we(se,re,oe.props.children,Ce,oe.key):re!==null&&(re.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===J&&uP(qe)===re.type)?(Ce=k(re,oe.props),Ce.ref=ud(se,re,oe),Ce.return=se,Ce):(Ce=tm(oe.type,oe.key,oe.props,null,se.mode,Ce),Ce.ref=ud(se,re,oe),Ce.return=se,Ce)}function le(se,re,oe,Ce){return re===null||re.tag!==4||re.stateNode.containerInfo!==oe.containerInfo||re.stateNode.implementation!==oe.implementation?(re=hx(oe,se.mode,Ce),re.return=se,re):(re=k(re,oe.children||[]),re.return=se,re)}function we(se,re,oe,Ce,qe){return re===null||re.tag!==7?(re=qo(oe,se.mode,Ce,qe),re.return=se,re):(re=k(re,oe),re.return=se,re)}function je(se,re,oe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=fx(""+re,se.mode,oe),re.return=se,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case N:return oe=tm(re.type,re.key,re.props,null,se.mode,oe),oe.ref=ud(se,null,re),oe.return=se,oe;case P:return re=hx(re,se.mode,oe),re.return=se,re;case J:var Ce=re._init;return je(se,Ce(re._payload),oe)}if(Bt(re)||U(re))return re=qo(re,se.mode,oe,null),re.return=se,re;Ap(se,re)}return null}function be(se,re,oe,Ce){var qe=re!==null?re.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return qe!==null?null:X(se,re,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:return oe.key===qe?ee(se,re,oe,Ce):null;case P:return oe.key===qe?le(se,re,oe,Ce):null;case J:return qe=oe._init,be(se,re,qe(oe._payload),Ce)}if(Bt(oe)||U(oe))return qe!==null?null:we(se,re,oe,Ce,null);Ap(se,oe)}return null}function Re(se,re,oe,Ce,qe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return se=se.get(oe)||null,X(re,se,""+Ce,qe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case N:return se=se.get(Ce.key===null?oe:Ce.key)||null,ee(re,se,Ce,qe);case P:return se=se.get(Ce.key===null?oe:Ce.key)||null,le(re,se,Ce,qe);case J:var Ge=Ce._init;return Re(se,re,oe,Ge(Ce._payload),qe)}if(Bt(Ce)||U(Ce))return se=se.get(oe)||null,we(re,se,Ce,qe,null);Ap(re,Ce)}return null}function Fe(se,re,oe,Ce){for(var qe=null,Ge=null,Ke=re,rt=re=0,Br=null;Ke!==null&&rt<oe.length;rt++){Ke.index>rt?(Br=Ke,Ke=null):Br=Ke.sibling;var Et=be(se,Ke,oe[rt],Ce);if(Et===null){Ke===null&&(Ke=Br);break}u&&Ke&&Et.alternate===null&&h(se,Ke),re=T(Et,re,rt),Ge===null?qe=Et:Ge.sibling=Et,Ge=Et,Ke=Br}if(rt===oe.length)return v(se,Ke),rr&&Ro(se,rt),qe;if(Ke===null){for(;rt<oe.length;rt++)Ke=je(se,oe[rt],Ce),Ke!==null&&(re=T(Ke,re,rt),Ge===null?qe=Ke:Ge.sibling=Ke,Ge=Ke);return rr&&Ro(se,rt),qe}for(Ke=_(se,Ke);rt<oe.length;rt++)Br=Re(Ke,se,rt,oe[rt],Ce),Br!==null&&(u&&Br.alternate!==null&&Ke.delete(Br.key===null?rt:Br.key),re=T(Br,re,rt),Ge===null?qe=Br:Ge.sibling=Br,Ge=Br);return u&&Ke.forEach(function(Fa){return h(se,Fa)}),rr&&Ro(se,rt),qe}function ze(se,re,oe,Ce){var qe=U(oe);if(typeof qe!="function")throw Error(r(150));if(oe=qe.call(oe),oe==null)throw Error(r(151));for(var Ge=qe=null,Ke=re,rt=re=0,Br=null,Et=oe.next();Ke!==null&&!Et.done;rt++,Et=oe.next()){Ke.index>rt?(Br=Ke,Ke=null):Br=Ke.sibling;var Fa=be(se,Ke,Et.value,Ce);if(Fa===null){Ke===null&&(Ke=Br);break}u&&Ke&&Fa.alternate===null&&h(se,Ke),re=T(Fa,re,rt),Ge===null?qe=Fa:Ge.sibling=Fa,Ge=Fa,Ke=Br}if(Et.done)return v(se,Ke),rr&&Ro(se,rt),qe;if(Ke===null){for(;!Et.done;rt++,Et=oe.next())Et=je(se,Et.value,Ce),Et!==null&&(re=T(Et,re,rt),Ge===null?qe=Et:Ge.sibling=Et,Ge=Et);return rr&&Ro(se,rt),qe}for(Ke=_(se,Ke);!Et.done;rt++,Et=oe.next())Et=Re(Ke,se,rt,Et.value,Ce),Et!==null&&(u&&Et.alternate!==null&&Ke.delete(Et.key===null?rt:Et.key),re=T(Et,re,rt),Ge===null?qe=Et:Ge.sibling=Et,Ge=Et);return u&&Ke.forEach(function(L9){return h(se,L9)}),rr&&Ro(se,rt),qe}function xr(se,re,oe,Ce){if(typeof oe=="object"&&oe!==null&&oe.type===O&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:e:{for(var qe=oe.key,Ge=re;Ge!==null;){if(Ge.key===qe){if(qe=oe.type,qe===O){if(Ge.tag===7){v(se,Ge.sibling),re=k(Ge,oe.props.children),re.return=se,se=re;break e}}else if(Ge.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===J&&uP(qe)===Ge.type){v(se,Ge.sibling),re=k(Ge,oe.props),re.ref=ud(se,Ge,oe),re.return=se,se=re;break e}v(se,Ge);break}else h(se,Ge);Ge=Ge.sibling}oe.type===O?(re=qo(oe.props.children,se.mode,Ce,oe.key),re.return=se,se=re):(Ce=tm(oe.type,oe.key,oe.props,null,se.mode,Ce),Ce.ref=ud(se,re,oe),Ce.return=se,se=Ce)}return $(se);case P:e:{for(Ge=oe.key;re!==null;){if(re.key===Ge)if(re.tag===4&&re.stateNode.containerInfo===oe.containerInfo&&re.stateNode.implementation===oe.implementation){v(se,re.sibling),re=k(re,oe.children||[]),re.return=se,se=re;break e}else{v(se,re);break}else h(se,re);re=re.sibling}re=hx(oe,se.mode,Ce),re.return=se,se=re}return $(se);case J:return Ge=oe._init,xr(se,re,Ge(oe._payload),Ce)}if(Bt(oe))return Fe(se,re,oe,Ce);if(U(oe))return ze(se,re,oe,Ce);Ap(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,re!==null&&re.tag===6?(v(se,re.sibling),re=k(re,oe),re.return=se,se=re):(v(se,re),re=fx(oe,se.mode,Ce),re.return=se,se=re),$(se)):v(se,re)}return xr}var Kl=dP(!0),fP=dP(!1),Tp=ka(null),Lp=null,Zl=null,_0=null;function j0(){_0=Zl=Lp=null}function S0(u){var h=Tp.current;Zt(Tp),u._currentValue=h}function N0(u,h,v){for(;u!==null;){var _=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,_!==null&&(_.childLanes|=h)):_!==null&&(_.childLanes&h)!==h&&(_.childLanes|=h),u===v)break;u=u.return}}function Xl(u,h){Lp=u,_0=Zl=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&h)!==0&&(kn=!0),u.firstContext=null)}function hs(u){var h=u._currentValue;if(_0!==u)if(u={context:u,memoizedValue:h,next:null},Zl===null){if(Lp===null)throw Error(r(308));Zl=u,Lp.dependencies={lanes:0,firstContext:u}}else Zl=Zl.next=u;return h}var Do=null;function E0(u){Do===null?Do=[u]:Do.push(u)}function hP(u,h,v,_){var k=h.interleaved;return k===null?(v.next=v,E0(h)):(v.next=k.next,k.next=v),h.interleaved=v,zi(u,_)}function zi(u,h){u.lanes|=h;var v=u.alternate;for(v!==null&&(v.lanes|=h),v=u,u=u.return;u!==null;)u.childLanes|=h,v=u.alternate,v!==null&&(v.childLanes|=h),v=u,u=u.return;return v.tag===3?v.stateNode:null}var Aa=!1;function C0(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pP(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Ui(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function Ta(u,h,v){var _=u.updateQueue;if(_===null)return null;if(_=_.shared,(jt&2)!==0){var k=_.pending;return k===null?h.next=h:(h.next=k.next,k.next=h),_.pending=h,zi(u,v)}return k=_.interleaved,k===null?(h.next=h,E0(_)):(h.next=k.next,k.next=h),_.interleaved=h,zi(u,v)}function Mp(u,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194240)!==0)){var _=h.lanes;_&=u.pendingLanes,v|=_,h.lanes=v,zy(u,v)}}function mP(u,h){var v=u.updateQueue,_=u.alternate;if(_!==null&&(_=_.updateQueue,v===_)){var k=null,T=null;if(v=v.firstBaseUpdate,v!==null){do{var $={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};T===null?k=T=$:T=T.next=$,v=v.next}while(v!==null);T===null?k=T=h:T=T.next=h}else k=T=h;v={baseState:_.baseState,firstBaseUpdate:k,lastBaseUpdate:T,shared:_.shared,effects:_.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=h:u.next=h,v.lastBaseUpdate=h}function Rp(u,h,v,_){var k=u.updateQueue;Aa=!1;var T=k.firstBaseUpdate,$=k.lastBaseUpdate,X=k.shared.pending;if(X!==null){k.shared.pending=null;var ee=X,le=ee.next;ee.next=null,$===null?T=le:$.next=le,$=ee;var we=u.alternate;we!==null&&(we=we.updateQueue,X=we.lastBaseUpdate,X!==$&&(X===null?we.firstBaseUpdate=le:X.next=le,we.lastBaseUpdate=ee))}if(T!==null){var je=k.baseState;$=0,we=le=ee=null,X=T;do{var be=X.lane,Re=X.eventTime;if((_&be)===be){we!==null&&(we=we.next={eventTime:Re,lane:0,tag:X.tag,payload:X.payload,callback:X.callback,next:null});e:{var Fe=u,ze=X;switch(be=h,Re=v,ze.tag){case 1:if(Fe=ze.payload,typeof Fe=="function"){je=Fe.call(Re,je,be);break e}je=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=ze.payload,be=typeof Fe=="function"?Fe.call(Re,je,be):Fe,be==null)break e;je=W({},je,be);break e;case 2:Aa=!0}}X.callback!==null&&X.lane!==0&&(u.flags|=64,be=k.effects,be===null?k.effects=[X]:be.push(X))}else Re={eventTime:Re,lane:be,tag:X.tag,payload:X.payload,callback:X.callback,next:null},we===null?(le=we=Re,ee=je):we=we.next=Re,$|=be;if(X=X.next,X===null){if(X=k.shared.pending,X===null)break;be=X,X=be.next,be.next=null,k.lastBaseUpdate=be,k.shared.pending=null}}while(!0);if(we===null&&(ee=je),k.baseState=ee,k.firstBaseUpdate=le,k.lastBaseUpdate=we,h=k.shared.interleaved,h!==null){k=h;do $|=k.lane,k=k.next;while(k!==h)}else T===null&&(k.shared.lanes=0);Fo|=$,u.lanes=$,u.memoizedState=je}}function gP(u,h,v){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var _=u[h],k=_.callback;if(k!==null){if(_.callback=null,_=v,typeof k!="function")throw Error(r(191,k));k.call(_)}}}var dd={},fi=ka(dd),fd=ka(dd),hd=ka(dd);function Io(u){if(u===dd)throw Error(r(174));return u}function k0(u,h){switch(Ut(hd,h),Ut(fd,u),Ut(fi,dd),u=h.nodeType,u){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:xe(null,"");break;default:u=u===8?h.parentNode:h,h=u.namespaceURI||null,u=u.tagName,h=xe(h,u)}Zt(fi),Ut(fi,h)}function Yl(){Zt(fi),Zt(fd),Zt(hd)}function vP(u){Io(hd.current);var h=Io(fi.current),v=xe(h,u.type);h!==v&&(Ut(fd,u),Ut(fi,v))}function P0(u){fd.current===u&&(Zt(fi),Zt(fd))}var ar=ka(0);function Dp(u){for(var h=u;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var O0=[];function A0(){for(var u=0;u<O0.length;u++)O0[u]._workInProgressVersionPrimary=null;O0.length=0}var Ip=E.ReactCurrentDispatcher,T0=E.ReactCurrentBatchConfig,$o=0,or=null,Pr=null,$r=null,$p=!1,pd=!1,md=0,t9=0;function an(){throw Error(r(321))}function L0(u,h){if(h===null)return!1;for(var v=0;v<h.length&&v<u.length;v++)if(!$s(u[v],h[v]))return!1;return!0}function M0(u,h,v,_,k,T){if($o=T,or=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ip.current=u===null||u.memoizedState===null?i9:a9,u=v(_,k),pd){T=0;do{if(pd=!1,md=0,25<=T)throw Error(r(301));T+=1,$r=Pr=null,h.updateQueue=null,Ip.current=o9,u=v(_,k)}while(pd)}if(Ip.current=zp,h=Pr!==null&&Pr.next!==null,$o=0,$r=Pr=or=null,$p=!1,h)throw Error(r(300));return u}function R0(){var u=md!==0;return md=0,u}function hi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?or.memoizedState=$r=u:$r=$r.next=u,$r}function ps(){if(Pr===null){var u=or.alternate;u=u!==null?u.memoizedState:null}else u=Pr.next;var h=$r===null?or.memoizedState:$r.next;if(h!==null)$r=h,Pr=u;else{if(u===null)throw Error(r(310));Pr=u,u={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},$r===null?or.memoizedState=$r=u:$r=$r.next=u}return $r}function gd(u,h){return typeof h=="function"?h(u):h}function D0(u){var h=ps(),v=h.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=u;var _=Pr,k=_.baseQueue,T=v.pending;if(T!==null){if(k!==null){var $=k.next;k.next=T.next,T.next=$}_.baseQueue=k=T,v.pending=null}if(k!==null){T=k.next,_=_.baseState;var X=$=null,ee=null,le=T;do{var we=le.lane;if(($o&we)===we)ee!==null&&(ee=ee.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),_=le.hasEagerState?le.eagerState:u(_,le.action);else{var je={lane:we,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};ee===null?(X=ee=je,$=_):ee=ee.next=je,or.lanes|=we,Fo|=we}le=le.next}while(le!==null&&le!==T);ee===null?$=_:ee.next=X,$s(_,h.memoizedState)||(kn=!0),h.memoizedState=_,h.baseState=$,h.baseQueue=ee,v.lastRenderedState=_}if(u=v.interleaved,u!==null){k=u;do T=k.lane,or.lanes|=T,Fo|=T,k=k.next;while(k!==u)}else k===null&&(v.lanes=0);return[h.memoizedState,v.dispatch]}function I0(u){var h=ps(),v=h.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=u;var _=v.dispatch,k=v.pending,T=h.memoizedState;if(k!==null){v.pending=null;var $=k=k.next;do T=u(T,$.action),$=$.next;while($!==k);$s(T,h.memoizedState)||(kn=!0),h.memoizedState=T,h.baseQueue===null&&(h.baseState=T),v.lastRenderedState=T}return[T,_]}function yP(){}function xP(u,h){var v=or,_=ps(),k=h(),T=!$s(_.memoizedState,k);if(T&&(_.memoizedState=k,kn=!0),_=_.queue,$0(_P.bind(null,v,_,u),[u]),_.getSnapshot!==h||T||$r!==null&&$r.memoizedState.tag&1){if(v.flags|=2048,vd(9,wP.bind(null,v,_,k,h),void 0,null),Fr===null)throw Error(r(349));($o&30)!==0||bP(v,h,k)}return k}function bP(u,h,v){u.flags|=16384,u={getSnapshot:h,value:v},h=or.updateQueue,h===null?(h={lastEffect:null,stores:null},or.updateQueue=h,h.stores=[u]):(v=h.stores,v===null?h.stores=[u]:v.push(u))}function wP(u,h,v,_){h.value=v,h.getSnapshot=_,jP(h)&&SP(u)}function _P(u,h,v){return v(function(){jP(h)&&SP(u)})}function jP(u){var h=u.getSnapshot;u=u.value;try{var v=h();return!$s(u,v)}catch{return!0}}function SP(u){var h=zi(u,1);h!==null&&qs(h,u,1,-1)}function NP(u){var h=hi();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gd,lastRenderedState:u},h.queue=u,u=u.dispatch=s9.bind(null,or,u),[h.memoizedState,u]}function vd(u,h,v,_){return u={tag:u,create:h,destroy:v,deps:_,next:null},h=or.updateQueue,h===null?(h={lastEffect:null,stores:null},or.updateQueue=h,h.lastEffect=u.next=u):(v=h.lastEffect,v===null?h.lastEffect=u.next=u:(_=v.next,v.next=u,u.next=_,h.lastEffect=u)),u}function EP(){return ps().memoizedState}function Fp(u,h,v,_){var k=hi();or.flags|=u,k.memoizedState=vd(1|h,v,void 0,_===void 0?null:_)}function Bp(u,h,v,_){var k=ps();_=_===void 0?null:_;var T=void 0;if(Pr!==null){var $=Pr.memoizedState;if(T=$.destroy,_!==null&&L0(_,$.deps)){k.memoizedState=vd(h,v,T,_);return}}or.flags|=u,k.memoizedState=vd(1|h,v,T,_)}function CP(u,h){return Fp(8390656,8,u,h)}function $0(u,h){return Bp(2048,8,u,h)}function kP(u,h){return Bp(4,2,u,h)}function PP(u,h){return Bp(4,4,u,h)}function OP(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function AP(u,h,v){return v=v!=null?v.concat([u]):null,Bp(4,4,OP.bind(null,h,u),v)}function F0(){}function TP(u,h){var v=ps();h=h===void 0?null:h;var _=v.memoizedState;return _!==null&&h!==null&&L0(h,_[1])?_[0]:(v.memoizedState=[u,h],u)}function LP(u,h){var v=ps();h=h===void 0?null:h;var _=v.memoizedState;return _!==null&&h!==null&&L0(h,_[1])?_[0]:(u=u(),v.memoizedState=[u,h],u)}function MP(u,h,v){return($o&21)===0?(u.baseState&&(u.baseState=!1,kn=!0),u.memoizedState=v):($s(v,h)||(v=uk(),or.lanes|=v,Fo|=v,u.baseState=!0),h)}function r9(u,h){var v=Mt;Mt=v!==0&&4>v?v:4,u(!0);var _=T0.transition;T0.transition={};try{u(!1),h()}finally{Mt=v,T0.transition=_}}function RP(){return ps().memoizedState}function n9(u,h,v){var _=Da(u);if(v={lane:_,action:v,hasEagerState:!1,eagerState:null,next:null},DP(u))IP(h,v);else if(v=hP(u,h,v,_),v!==null){var k=vn();qs(v,u,_,k),$P(v,h,_)}}function s9(u,h,v){var _=Da(u),k={lane:_,action:v,hasEagerState:!1,eagerState:null,next:null};if(DP(u))IP(h,k);else{var T=u.alternate;if(u.lanes===0&&(T===null||T.lanes===0)&&(T=h.lastRenderedReducer,T!==null))try{var $=h.lastRenderedState,X=T($,v);if(k.hasEagerState=!0,k.eagerState=X,$s(X,$)){var ee=h.interleaved;ee===null?(k.next=k,E0(h)):(k.next=ee.next,ee.next=k),h.interleaved=k;return}}catch{}finally{}v=hP(u,h,k,_),v!==null&&(k=vn(),qs(v,u,_,k),$P(v,h,_))}}function DP(u){var h=u.alternate;return u===or||h!==null&&h===or}function IP(u,h){pd=$p=!0;var v=u.pending;v===null?h.next=h:(h.next=v.next,v.next=h),u.pending=h}function $P(u,h,v){if((v&4194240)!==0){var _=h.lanes;_&=u.pendingLanes,v|=_,h.lanes=v,zy(u,v)}}var zp={readContext:hs,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},i9={readContext:hs,useCallback:function(u,h){return hi().memoizedState=[u,h===void 0?null:h],u},useContext:hs,useEffect:CP,useImperativeHandle:function(u,h,v){return v=v!=null?v.concat([u]):null,Fp(4194308,4,OP.bind(null,h,u),v)},useLayoutEffect:function(u,h){return Fp(4194308,4,u,h)},useInsertionEffect:function(u,h){return Fp(4,2,u,h)},useMemo:function(u,h){var v=hi();return h=h===void 0?null:h,u=u(),v.memoizedState=[u,h],u},useReducer:function(u,h,v){var _=hi();return h=v!==void 0?v(h):h,_.memoizedState=_.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},_.queue=u,u=u.dispatch=n9.bind(null,or,u),[_.memoizedState,u]},useRef:function(u){var h=hi();return u={current:u},h.memoizedState=u},useState:NP,useDebugValue:F0,useDeferredValue:function(u){return hi().memoizedState=u},useTransition:function(){var u=NP(!1),h=u[0];return u=r9.bind(null,u[1]),hi().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,v){var _=or,k=hi();if(rr){if(v===void 0)throw Error(r(407));v=v()}else{if(v=h(),Fr===null)throw Error(r(349));($o&30)!==0||bP(_,h,v)}k.memoizedState=v;var T={value:v,getSnapshot:h};return k.queue=T,CP(_P.bind(null,_,T,u),[u]),_.flags|=2048,vd(9,wP.bind(null,_,T,v,h),void 0,null),v},useId:function(){var u=hi(),h=Fr.identifierPrefix;if(rr){var v=Bi,_=Fi;v=(_&~(1<<32-Is(_)-1)).toString(32)+v,h=":"+h+"R"+v,v=md++,0<v&&(h+="H"+v.toString(32)),h+=":"}else v=t9++,h=":"+h+"r"+v.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},a9={readContext:hs,useCallback:TP,useContext:hs,useEffect:$0,useImperativeHandle:AP,useInsertionEffect:kP,useLayoutEffect:PP,useMemo:LP,useReducer:D0,useRef:EP,useState:function(){return D0(gd)},useDebugValue:F0,useDeferredValue:function(u){var h=ps();return MP(h,Pr.memoizedState,u)},useTransition:function(){var u=D0(gd)[0],h=ps().memoizedState;return[u,h]},useMutableSource:yP,useSyncExternalStore:xP,useId:RP,unstable_isNewReconciler:!1},o9={readContext:hs,useCallback:TP,useContext:hs,useEffect:$0,useImperativeHandle:AP,useInsertionEffect:kP,useLayoutEffect:PP,useMemo:LP,useReducer:I0,useRef:EP,useState:function(){return I0(gd)},useDebugValue:F0,useDeferredValue:function(u){var h=ps();return Pr===null?h.memoizedState=u:MP(h,Pr.memoizedState,u)},useTransition:function(){var u=I0(gd)[0],h=ps().memoizedState;return[u,h]},useMutableSource:yP,useSyncExternalStore:xP,useId:RP,unstable_isNewReconciler:!1};function Bs(u,h){if(u&&u.defaultProps){h=W({},h),u=u.defaultProps;for(var v in u)h[v]===void 0&&(h[v]=u[v]);return h}return h}function B0(u,h,v,_){h=u.memoizedState,v=v(_,h),v=v==null?h:W({},h,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var Up={isMounted:function(u){return(u=u._reactInternals)?Ao(u)===u:!1},enqueueSetState:function(u,h,v){u=u._reactInternals;var _=vn(),k=Da(u),T=Ui(_,k);T.payload=h,v!=null&&(T.callback=v),h=Ta(u,T,k),h!==null&&(qs(h,u,k,_),Mp(h,u,k))},enqueueReplaceState:function(u,h,v){u=u._reactInternals;var _=vn(),k=Da(u),T=Ui(_,k);T.tag=1,T.payload=h,v!=null&&(T.callback=v),h=Ta(u,T,k),h!==null&&(qs(h,u,k,_),Mp(h,u,k))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var v=vn(),_=Da(u),k=Ui(v,_);k.tag=2,h!=null&&(k.callback=h),h=Ta(u,k,_),h!==null&&(qs(h,u,_,v),Mp(h,u,_))}};function FP(u,h,v,_,k,T,$){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(_,T,$):h.prototype&&h.prototype.isPureReactComponent?!nd(v,_)||!nd(k,T):!0}function BP(u,h,v){var _=!1,k=Pa,T=h.contextType;return typeof T=="object"&&T!==null?T=hs(T):(k=Cn(h)?Lo:sn.current,_=h.contextTypes,T=(_=_!=null)?Vl(u,k):Pa),h=new h(v,T),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Up,u.stateNode=h,h._reactInternals=u,_&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=k,u.__reactInternalMemoizedMaskedChildContext=T),h}function zP(u,h,v,_){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,_),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,_),h.state!==u&&Up.enqueueReplaceState(h,h.state,null)}function z0(u,h,v,_){var k=u.stateNode;k.props=v,k.state=u.memoizedState,k.refs={},C0(u);var T=h.contextType;typeof T=="object"&&T!==null?k.context=hs(T):(T=Cn(h)?Lo:sn.current,k.context=Vl(u,T)),k.state=u.memoizedState,T=h.getDerivedStateFromProps,typeof T=="function"&&(B0(u,h,T,v),k.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(h=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),h!==k.state&&Up.enqueueReplaceState(k,k.state,null),Rp(u,v,k,_),k.state=u.memoizedState),typeof k.componentDidMount=="function"&&(u.flags|=4194308)}function Jl(u,h){try{var v="",_=h;do v+=K(_),_=_.return;while(_);var k=v}catch(T){k=`
Error generating stack: `+T.message+`
`+T.stack}return{value:u,source:h,stack:k,digest:null}}function U0(u,h,v){return{value:u,source:null,stack:v??null,digest:h??null}}function q0(u,h){try{console.error(h.value)}catch(v){setTimeout(function(){throw v})}}var l9=typeof WeakMap=="function"?WeakMap:Map;function UP(u,h,v){v=Ui(-1,v),v.tag=3,v.payload={element:null};var _=h.value;return v.callback=function(){Zp||(Zp=!0,sx=_),q0(u,h)},v}function qP(u,h,v){v=Ui(-1,v),v.tag=3;var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var k=h.value;v.payload=function(){return _(k)},v.callback=function(){q0(u,h)}}var T=u.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(v.callback=function(){q0(u,h),typeof _!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var $=h.stack;this.componentDidCatch(h.value,{componentStack:$!==null?$:""})}),v}function VP(u,h,v){var _=u.pingCache;if(_===null){_=u.pingCache=new l9;var k=new Set;_.set(h,k)}else k=_.get(h),k===void 0&&(k=new Set,_.set(h,k));k.has(v)||(k.add(v),u=_9.bind(null,u,h,v),h.then(u,u))}function WP(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function HP(u,h,v,_,k){return(u.mode&1)===0?(u===h?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(h=Ui(-1,1),h.tag=2,Ta(v,h,1))),v.lanes|=1),u):(u.flags|=65536,u.lanes=k,u)}var c9=E.ReactCurrentOwner,kn=!1;function gn(u,h,v,_){h.child=u===null?fP(h,null,v,_):Kl(h,u.child,v,_)}function GP(u,h,v,_,k){v=v.render;var T=h.ref;return Xl(h,k),_=M0(u,h,v,_,T,k),v=R0(),u!==null&&!kn?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~k,qi(u,h,k)):(rr&&v&&v0(h),h.flags|=1,gn(u,h,_,k),h.child)}function KP(u,h,v,_,k){if(u===null){var T=v.type;return typeof T=="function"&&!dx(T)&&T.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(h.tag=15,h.type=T,ZP(u,h,T,_,k)):(u=tm(v.type,null,_,h,h.mode,k),u.ref=h.ref,u.return=h,h.child=u)}if(T=u.child,(u.lanes&k)===0){var $=T.memoizedProps;if(v=v.compare,v=v!==null?v:nd,v($,_)&&u.ref===h.ref)return qi(u,h,k)}return h.flags|=1,u=$a(T,_),u.ref=h.ref,u.return=h,h.child=u}function ZP(u,h,v,_,k){if(u!==null){var T=u.memoizedProps;if(nd(T,_)&&u.ref===h.ref)if(kn=!1,h.pendingProps=_=T,(u.lanes&k)!==0)(u.flags&131072)!==0&&(kn=!0);else return h.lanes=u.lanes,qi(u,h,k)}return V0(u,h,v,_,k)}function XP(u,h,v){var _=h.pendingProps,k=_.children,T=u!==null?u.memoizedState:null;if(_.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(ec,qn),qn|=v;else{if((v&1073741824)===0)return u=T!==null?T.baseLanes|v:v,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null,transitions:null},h.updateQueue=null,Ut(ec,qn),qn|=u,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=T!==null?T.baseLanes:v,Ut(ec,qn),qn|=_}else T!==null?(_=T.baseLanes|v,h.memoizedState=null):_=v,Ut(ec,qn),qn|=_;return gn(u,h,k,v),h.child}function YP(u,h){var v=h.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(h.flags|=512,h.flags|=2097152)}function V0(u,h,v,_,k){var T=Cn(v)?Lo:sn.current;return T=Vl(h,T),Xl(h,k),v=M0(u,h,v,_,T,k),_=R0(),u!==null&&!kn?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~k,qi(u,h,k)):(rr&&_&&v0(h),h.flags|=1,gn(u,h,v,k),h.child)}function JP(u,h,v,_,k){if(Cn(v)){var T=!0;Ep(h)}else T=!1;if(Xl(h,k),h.stateNode===null)Vp(u,h),BP(h,v,_),z0(h,v,_,k),_=!0;else if(u===null){var $=h.stateNode,X=h.memoizedProps;$.props=X;var ee=$.context,le=v.contextType;typeof le=="object"&&le!==null?le=hs(le):(le=Cn(v)?Lo:sn.current,le=Vl(h,le));var we=v.getDerivedStateFromProps,je=typeof we=="function"||typeof $.getSnapshotBeforeUpdate=="function";je||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(X!==_||ee!==le)&&zP(h,$,_,le),Aa=!1;var be=h.memoizedState;$.state=be,Rp(h,_,$,k),ee=h.memoizedState,X!==_||be!==ee||En.current||Aa?(typeof we=="function"&&(B0(h,v,we,_),ee=h.memoizedState),(X=Aa||FP(h,v,X,_,be,ee,le))?(je||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(h.flags|=4194308)):(typeof $.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=_,h.memoizedState=ee),$.props=_,$.state=ee,$.context=le,_=X):(typeof $.componentDidMount=="function"&&(h.flags|=4194308),_=!1)}else{$=h.stateNode,pP(u,h),X=h.memoizedProps,le=h.type===h.elementType?X:Bs(h.type,X),$.props=le,je=h.pendingProps,be=$.context,ee=v.contextType,typeof ee=="object"&&ee!==null?ee=hs(ee):(ee=Cn(v)?Lo:sn.current,ee=Vl(h,ee));var Re=v.getDerivedStateFromProps;(we=typeof Re=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(X!==je||be!==ee)&&zP(h,$,_,ee),Aa=!1,be=h.memoizedState,$.state=be,Rp(h,_,$,k);var Fe=h.memoizedState;X!==je||be!==Fe||En.current||Aa?(typeof Re=="function"&&(B0(h,v,Re,_),Fe=h.memoizedState),(le=Aa||FP(h,v,le,_,be,Fe,ee)||!1)?(we||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(_,Fe,ee),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(_,Fe,ee)),typeof $.componentDidUpdate=="function"&&(h.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof $.componentDidUpdate!="function"||X===u.memoizedProps&&be===u.memoizedState||(h.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||X===u.memoizedProps&&be===u.memoizedState||(h.flags|=1024),h.memoizedProps=_,h.memoizedState=Fe),$.props=_,$.state=Fe,$.context=ee,_=le):(typeof $.componentDidUpdate!="function"||X===u.memoizedProps&&be===u.memoizedState||(h.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||X===u.memoizedProps&&be===u.memoizedState||(h.flags|=1024),_=!1)}return W0(u,h,v,_,T,k)}function W0(u,h,v,_,k,T){YP(u,h);var $=(h.flags&128)!==0;if(!_&&!$)return k&&nP(h,v,!1),qi(u,h,T);_=h.stateNode,c9.current=h;var X=$&&typeof v.getDerivedStateFromError!="function"?null:_.render();return h.flags|=1,u!==null&&$?(h.child=Kl(h,u.child,null,T),h.child=Kl(h,null,X,T)):gn(u,h,X,T),h.memoizedState=_.state,k&&nP(h,v,!0),h.child}function QP(u){var h=u.stateNode;h.pendingContext?tP(u,h.pendingContext,h.pendingContext!==h.context):h.context&&tP(u,h.context,!1),k0(u,h.containerInfo)}function eO(u,h,v,_,k){return Gl(),w0(k),h.flags|=256,gn(u,h,v,_),h.child}var H0={dehydrated:null,treeContext:null,retryLane:0};function G0(u){return{baseLanes:u,cachePool:null,transitions:null}}function tO(u,h,v){var _=h.pendingProps,k=ar.current,T=!1,$=(h.flags&128)!==0,X;if((X=$)||(X=u!==null&&u.memoizedState===null?!1:(k&2)!==0),X?(T=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(k|=1),Ut(ar,k&1),u===null)return b0(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((h.mode&1)===0?h.lanes=1:u.data==="$!"?h.lanes=8:h.lanes=1073741824,null):($=_.children,u=_.fallback,T?(_=h.mode,T=h.child,$={mode:"hidden",children:$},(_&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=$):T=rm($,_,0,null),u=qo(u,_,v,null),T.return=h,u.return=h,T.sibling=u,h.child=T,h.child.memoizedState=G0(v),h.memoizedState=H0,u):K0(h,$));if(k=u.memoizedState,k!==null&&(X=k.dehydrated,X!==null))return u9(u,h,$,_,X,k,v);if(T){T=_.fallback,$=h.mode,k=u.child,X=k.sibling;var ee={mode:"hidden",children:_.children};return($&1)===0&&h.child!==k?(_=h.child,_.childLanes=0,_.pendingProps=ee,h.deletions=null):(_=$a(k,ee),_.subtreeFlags=k.subtreeFlags&14680064),X!==null?T=$a(X,T):(T=qo(T,$,v,null),T.flags|=2),T.return=h,_.return=h,_.sibling=T,h.child=_,_=T,T=h.child,$=u.child.memoizedState,$=$===null?G0(v):{baseLanes:$.baseLanes|v,cachePool:null,transitions:$.transitions},T.memoizedState=$,T.childLanes=u.childLanes&~v,h.memoizedState=H0,_}return T=u.child,u=T.sibling,_=$a(T,{mode:"visible",children:_.children}),(h.mode&1)===0&&(_.lanes=v),_.return=h,_.sibling=null,u!==null&&(v=h.deletions,v===null?(h.deletions=[u],h.flags|=16):v.push(u)),h.child=_,h.memoizedState=null,_}function K0(u,h){return h=rm({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function qp(u,h,v,_){return _!==null&&w0(_),Kl(h,u.child,null,v),u=K0(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function u9(u,h,v,_,k,T,$){if(v)return h.flags&256?(h.flags&=-257,_=U0(Error(r(422))),qp(u,h,$,_)):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(T=_.fallback,k=h.mode,_=rm({mode:"visible",children:_.children},k,0,null),T=qo(T,k,$,null),T.flags|=2,_.return=h,T.return=h,_.sibling=T,h.child=_,(h.mode&1)!==0&&Kl(h,u.child,null,$),h.child.memoizedState=G0($),h.memoizedState=H0,T);if((h.mode&1)===0)return qp(u,h,$,null);if(k.data==="$!"){if(_=k.nextSibling&&k.nextSibling.dataset,_)var X=_.dgst;return _=X,T=Error(r(419)),_=U0(T,_,void 0),qp(u,h,$,_)}if(X=($&u.childLanes)!==0,kn||X){if(_=Fr,_!==null){switch($&-$){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(_.suspendedLanes|$))!==0?0:k,k!==0&&k!==T.retryLane&&(T.retryLane=k,zi(u,k),qs(_,u,k,-1))}return ux(),_=U0(Error(r(421))),qp(u,h,$,_)}return k.data==="$?"?(h.flags|=128,h.child=u.child,h=j9.bind(null,u),k._reactRetry=h,null):(u=T.treeContext,Un=Ca(k.nextSibling),zn=h,rr=!0,Fs=null,u!==null&&(ds[fs++]=Fi,ds[fs++]=Bi,ds[fs++]=Mo,Fi=u.id,Bi=u.overflow,Mo=h),h=K0(h,_.children),h.flags|=4096,h)}function rO(u,h,v){u.lanes|=h;var _=u.alternate;_!==null&&(_.lanes|=h),N0(u.return,h,v)}function Z0(u,h,v,_,k){var T=u.memoizedState;T===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:_,tail:v,tailMode:k}:(T.isBackwards=h,T.rendering=null,T.renderingStartTime=0,T.last=_,T.tail=v,T.tailMode=k)}function nO(u,h,v){var _=h.pendingProps,k=_.revealOrder,T=_.tail;if(gn(u,h,_.children,v),_=ar.current,(_&2)!==0)_=_&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&rO(u,v,h);else if(u.tag===19)rO(u,v,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}_&=1}if(Ut(ar,_),(h.mode&1)===0)h.memoizedState=null;else switch(k){case"forwards":for(v=h.child,k=null;v!==null;)u=v.alternate,u!==null&&Dp(u)===null&&(k=v),v=v.sibling;v=k,v===null?(k=h.child,h.child=null):(k=v.sibling,v.sibling=null),Z0(h,!1,k,v,T);break;case"backwards":for(v=null,k=h.child,h.child=null;k!==null;){if(u=k.alternate,u!==null&&Dp(u)===null){h.child=k;break}u=k.sibling,k.sibling=v,v=k,k=u}Z0(h,!0,v,null,T);break;case"together":Z0(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Vp(u,h){(h.mode&1)===0&&u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2)}function qi(u,h,v){if(u!==null&&(h.dependencies=u.dependencies),Fo|=h.lanes,(v&h.childLanes)===0)return null;if(u!==null&&h.child!==u.child)throw Error(r(153));if(h.child!==null){for(u=h.child,v=$a(u,u.pendingProps),h.child=v,v.return=h;u.sibling!==null;)u=u.sibling,v=v.sibling=$a(u,u.pendingProps),v.return=h;v.sibling=null}return h.child}function d9(u,h,v){switch(h.tag){case 3:QP(h),Gl();break;case 5:vP(h);break;case 1:Cn(h.type)&&Ep(h);break;case 4:k0(h,h.stateNode.containerInfo);break;case 10:var _=h.type._context,k=h.memoizedProps.value;Ut(Tp,_._currentValue),_._currentValue=k;break;case 13:if(_=h.memoizedState,_!==null)return _.dehydrated!==null?(Ut(ar,ar.current&1),h.flags|=128,null):(v&h.child.childLanes)!==0?tO(u,h,v):(Ut(ar,ar.current&1),u=qi(u,h,v),u!==null?u.sibling:null);Ut(ar,ar.current&1);break;case 19:if(_=(v&h.childLanes)!==0,(u.flags&128)!==0){if(_)return nO(u,h,v);h.flags|=128}if(k=h.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Ut(ar,ar.current),_)break;return null;case 22:case 23:return h.lanes=0,XP(u,h,v)}return qi(u,h,v)}var sO,X0,iO,aO;sO=function(u,h){for(var v=h.child;v!==null;){if(v.tag===5||v.tag===6)u.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===h)break;for(;v.sibling===null;){if(v.return===null||v.return===h)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},X0=function(){},iO=function(u,h,v,_){var k=u.memoizedProps;if(k!==_){u=h.stateNode,Io(fi.current);var T=null;switch(v){case"input":k=Ee(u,k),_=Ee(u,_),T=[];break;case"select":k=W({},k,{value:void 0}),_=W({},_,{value:void 0}),T=[];break;case"textarea":k=Q(u,k),_=Q(u,_),T=[];break;default:typeof k.onClick!="function"&&typeof _.onClick=="function"&&(u.onclick=jp)}ls(v,_);var $;v=null;for(le in k)if(!_.hasOwnProperty(le)&&k.hasOwnProperty(le)&&k[le]!=null)if(le==="style"){var X=k[le];for($ in X)X.hasOwnProperty($)&&(v||(v={}),v[$]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(s.hasOwnProperty(le)?T||(T=[]):(T=T||[]).push(le,null));for(le in _){var ee=_[le];if(X=k?.[le],_.hasOwnProperty(le)&&ee!==X&&(ee!=null||X!=null))if(le==="style")if(X){for($ in X)!X.hasOwnProperty($)||ee&&ee.hasOwnProperty($)||(v||(v={}),v[$]="");for($ in ee)ee.hasOwnProperty($)&&X[$]!==ee[$]&&(v||(v={}),v[$]=ee[$])}else v||(T||(T=[]),T.push(le,v)),v=ee;else le==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,X=X?X.__html:void 0,ee!=null&&X!==ee&&(T=T||[]).push(le,ee)):le==="children"?typeof ee!="string"&&typeof ee!="number"||(T=T||[]).push(le,""+ee):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(s.hasOwnProperty(le)?(ee!=null&&le==="onScroll"&&Kt("scroll",u),T||X===ee||(T=[])):(T=T||[]).push(le,ee))}v&&(T=T||[]).push("style",v);var le=T;(h.updateQueue=le)&&(h.flags|=4)}},aO=function(u,h,v,_){v!==_&&(h.flags|=4)};function yd(u,h){if(!rr)switch(u.tailMode){case"hidden":h=u.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var _=null;v!==null;)v.alternate!==null&&(_=v),v=v.sibling;_===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:_.sibling=null}}function on(u){var h=u.alternate!==null&&u.alternate.child===u.child,v=0,_=0;if(h)for(var k=u.child;k!==null;)v|=k.lanes|k.childLanes,_|=k.subtreeFlags&14680064,_|=k.flags&14680064,k.return=u,k=k.sibling;else for(k=u.child;k!==null;)v|=k.lanes|k.childLanes,_|=k.subtreeFlags,_|=k.flags,k.return=u,k=k.sibling;return u.subtreeFlags|=_,u.childLanes=v,h}function f9(u,h,v){var _=h.pendingProps;switch(y0(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(h),null;case 1:return Cn(h.type)&&Np(),on(h),null;case 3:return _=h.stateNode,Yl(),Zt(En),Zt(sn),A0(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(u===null||u.child===null)&&(Op(h)?h.flags|=4:u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Fs!==null&&(ox(Fs),Fs=null))),X0(u,h),on(h),null;case 5:P0(h);var k=Io(hd.current);if(v=h.type,u!==null&&h.stateNode!=null)iO(u,h,v,_,k),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!_){if(h.stateNode===null)throw Error(r(166));return on(h),null}if(u=Io(fi.current),Op(h)){_=h.stateNode,v=h.type;var T=h.memoizedProps;switch(_[di]=h,_[ld]=T,u=(h.mode&1)!==0,v){case"dialog":Kt("cancel",_),Kt("close",_);break;case"iframe":case"object":case"embed":Kt("load",_);break;case"video":case"audio":for(k=0;k<id.length;k++)Kt(id[k],_);break;case"source":Kt("error",_);break;case"img":case"image":case"link":Kt("error",_),Kt("load",_);break;case"details":Kt("toggle",_);break;case"input":ke(_,T),Kt("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!T.multiple},Kt("invalid",_);break;case"textarea":ie(_,T),Kt("invalid",_)}ls(v,T),k=null;for(var $ in T)if(T.hasOwnProperty($)){var X=T[$];$==="children"?typeof X=="string"?_.textContent!==X&&(T.suppressHydrationWarning!==!0&&_p(_.textContent,X,u),k=["children",X]):typeof X=="number"&&_.textContent!==""+X&&(T.suppressHydrationWarning!==!0&&_p(_.textContent,X,u),k=["children",""+X]):s.hasOwnProperty($)&&X!=null&&$==="onScroll"&&Kt("scroll",_)}switch(v){case"input":pe(_),fr(_,T,!0);break;case"textarea":pe(_),ye(_);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(_.onclick=jp)}_=k,h.updateQueue=_,_!==null&&(h.flags|=4)}else{$=k.nodeType===9?k:k.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Pe(v)),u==="http://www.w3.org/1999/xhtml"?v==="script"?(u=$.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof _.is=="string"?u=$.createElement(v,{is:_.is}):(u=$.createElement(v),v==="select"&&($=u,_.multiple?$.multiple=!0:_.size&&($.size=_.size))):u=$.createElementNS(u,v),u[di]=h,u[ld]=_,sO(u,h,!1,!1),h.stateNode=u;e:{switch($=cs(v,_),v){case"dialog":Kt("cancel",u),Kt("close",u),k=_;break;case"iframe":case"object":case"embed":Kt("load",u),k=_;break;case"video":case"audio":for(k=0;k<id.length;k++)Kt(id[k],u);k=_;break;case"source":Kt("error",u),k=_;break;case"img":case"image":case"link":Kt("error",u),Kt("load",u),k=_;break;case"details":Kt("toggle",u),k=_;break;case"input":ke(u,_),k=Ee(u,_),Kt("invalid",u);break;case"option":k=_;break;case"select":u._wrapperState={wasMultiple:!!_.multiple},k=W({},_,{value:void 0}),Kt("invalid",u);break;case"textarea":ie(u,_),k=Q(u,_),Kt("invalid",u);break;default:k=_}ls(v,k),X=k;for(T in X)if(X.hasOwnProperty(T)){var ee=X[T];T==="style"?Ts(u,ee):T==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&nt(u,ee)):T==="children"?typeof ee=="string"?(v!=="textarea"||ee!=="")&&Nt(u,ee):typeof ee=="number"&&Nt(u,""+ee):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?ee!=null&&T==="onScroll"&&Kt("scroll",u):ee!=null&&C(u,T,ee,$))}switch(v){case"input":pe(u),fr(u,_,!1);break;case"textarea":pe(u),ye(u);break;case"option":_.value!=null&&u.setAttribute("value",""+he(_.value));break;case"select":u.multiple=!!_.multiple,T=_.value,T!=null?Tt(u,!!_.multiple,T,!1):_.defaultValue!=null&&Tt(u,!!_.multiple,_.defaultValue,!0);break;default:typeof k.onClick=="function"&&(u.onclick=jp)}switch(v){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return on(h),null;case 6:if(u&&h.stateNode!=null)aO(u,h,u.memoizedProps,_);else{if(typeof _!="string"&&h.stateNode===null)throw Error(r(166));if(v=Io(hd.current),Io(fi.current),Op(h)){if(_=h.stateNode,v=h.memoizedProps,_[di]=h,(T=_.nodeValue!==v)&&(u=zn,u!==null))switch(u.tag){case 3:_p(_.nodeValue,v,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&_p(_.nodeValue,v,(u.mode&1)!==0)}T&&(h.flags|=4)}else _=(v.nodeType===9?v:v.ownerDocument).createTextNode(_),_[di]=h,h.stateNode=_}return on(h),null;case 13:if(Zt(ar),_=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(rr&&Un!==null&&(h.mode&1)!==0&&(h.flags&128)===0)cP(),Gl(),h.flags|=98560,T=!1;else if(T=Op(h),_!==null&&_.dehydrated!==null){if(u===null){if(!T)throw Error(r(318));if(T=h.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[di]=h}else Gl(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;on(h),T=!1}else Fs!==null&&(ox(Fs),Fs=null),T=!0;if(!T)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=v,h):(_=_!==null,_!==(u!==null&&u.memoizedState!==null)&&_&&(h.child.flags|=8192,(h.mode&1)!==0&&(u===null||(ar.current&1)!==0?Or===0&&(Or=3):ux())),h.updateQueue!==null&&(h.flags|=4),on(h),null);case 4:return Yl(),X0(u,h),u===null&&ad(h.stateNode.containerInfo),on(h),null;case 10:return S0(h.type._context),on(h),null;case 17:return Cn(h.type)&&Np(),on(h),null;case 19:if(Zt(ar),T=h.memoizedState,T===null)return on(h),null;if(_=(h.flags&128)!==0,$=T.rendering,$===null)if(_)yd(T,!1);else{if(Or!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if($=Dp(u),$!==null){for(h.flags|=128,yd(T,!1),_=$.updateQueue,_!==null&&(h.updateQueue=_,h.flags|=4),h.subtreeFlags=0,_=v,v=h.child;v!==null;)T=v,u=_,T.flags&=14680066,$=T.alternate,$===null?(T.childLanes=0,T.lanes=u,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=$.childLanes,T.lanes=$.lanes,T.child=$.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=$.memoizedProps,T.memoizedState=$.memoizedState,T.updateQueue=$.updateQueue,T.type=$.type,u=$.dependencies,T.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),v=v.sibling;return Ut(ar,ar.current&1|2),h.child}u=u.sibling}T.tail!==null&&yr()>tc&&(h.flags|=128,_=!0,yd(T,!1),h.lanes=4194304)}else{if(!_)if(u=Dp($),u!==null){if(h.flags|=128,_=!0,v=u.updateQueue,v!==null&&(h.updateQueue=v,h.flags|=4),yd(T,!0),T.tail===null&&T.tailMode==="hidden"&&!$.alternate&&!rr)return on(h),null}else 2*yr()-T.renderingStartTime>tc&&v!==1073741824&&(h.flags|=128,_=!0,yd(T,!1),h.lanes=4194304);T.isBackwards?($.sibling=h.child,h.child=$):(v=T.last,v!==null?v.sibling=$:h.child=$,T.last=$)}return T.tail!==null?(h=T.tail,T.rendering=h,T.tail=h.sibling,T.renderingStartTime=yr(),h.sibling=null,v=ar.current,Ut(ar,_?v&1|2:v&1),h):(on(h),null);case 22:case 23:return cx(),_=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==_&&(h.flags|=8192),_&&(h.mode&1)!==0?(qn&1073741824)!==0&&(on(h),h.subtreeFlags&6&&(h.flags|=8192)):on(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function h9(u,h){switch(y0(h),h.tag){case 1:return Cn(h.type)&&Np(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Yl(),Zt(En),Zt(sn),A0(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 5:return P0(h),null;case 13:if(Zt(ar),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Gl()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return Zt(ar),null;case 4:return Yl(),null;case 10:return S0(h.type._context),null;case 22:case 23:return cx(),null;case 24:return null;default:return null}}var Wp=!1,ln=!1,p9=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Ql(u,h){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(_){hr(u,h,_)}else v.current=null}function Y0(u,h,v){try{v()}catch(_){hr(u,h,_)}}var oO=!1;function m9(u,h){if(c0=dp,u=Fk(),t0(u)){if("selectionStart"in u)var v={start:u.selectionStart,end:u.selectionEnd};else e:{v=(v=u.ownerDocument)&&v.defaultView||window;var _=v.getSelection&&v.getSelection();if(_&&_.rangeCount!==0){v=_.anchorNode;var k=_.anchorOffset,T=_.focusNode;_=_.focusOffset;try{v.nodeType,T.nodeType}catch{v=null;break e}var $=0,X=-1,ee=-1,le=0,we=0,je=u,be=null;t:for(;;){for(var Re;je!==v||k!==0&&je.nodeType!==3||(X=$+k),je!==T||_!==0&&je.nodeType!==3||(ee=$+_),je.nodeType===3&&($+=je.nodeValue.length),(Re=je.firstChild)!==null;)be=je,je=Re;for(;;){if(je===u)break t;if(be===v&&++le===k&&(X=$),be===T&&++we===_&&(ee=$),(Re=je.nextSibling)!==null)break;je=be,be=je.parentNode}je=Re}v=X===-1||ee===-1?null:{start:X,end:ee}}else v=null}v=v||{start:0,end:0}}else v=null;for(u0={focusedElem:u,selectionRange:v},dp=!1,Ie=h;Ie!==null;)if(h=Ie,u=h.child,(h.subtreeFlags&1028)!==0&&u!==null)u.return=h,Ie=u;else for(;Ie!==null;){h=Ie;try{var Fe=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var ze=Fe.memoizedProps,xr=Fe.memoizedState,se=h.stateNode,re=se.getSnapshotBeforeUpdate(h.elementType===h.type?ze:Bs(h.type,ze),xr);se.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var oe=h.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ce){hr(h,h.return,Ce)}if(u=h.sibling,u!==null){u.return=h.return,Ie=u;break}Ie=h.return}return Fe=oO,oO=!1,Fe}function xd(u,h,v){var _=h.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var k=_=_.next;do{if((k.tag&u)===u){var T=k.destroy;k.destroy=void 0,T!==void 0&&Y0(h,v,T)}k=k.next}while(k!==_)}}function Hp(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var v=h=h.next;do{if((v.tag&u)===u){var _=v.create;v.destroy=_()}v=v.next}while(v!==h)}}function J0(u){var h=u.ref;if(h!==null){var v=u.stateNode;switch(u.tag){case 5:u=v;break;default:u=v}typeof h=="function"?h(u):h.current=u}}function lO(u){var h=u.alternate;h!==null&&(u.alternate=null,lO(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&(delete h[di],delete h[ld],delete h[p0],delete h[YV],delete h[JV])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function cO(u){return u.tag===5||u.tag===3||u.tag===4}function uO(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||cO(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Q0(u,h,v){var _=u.tag;if(_===5||_===6)u=u.stateNode,h?v.nodeType===8?v.parentNode.insertBefore(u,h):v.insertBefore(u,h):(v.nodeType===8?(h=v.parentNode,h.insertBefore(u,v)):(h=v,h.appendChild(u)),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=jp));else if(_!==4&&(u=u.child,u!==null))for(Q0(u,h,v),u=u.sibling;u!==null;)Q0(u,h,v),u=u.sibling}function ex(u,h,v){var _=u.tag;if(_===5||_===6)u=u.stateNode,h?v.insertBefore(u,h):v.appendChild(u);else if(_!==4&&(u=u.child,u!==null))for(ex(u,h,v),u=u.sibling;u!==null;)ex(u,h,v),u=u.sibling}var Yr=null,zs=!1;function La(u,h,v){for(v=v.child;v!==null;)dO(u,h,v),v=v.sibling}function dO(u,h,v){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(ip,v)}catch{}switch(v.tag){case 5:ln||Ql(v,h);case 6:var _=Yr,k=zs;Yr=null,La(u,h,v),Yr=_,zs=k,Yr!==null&&(zs?(u=Yr,v=v.stateNode,u.nodeType===8?u.parentNode.removeChild(v):u.removeChild(v)):Yr.removeChild(v.stateNode));break;case 18:Yr!==null&&(zs?(u=Yr,v=v.stateNode,u.nodeType===8?h0(u.parentNode,v):u.nodeType===1&&h0(u,v),Yu(u)):h0(Yr,v.stateNode));break;case 4:_=Yr,k=zs,Yr=v.stateNode.containerInfo,zs=!0,La(u,h,v),Yr=_,zs=k;break;case 0:case 11:case 14:case 15:if(!ln&&(_=v.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){k=_=_.next;do{var T=k,$=T.destroy;T=T.tag,$!==void 0&&((T&2)!==0||(T&4)!==0)&&Y0(v,h,$),k=k.next}while(k!==_)}La(u,h,v);break;case 1:if(!ln&&(Ql(v,h),_=v.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=v.memoizedProps,_.state=v.memoizedState,_.componentWillUnmount()}catch(X){hr(v,h,X)}La(u,h,v);break;case 21:La(u,h,v);break;case 22:v.mode&1?(ln=(_=ln)||v.memoizedState!==null,La(u,h,v),ln=_):La(u,h,v);break;default:La(u,h,v)}}function fO(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new p9),h.forEach(function(_){var k=S9.bind(null,u,_);v.has(_)||(v.add(_),_.then(k,k))})}}function Us(u,h){var v=h.deletions;if(v!==null)for(var _=0;_<v.length;_++){var k=v[_];try{var T=u,$=h,X=$;e:for(;X!==null;){switch(X.tag){case 5:Yr=X.stateNode,zs=!1;break e;case 3:Yr=X.stateNode.containerInfo,zs=!0;break e;case 4:Yr=X.stateNode.containerInfo,zs=!0;break e}X=X.return}if(Yr===null)throw Error(r(160));dO(T,$,k),Yr=null,zs=!1;var ee=k.alternate;ee!==null&&(ee.return=null),k.return=null}catch(le){hr(k,h,le)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)hO(h,u),h=h.sibling}function hO(u,h){var v=u.alternate,_=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Us(h,u),pi(u),_&4){try{xd(3,u,u.return),Hp(3,u)}catch(ze){hr(u,u.return,ze)}try{xd(5,u,u.return)}catch(ze){hr(u,u.return,ze)}}break;case 1:Us(h,u),pi(u),_&512&&v!==null&&Ql(v,v.return);break;case 5:if(Us(h,u),pi(u),_&512&&v!==null&&Ql(v,v.return),u.flags&32){var k=u.stateNode;try{Nt(k,"")}catch(ze){hr(u,u.return,ze)}}if(_&4&&(k=u.stateNode,k!=null)){var T=u.memoizedProps,$=v!==null?v.memoizedProps:T,X=u.type,ee=u.updateQueue;if(u.updateQueue=null,ee!==null)try{X==="input"&&T.type==="radio"&&T.name!=null&&We(k,T),cs(X,$);var le=cs(X,T);for($=0;$<ee.length;$+=2){var we=ee[$],je=ee[$+1];we==="style"?Ts(k,je):we==="dangerouslySetInnerHTML"?nt(k,je):we==="children"?Nt(k,je):C(k,we,je,le)}switch(X){case"input":St(k,T);break;case"textarea":Z(k,T);break;case"select":var be=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!T.multiple;var Re=T.value;Re!=null?Tt(k,!!T.multiple,Re,!1):be!==!!T.multiple&&(T.defaultValue!=null?Tt(k,!!T.multiple,T.defaultValue,!0):Tt(k,!!T.multiple,T.multiple?[]:"",!1))}k[ld]=T}catch(ze){hr(u,u.return,ze)}}break;case 6:if(Us(h,u),pi(u),_&4){if(u.stateNode===null)throw Error(r(162));k=u.stateNode,T=u.memoizedProps;try{k.nodeValue=T}catch(ze){hr(u,u.return,ze)}}break;case 3:if(Us(h,u),pi(u),_&4&&v!==null&&v.memoizedState.isDehydrated)try{Yu(h.containerInfo)}catch(ze){hr(u,u.return,ze)}break;case 4:Us(h,u),pi(u);break;case 13:Us(h,u),pi(u),k=u.child,k.flags&8192&&(T=k.memoizedState!==null,k.stateNode.isHidden=T,!T||k.alternate!==null&&k.alternate.memoizedState!==null||(nx=yr())),_&4&&fO(u);break;case 22:if(we=v!==null&&v.memoizedState!==null,u.mode&1?(ln=(le=ln)||we,Us(h,u),ln=le):Us(h,u),pi(u),_&8192){if(le=u.memoizedState!==null,(u.stateNode.isHidden=le)&&!we&&(u.mode&1)!==0)for(Ie=u,we=u.child;we!==null;){for(je=Ie=we;Ie!==null;){switch(be=Ie,Re=be.child,be.tag){case 0:case 11:case 14:case 15:xd(4,be,be.return);break;case 1:Ql(be,be.return);var Fe=be.stateNode;if(typeof Fe.componentWillUnmount=="function"){_=be,v=be.return;try{h=_,Fe.props=h.memoizedProps,Fe.state=h.memoizedState,Fe.componentWillUnmount()}catch(ze){hr(_,v,ze)}}break;case 5:Ql(be,be.return);break;case 22:if(be.memoizedState!==null){gO(je);continue}}Re!==null?(Re.return=be,Ie=Re):gO(je)}we=we.sibling}e:for(we=null,je=u;;){if(je.tag===5){if(we===null){we=je;try{k=je.stateNode,le?(T=k.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(X=je.stateNode,ee=je.memoizedProps.style,$=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,X.style.display=$n("display",$))}catch(ze){hr(u,u.return,ze)}}}else if(je.tag===6){if(we===null)try{je.stateNode.nodeValue=le?"":je.memoizedProps}catch(ze){hr(u,u.return,ze)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===u)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===u)break e;for(;je.sibling===null;){if(je.return===null||je.return===u)break e;we===je&&(we=null),je=je.return}we===je&&(we=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:Us(h,u),pi(u),_&4&&fO(u);break;case 21:break;default:Us(h,u),pi(u)}}function pi(u){var h=u.flags;if(h&2){try{e:{for(var v=u.return;v!==null;){if(cO(v)){var _=v;break e}v=v.return}throw Error(r(160))}switch(_.tag){case 5:var k=_.stateNode;_.flags&32&&(Nt(k,""),_.flags&=-33);var T=uO(u);ex(u,T,k);break;case 3:case 4:var $=_.stateNode.containerInfo,X=uO(u);Q0(u,X,$);break;default:throw Error(r(161))}}catch(ee){hr(u,u.return,ee)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function g9(u,h,v){Ie=u,pO(u)}function pO(u,h,v){for(var _=(u.mode&1)!==0;Ie!==null;){var k=Ie,T=k.child;if(k.tag===22&&_){var $=k.memoizedState!==null||Wp;if(!$){var X=k.alternate,ee=X!==null&&X.memoizedState!==null||ln;X=Wp;var le=ln;if(Wp=$,(ln=ee)&&!le)for(Ie=k;Ie!==null;)$=Ie,ee=$.child,$.tag===22&&$.memoizedState!==null?vO(k):ee!==null?(ee.return=$,Ie=ee):vO(k);for(;T!==null;)Ie=T,pO(T),T=T.sibling;Ie=k,Wp=X,ln=le}mO(u)}else(k.subtreeFlags&8772)!==0&&T!==null?(T.return=k,Ie=T):mO(u)}}function mO(u){for(;Ie!==null;){var h=Ie;if((h.flags&8772)!==0){var v=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:ln||Hp(5,h);break;case 1:var _=h.stateNode;if(h.flags&4&&!ln)if(v===null)_.componentDidMount();else{var k=h.elementType===h.type?v.memoizedProps:Bs(h.type,v.memoizedProps);_.componentDidUpdate(k,v.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var T=h.updateQueue;T!==null&&gP(h,T,_);break;case 3:var $=h.updateQueue;if($!==null){if(v=null,h.child!==null)switch(h.child.tag){case 5:v=h.child.stateNode;break;case 1:v=h.child.stateNode}gP(h,$,v)}break;case 5:var X=h.stateNode;if(v===null&&h.flags&4){v=X;var ee=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&v.focus();break;case"img":ee.src&&(v.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var le=h.alternate;if(le!==null){var we=le.memoizedState;if(we!==null){var je=we.dehydrated;je!==null&&Yu(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ln||h.flags&512&&J0(h)}catch(be){hr(h,h.return,be)}}if(h===u){Ie=null;break}if(v=h.sibling,v!==null){v.return=h.return,Ie=v;break}Ie=h.return}}function gO(u){for(;Ie!==null;){var h=Ie;if(h===u){Ie=null;break}var v=h.sibling;if(v!==null){v.return=h.return,Ie=v;break}Ie=h.return}}function vO(u){for(;Ie!==null;){var h=Ie;try{switch(h.tag){case 0:case 11:case 15:var v=h.return;try{Hp(4,h)}catch(ee){hr(h,v,ee)}break;case 1:var _=h.stateNode;if(typeof _.componentDidMount=="function"){var k=h.return;try{_.componentDidMount()}catch(ee){hr(h,k,ee)}}var T=h.return;try{J0(h)}catch(ee){hr(h,T,ee)}break;case 5:var $=h.return;try{J0(h)}catch(ee){hr(h,$,ee)}}}catch(ee){hr(h,h.return,ee)}if(h===u){Ie=null;break}var X=h.sibling;if(X!==null){X.return=h.return,Ie=X;break}Ie=h.return}}var v9=Math.ceil,Gp=E.ReactCurrentDispatcher,tx=E.ReactCurrentOwner,ms=E.ReactCurrentBatchConfig,jt=0,Fr=null,_r=null,Jr=0,qn=0,ec=ka(0),Or=0,bd=null,Fo=0,Kp=0,rx=0,wd=null,Pn=null,nx=0,tc=1/0,Vi=null,Zp=!1,sx=null,Ma=null,Xp=!1,Ra=null,Yp=0,_d=0,ix=null,Jp=-1,Qp=0;function vn(){return(jt&6)!==0?yr():Jp!==-1?Jp:Jp=yr()}function Da(u){return(u.mode&1)===0?1:(jt&2)!==0&&Jr!==0?Jr&-Jr:e9.transition!==null?(Qp===0&&(Qp=uk()),Qp):(u=Mt,u!==0||(u=window.event,u=u===void 0?16:xk(u.type)),u)}function qs(u,h,v,_){if(50<_d)throw _d=0,ix=null,Error(r(185));Hu(u,v,_),((jt&2)===0||u!==Fr)&&(u===Fr&&((jt&2)===0&&(Kp|=v),Or===4&&Ia(u,Jr)),On(u,_),v===1&&jt===0&&(h.mode&1)===0&&(tc=yr()+500,Cp&&Oa()))}function On(u,h){var v=u.callbackNode;eV(u,h);var _=lp(u,u===Fr?Jr:0);if(_===0)v!==null&&ok(v),u.callbackNode=null,u.callbackPriority=0;else if(h=_&-_,u.callbackPriority!==h){if(v!=null&&ok(v),h===1)u.tag===0?QV(xO.bind(null,u)):sP(xO.bind(null,u)),ZV(function(){(jt&6)===0&&Oa()}),v=null;else{switch(dk(_)){case 1:v=$y;break;case 4:v=lk;break;case 16:v=sp;break;case 536870912:v=ck;break;default:v=sp}v=CO(v,yO.bind(null,u))}u.callbackPriority=h,u.callbackNode=v}}function yO(u,h){if(Jp=-1,Qp=0,(jt&6)!==0)throw Error(r(327));var v=u.callbackNode;if(rc()&&u.callbackNode!==v)return null;var _=lp(u,u===Fr?Jr:0);if(_===0)return null;if((_&30)!==0||(_&u.expiredLanes)!==0||h)h=em(u,_);else{h=_;var k=jt;jt|=2;var T=wO();(Fr!==u||Jr!==h)&&(Vi=null,tc=yr()+500,zo(u,h));do try{b9();break}catch(X){bO(u,X)}while(!0);j0(),Gp.current=T,jt=k,_r!==null?h=0:(Fr=null,Jr=0,h=Or)}if(h!==0){if(h===2&&(k=Fy(u),k!==0&&(_=k,h=ax(u,k))),h===1)throw v=bd,zo(u,0),Ia(u,_),On(u,yr()),v;if(h===6)Ia(u,_);else{if(k=u.current.alternate,(_&30)===0&&!y9(k)&&(h=em(u,_),h===2&&(T=Fy(u),T!==0&&(_=T,h=ax(u,T))),h===1))throw v=bd,zo(u,0),Ia(u,_),On(u,yr()),v;switch(u.finishedWork=k,u.finishedLanes=_,h){case 0:case 1:throw Error(r(345));case 2:Uo(u,Pn,Vi);break;case 3:if(Ia(u,_),(_&130023424)===_&&(h=nx+500-yr(),10<h)){if(lp(u,0)!==0)break;if(k=u.suspendedLanes,(k&_)!==_){vn(),u.pingedLanes|=u.suspendedLanes&k;break}u.timeoutHandle=f0(Uo.bind(null,u,Pn,Vi),h);break}Uo(u,Pn,Vi);break;case 4:if(Ia(u,_),(_&4194240)===_)break;for(h=u.eventTimes,k=-1;0<_;){var $=31-Is(_);T=1<<$,$=h[$],$>k&&(k=$),_&=~T}if(_=k,_=yr()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*v9(_/1960))-_,10<_){u.timeoutHandle=f0(Uo.bind(null,u,Pn,Vi),_);break}Uo(u,Pn,Vi);break;case 5:Uo(u,Pn,Vi);break;default:throw Error(r(329))}}}return On(u,yr()),u.callbackNode===v?yO.bind(null,u):null}function ax(u,h){var v=wd;return u.current.memoizedState.isDehydrated&&(zo(u,h).flags|=256),u=em(u,h),u!==2&&(h=Pn,Pn=v,h!==null&&ox(h)),u}function ox(u){Pn===null?Pn=u:Pn.push.apply(Pn,u)}function y9(u){for(var h=u;;){if(h.flags&16384){var v=h.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var _=0;_<v.length;_++){var k=v[_],T=k.getSnapshot;k=k.value;try{if(!$s(T(),k))return!1}catch{return!1}}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ia(u,h){for(h&=~rx,h&=~Kp,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var v=31-Is(h),_=1<<v;u[v]=-1,h&=~_}}function xO(u){if((jt&6)!==0)throw Error(r(327));rc();var h=lp(u,0);if((h&1)===0)return On(u,yr()),null;var v=em(u,h);if(u.tag!==0&&v===2){var _=Fy(u);_!==0&&(h=_,v=ax(u,_))}if(v===1)throw v=bd,zo(u,0),Ia(u,h),On(u,yr()),v;if(v===6)throw Error(r(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,Uo(u,Pn,Vi),On(u,yr()),null}function lx(u,h){var v=jt;jt|=1;try{return u(h)}finally{jt=v,jt===0&&(tc=yr()+500,Cp&&Oa())}}function Bo(u){Ra!==null&&Ra.tag===0&&(jt&6)===0&&rc();var h=jt;jt|=1;var v=ms.transition,_=Mt;try{if(ms.transition=null,Mt=1,u)return u()}finally{Mt=_,ms.transition=v,jt=h,(jt&6)===0&&Oa()}}function cx(){qn=ec.current,Zt(ec)}function zo(u,h){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==-1&&(u.timeoutHandle=-1,KV(v)),_r!==null)for(v=_r.return;v!==null;){var _=v;switch(y0(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&Np();break;case 3:Yl(),Zt(En),Zt(sn),A0();break;case 5:P0(_);break;case 4:Yl();break;case 13:Zt(ar);break;case 19:Zt(ar);break;case 10:S0(_.type._context);break;case 22:case 23:cx()}v=v.return}if(Fr=u,_r=u=$a(u.current,null),Jr=qn=h,Or=0,bd=null,rx=Kp=Fo=0,Pn=wd=null,Do!==null){for(h=0;h<Do.length;h++)if(v=Do[h],_=v.interleaved,_!==null){v.interleaved=null;var k=_.next,T=v.pending;if(T!==null){var $=T.next;T.next=k,_.next=$}v.pending=_}Do=null}return u}function bO(u,h){do{var v=_r;try{if(j0(),Ip.current=zp,$p){for(var _=or.memoizedState;_!==null;){var k=_.queue;k!==null&&(k.pending=null),_=_.next}$p=!1}if($o=0,$r=Pr=or=null,pd=!1,md=0,tx.current=null,v===null||v.return===null){Or=1,bd=h,_r=null;break}e:{var T=u,$=v.return,X=v,ee=h;if(h=Jr,X.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var le=ee,we=X,je=we.tag;if((we.mode&1)===0&&(je===0||je===11||je===15)){var be=we.alternate;be?(we.updateQueue=be.updateQueue,we.memoizedState=be.memoizedState,we.lanes=be.lanes):(we.updateQueue=null,we.memoizedState=null)}var Re=WP($);if(Re!==null){Re.flags&=-257,HP(Re,$,X,T,h),Re.mode&1&&VP(T,le,h),h=Re,ee=le;var Fe=h.updateQueue;if(Fe===null){var ze=new Set;ze.add(ee),h.updateQueue=ze}else Fe.add(ee);break e}else{if((h&1)===0){VP(T,le,h),ux();break e}ee=Error(r(426))}}else if(rr&&X.mode&1){var xr=WP($);if(xr!==null){(xr.flags&65536)===0&&(xr.flags|=256),HP(xr,$,X,T,h),w0(Jl(ee,X));break e}}T=ee=Jl(ee,X),Or!==4&&(Or=2),wd===null?wd=[T]:wd.push(T),T=$;do{switch(T.tag){case 3:T.flags|=65536,h&=-h,T.lanes|=h;var se=UP(T,ee,h);mP(T,se);break e;case 1:X=ee;var re=T.type,oe=T.stateNode;if((T.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Ma===null||!Ma.has(oe)))){T.flags|=65536,h&=-h,T.lanes|=h;var Ce=qP(T,X,h);mP(T,Ce);break e}}T=T.return}while(T!==null)}jO(v)}catch(qe){h=qe,_r===v&&v!==null&&(_r=v=v.return);continue}break}while(!0)}function wO(){var u=Gp.current;return Gp.current=zp,u===null?zp:u}function ux(){(Or===0||Or===3||Or===2)&&(Or=4),Fr===null||(Fo&268435455)===0&&(Kp&268435455)===0||Ia(Fr,Jr)}function em(u,h){var v=jt;jt|=2;var _=wO();(Fr!==u||Jr!==h)&&(Vi=null,zo(u,h));do try{x9();break}catch(k){bO(u,k)}while(!0);if(j0(),jt=v,Gp.current=_,_r!==null)throw Error(r(261));return Fr=null,Jr=0,Or}function x9(){for(;_r!==null;)_O(_r)}function b9(){for(;_r!==null&&!Wq();)_O(_r)}function _O(u){var h=EO(u.alternate,u,qn);u.memoizedProps=u.pendingProps,h===null?jO(u):_r=h,tx.current=null}function jO(u){var h=u;do{var v=h.alternate;if(u=h.return,(h.flags&32768)===0){if(v=f9(v,h,qn),v!==null){_r=v;return}}else{if(v=h9(v,h),v!==null){v.flags&=32767,_r=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Or=6,_r=null;return}}if(h=h.sibling,h!==null){_r=h;return}_r=h=u}while(h!==null);Or===0&&(Or=5)}function Uo(u,h,v){var _=Mt,k=ms.transition;try{ms.transition=null,Mt=1,w9(u,h,v,_)}finally{ms.transition=k,Mt=_}return null}function w9(u,h,v,_){do rc();while(Ra!==null);if((jt&6)!==0)throw Error(r(327));v=u.finishedWork;var k=u.finishedLanes;if(v===null)return null;if(u.finishedWork=null,u.finishedLanes=0,v===u.current)throw Error(r(177));u.callbackNode=null,u.callbackPriority=0;var T=v.lanes|v.childLanes;if(tV(u,T),u===Fr&&(_r=Fr=null,Jr=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||Xp||(Xp=!0,CO(sp,function(){return rc(),null})),T=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||T){T=ms.transition,ms.transition=null;var $=Mt;Mt=1;var X=jt;jt|=4,tx.current=null,m9(u,v),hO(v,u),zV(u0),dp=!!c0,u0=c0=null,u.current=v,g9(v),Hq(),jt=X,Mt=$,ms.transition=T}else u.current=v;if(Xp&&(Xp=!1,Ra=u,Yp=k),T=u.pendingLanes,T===0&&(Ma=null),Zq(v.stateNode),On(u,yr()),h!==null)for(_=u.onRecoverableError,v=0;v<h.length;v++)k=h[v],_(k.value,{componentStack:k.stack,digest:k.digest});if(Zp)throw Zp=!1,u=sx,sx=null,u;return(Yp&1)!==0&&u.tag!==0&&rc(),T=u.pendingLanes,(T&1)!==0?u===ix?_d++:(_d=0,ix=u):_d=0,Oa(),null}function rc(){if(Ra!==null){var u=dk(Yp),h=ms.transition,v=Mt;try{if(ms.transition=null,Mt=16>u?16:u,Ra===null)var _=!1;else{if(u=Ra,Ra=null,Yp=0,(jt&6)!==0)throw Error(r(331));var k=jt;for(jt|=4,Ie=u.current;Ie!==null;){var T=Ie,$=T.child;if((Ie.flags&16)!==0){var X=T.deletions;if(X!==null){for(var ee=0;ee<X.length;ee++){var le=X[ee];for(Ie=le;Ie!==null;){var we=Ie;switch(we.tag){case 0:case 11:case 15:xd(8,we,T)}var je=we.child;if(je!==null)je.return=we,Ie=je;else for(;Ie!==null;){we=Ie;var be=we.sibling,Re=we.return;if(lO(we),we===le){Ie=null;break}if(be!==null){be.return=Re,Ie=be;break}Ie=Re}}}var Fe=T.alternate;if(Fe!==null){var ze=Fe.child;if(ze!==null){Fe.child=null;do{var xr=ze.sibling;ze.sibling=null,ze=xr}while(ze!==null)}}Ie=T}}if((T.subtreeFlags&2064)!==0&&$!==null)$.return=T,Ie=$;else e:for(;Ie!==null;){if(T=Ie,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:xd(9,T,T.return)}var se=T.sibling;if(se!==null){se.return=T.return,Ie=se;break e}Ie=T.return}}var re=u.current;for(Ie=re;Ie!==null;){$=Ie;var oe=$.child;if(($.subtreeFlags&2064)!==0&&oe!==null)oe.return=$,Ie=oe;else e:for($=re;Ie!==null;){if(X=Ie,(X.flags&2048)!==0)try{switch(X.tag){case 0:case 11:case 15:Hp(9,X)}}catch(qe){hr(X,X.return,qe)}if(X===$){Ie=null;break e}var Ce=X.sibling;if(Ce!==null){Ce.return=X.return,Ie=Ce;break e}Ie=X.return}}if(jt=k,Oa(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(ip,u)}catch{}_=!0}return _}finally{Mt=v,ms.transition=h}}return!1}function SO(u,h,v){h=Jl(v,h),h=UP(u,h,1),u=Ta(u,h,1),h=vn(),u!==null&&(Hu(u,1,h),On(u,h))}function hr(u,h,v){if(u.tag===3)SO(u,u,v);else for(;h!==null;){if(h.tag===3){SO(h,u,v);break}else if(h.tag===1){var _=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Ma===null||!Ma.has(_))){u=Jl(v,u),u=qP(h,u,1),h=Ta(h,u,1),u=vn(),h!==null&&(Hu(h,1,u),On(h,u));break}}h=h.return}}function _9(u,h,v){var _=u.pingCache;_!==null&&_.delete(h),h=vn(),u.pingedLanes|=u.suspendedLanes&v,Fr===u&&(Jr&v)===v&&(Or===4||Or===3&&(Jr&130023424)===Jr&&500>yr()-nx?zo(u,0):rx|=v),On(u,h)}function NO(u,h){h===0&&((u.mode&1)===0?h=1:(h=op,op<<=1,(op&130023424)===0&&(op=4194304)));var v=vn();u=zi(u,h),u!==null&&(Hu(u,h,v),On(u,v))}function j9(u){var h=u.memoizedState,v=0;h!==null&&(v=h.retryLane),NO(u,v)}function S9(u,h){var v=0;switch(u.tag){case 13:var _=u.stateNode,k=u.memoizedState;k!==null&&(v=k.retryLane);break;case 19:_=u.stateNode;break;default:throw Error(r(314))}_!==null&&_.delete(h),NO(u,v)}var EO;EO=function(u,h,v){if(u!==null)if(u.memoizedProps!==h.pendingProps||En.current)kn=!0;else{if((u.lanes&v)===0&&(h.flags&128)===0)return kn=!1,d9(u,h,v);kn=(u.flags&131072)!==0}else kn=!1,rr&&(h.flags&1048576)!==0&&iP(h,Pp,h.index);switch(h.lanes=0,h.tag){case 2:var _=h.type;Vp(u,h),u=h.pendingProps;var k=Vl(h,sn.current);Xl(h,v),k=M0(null,h,_,u,k,v);var T=R0();return h.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Cn(_)?(T=!0,Ep(h)):T=!1,h.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,C0(h),k.updater=Up,h.stateNode=k,k._reactInternals=h,z0(h,_,u,v),h=W0(null,h,_,!0,T,v)):(h.tag=0,rr&&T&&v0(h),gn(null,h,k,v),h=h.child),h;case 16:_=h.elementType;e:{switch(Vp(u,h),u=h.pendingProps,k=_._init,_=k(_._payload),h.type=_,k=h.tag=E9(_),u=Bs(_,u),k){case 0:h=V0(null,h,_,u,v);break e;case 1:h=JP(null,h,_,u,v);break e;case 11:h=GP(null,h,_,u,v);break e;case 14:h=KP(null,h,_,Bs(_.type,u),v);break e}throw Error(r(306,_,""))}return h;case 0:return _=h.type,k=h.pendingProps,k=h.elementType===_?k:Bs(_,k),V0(u,h,_,k,v);case 1:return _=h.type,k=h.pendingProps,k=h.elementType===_?k:Bs(_,k),JP(u,h,_,k,v);case 3:e:{if(QP(h),u===null)throw Error(r(387));_=h.pendingProps,T=h.memoizedState,k=T.element,pP(u,h),Rp(h,_,null,v);var $=h.memoizedState;if(_=$.element,T.isDehydrated)if(T={element:_,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},h.updateQueue.baseState=T,h.memoizedState=T,h.flags&256){k=Jl(Error(r(423)),h),h=eO(u,h,_,v,k);break e}else if(_!==k){k=Jl(Error(r(424)),h),h=eO(u,h,_,v,k);break e}else for(Un=Ca(h.stateNode.containerInfo.firstChild),zn=h,rr=!0,Fs=null,v=fP(h,null,_,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Gl(),_===k){h=qi(u,h,v);break e}gn(u,h,_,v)}h=h.child}return h;case 5:return vP(h),u===null&&b0(h),_=h.type,k=h.pendingProps,T=u!==null?u.memoizedProps:null,$=k.children,d0(_,k)?$=null:T!==null&&d0(_,T)&&(h.flags|=32),YP(u,h),gn(u,h,$,v),h.child;case 6:return u===null&&b0(h),null;case 13:return tO(u,h,v);case 4:return k0(h,h.stateNode.containerInfo),_=h.pendingProps,u===null?h.child=Kl(h,null,_,v):gn(u,h,_,v),h.child;case 11:return _=h.type,k=h.pendingProps,k=h.elementType===_?k:Bs(_,k),GP(u,h,_,k,v);case 7:return gn(u,h,h.pendingProps,v),h.child;case 8:return gn(u,h,h.pendingProps.children,v),h.child;case 12:return gn(u,h,h.pendingProps.children,v),h.child;case 10:e:{if(_=h.type._context,k=h.pendingProps,T=h.memoizedProps,$=k.value,Ut(Tp,_._currentValue),_._currentValue=$,T!==null)if($s(T.value,$)){if(T.children===k.children&&!En.current){h=qi(u,h,v);break e}}else for(T=h.child,T!==null&&(T.return=h);T!==null;){var X=T.dependencies;if(X!==null){$=T.child;for(var ee=X.firstContext;ee!==null;){if(ee.context===_){if(T.tag===1){ee=Ui(-1,v&-v),ee.tag=2;var le=T.updateQueue;if(le!==null){le=le.shared;var we=le.pending;we===null?ee.next=ee:(ee.next=we.next,we.next=ee),le.pending=ee}}T.lanes|=v,ee=T.alternate,ee!==null&&(ee.lanes|=v),N0(T.return,v,h),X.lanes|=v;break}ee=ee.next}}else if(T.tag===10)$=T.type===h.type?null:T.child;else if(T.tag===18){if($=T.return,$===null)throw Error(r(341));$.lanes|=v,X=$.alternate,X!==null&&(X.lanes|=v),N0($,v,h),$=T.sibling}else $=T.child;if($!==null)$.return=T;else for($=T;$!==null;){if($===h){$=null;break}if(T=$.sibling,T!==null){T.return=$.return,$=T;break}$=$.return}T=$}gn(u,h,k.children,v),h=h.child}return h;case 9:return k=h.type,_=h.pendingProps.children,Xl(h,v),k=hs(k),_=_(k),h.flags|=1,gn(u,h,_,v),h.child;case 14:return _=h.type,k=Bs(_,h.pendingProps),k=Bs(_.type,k),KP(u,h,_,k,v);case 15:return ZP(u,h,h.type,h.pendingProps,v);case 17:return _=h.type,k=h.pendingProps,k=h.elementType===_?k:Bs(_,k),Vp(u,h),h.tag=1,Cn(_)?(u=!0,Ep(h)):u=!1,Xl(h,v),BP(h,_,k),z0(h,_,k,v),W0(null,h,_,!0,u,v);case 19:return nO(u,h,v);case 22:return XP(u,h,v)}throw Error(r(156,h.tag))};function CO(u,h){return ak(u,h)}function N9(u,h,v,_){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(u,h,v,_){return new N9(u,h,v,_)}function dx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function E9(u){if(typeof u=="function")return dx(u)?1:0;if(u!=null){if(u=u.$$typeof,u===D)return 11;if(u===V)return 14}return 2}function $a(u,h){var v=u.alternate;return v===null?(v=gs(u.tag,h,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=h,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,h=u.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function tm(u,h,v,_,k,T){var $=2;if(_=u,typeof u=="function")dx(u)&&($=1);else if(typeof u=="string")$=5;else e:switch(u){case O:return qo(v.children,k,T,h);case L:$=8,k|=8;break;case A:return u=gs(12,v,h,k|2),u.elementType=A,u.lanes=T,u;case B:return u=gs(13,v,h,k),u.elementType=B,u.lanes=T,u;case F:return u=gs(19,v,h,k),u.elementType=F,u.lanes=T,u;case G:return rm(v,k,T,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case R:$=10;break e;case M:$=9;break e;case D:$=11;break e;case V:$=14;break e;case J:$=16,_=null;break e}throw Error(r(130,u==null?u:typeof u,""))}return h=gs($,v,h,k),h.elementType=u,h.type=_,h.lanes=T,h}function qo(u,h,v,_){return u=gs(7,u,_,h),u.lanes=v,u}function rm(u,h,v,_){return u=gs(22,u,_,h),u.elementType=G,u.lanes=v,u.stateNode={isHidden:!1},u}function fx(u,h,v){return u=gs(6,u,null,h),u.lanes=v,u}function hx(u,h,v){return h=gs(4,u.children!==null?u.children:[],u.key,h),h.lanes=v,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function C9(u,h,v,_,k){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=By(0),this.expirationTimes=By(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=By(0),this.identifierPrefix=_,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function px(u,h,v,_,k,T,$,X,ee){return u=new C9(u,h,v,X,ee),h===1?(h=1,T===!0&&(h|=8)):h=0,T=gs(3,null,null,h),u.current=T,T.stateNode=u,T.memoizedState={element:_,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},C0(T),u}function k9(u,h,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:_==null?null:""+_,children:u,containerInfo:h,implementation:v}}function kO(u){if(!u)return Pa;u=u._reactInternals;e:{if(Ao(u)!==u||u.tag!==1)throw Error(r(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Cn(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(u.tag===1){var v=u.type;if(Cn(v))return rP(u,v,h)}return h}function PO(u,h,v,_,k,T,$,X,ee){return u=px(v,_,!0,u,k,T,$,X,ee),u.context=kO(null),v=u.current,_=vn(),k=Da(v),T=Ui(_,k),T.callback=h??null,Ta(v,T,k),u.current.lanes=k,Hu(u,k,_),On(u,_),u}function nm(u,h,v,_){var k=h.current,T=vn(),$=Da(k);return v=kO(v),h.context===null?h.context=v:h.pendingContext=v,h=Ui(T,$),h.payload={element:u},_=_===void 0?null:_,_!==null&&(h.callback=_),u=Ta(k,h,$),u!==null&&(qs(u,k,$,T),Mp(u,k,$)),$}function sm(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function OO(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<h?v:h}}function mx(u,h){OO(u,h),(u=u.alternate)&&OO(u,h)}function P9(){return null}var AO=typeof reportError=="function"?reportError:function(u){console.error(u)};function gx(u){this._internalRoot=u}im.prototype.render=gx.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(r(409));nm(u,h,null,null)},im.prototype.unmount=gx.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;Bo(function(){nm(null,u,null,null)}),h[Ii]=null}};function im(u){this._internalRoot=u}im.prototype.unstable_scheduleHydration=function(u){if(u){var h=pk();u={blockedOn:null,target:u,priority:h};for(var v=0;v<Sa.length&&h!==0&&h<Sa[v].priority;v++);Sa.splice(v,0,u),v===0&&vk(u)}};function vx(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function am(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function TO(){}function O9(u,h,v,_,k){if(k){if(typeof _=="function"){var T=_;_=function(){var le=sm($);T.call(le)}}var $=PO(h,_,u,0,null,!1,!1,"",TO);return u._reactRootContainer=$,u[Ii]=$.current,ad(u.nodeType===8?u.parentNode:u),Bo(),$}for(;k=u.lastChild;)u.removeChild(k);if(typeof _=="function"){var X=_;_=function(){var le=sm(ee);X.call(le)}}var ee=px(u,0,!1,null,null,!1,!1,"",TO);return u._reactRootContainer=ee,u[Ii]=ee.current,ad(u.nodeType===8?u.parentNode:u),Bo(function(){nm(h,ee,v,_)}),ee}function om(u,h,v,_,k){var T=v._reactRootContainer;if(T){var $=T;if(typeof k=="function"){var X=k;k=function(){var ee=sm($);X.call(ee)}}nm(h,$,u,k)}else $=O9(v,h,u,k,_);return sm($)}fk=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var v=Wu(h.pendingLanes);v!==0&&(zy(h,v|1),On(h,yr()),(jt&6)===0&&(tc=yr()+500,Oa()))}break;case 13:Bo(function(){var _=zi(u,1);if(_!==null){var k=vn();qs(_,u,1,k)}}),mx(u,1)}},Uy=function(u){if(u.tag===13){var h=zi(u,134217728);if(h!==null){var v=vn();qs(h,u,134217728,v)}mx(u,134217728)}},hk=function(u){if(u.tag===13){var h=Da(u),v=zi(u,h);if(v!==null){var _=vn();qs(v,u,h,_)}mx(u,h)}},pk=function(){return Mt},mk=function(u,h){var v=Mt;try{return Mt=u,h()}finally{Mt=v}},ba=function(u,h,v){switch(h){case"input":if(St(u,v),h=v.name,v.type==="radio"&&h!=null){for(v=u;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<v.length;h++){var _=v[h];if(_!==u&&_.form===u.form){var k=Sp(_);if(!k)throw Error(r(90));ae(_),St(_,k)}}}break;case"textarea":Z(u,v);break;case"select":h=v.value,h!=null&&Tt(u,!!v.multiple,h,!1)}},Ir=lx,vr=Bo;var A9={usingClientEntryPoint:!1,Events:[cd,Ul,Sp,kr,rn,lx]},jd={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T9={bundleType:jd.bundleType,version:jd.version,rendererPackageName:jd.rendererPackageName,rendererConfig:jd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=sk(u),u===null?null:u.stateNode},findFiberByHostInstance:jd.findFiberByHostInstance||P9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{ip=lm.inject(T9),ui=lm}catch{}}return An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A9,An.createPortal=function(u,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vx(h))throw Error(r(200));return k9(u,h,null,v)},An.createRoot=function(u,h){if(!vx(u))throw Error(r(299));var v=!1,_="",k=AO;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(k=h.onRecoverableError)),h=px(u,1,!1,null,null,v,!1,_,k),u[Ii]=h.current,ad(u.nodeType===8?u.parentNode:u),new gx(h)},An.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=sk(h),u=u===null?null:u.stateNode,u},An.flushSync=function(u){return Bo(u)},An.hydrate=function(u,h,v){if(!am(h))throw Error(r(200));return om(null,u,h,!0,v)},An.hydrateRoot=function(u,h,v){if(!vx(u))throw Error(r(405));var _=v!=null&&v.hydratedSources||null,k=!1,T="",$=AO;if(v!=null&&(v.unstable_strictMode===!0&&(k=!0),v.identifierPrefix!==void 0&&(T=v.identifierPrefix),v.onRecoverableError!==void 0&&($=v.onRecoverableError)),h=PO(h,null,u,1,v??null,k,!1,T,$),u[Ii]=h.current,ad(u),_)for(u=0;u<_.length;u++)v=_[u],k=v._getVersion,k=k(v._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[v,k]:h.mutableSourceEagerHydrationData.push(v,k);return new im(h)},An.render=function(u,h,v){if(!am(h))throw Error(r(200));return om(null,u,h,!1,v)},An.unmountComponentAtNode=function(u){if(!am(u))throw Error(r(40));return u._reactRootContainer?(Bo(function(){om(null,null,u,!1,function(){u._reactRootContainer=null,u[Ii]=null})}),!0):!1},An.unstable_batchedUpdates=lx,An.unstable_renderSubtreeIntoContainer=function(u,h,v,_){if(!am(v))throw Error(r(200));if(u==null||u._reactInternals===void 0)throw Error(r(38));return om(u,h,v,!1,_)},An.version="18.3.1-next-f1338f8080-20240426",An}var BO;function f3(){if(BO)return bx.exports;BO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bx.exports=U9(),bx.exports}var zO;function q9(){if(zO)return um;zO=1;var t=f3();return um.createRoot=t.createRoot,um.hydrateRoot=t.hydrateRoot,um}var V9=q9();const W9=Pt(V9);var Js=f3();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pf(){return Pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pf.apply(this,arguments)}var ro;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ro||(ro={}));const UO="popstate";function H9(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:l}=n.location;return h1("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Gm(s)}return K9(e,r,null,t)}function dr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function h3(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function G9(){return Math.random().toString(36).substr(2,8)}function qO(t,e){return{usr:t.state,key:t.key,idx:e}}function h1(t,e,r,n){return r===void 0&&(r=null),Pf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Su(e):e,{state:r,key:e&&e.key||n||G9()})}function Gm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Su(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function K9(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=ro.Pop,c=null,d=f();d==null&&(d=0,a.replaceState(Pf({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function p(){l=ro.Pop;let x=f(),j=x==null?null:x-d;d=x,c&&c({action:l,location:b.location,delta:j})}function m(x,j){l=ro.Push;let S=h1(b.location,x,j);d=f()+1;let C=qO(S,d),E=b.createHref(S);try{a.pushState(C,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(E)}i&&c&&c({action:l,location:b.location,delta:1})}function g(x,j){l=ro.Replace;let S=h1(b.location,x,j);d=f();let C=qO(S,d),E=b.createHref(S);a.replaceState(C,"",E),i&&c&&c({action:l,location:b.location,delta:0})}function y(x){let j=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof x=="string"?x:Gm(x);return S=S.replace(/ $/,"%20"),dr(j,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,j)}let b={get action(){return l},get location(){return t(s,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(UO,p),c=x,()=>{s.removeEventListener(UO,p),c=null}},createHref(x){return e(s,x)},createURL:y,encodeLocation(x){let j=y(x);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:m,replace:g,go(x){return a.go(x)}};return b}var VO;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(VO||(VO={}));function Z9(t,e,r){return r===void 0&&(r="/"),X9(t,e,r)}function X9(t,e,r,n){let s=typeof e=="string"?Su(e):e,i=Bc(s.pathname||"/",r);if(i==null)return null;let a=p3(t);Y9(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=l7(i);l=a7(a[c],d)}return l}function p3(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(dr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=ao([n,c.relativePath]),f=r.concat(c);i.children&&i.children.length>0&&(dr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),p3(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:s7(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of m3(i.path))s(i,a,c)}),e}function m3(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=m3(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Y9(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:i7(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const J9=/^:[\w-]+$/,Q9=3,e7=2,t7=1,r7=10,n7=-2,WO=t=>t==="*";function s7(t,e){let r=t.split("/"),n=r.length;return r.some(WO)&&(n+=n7),e&&(n+=e7),r.filter(s=>!WO(s)).reduce((s,i)=>s+(J9.test(i)?Q9:i===""?t7:r7),n)}function i7(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function a7(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=p1({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:ao([i,p.pathname]),pathnameBase:f7(ao([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=ao([i,p.pathnameBase]))}return a}function p1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=o7(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,f,p)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let b=l[p]||"";a=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const y=l[p];return g&&!y?d[m]=void 0:d[m]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function o7(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),h3(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function l7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return h3(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function c7(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Su(t):t;return{pathname:r?r.startsWith("/")?r:u7(r,e):e,search:h7(n),hash:p7(s)}}function u7(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function jx(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d7(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function DN(t,e){let r=d7(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function IN(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Su(t):(s=Pf({},t),dr(!s.pathname||!s.pathname.includes("?"),jx("?","pathname","search",s)),dr(!s.pathname||!s.pathname.includes("#"),jx("#","pathname","hash",s)),dr(!s.search||!s.search.includes("#"),jx("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let p=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=c7(s,l),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const ao=t=>t.join("/").replace(/\/\/+/g,"/"),f7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),h7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,p7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function m7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const g3=["post","put","patch","delete"];new Set(g3);const g7=["get",...g3];new Set(g7);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Of.apply(this,arguments)}const Lv=w.createContext(null),v3=w.createContext(null),ha=w.createContext(null),Mv=w.createContext(null),pa=w.createContext({outlet:null,matches:[],isDataRoute:!1}),y3=w.createContext(null);function v7(t,e){let{relative:r}=e===void 0?{}:e;Nu()||dr(!1);let{basename:n,navigator:s}=w.useContext(ha),{hash:i,pathname:a,search:l}=Dv(t,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:ao([n,a])),s.createHref({pathname:c,search:l,hash:i})}function Nu(){return w.useContext(Mv)!=null}function Eu(){return Nu()||dr(!1),w.useContext(Mv).location}function x3(t){w.useContext(ha).static||w.useLayoutEffect(t)}function Rv(){let{isDataRoute:t}=w.useContext(pa);return t?T7():y7()}function y7(){Nu()||dr(!1);let t=w.useContext(Lv),{basename:e,future:r,navigator:n}=w.useContext(ha),{matches:s}=w.useContext(pa),{pathname:i}=Eu(),a=JSON.stringify(DN(s,r.v7_relativeSplatPath)),l=w.useRef(!1);return x3(()=>{l.current=!0}),w.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=IN(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ao([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,a,i,t])}const x7=w.createContext(null);function b7(t){let e=w.useContext(pa).outlet;return e&&w.createElement(x7.Provider,{value:t},e)}function Dv(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=w.useContext(ha),{matches:s}=w.useContext(pa),{pathname:i}=Eu(),a=JSON.stringify(DN(s,n.v7_relativeSplatPath));return w.useMemo(()=>IN(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function w7(t,e){return _7(t,e)}function _7(t,e,r,n){Nu()||dr(!1);let{navigator:s,static:i}=w.useContext(ha),{matches:a}=w.useContext(pa),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let f=Eu(),p;if(e){var m;let j=typeof e=="string"?Su(e):e;d==="/"||(m=j.pathname)!=null&&m.startsWith(d)||dr(!1),p=j}else p=f;let g=p.pathname||"/",y=g;if(d!=="/"){let j=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(j.length).join("/")}let b=Z9(t,{pathname:y}),x=C7(b&&b.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:ao([d,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?d:ao([d,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,r,n);return e&&x?w.createElement(Mv.Provider,{value:{location:Of({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ro.Pop}},x):x}function j7(){let t=A7(),e=m7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),r?w.createElement("pre",{style:s},r):null,null)}const S7=w.createElement(j7,null);class N7 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?w.createElement(pa.Provider,{value:this.props.routeContext},w.createElement(y3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E7(t){let{routeContext:e,match:r,children:n}=t,s=w.useContext(Lv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(pa.Provider,{value:e},n)}function C7(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);f>=0||dr(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:g}=r,y=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||y){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,m)=>{let g,y=!1,b=null,x=null;r&&(g=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||S7,c&&(d<0&&m===0?(L7("route-fallback"),y=!0,x=null):d===m&&(y=!0,x=p.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,m+1)),S=()=>{let C;return g?C=b:y?C=x:p.route.Component?C=w.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=f,w.createElement(E7,{match:p,routeContext:{outlet:f,matches:j,isDataRoute:r!=null},children:C})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?w.createElement(N7,{location:r.location,revalidation:r.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):S()},null)}var b3=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(b3||{}),w3=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(w3||{});function k7(t){let e=w.useContext(Lv);return e||dr(!1),e}function P7(t){let e=w.useContext(v3);return e||dr(!1),e}function O7(t){let e=w.useContext(pa);return e||dr(!1),e}function _3(t){let e=O7(),r=e.matches[e.matches.length-1];return r.route.id||dr(!1),r.route.id}function A7(){var t;let e=w.useContext(y3),r=P7(),n=_3();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function T7(){let{router:t}=k7(b3.UseNavigateStable),e=_3(w3.UseNavigateStable),r=w.useRef(!1);return x3(()=>{r.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Of({fromRouteId:e},i)))},[t,e])}const HO={};function L7(t,e,r){HO[t]||(HO[t]=!0)}function M7(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Km(t){let{to:e,replace:r,state:n,relative:s}=t;Nu()||dr(!1);let{future:i,static:a}=w.useContext(ha),{matches:l}=w.useContext(pa),{pathname:c}=Eu(),d=Rv(),f=IN(e,DN(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(f);return w.useEffect(()=>d(JSON.parse(p),{replace:r,state:n,relative:s}),[d,p,s,r,n]),null}function j3(t){return b7(t.context)}function jr(t){dr(!1)}function R7(t){let{basename:e="/",children:r=null,location:n,navigationType:s=ro.Pop,navigator:i,static:a=!1,future:l}=t;Nu()&&dr(!1);let c=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:a,future:Of({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Su(n));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:y="default"}=n,b=w.useMemo(()=>{let x=Bc(f,c);return x==null?null:{location:{pathname:x,search:p,hash:m,state:g,key:y},navigationType:s}},[c,f,p,m,g,y,s]);return b==null?null:w.createElement(ha.Provider,{value:d},w.createElement(Mv.Provider,{children:r,value:b}))}function D7(t){let{children:e,location:r}=t;return w7(m1(e),r)}new Promise(()=>{});function m1(t,e){e===void 0&&(e=[]);let r=[];return w.Children.forEach(t,(n,s)=>{if(!w.isValidElement(n))return;let i=[...e,s];if(n.type===w.Fragment){r.push.apply(r,m1(n.props.children,i));return}n.type!==jr&&dr(!1),!n.props.index||!n.props.children||dr(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=m1(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zm(){return Zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zm.apply(this,arguments)}function S3(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function I7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $7(t,e){return t.button===0&&(!e||e==="_self")&&!I7(t)}const F7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],B7=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],z7="6";try{window.__reactRouterVersion=z7}catch{}const U7=w.createContext({isTransitioning:!1}),q7="startTransition",GO=F9[q7];function V7(t){let{basename:e,children:r,future:n,window:s}=t,i=w.useRef();i.current==null&&(i.current=H9({window:s,v5Compat:!0}));let a=i.current,[l,c]=w.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},f=w.useCallback(p=>{d&&GO?GO(()=>c(p)):c(p)},[c,d]);return w.useLayoutEffect(()=>a.listen(f),[a,f]),w.useEffect(()=>M7(n),[n]),w.createElement(R7,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const W7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g1=w.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:f,viewTransition:p}=e,m=S3(e,F7),{basename:g}=w.useContext(ha),y,b=!1;if(typeof d=="string"&&H7.test(d)&&(y=d,W7))try{let C=new URL(window.location.href),E=d.startsWith("//")?new URL(C.protocol+d):new URL(d),N=Bc(E.pathname,g);E.origin===C.origin&&N!=null?d=N+E.search+E.hash:b=!0}catch{}let x=v7(d,{relative:s}),j=K7(d,{replace:a,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:p});function S(C){n&&n(C),C.defaultPrevented||j(C)}return w.createElement("a",Zm({},m,{href:y||x,onClick:b||i?n:S,ref:r,target:c}))}),KO=w.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:f}=e,p=S3(e,B7),m=Dv(c,{relative:p.relative}),g=Eu(),y=w.useContext(v3),{navigator:b,basename:x}=w.useContext(ha),j=y!=null&&Z7(m)&&d===!0,S=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,C=g.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(C=C.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&x&&(E=Bc(E,x)||E);const N=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let P=C===S||!a&&C.startsWith(S)&&C.charAt(N)==="/",O=E!=null&&(E===S||!a&&E.startsWith(S)&&E.charAt(S.length)==="/"),L={isActive:P,isPending:O,isTransitioning:j},A=P?n:void 0,R;typeof i=="function"?R=i(L):R=[i,P?"active":null,O?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(L):l;return w.createElement(g1,Zm({},p,{"aria-current":A,className:R,ref:r,style:M,to:c,viewTransition:d}),typeof f=="function"?f(L):f)});var v1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(v1||(v1={}));var ZO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ZO||(ZO={}));function G7(t){let e=w.useContext(Lv);return e||dr(!1),e}function K7(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=Rv(),d=Eu(),f=Dv(t,{relative:a});return w.useCallback(p=>{if($7(p,r)){p.preventDefault();let m=n!==void 0?n:Gm(d)===Gm(f);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,f,n,s,r,t,i,a,l])}function Z7(t,e){e===void 0&&(e={});let r=w.useContext(U7);r==null&&dr(!1);let{basename:n}=G7(v1.useViewTransitionState),s=Dv(t,{relative:e.relative});if(!r.isTransitioning)return!1;let i=Bc(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Bc(r.nextLocation.pathname,n)||r.nextLocation.pathname;return p1(s.pathname,a)!=null||p1(s.pathname,i)!=null}const X7={},XO=t=>{let e;const r=new Set,n=(f,p)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const g=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(y=>y(e,g))}},s=()=>e,c={setState:n,getState:s,getInitialState:()=>d,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>{(X7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=e=t(n,s,c);return c},Y7=t=>t?XO(t):XO;var Sx={exports:{}},Nx={},Ex={exports:{}},Cx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YO;function J7(){if(YO)return Cx;YO=1;var t=Ih();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function l(p,m){var g=m(),y=n({inst:{value:g,getSnapshot:m}}),b=y[0].inst,x=y[1];return i(function(){b.value=g,b.getSnapshot=m,c(b)&&x({inst:b})},[p,g,m]),s(function(){return c(b)&&x({inst:b}),p(function(){c(b)&&x({inst:b})})},[p]),a(g),g}function c(p){var m=p.getSnapshot;p=p.value;try{var g=m();return!r(p,g)}catch{return!0}}function d(p,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return Cx.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,Cx}var JO;function Q7(){return JO||(JO=1,Ex.exports=J7()),Ex.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QO;function eW(){if(QO)return Nx;QO=1;var t=Ih(),e=Q7();function r(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,i=t.useRef,a=t.useEffect,l=t.useMemo,c=t.useDebugValue;return Nx.useSyncExternalStoreWithSelector=function(d,f,p,m,g){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=l(function(){function j(P){if(!S){if(S=!0,C=P,P=m(P),g!==void 0&&b.hasValue){var O=b.value;if(g(O,P))return E=O}return E=P}if(O=E,n(C,P))return O;var L=m(P);return g!==void 0&&g(O,L)?(C=P,O):(C=P,E=L)}var S=!1,C,E,N=p===void 0?null:p;return[function(){return j(f())},N===null?void 0:function(){return j(N())}]},[f,p,m,g]);var x=s(d,y[0],y[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),c(x),x},Nx}var eA;function tW(){return eA||(eA=1,Sx.exports=eW()),Sx.exports}var rW=tW();const nW=Pt(rW),N3={},{useDebugValue:sW}=z,{useSyncExternalStoreWithSelector:iW}=nW;let tA=!1;const aW=t=>t;function oW(t,e=aW,r){(N3?"production":void 0)!=="production"&&r&&!tA&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),tA=!0);const n=iW(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return sW(n),n}const rA=t=>{(N3?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Y7(t):t,r=(n,s)=>oW(e,n,s);return Object.assign(r,e),r},as=t=>t?rA(t):rA,kx={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VERSION:"1.3.1",VITE_FASTAPI_URL:"https://api.provence-courses.fr",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyCu30a3EW9XpAmlucgPlh2D9hVLg3lUHd0",VITE_ROUTE_API_TOKEN:"24RL81GbfyGDsyWSIgkih0M3HGoPVVnw0g-FIKbZ5CA",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFrbWljZW1jZ29oZmxvbGVtYmJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyMzQ3MDMsImV4cCI6MjA2MTgxMDcwM30.CsxmVgBJDY0OOKEcLmuR3_42JDoQcEY9-gFKBmgpJp4",VITE_SUPABASE_URL:"https://akmicemcgohflolembbb.supabase.co"},y1=new Map,dm=t=>{const e=y1.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([r,n])=>[r,n.getState()])):{}},lW=(t,e,r)=>{if(t===void 0)return{type:"untracked",connection:e.connect(r)};const n=y1.get(r.name);if(n)return{type:"tracked",store:t,...n};const s={connection:e.connect(r),stores:{}};return y1.set(r.name,s),{type:"tracked",store:t,...s}},cW=(t,e={})=>(r,n,s)=>{const{enabled:i,anonymousActionType:a,store:l,...c}=e;let d;try{d=(i??(kx?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return(kx?"production":void 0)!=="production"&&i&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(r,n,s);const{connection:f,...p}=lW(l,d,c);let m=!0;s.setState=(b,x,j)=>{const S=r(b,x);if(!m)return S;const C=j===void 0?{type:a||"anonymous"}:typeof j=="string"?{type:j}:j;return l===void 0?(f?.send(C,n()),S):(f?.send({...C,type:`${l}/${C.type}`},{...dm(c.name),[l]:s.getState()}),S)};const g=(...b)=>{const x=m;m=!1,r(...b),m=x},y=t(s.setState,n,s);if(p.type==="untracked"?f?.init(y):(p.stores[p.store]=s,f?.init(Object.fromEntries(Object.entries(p.stores).map(([b,x])=>[b,b===p.store?y:x.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let b=!1;const x=s.dispatch;s.dispatch=(...j)=>{(kx?"production":void 0)!=="production"&&j[0].type==="__setState"&&!b&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),b=!0),x(...j)}}return f.subscribe(b=>{var x;switch(b.type){case"ACTION":if(typeof b.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Px(b.payload,j=>{if(j.type==="__setState"){if(l===void 0){g(j.state);return}Object.keys(j.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const S=j.state[l];if(S==null)return;JSON.stringify(s.getState())!==JSON.stringify(S)&&g(S);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(j)});case"DISPATCH":switch(b.payload.type){case"RESET":return g(y),l===void 0?f?.init(s.getState()):f?.init(dm(c.name));case"COMMIT":if(l===void 0){f?.init(s.getState());return}return f?.init(dm(c.name));case"ROLLBACK":return Px(b.state,j=>{if(l===void 0){g(j),f?.init(s.getState());return}g(j[l]),f?.init(dm(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Px(b.state,j=>{if(l===void 0){g(j);return}JSON.stringify(s.getState())!==JSON.stringify(j[l])&&g(j[l])});case"IMPORT_STATE":{const{nextLiftedState:j}=b.payload,S=(x=j.computedStates.slice(-1)[0])==null?void 0:x.state;if(!S)return;g(l===void 0?S:S[l]),f?.send(null,j);return}case"PAUSE_RECORDING":return m=!m}return}}),y},uW=cW,Px=(t,e)=>{let r;try{r=JSON.parse(t)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&e(r)},dW="modulepreload",fW=function(t){return"/"+t},nA={},Ci=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=c(r.map(d=>{if(d=fW(d),d in nA)return;nA[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":dW,f||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((g,y)=>{m.addEventListener("load",g),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},hW=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ci(async()=>{const{default:n}=await Promise.resolve().then(()=>Cu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class $N extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class pW extends $N{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mW extends $N{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gW extends $N{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var x1;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(x1||(x1={}));var vW=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{d(n.next(f))}catch(p){a(p)}}function c(f){try{d(n.throw(f))}catch(p){a(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class yW{constructor(e,{headers:r={},customFetch:n,region:s=x1.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=hW(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return vW(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const f=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(y=>{throw new pW(y)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new mW(f);if(!f.ok)throw new gW(f);let m=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield f.json():m==="application/octet-stream"?g=yield f.blob():m==="text/event-stream"?g=f:m==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var zr={},nc={},sc={},ic={},ac={},oc={},xW=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zc=xW();const bW=zc.fetch,E3=zc.fetch.bind(zc),C3=zc.Headers,wW=zc.Request,_W=zc.Response,Cu=Object.freeze(Object.defineProperty({__proto__:null,Headers:C3,Request:wW,Response:_W,default:E3,fetch:bW},Symbol.toStringTag,{value:"Module"})),jW=R9(Cu);var fm={},sA;function k3(){if(sA)return fm;sA=1,Object.defineProperty(fm,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return fm.default=t,fm}var iA;function P3(){if(iA)return oc;iA=1;var t=oc&&oc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(oc,"__esModule",{value:!0});const e=t(jW),r=t(k3());class n{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var f,p,m;let g=null,y=null,b=null,x=d.status,j=d.statusText;if(d.ok){if(this.method!=="HEAD"){const N=await d.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=N:y=JSON.parse(N))}const C=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),E=(p=d.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");C&&E&&E.length>1&&(b=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(g={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,b=null,x=406,j="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const C=await d.text();try{g=JSON.parse(C),Array.isArray(g)&&d.status===404&&(y=[],g=null,x=200,j="OK")}catch{d.status===404&&C===""?(x=204,j="No Content"):g={message:C}}if(g&&this.isMaybeSingle&&(!((m=g?.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,x=200,j="OK"),g&&this.shouldThrowOnError)throw new r.default(g)}return{error:g,data:y,count:b,status:x,statusText:j}});return this.shouldThrowOnError||(c=c.catch(d=>{var f,p,m;return{error:{message:`${(f=d?.name)!==null&&f!==void 0?f:"FetchError"}: ${d?.message}`,details:`${(p=d?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(m=d?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,a)}returns(){return this}overrideTypes(){return this}}return oc.default=n,oc}var aA;function O3(){if(aA)return ac;aA=1;var t=ac&&ac.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ac,"__esModule",{value:!0});const e=t(P3());class r extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(d,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,a?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${m}"; options=${p};`,d==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return ac.default=r,ac}var oA;function FN(){if(oA)return ic;oA=1;var t=ic&&ic.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ic,"__esModule",{value:!0});const e=t(O3());class r extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${c}fts${d}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return ic.default=r,ic}var lA;function A3(){if(lA)return sc;lA=1;var t=sc&&sc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sc,"__esModule",{value:!0});const e=t(FN());class r{constructor(s,{headers:i={},schema:a,fetch:l}){this.url=s,this.headers=i,this.schema=a,this.fetch=l}select(s,{head:i=!1,count:a}={}){const l=i?"HEAD":"GET";let c=!1;const d=(s??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:a=!0}={}){const l="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const d=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:l,defaultToNull:c=!0}={}){const d="POST",f=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&f.push(this.headers.Prefer),l&&f.push(`count=${l}`),c||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(s)){const p=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const a="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",a=[];return s&&a.push(`count=${s}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return sc.default=r,sc}var Nd={},Ed={},cA;function SW(){return cA||(cA=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.version=void 0,Ed.version="0.0.0-automated"),Ed}var uA;function NW(){if(uA)return Nd;uA=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.DEFAULT_HEADERS=void 0;const t=SW();return Nd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Nd}var dA;function EW(){if(dA)return nc;dA=1;var t=nc&&nc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(nc,"__esModule",{value:!0});const e=t(A3()),r=t(FN()),n=NW();class s{constructor(a,{headers:l={},schema:c,fetch:d}={}){this.url=a,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),l),this.schemaName=c,this.fetch=d}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:c=!1,get:d=!1,count:f}={}){let p;const m=new URL(`${this.url}/rpc/${a}`);let g;c||d?(p=c?"HEAD":"GET",Object.entries(l).filter(([b,x])=>x!==void 0).map(([b,x])=>[b,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([b,x])=>{m.searchParams.append(b,x)})):(p="POST",g=l);const y=Object.assign({},this.headers);return f&&(y.Prefer=`count=${f}`),new r.default({method:p,url:m,headers:y,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return nc.default=s,nc}var fA;function CW(){if(fA)return zr;fA=1;var t=zr&&zr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(zr,"__esModule",{value:!0}),zr.PostgrestError=zr.PostgrestBuilder=zr.PostgrestTransformBuilder=zr.PostgrestFilterBuilder=zr.PostgrestQueryBuilder=zr.PostgrestClient=void 0;const e=t(EW());zr.PostgrestClient=e.default;const r=t(A3());zr.PostgrestQueryBuilder=r.default;const n=t(FN());zr.PostgrestFilterBuilder=n.default;const s=t(O3());zr.PostgrestTransformBuilder=s.default;const i=t(P3());zr.PostgrestBuilder=i.default;const a=t(k3());return zr.PostgrestError=a.default,zr.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},zr}var kW=CW();const PW=Pt(kW),{PostgrestClient:OW,PostgrestQueryBuilder:oNe,PostgrestFilterBuilder:lNe,PostgrestTransformBuilder:cNe,PostgrestBuilder:uNe,PostgrestError:dNe}=PW,AW="2.11.2",TW={"X-Client-Info":`realtime-js/${AW}`},LW="1.0.0",T3=1e4,MW=1e3;var Pc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pc||(Pc={}));var Wn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Wn||(Wn={}));var Hs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Hs||(Hs={}));var b1;(function(t){t.websocket="websocket"})(b1||(b1={}));var tl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(tl||(tl={}));class RW{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+s));a=a+s;const c=n.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}let L3=class{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var qt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(qt||(qt={}));const hA=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=DW(a,t,e,s),i),{})},DW=(t,e,r,n)=>{const s=e.find(l=>l.name===t),i=s?.type,a=r[t];return i&&!n.includes(i)?M3(i,a):w1(a)},M3=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return BW(e,r)}switch(t){case qt.bool:return IW(e);case qt.float4:case qt.float8:case qt.int2:case qt.int4:case qt.int8:case qt.numeric:case qt.oid:return $W(e);case qt.json:case qt.jsonb:return FW(e);case qt.timestamp:return zW(e);case qt.abstime:case qt.date:case qt.daterange:case qt.int4range:case qt.int8range:case qt.money:case qt.reltime:case qt.text:case qt.time:case qt.timestamptz:case qt.timetz:case qt.tsrange:case qt.tstzrange:return w1(e);default:return w1(e)}},w1=t=>t,IW=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$W=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},FW=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},BW=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>M3(e,l))}return t},zW=t=>typeof t=="string"?t.replace(" ","T"):t,R3=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ox{constructor(e,r,n={},s=T3){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pA;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(pA||(pA={}));class rf{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rf.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=rf.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=rf.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),l={},c={};return this.map(i,(d,f)=>{a[d]||(c[d]=f)}),this.map(a,(d,f)=>{const p=i[d];if(p){const m=f.map(x=>x.presence_ref),g=p.map(x=>x.presence_ref),y=f.filter(x=>g.indexOf(x.presence_ref)<0),b=p.filter(x=>m.indexOf(x.presence_ref)<0);y.length>0&&(l[d]=y),b.length>0&&(c[d]=b)}else l[d]=f}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var d;const f=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),f.length>0){const p=e[l].map(g=>g.presence_ref),m=f.filter(g=>p.indexOf(g.presence_ref)<0);e[l].unshift(...m)}n(l,f,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const f=c.map(p=>p.presence_ref);d=d.filter(p=>f.indexOf(p.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mA;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(mA||(mA={}));var gA;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(gA||(gA={}));var Xi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Xi||(Xi={}));class BN{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ox(this,Hs.join,this.params,this.timeout),this.rejoinTimer=new L3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hs.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new rf(this),this.broadcastEndpointURL=R3(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(f=>e?.(Xi.CHANNEL_ERROR,f)),this._onClose(()=>e?.(Xi.CLOSED));const c={},d={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){e?.(Xi.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(p=m?.length)!==null&&p!==void 0?p:0,y=[];for(let b=0;b<g;b++){const x=m[b],{filter:{event:j,schema:S,table:C,filter:E}}=x,N=f&&f[b];if(N&&N.event===j&&N.schema===S&&N.table===C&&N.filter===E)y.push(Object.assign(Object.assign({},x),{id:N.id}));else{this.unsubscribe(),e?.(Xi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Xi.SUBSCRIBED);return}}).receive("error",f=>{e?.(Xi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(Xi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hs.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new Ox(this,Hs.leave,{},e);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ox(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:f}=Hs;if(n&&[l,c,d,f].indexOf(a)>=0&&n!==this._joinRef())return;let m=this._onMessage(a,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var y,b,x;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((x=(b=g.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(g=>g.callback(m,n)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var y,b,x,j,S,C;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const E=g.id,N=(y=g.filter)===null||y===void 0?void 0:y.event;return E&&((b=r.ids)===null||b===void 0?void 0:b.includes(E))&&(N==="*"||N?.toLocaleLowerCase()===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const E=(S=(j=g?.filter)===null||j===void 0?void 0:j.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return E==="*"||E===((C=r?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:b,table:x,commit_timestamp:j,type:S,errors:C}=y;m=Object.assign(Object.assign({},{schema:b,table:x,commit_timestamp:j,eventType:S,new:{},old:{},errors:C}),this._getPayloadRecords(y))}g.callback(m,n)})}_isClosed(){return this.state===Wn.closed}_isJoined(){return this.state===Wn.joined}_isJoining(){return this.state===Wn.joining}_isLeaving(){return this.state===Wn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&BN.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hs.close,{},e)}_onError(e){this._on(Hs.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=hA(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=hA(e.columns,e.old_record)),r}}const UW=()=>{},qW=typeof WebSocket<"u",VW=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class WW{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=TW,this.params={},this.timeout=T3,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=UW,this.conn=null,this.sendBuffer=[],this.serializer=new RW,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Ci(async()=>{const{default:c}=await Promise.resolve().then(()=>Cu);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${b1.websocket}`,this.httpEndpoint=R3(e),r?.transport?this.transport=r.transport:this.transport=null,r?.params&&(this.params=r.params),r?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r?.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r?.encode?r.encode:(i,a)=>a(JSON.stringify(i)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new L3(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch),r?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=r?.worker||!1,this.workerUrl=r?.workerUrl}this.accessToken=r?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(qW){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new HW(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ci(async()=>{const{default:e}=await import("./browser-D7Bhhac_.js").then(r=>r.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:LW}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pc.connecting:return tl.Connecting;case Pc.open:return tl.Open;case Pc.closing:return tl.Closing;default:return tl.Closed}}isConnected(){return this.connectionState()===tl.Open}channel(e,r={config:{}}){const n=new BN(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r}),s.joinedOnce&&s._isJoined()&&s._push(Hs.access_token,{access_token:r})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(MW,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:i,ref:a}=r;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hs.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([VW],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class HW{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Pc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class zN extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class GW extends zN{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _1 extends zN{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var KW=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{d(n.next(f))}catch(p){a(p)}}function c(f){try{d(n.throw(f))}catch(p){a(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const D3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ci(async()=>{const{default:n}=await Promise.resolve().then(()=>Cu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ZW=()=>KW(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ci(()=>Promise.resolve().then(()=>Cu),void 0)).Response:Response}),j1=t=>{if(Array.isArray(t))return t.map(r=>j1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=j1(n)}),e};var Cl=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{d(n.next(f))}catch(p){a(p)}}function c(f){try{d(n.throw(f))}catch(p){a(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Ax=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),XW=(t,e,r)=>Cl(void 0,void 0,void 0,function*(){const n=yield ZW();t instanceof n&&!r?.noResolveJson?t.json().then(s=>{e(new GW(Ax(s),t.status||500))}).catch(s=>{e(new _1(Ax(s),s))}):e(new _1(Ax(t),t))}),YW=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function $h(t,e,r,n,s,i){return Cl(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(r,YW(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>XW(c,l,n))})})}function Xm(t,e,r,n){return Cl(this,void 0,void 0,function*(){return $h(t,"GET",e,r,n)})}function Ka(t,e,r,n,s){return Cl(this,void 0,void 0,function*(){return $h(t,"POST",e,n,s,r)})}function JW(t,e,r,n,s){return Cl(this,void 0,void 0,function*(){return $h(t,"PUT",e,n,s,r)})}function QW(t,e,r,n){return Cl(this,void 0,void 0,function*(){return $h(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function I3(t,e,r,n,s){return Cl(this,void 0,void 0,function*(){return $h(t,"DELETE",e,n,s,r)})}var Tn=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{d(n.next(f))}catch(p){a(p)}}function c(f){try{d(n.throw(f))}catch(p){a(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const eH={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tH{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=D3(s)}uploadOrUpdate(e,r,n,s){return Tn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},vA),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s?.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(r),f=this._getFinalPath(d),p=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:e,body:i,headers:l},a?.duplex?{duplex:a.duplex}:{})),m=yield p.json();return p.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(qr(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Tn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Tn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:vA.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const p=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),m=yield p.json();return p.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(qr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Tn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r?.upsert&&(s["x-upsert"]="true");const i=yield Ka(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new zN("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}update(e,r,n){return Tn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Tn(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Tn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ka(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Tn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ka(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Tn(this,void 0,void 0,function*(){try{const s=yield Ka(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}download(e,r){return Tn(this,void 0,void 0,function*(){const s=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Xm(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(qr(l))return{data:null,error:l};throw l}})}info(e){return Tn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Xm(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:j1(n),error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}exists(e){return Tn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield QW(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(qr(n)&&n instanceof _1){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return Tn(this,void 0,void 0,function*(){try{return{data:yield I3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(qr(r))return{data:null,error:r};throw r}})}list(e,r,n){return Tn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},eH),r),{prefix:e||""});return{data:yield Ka(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(qr(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const rH="2.7.1",nH={"X-Client-Info":`storage-js/${rH}`};var lc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{d(n.next(f))}catch(p){a(p)}}function c(f){try{d(n.throw(f))}catch(p){a(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class sH{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},nH),r),this.fetch=D3(n)}listBuckets(){return lc(this,void 0,void 0,function*(){try{return{data:yield Xm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(qr(e))return{data:null,error:e};throw e}})}getBucket(e){return lc(this,void 0,void 0,function*(){try{return{data:yield Xm(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(qr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return lc(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return lc(this,void 0,void 0,function*(){try{return{data:yield JW(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(qr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return lc(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(qr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return lc(this,void 0,void 0,function*(){try{return{data:yield I3(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(qr(r))return{data:null,error:r};throw r}})}}class iH extends sH{constructor(e,r={},n){super(e,r,n)}from(e){return new tH(this.url,this.headers,e,this.fetch)}}const aH="2.49.4";let Wd="";typeof Deno<"u"?Wd="deno":typeof document<"u"?Wd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wd="react-native":Wd="node";const oH={"X-Client-Info":`supabase-js-${Wd}/${aH}`},lH={headers:oH},cH={schema:"public"},uH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dH={};var fH=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{d(n.next(f))}catch(p){a(p)}}function c(f){try{d(n.throw(f))}catch(p){a(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const hH=t=>{let e;return t?e=t:typeof fetch>"u"?e=E3:e=fetch,(...r)=>e(...r)},pH=()=>typeof Headers>"u"?C3:Headers,mH=(t,e,r)=>{const n=hH(r),s=pH();return(i,a)=>fH(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new s(a?.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:d}))})};var gH=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{d(n.next(f))}catch(p){a(p)}}function c(f){try{d(n.throw(f))}catch(p){a(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function vH(t){return t.replace(/\/$/,"")}function yH(t,e){const{db:r,auth:n,realtime:s,global:i}=t,{db:a,auth:l,realtime:c,global:d}=e,f={db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},d),i),accessToken:()=>gH(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const $3="2.69.1",gc=30*1e3,S1=3,Tx=S1*gc,xH="http://localhost:9999",bH="supabase.auth.token",wH={"X-Client-Info":`gotrue-js/${$3}`},N1="X-Supabase-Api-Version",F3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_H=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jH=6e5;class UN extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ct(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class SH extends UN{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function NH(t){return ct(t)&&t.name==="AuthApiError"}class B3 extends UN{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class _o extends UN{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Ua extends _o{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function EH(t){return ct(t)&&t.name==="AuthSessionMissingError"}class Lx extends _o{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hm extends _o{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pm extends _o{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CH(t){return ct(t)&&t.name==="AuthImplicitGrantRedirectError"}class yA extends _o{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class E1 extends _o{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Mx(t){return ct(t)&&t.name==="AuthRetryableFetchError"}class xA extends _o{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class nf extends _o{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wA=` 	
\r=`.split(""),kH=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wA.length;e+=1)t[wA[e].charCodeAt(0)]=-2;for(let e=0;e<bA.length;e+=1)t[bA[e].charCodeAt(0)]=e;return t})();function z3(t,e,r){const n=kH[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function _A(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{AH(a,n,r)};for(let a=0;a<t.length;a+=1)z3(t.charCodeAt(a),s,i);return e.join("")}function PH(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function OH(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}PH(n,e)}}function AH(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function TH(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)z3(t.charCodeAt(s),r,n);return new Uint8Array(e)}function LH(t){const e=[];return OH(t,r=>e.push(r)),new Uint8Array(e)}function MH(t){return Math.round(Date.now()/1e3)+t}function RH(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const gi=()=>typeof window<"u"&&typeof document<"u",Vo={tested:!1,writable:!1},sf=()=>{if(!gi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vo.tested)return Vo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Vo.tested=!0,Vo.writable=!0}catch{Vo.tested=!0,Vo.writable=!1}return Vo.writable};function DH(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const U3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ci(async()=>{const{default:n}=await Promise.resolve().then(()=>Cu);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},IH=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",q3=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},mm=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},gm=async(t,e)=>{await t.removeItem(e)};class Iv{constructor(){this.promise=new Iv.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Iv.promiseConstructor=Promise;function Rx(t){const e=t.split(".");if(e.length!==3)throw new nf("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!_H.test(e[n]))throw new nf("JWT not in base64url format");return{header:JSON.parse(_A(e[0])),payload:JSON.parse(_A(e[1])),signature:TH(e[2]),raw:{header:e[0],payload:e[1]}}}async function $H(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function FH(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function BH(t){return("0"+t.toString(16)).substr(-2)}function zH(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,BH).join("")}async function UH(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function qH(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await UH(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function cc(t,e,r=!1){const n=zH();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await q3(t,`${e}-code-verifier`,s);const i=await qH(n);return[i,n===i?"plain":"s256"]}const VH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function WH(t){const e=t.headers.get(N1);if(!e||!e.match(VH))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function HH(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function GH(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var KH=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Xo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ZH=[502,503,504];async function jA(t){var e;if(!IH(t))throw new E1(Xo(t),0);if(ZH.includes(t.status))throw new E1(Xo(t),t.status);let r;try{r=await t.json()}catch(i){throw new B3(Xo(i),i)}let n;const s=WH(t);if(s&&s.getTime()>=F3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new xA(Xo(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ua}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new xA(Xo(r),t.status,r.weak_password.reasons);throw new SH(Xo(r),t.status||500,n)}const XH=(t,e,r,n)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function xt(t,e,r,n){var s;const i=Object.assign({},n?.headers);i[N1]||(i[N1]=F3["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await YH(t,e,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function YH(t,e,r,n,s,i){const a=XH(e,n,s,i);let l;try{l=await t(r,Object.assign({},a))}catch(c){throw console.error(c),new E1(Xo(c),0)}if(l.ok||await jA(l),n?.noResolveJson)return l;try{return await l.json()}catch(c){await jA(c)}}function qa(t){var e;let r=null;tG(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=MH(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function SA(t){const e=qa(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ja(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function JH(t){return{data:t,error:null}}function QH(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=KH(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function eG(t){return t}function tG(t){return t.access_token&&t.refresh_token&&t.expires_in}var rG=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class nG{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=U3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await xt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ja})}catch(n){if(ct(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=rG(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:QH,redirectTo:r?.redirectTo})}catch(r){if(ct(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await xt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ja})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},f=await xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:eG});if(f.error)throw f.error;const p=await f.json(),m=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);d[`${x}Page`]=b}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(ct(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await xt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ja})}catch(r){if(ct(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await xt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ja})}catch(n){if(ct(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await xt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ja})}catch(n){if(ct(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await xt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ct(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await xt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}}}const sG={getItem:t=>sf()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{sf()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{sf()&&globalThis.localStorage.removeItem(t)}};function NA(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function iG(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const uc={debug:!!(globalThis&&sf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class V3 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class aG extends V3{}async function oG(t,e,r){uc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),uc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){uc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{uc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw uc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new aG(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(uc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}iG();const lG={url:xH,storageKey:bH,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wH,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function EA(t,e,r){return await r()}class Af{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Af.nextInstanceID,Af.nextInstanceID+=1,this.instanceID>0&&gi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},lG),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new nG({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=U3(s.fetch),this.lock=s.lock||EA,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:gi()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=oG:this.lock=EA,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:sf()?this.storage=sG:(this.memoryStorage={},this.storage=NA(this.memoryStorage)):(this.memoryStorage={},this.storage=NA(this.memoryStorage)),gi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$3}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=DH(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),gi()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),CH(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ct(r)?{error:r}:{error:new B3("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:qa}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ct(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:f,password:p,options:m}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await cc(this.storage,this.storageKey)),i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:f,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:y},xform:qa})}else if("phone"in e){const{phone:f,password:p,options:m}=e;i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=m?.data)!==null&&n!==void 0?n:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:qa})}else throw new hm("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ct(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:l}=e;r=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:SA})}else if("phone"in e){const{phone:i,password:a,options:l}=e;r=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:SA})}else throw new hm("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Lx}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ct(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await mm(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qa});if(await gm(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Lx}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(ct(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,l=await xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:qa}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Lx}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(ct(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await cc(this.storage,this.storageKey));const{error:p}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:f}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:f}}throw new hm("You must provide either an email or phone number.")}catch(l){if(ct(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:qa});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(ct(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await cc(this.storage,this.storageKey)),await xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:JH})}catch(i){if(ct(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ua;const{error:s}=await xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ct(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await xt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:l}=await xt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new hm("You must provide either an email or phone number and a type")}catch(r){if(ct(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await mm(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Tx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,f)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ja}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ua}:await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ja})})}catch(r){if(ct(r))return EH(r)&&(await this._removeSession(),await gm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ua;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await cc(this.storage,this.storageKey));const{data:d,error:f}=await xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Ja});if(f)throw f;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(ct(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ua;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Rx(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ct(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:l}=r;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Ua;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ct(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!gi())throw new pm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new yA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yA("No code detected.");const{data:S,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!a||!d)throw new pm("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(l);let m=f+p;c&&(m=parseInt(c));const g=m-f;g*1e3<=gc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const y=m-p;f-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,f):f-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,f);const{data:b,error:x}=await this._getUser(i);if(x)throw x;const j={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:m,refresh_token:a,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:e.type},error:null}}catch(n){if(ct(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await mm(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(NH(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await gm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=RH(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await cc(this.storage,this.storageKey,!0));try{return await xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ct(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,d,f;const{data:p,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await xt(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return gi()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(ct(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await xt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ct(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await FH(async s=>(s>0&&await $H(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qa})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Mx(i)&&Date.now()+a-n<gc})}catch(n){if(this._debug(r,"error",n),ct(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),gi()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await mm(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Tx;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Tx}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Mx(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ua;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Iv;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ua;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ct(i)){const a={session:null,error:i};return Mx(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await q3(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await gm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&gi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/gc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${gc}ms, refresh threshold is ${S1} ticks`),s<=S1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof V3)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await cc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await xt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ct(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await xt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ct(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:l}=await xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(ct(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ct(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=e?.factors||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Rx(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n||(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+jH>Date.now()))return n;const{data:s,error:i}=await xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new nf("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(a=>a.kid===e),!n)throw new nf("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:g,error:y}=await this.getSession();if(y||!g.session)return{data:null,error:y};n=g.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Rx(n);if(HH(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:s,signature:a},error:null}}const d=GH(s.alg),f=await this.fetchJwk(s.kid,r),p=await crypto.subtle.importKey("jwk",f,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,a,LH(`${l}.${c}`)))throw new nf("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}}}Af.nextInstanceID=0;const cG=Af;class uG extends cG{constructor(e){super(e)}}var dG=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{d(n.next(f))}catch(p){a(p)}}function c(f){try{d(n.throw(f))}catch(p){a(p)}}function d(f){f.done?i(f.value):s(f.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class fG{constructor(e,r,n){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=vH(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:cH,realtime:dH,auth:Object.assign(Object.assign({},uH),{storageKey:c}),global:lH},f=yH(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=mH(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new OW(`${l}/rest/v1`,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new yW(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new iH(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return dG(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:l,debug:c},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uG({url:this.authUrl,headers:Object.assign(Object.assign({},p),d),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new WW(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hG=(t,e,r)=>new fG(t,e,r),qN="https://akmicemcgohflolembbb.supabase.co",VN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFrbWljZW1jZ29oZmxvbGVtYmJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyMzQ3MDMsImV4cCI6MjA2MTgxMDcwM30.CsxmVgBJDY0OOKEcLmuR3_42JDoQcEY9-gFKBmgpJp4",Y=hG(qN,VN,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),pG=Object.freeze(Object.defineProperty({__proto__:null,supabase:Y,supabaseAnonKey:VN,supabaseUrl:qN},Symbol.toStringTag,{value:"Module"})),mG=async()=>{try{const{data:t,error:e}=await Y.auth.getSession();if(e)throw e;return t.session}catch(t){return console.error("Erreur lors de la vérification de la session:",t),null}},gG=async(t,e)=>{try{const{data:r,error:n}=await Y.auth.signInWithPassword({email:t,password:e});if(n)throw n;return r}catch(r){throw console.error("Erreur lors de la connexion:",r),r}},CA=async()=>{try{const{error:t}=await Y.auth.signOut({scope:"local"});if(t&&t.name!=="AuthSessionMissingError")throw t;if(typeof window<"u"){localStorage.removeItem("supabase.auth.token");for(let e=0;e<localStorage.length;e++){const r=localStorage.key(e);r&&(r.includes("supabase")||r.includes("sb-"))&&localStorage.removeItem(r)}}return!0}catch(t){return console.error("Erreur lors de la déconnexion:",t),!0}},vG=(t,e)=>({auth:{user:null,isLoading:!1,error:null,initialized:!1,login:async(r,n)=>{t(s=>({...s,auth:{...s.auth,isLoading:!0,error:null}}));try{const{session:s,user:i}=await gG(r,n);if(!s||!i)throw new Error("Échec de la connexion");const{data:a}=await Y.from("admins").select("*").eq("user_id",i.id).single();if(!a)throw new Error("Accès non autorisé. Cette application est réservée aux administrateurs.");const l={id:i.id,email:i.email||"",role:"admin",firstName:i.user_metadata?.first_name,lastName:i.user_metadata?.last_name,avatar_url:i.user_metadata?.avatar_url,created_at:i.created_at};t(c=>({...c,auth:{...c.auth,user:l,isLoading:!1}}))}catch(s){console.error("Login error:",s);const i=s instanceof Error?s.message:"Une erreur est survenue lors de la connexion";t(a=>({...a,auth:{...a.auth,error:i,isLoading:!1,user:null}}))}},logout:async()=>{t(r=>({...r,auth:{...r.auth,isLoading:!0}}));try{await CA(),t(r=>({...r,auth:{...r.auth,user:null,isLoading:!1}}))}catch(r){console.error("Logout error:",r),t(n=>({...n,auth:{...n.auth,error:"Une erreur est survenue lors de la déconnexion",isLoading:!1}}))}},checkSession:async()=>{t(r=>({...r,auth:{...r.auth,isLoading:!0}}));try{const r=await mG();if(r&&r.user){const{data:n}=await Y.from("admins").select("*").eq("user_id",r.user.id).single();if(!n){await CA(),t(i=>({...i,auth:{...i.auth,user:null,isLoading:!1,initialized:!0,error:"Accès non autorisé. Cette application est réservée aux administrateurs."}}));return}const s={id:r.user.id,email:r.user.email||"",role:"admin",firstName:r.user.user_metadata?.first_name,lastName:r.user.user_metadata?.last_name,avatar_url:r.user.user_metadata?.avatar_url,created_at:r.user.created_at};t(i=>({...i,auth:{...i.auth,user:s,isLoading:!1,initialized:!0}}))}else t(n=>({...n,auth:{...n.auth,user:null,isLoading:!1,initialized:!0}}))}catch(r){console.error("Check session error:",r),t(n=>({...n,auth:{...n.auth,user:null,isLoading:!1,initialized:!0,error:"Une erreur est survenue lors de la vérification de la session"}}))}},clearError:()=>{t(r=>({...r,auth:{...r.auth,error:null}}))}}}),yG=(t,e)=>({realtime:{isConnected:!1,subscriptions:[],connectionError:null,initializeSubscriptions:()=>{t(r=>({...r,realtime:{...r.realtime,isConnected:!0,connectionError:null}})),console.log("🔄 Initialisation des connexions temps réel")},subscribeToTable:(r,n,s)=>{const i=`${r}-${Date.now()}`;try{let a=`realtime:${r}`;s&&(a+=`:${s}`);const l=Y.channel(a).on("postgres_changes",{event:"*",schema:"public",table:r,...s&&{filter:s}},d=>{console.log(`🔄 Mise à jour temps réel [${r}]:`,d),n(d)}).subscribe(d=>{console.log(`📡 Statut subscription [${r}]:`,d),t(f=>({...f,realtime:{...f.realtime,subscriptions:f.realtime.subscriptions.map(p=>p.id===i?{...p,isActive:d==="SUBSCRIBED"}:p)}}))}),c={id:i,table:r,channel:l,callback:n,isActive:!1};return t(d=>({...d,realtime:{...d.realtime,subscriptions:[...d.realtime.subscriptions,c]}})),console.log(`✅ Subscription créée pour ${r}:`,i),i}catch(a){return console.error(`❌ Erreur subscription ${r}:`,a),t(l=>({...l,realtime:{...l.realtime,connectionError:`Erreur de connexion à ${r}`}})),i}},unsubscribeFromTable:r=>{const n=e().realtime.subscriptions.find(s=>s.id===r);if(n)try{Y.removeChannel(n.channel),t(s=>({...s,realtime:{...s.realtime,subscriptions:s.realtime.subscriptions.filter(i=>i.id!==r)}})),console.log(`🔌 Unsubscribed de ${n.table}:`,r)}catch(s){console.error("❌ Erreur lors de l'unsubscribe:",s)}},cleanup:()=>{e().realtime.subscriptions.forEach(n=>{try{Y.removeChannel(n.channel)}catch(s){console.error(`❌ Erreur cleanup ${n.table}:`,s)}}),t(n=>({...n,realtime:{...n.realtime,subscriptions:[],isConnected:!1,connectionError:null}})),console.log("🧹 Nettoyage des connexions temps réel terminé")},reconnect:()=>{console.log("🔄 Tentative de reconnexion..."),e().realtime.cleanup(),setTimeout(()=>{e().realtime.initializeSubscriptions()},1e3)}}}),kA="https://api.provence-courses.fr",PA="B99pb355iyUKtEwvAFLFl/y4Aosym/asUDX1Dy4Efps=",OA={date:new Date().toISOString().split("T")[0],status:"all",searchTerm:void 0},xG=async t=>!t||t.length===0?[]:await Promise.all(t.map(async r=>{let n="Lieu inconnu";try{if(r.stop_type==="depot_pickup"||r.stop_type==="depot_dropoff")n="MIKA";else if(r.stop_type==="lab_pickup"||r.stop_type==="lab_dropoff"){const{data:s}=await Y.from("laboratories").select("name").eq("location_id",r.location_id).single();n=s?.name||"Laboratoire"}else if(r.stop_type==="client"||r.stop_type==="client_pickup"||r.stop_type==="client_delivery"){const{data:s}=await Y.from("driver_route_shipments").select(`
              laboratory_client_id,
              laboratory_clients!inner(name, laboratory_id, laboratories!inner(name))
            `).or(`pickup_stop_id.eq.${r.id},delivery_stop_id.eq.${r.id}`).limit(1);if(s&&s.length>0)n=s[0].laboratory_clients?.name||"Client";else{const{data:i}=await Y.from("laboratory_clients").select("name").eq("location_id",r.location_id).limit(1);n=i?.[0]?.name||"Client"}}}catch(s){console.warn(`Erreur lors de la récupération du nom pour le stop ${r.id}:`,s)}return{...r,locationName:n,displayName:n,address:r.location?.formatted_address||"",coordinates:r.location?{lat:r.location.latitude,lng:r.location.longitude}:null}})),bG=t=>{if(!t||t.length===0)return[];const e=[];let r=0;for(;r<t.length;){const n=t[r],s=[n];let i=r+1;for(;i<t.length&&t[i].location_id===n.location_id;)s.push(t[i]),i++;if(s.length>1&&n.stop_type==="client"){const a=s.some(m=>m.client_actions==="pickup"||m.client_actions==="both"),l=s.some(m=>m.client_actions==="delivery"||m.client_actions==="both");let c;a&&l?c="both":a?c="pickup":c="delivery";const d=s.every(m=>m.completed),f=s.filter(m=>m.arrival_time).sort((m,g)=>new Date(g.arrival_time).getTime()-new Date(m.arrival_time).getTime())[0]?.arrival_time,p={...n,client_actions:c,completed:d,arrival_time:f||n.arrival_time,isMerged:!0,mergedStopsIds:s.slice(1).map(m=>m.id),mergedStopsCount:s.length};e.push(p)}else for(const a of s)e.push({...a,isMerged:!1});r=i}return e},wG=(t,e)=>({driverRoutes:{routes:[],selectedRoute:null,isLoading:!1,isOptimizing:!1,optimizingRouteId:null,error:null,filters:{...OA},lastGenerationResult:null,isGenerating:!1,generationStartTime:null,generationDate:null,fetchRoutes:async(r,n)=>{n?.silent||t(s=>({...s,driverRoutes:{...s.driverRoutes,isLoading:!0,error:null}}));try{const s={...e().driverRoutes.filters,...r};let i=Y.from("driver_routes").select(`
          id,
          driver_id,
          date,
          status,
          created_at,
          updated_at,
            polyline,
          estimated_duration,
          total_distance_km,
            driver:drivers!inner(id, full_name, email),
            stops:driver_route_stops(
            id,
            location_id,
            stop_order,
            stop_type,
            client_actions,
              estimated_arrival_time,
            completed,
              arrival_time,
              distance_from_previous,
            duration_from_previous,
              location:locations(
              id,
              formatted_address,
              latitude,
                longitude,
                type,
                delivery_instructions
              )
            )
          `).order("created_at",{ascending:!1});s.date&&(i=i.eq("date",s.date)),s.driverId&&(i=i.eq("driver_id",s.driverId)),s.status&&s.status!=="all"&&(i=i.eq("status",s.status));const{data:a,error:l}=await i;if(l)throw l;const c=await Promise.all((a||[]).map(async d=>{const f=(d.stops||[]).sort((g,y)=>g.stop_order-y.stop_order),p=await xG(f),m=bG(p);return{...d,driver:Array.isArray(d.driver)?d.driver[0]:d.driver,stops:m}}));t(d=>({...d,driverRoutes:{...d.driverRoutes,routes:c,isLoading:!1,filters:s}})),n?.silent?console.log(`🔄 Données actualisées silencieusement: ${c.length} routes`):console.log(`✅ Routes mises à jour: ${c.length} routes trouvées`)}catch(s){console.error("Erreur fetchRoutes:",s),t(i=>({...i,driverRoutes:{...i.driverRoutes,error:s instanceof Error?s.message:"Erreur lors du chargement",isLoading:!1}}))}},generateRoutes:async(r=new Date().toISOString().split("T")[0])=>{const n=Date.now();console.log(`🚀 Génération + optimisation pour ${r}...`),t(s=>({...s,driverRoutes:{...s.driverRoutes,isLoading:!0,isGenerating:!0,generationStartTime:n,generationDate:r,error:null}}));try{const s=await fetch(`${kA}/api/v1/tours/generate-daily`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":PA},body:JSON.stringify({date:r,optimize:!0,include_late_stops:!0}),signal:AbortSignal.timeout(6e5)});if(!s.ok){const l=await s.text();throw new Error(`Erreur API ${s.status}: ${l}`)}const i=await s.json();if(i.status!=="success")throw new Error(i.message||"Génération échouée");console.log(`✅ Génération réussie: ${i.final_stops_count} stops`);const a={success:!0,routes_created:1,errors:[],warnings:[],execution_time_seconds:i.processing_summary?.total_time_seconds||0,driver_results:[{success:!0,driver_name:"Toutes les routes",stops_created:i.final_stops_count,shipments_created:0,optimization_success:i.optimization_applied||!1,optimization_time_seconds:i.processing_summary?.optimization_time_seconds||0}]};return await e().driverRoutes.fetchRoutes({date:r},{silent:!0}),t(l=>({...l,driverRoutes:{...l.driverRoutes,isLoading:!1,isGenerating:!1,generationStartTime:null,generationDate:null,lastGenerationResult:a}})),!0}catch(s){console.error("❌ Erreur génération:",s);const i={success:!1,routes_created:0,errors:[s instanceof Error?s.message:String(s)],warnings:[],execution_time_seconds:0,driver_results:[]};return t(a=>({...a,driverRoutes:{...a.driverRoutes,error:s instanceof Error?s.message:"Erreur génération",isLoading:!1,isGenerating:!1,generationStartTime:null,generationDate:null,lastGenerationResult:i}})),!1}},optimizeRoute:async r=>e().driverRoutes.optimizeRouteSimple(r),optimizeRouteSimple:async r=>{console.log(`🔧 Optimisation route ${r}...`),t(n=>({...n,driverRoutes:{...n.driverRoutes,isOptimizing:!0,optimizingRouteId:r,error:null}}));try{const n=await fetch(`${kA}/api/v1/tours/${r}/optimize`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":PA},signal:AbortSignal.timeout(6e5)});if(!n.ok){const i=await n.text();throw new Error(`Erreur API ${n.status}: ${i}`)}const s=await n.json();if(s.status!=="success")throw new Error(s.message||"Optimisation échouée");return console.log(`✅ Optimisation réussie: ${s.final_stops_count} stops`),await e().driverRoutes.fetchRoutes(void 0,{silent:!0}),t(i=>({...i,driverRoutes:{...i.driverRoutes,isOptimizing:!1,optimizingRouteId:null}})),!0}catch(n){return console.error("❌ Erreur optimisation:",n),t(s=>({...s,driverRoutes:{...s.driverRoutes,isOptimizing:!1,optimizingRouteId:null,error:n instanceof Error?n.message:"Erreur optimisation"}})),!1}},validateRoute:async r=>{try{const{error:n}=await Y.from("driver_routes").update({status:"validated",updated_at:new Date().toISOString()}).eq("id",r);if(n)throw n;return await e().driverRoutes.fetchRoutes(void 0,{silent:!0}),!0}catch(n){return console.error("Erreur validation:",n),!1}},setFilters:r=>{t(n=>({...n,driverRoutes:{...n.driverRoutes,filters:{...n.driverRoutes.filters,...r}}}))},resetFilters:()=>{t(r=>({...r,driverRoutes:{...r.driverRoutes,filters:{...OA}}}))},setSelectedRoute:async r=>{if(!r){t(s=>({...s,driverRoutes:{...s.driverRoutes,selectedRoute:null}}));return}const n=e().driverRoutes.routes.find(s=>s.id===r);t(s=>({...s,driverRoutes:{...s.driverRoutes,selectedRoute:n||null}}))},getDriversRoutesValidationCount:async()=>(await e().driverRoutes.fetchRoutes(),e().driverRoutes.routes.filter(r=>r.status==="optimized").length),getInProgressRoutesCount:async()=>(await e().driverRoutes.fetchRoutes(),e().driverRoutes.routes.filter(r=>r.status==="in_progress").length),checkGenerationStatus:async()=>{const r=e().driverRoutes;if(r.isGenerating&&r.generationStartTime){const n=Date.now()-r.generationStartTime,s=900*1e3;n>s&&(console.warn("⏰ Génération expirée après 15 minutes - réinitialisation de l'état"),t(i=>({...i,driverRoutes:{...i.driverRoutes,isGenerating:!1,generationStartTime:null,generationDate:null,error:"Génération expirée (timeout de 15 minutes)"}})))}},setGenerationState:(r,n)=>{t(s=>({...s,driverRoutes:{...s.driverRoutes,isGenerating:r,generationStartTime:r?Date.now():null,generationDate:r?n||new Date().toISOString().split("T")[0]:null}}))}}}),_G={date:W3(),status:"all",searchQuery:""},AA={totalRoutes:0,activeRoutes:0,completedRoutes:0,totalDistance:0,totalDuration:0,totalStops:0,completedStops:0,totalDeliveries:0,completedDeliveries:0,totalPickups:0,completedPickups:0,overallProgress:0},jG=(t,e)=>({monitoring:{routes:[],selectedRouteId:null,isLoading:!1,error:null,filters:{..._G},stats:{...AA},lastUpdated:null,realtimeSubscriptions:null,fetchMonitoringRoutes:async r=>{t(n=>({...n,monitoring:{...n.monitoring,isLoading:!0,error:null}}));try{const n={...e().monitoring.filters,...r};n.date||(n.date=W3()),console.log("🔄 Récupération des routes de monitoring avec filtres:",n);const i=new Date().getHours();console.log(`⏰ Heure actuelle: ${i}h - Date de monitoring: ${n.date}`);let a=Y.from("driver_routes").select(`
            id,
            driver_id,
            date,
            status,
            created_at,
            updated_at,
            estimated_duration,
            total_distance_km,
            driver:driver_id (
              id,
              full_name,
              email
            )
          `);n.date&&(a=a.eq("date",n.date)),n.status&&n.status!=="all"&&(a=a.eq("status",n.status)),a=a.order("status",{ascending:!1}).order("created_at",{ascending:!1});const{data:l,error:c}=await a;if(c)throw new Error(`Erreur lors de la récupération des routes: ${c.message}`);if(!l||l.length===0){console.log("ℹ️ Aucune route trouvée"),t(E=>({...E,monitoring:{...E.monitoring,routes:[],stats:{...AA},isLoading:!1,filters:n,lastUpdated:new Date().toISOString()}}));return}console.log(`📊 ${l.length} routes trouvées`);const d=l.map(E=>E.id),{data:f,error:p}=await Y.from("driver_route_stops").select(`
            id,
            route_id,
            location_id,
            stop_order,
            stop_type,
            client_actions,
            estimated_arrival_time,
            arrival_time,
            completed,
            location:location_id (
              id,
              formatted_address,
              latitude,
              longitude,
              type
            )
          `).in("route_id",d).order("route_id").order("stop_order");if(p)throw new Error(`Erreur lors de la récupération des stops: ${p.message}`);const{data:m,error:g}=await Y.from("driver_route_shipments").select(`
            id,
            route_id,
            laboratory_id,
            pickup_stop_id,
            delivery_stop_id,
            pickup_status,
            delivery_status,
            pickup_time,
            delivery_time,
            proof_photo_url,
            shipment_type,
            laboratory:laboratory_id (
              id,
              name
            )
          `).in("route_id",d);if(g)throw new Error(`Erreur lors de la récupération des shipments: ${g.message}`);let y=f||[];if(y.length>0){const E=y.map(A=>A.location_id),{data:N}=await Y.from("laboratory_clients").select("location_id, name").in("location_id",E),{data:P}=await Y.from("laboratories").select("location_id, name").in("location_id",E),O=new Map,L=new Map;(N||[]).forEach(A=>{O.set(A.location_id,A.name)}),(P||[]).forEach(A=>{L.set(A.location_id,A.name)}),y=y.map(A=>{let R="Sans nom";return O.has(A.location_id)?R=O.get(A.location_id):L.has(A.location_id)&&(R=L.get(A.location_id)),{...A,location_name:R}})}const b=new Map,x=new Map;(y||[]).forEach(E=>{const N=E.route_id;b.has(N)||b.set(N,[]),b.get(N).push(E)}),(m||[]).forEach(E=>{const N=E.route_id;x.has(N)||x.set(N,[]),x.get(N).push(E)});const j=l.map(E=>{const N=b.get(E.id)||[],P=x.get(E.id)||[],O=new Map;P.forEach(A=>{const R=Array.isArray(A.laboratory)?A.laboratory[0]?.name||"Laboratoire":A.laboratory?.name||"Laboratoire";A.pickup_stop_id&&(O.has(A.pickup_stop_id)||O.set(A.pickup_stop_id,[]),O.get(A.pickup_stop_id).push({id:`${A.id}-pickup`,laboratory_id:A.laboratory_id,laboratory_name:R,shipment_type:"pickup",pickup_status:A.pickup_status,delivery_status:A.delivery_status,photo_proof_url:A.proof_photo_url})),A.delivery_stop_id&&(O.has(A.delivery_stop_id)||O.set(A.delivery_stop_id,[]),O.get(A.delivery_stop_id).push({id:`${A.id}-delivery`,laboratory_id:A.laboratory_id,laboratory_name:R,shipment_type:"delivery",pickup_status:A.pickup_status,delivery_status:A.delivery_status,photo_proof_url:A.proof_photo_url}))});const L=N.map(A=>{const R=Array.isArray(A.location)?A.location[0]:A.location,M=O.get(A.id)||[];let D="pending";A.completed?D="completed":A.arrival_time&&(D="in_progress");let B="dentist";return A.stop_type?.includes("lab")?B="laboratory":A.stop_type?.includes("depot")&&(B="depot"),{id:A.id,location_name:A.location_name||R?.formatted_address||"Adresse inconnue",location_address:R?.formatted_address||"Adresse inconnue",stop_order:A.stop_order,estimated_arrival_time:A.estimated_arrival_time||"--:--",actual_arrival_time:A.arrival_time,status:D,location_type:B,shipments:M,completed:A.completed||!1}});return{id:E.id,driver_id:E.driver_id,driver_name:E.driver?.full_name||"Chauffeur inconnu",status:E.status,created_at:E.created_at,stops:L.sort((A,R)=>A.stop_order-R.stop_order),total_distance_km:E.total_distance_km||0,estimated_duration_minutes:E.estimated_duration||0,date:E.date}}),S=n.searchQuery?j.filter(E=>E.driver_name.toLowerCase().includes(n.searchQuery.toLowerCase())):j,C=SG(S);t(E=>({...E,monitoring:{...E.monitoring,routes:S,stats:C,isLoading:!1,filters:n,lastUpdated:new Date().toISOString()}})),console.log(`✅ ${S.length} routes de monitoring chargées avec succès`)}catch(n){console.error("❌ Erreur lors de la récupération du monitoring:",n),t(s=>({...s,monitoring:{...s.monitoring,error:n instanceof Error?n.message:"Erreur inconnue",isLoading:!1}}))}},setSelectedRoute:r=>{t(n=>({...n,monitoring:{...n.monitoring,selectedRouteId:r}}))},setFilters:r=>{t(n=>({...n,monitoring:{...n.monitoring,filters:{...n.monitoring.filters,...r}}}))},updateStopStatus:async(r,n)=>{try{const s={completed:n==="completed",updated_at:new Date().toISOString()};(n==="in_progress"||n==="completed")&&(s.arrival_time=new Date().toISOString());const{error:i}=await Y.from("driver_route_stops").update(s).eq("id",r);if(i)throw i;console.log(`✅ Statut du stop ${r} mis à jour: ${n}`),await e().monitoring.refreshData()}catch(s){console.error("❌ Erreur lors de la mise à jour du stop:",s)}},updateShipmentStatus:async(r,n,s)=>{try{const i={[`${n}_status`]:s,updated_at:new Date().toISOString()};s==="completed"&&(i[`${n}_time`]=new Date().toISOString());const{error:a}=await Y.from("driver_route_shipments").update(i).eq("id",r);if(a)throw a;console.log(`✅ Statut ${n} du shipment ${r} mis à jour: ${s}`),await e().monitoring.refreshData()}catch(i){console.error("❌ Erreur lors de la mise à jour du shipment:",i)}},refreshData:async()=>{await e().monitoring.fetchMonitoringRoutes()},setupRealtimeMonitoring:()=>{console.log("🔄 Configuration de la surveillance temps réel pour le monitoring");const r=e().realtime;if(!r){console.warn("⚠️ Slice realtime non disponible");return}const n=r.subscribeToTable("driver_routes",a=>{console.log("🔄 Mise à jour temps réel [driver_routes]:",a),e().monitoring.refreshData()}),s=r.subscribeToTable("driver_route_stops",a=>{console.log("🔄 Mise à jour temps réel [driver_route_stops]:",a),e().monitoring.refreshData()}),i=r.subscribeToTable("driver_route_shipments",a=>{console.log("🔄 Mise à jour temps réel [driver_route_shipments]:",a),e().monitoring.refreshData()});t(a=>({...a,monitoring:{...a.monitoring,realtimeSubscriptions:[n,s,i]}})),console.log("✅ Surveillance temps réel configurée pour le monitoring")},cleanupRealtimeMonitoring:()=>{console.log("🧹 Nettoyage de la surveillance temps réel pour le monitoring");const r=e().monitoring,n=e().realtime;n&&r.realtimeSubscriptions&&(r.realtimeSubscriptions.forEach(s=>{try{n.unsubscribeFromTable(s)}catch(i){console.error("❌ Erreur lors du nettoyage de la subscription:",i)}}),t(s=>({...s,monitoring:{...s.monitoring,realtimeSubscriptions:null}}))),console.log("✅ Nettoyage temps réel terminé pour le monitoring")}}});function W3(){const t=new Date,e=t.getHours();if(e>=17||e<12)if(e<12){const r=new Date(t);return r.setDate(r.getDate()-1),r.toISOString().split("T")[0]}else return t.toISOString().split("T")[0];else return t.toISOString().split("T")[0]}function SG(t){const e=t.length,r=t.filter(g=>g.status==="in_progress").length,n=t.filter(g=>g.status==="completed").length,s=t.reduce((g,y)=>g+y.total_distance_km,0),i=t.reduce((g,y)=>g+y.estimated_duration_minutes,0),a=t.reduce((g,y)=>g+y.stops.length,0),l=t.reduce((g,y)=>g+y.stops.filter(b=>b.completed).length,0),c=t.reduce((g,y)=>g+y.stops.reduce((b,x)=>b+x.shipments.filter(j=>j.shipment_type==="delivery").length,0),0),d=t.reduce((g,y)=>g+y.stops.reduce((b,x)=>x.status==="completed"?b+x.shipments.filter(j=>j.shipment_type==="delivery").length:b,0),0),f=t.reduce((g,y)=>g+y.stops.reduce((b,x)=>b+x.shipments.filter(j=>j.shipment_type==="pickup").length,0),0),p=t.reduce((g,y)=>g+y.stops.reduce((b,x)=>x.status==="completed"?b+x.shipments.filter(j=>j.shipment_type==="pickup").length:b,0),0),m=a>0?Math.round(l/a*100):0;return{totalRoutes:e,activeRoutes:r,completedRoutes:n,totalDistance:s,totalDuration:i,totalStops:a,completedStops:l,totalDeliveries:c,completedDeliveries:d,totalPickups:f,completedPickups:p,overallProgress:m}}console.log("🏪 Slice monitoring créé avec succès");const NG=(t,e)=>({labTours:{tours:[],filteredTours:[],laboratories:[],searchQuery:"",isLoading:!1,error:null,realtimeSubscription:null,fetchAllTours:async()=>{t(r=>({...r,labTours:{...r.labTours,isLoading:!0,error:null}}));try{console.log("Démarrage de fetchAllTours");const{data:r,error:n}=await Y.from("laboratories").select(`
            *,
            location:location_id (
              id, 
              formatted_address, 
              latitude, 
              longitude, 
              delivery_instructions
            )
          `);if(n)throw console.error("Erreur lors de la récupération des laboratoires:",n),n;const s=new Date().toISOString().split("T")[0];console.log("Filtrage des tournées pour la date du jour:",s);const{data:i,error:a}=await Y.from("lab_tours").select(`
            *,
            laboratory:laboratory_id (
              id, 
              name, 
              email,
              location_id,
              location:location_id (
                id, 
                formatted_address, 
                latitude, 
                longitude, 
                delivery_instructions
              )
            )
          `).eq("date",s).order("date",{ascending:!1});if(a)throw console.error("Erreur lors de la récupération des tournées:",a),a;const c=(await Promise.all((i||[]).map(async g=>{const{data:y,error:b}=await Y.from("lab_tour_stops").select("*").eq("tour_id",g.id);if(b)return console.error(`Erreur lors de la récupération des arrêts pour la tournée ${g.id}:`,b),{...g,stops:[],deliveriesCount:0,pickupsCount:0};const x=y?.filter(S=>S.has_delivery).length||0,j=y?.filter(S=>S.has_pickup).length||0;return{...g,stops:y||[],deliveriesCount:x,pickupsCount:j}}))).map(g=>({id:g.id,laboratory_id:g.laboratory_id,laboratoryName:g.laboratory?.name||"Laboratoire inconnu",address:g.laboratory?.location?.formatted_address||"Adresse inconnue",date:g.date,status:g.status,submission_time:g.submission_time,pickup_time:g.pickup_time,return_time:g.return_time,rejection_reason:g.rejection_reason,deliveriesCount:g.deliveriesCount,pickupsCount:g.pickupsCount,laboratory:g.laboratory,stops:g.stops})),d=c.map(g=>g.laboratory_id),p=r.filter(g=>!d.includes(g.id)).map(g=>({id:`virtual-${g.id}`,laboratory_id:g.id,laboratoryName:g.name||"Laboratoire inconnu",address:g.location?.formatted_address||"Adresse inconnue",date:s,status:"draft",submission_time:null,pickup_time:null,return_time:null,rejection_reason:null,deliveriesCount:0,pickupsCount:0,laboratory:g,stops:[],isVirtual:!0})),m=[...c,...p];console.log("Tous les laboratoires (avec et sans tournées):",m),t(g=>({...g,labTours:{...g.labTours,tours:m,filteredTours:m,laboratories:r,isLoading:!1}}))}catch(r){console.error("Erreur lors de la récupération des tournées:",r),t(n=>({...n,labTours:{...n.labTours,error:"Impossible de récupérer les tournées. Veuillez réessayer.",isLoading:!1}}))}},fetchTourDetails:async r=>(console.log("fetchTourDetails appelé pour:",r),null),updateTourStatus:async(r,n,s)=>(console.log("updateTourStatus appelé:",r,n),!1),updateTourStops:async(r,n)=>(console.log("updateTourStops appelé:",r),!1),deleteTour:async r=>(console.log("deleteTour appelé:",r),!1),createTour:async(r,n)=>(console.log("createTour appelé:",r),null),subscribeToRealtime:()=>{const r=e(),n=r.labTours.realtimeSubscription;n&&n.unsubscribe(),console.log("Abonnement aux changements Realtime...");const s=Y.channel("lab-tours-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"lab_tours"},async i=>{console.log("Nouvel enregistrement détecté:",i),await r.labTours.fetchAllTours()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lab_tours"},async i=>{console.log("Mise à jour détectée:",i),await r.labTours.fetchAllTours()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"lab_tours"},async i=>{console.log("Suppression détectée:",i),await r.labTours.fetchAllTours()}).subscribe(i=>{console.log("Statut de l'abonnement Realtime:",i)});t(i=>({...i,labTours:{...i.labTours,realtimeSubscription:s}}))},unsubscribeFromRealtime:()=>{const n=e().labTours.realtimeSubscription;n&&(n.unsubscribe(),t(s=>({...s,labTours:{...s.labTours,realtimeSubscription:null}})))},filterToursByLaboratory:r=>{const n=e(),{tours:s}=n.labTours;t(i=>({...i,labTours:{...i.labTours,searchQuery:r,filteredTours:s.filter(a=>a.laboratoryName?.toLowerCase().includes(r.toLowerCase()))}}))},fetchLaboratoryClients:async r=>(console.log("fetchLaboratoryClients appelé:",r),[]),getTodayTotalDeliveries:()=>{const r=e(),{tours:n}=r.labTours;return n.filter(s=>!s.isVirtual).reduce((s,i)=>s+(i.deliveriesCount||0),0)},getTodayTotalPickups:()=>{const r=e(),{tours:n}=r.labTours;return n.filter(s=>!s.isVirtual).reduce((s,i)=>s+(i.pickupsCount||0),0)},getTodayToursCount:()=>{const r=e(),{tours:n}=r.labTours;return n.filter(s=>!s.isVirtual).length},getPendingValidationsCount:()=>{const r=e(),{tours:n}=r.labTours;return n.filter(s=>!s.isVirtual&&(s.status==="submitted"||s.status==="pending_changes")).length}}});class EG{async getDriverRoute(e,r){const{data:n,error:s}=await Y.from("driver_routes").select(`
        id,
        driver_id,
        date,
        status,
        total_distance_km,
        estimated_duration,
        stops:driver_route_stops(
          id,
          route_id,
          location_id,
          stop_order,
          stop_type,
          client_actions,
          completed,
          is_late_stop,
          location:locations(
            id,
            latitude,
            longitude,
            formatted_address
          )
        )
      `).eq("driver_id",e).eq("date",r).in("status",["validated","in_progress"]).order("updated_at",{ascending:!1});if(console.log(`🔍 Recherche tournées pour ${e} le ${r}...`),s)throw new Error(`Erreur lors de la récupération de la tournée pour le chauffeur ${e} le ${r}: ${s.message}`);if(!n||n.length===0)throw new Error(`Aucune tournée active (validated/in_progress) trouvée pour le chauffeur ${e} le ${r}`);console.log(`📊 ${n.length} tournée(s) trouvée(s):`,n.map(c=>`${c.status} (${c.id.substring(0,8)})`).join(", "));const a=n.sort((c,d)=>c.status==="in_progress"&&d.status==="validated"?-1:c.status==="validated"&&d.status==="in_progress"?1:new Date(d.updated_at).getTime()-new Date(c.updated_at).getTime())[0];console.log(`✅ Tournée sélectionnée pour ${e} le ${r}:`),console.log(`   - ID: ${a.id}`),console.log(`   - Statut: ${a.status}`),console.log(`   - Stops: ${a.stops?.length||0}`),console.log(`   - Distance: ${a.total_distance_km}km`);const l=(a.stops||[]).sort((c,d)=>c.stop_order-d.stop_order);return{...a,stops:l}}findOptimalInsertion(e,r){if(console.log(`🎯 Calcul position optimale pour client à [${r.latitude}, ${r.longitude}]`),e.length===0)return{position:0,insertionCost:0,estimatedTimeAdded:0};let n=1/0,s=e.length,i,a;for(let c=0;c<=e.length;c++){const d=this.calculateInsertionCost(e,r,c);console.log(`📍 Position ${c}: coût = ${d.toFixed(2)}km`),d<n&&(n=d,s=c,i=c>0?e[c-1]:void 0,a=c<e.length?e[c]:void 0)}const l=Math.round(n/.5);return console.log(`✅ Position optimale: ${s}, coût: ${n.toFixed(2)}km, temps: +${l}min`),console.log(`📍 Entre: ${i?.location.formatted_address||"DÉBUT"} → ${a?.location.formatted_address||"FIN"}`),{position:s,beforeStop:i,afterStop:a,insertionCost:n,estimatedTimeAdded:l}}calculateInsertionCost(e,r,n){if(n===0)return n<e.length?this.calculateDistance(r,e[0].location):0;if(n===e.length)return this.calculateDistance(e[e.length-1].location,r);const s=e[n-1],i=e[n],a=this.calculateDistance(s.location,i.location),c=this.calculateDistance(s.location,r)+this.calculateDistance(r,i.location)-a;return Math.max(0,c)}calculateDistance(e,r){const s=(r.latitude-e.latitude)*Math.PI/180,i=(r.longitude-e.longitude)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.latitude*Math.PI/180)*Math.cos(r.latitude*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))*1.3}async enrichStopInformation(e){return e}}const TA=new EG;class CG{async processLateDelivery(e,r,n){console.log(`📦 Traitement late delivery pour ${e.client?.name}`);const s=e.lab_tour?.laboratory,i=e.client;if(!s||!i)throw new Error("Données laboratoire ou client manquantes");const a={route_id:r.id,location_id:i.location.id,stop_order:n,stop_type:"client",client_actions:"delivery",is_late_stop:!0};console.log(`📍 Création stop delivery position ${n} pour ${i.name}`);const l=this.findSourcePickupForLaboratory(r,s.id,s.depot_is_lab);if(!l)throw new Error(`❌ Aucun pickup source trouvé pour le laboratoire ${s.name}. Vérifiez qu'un lab_pickup ou depot_pickup existe dans la tournée.`);console.log(`✅ Source pickup trouvé: ${l.stop_type} (${l.id})`);const c={laboratory_id:s.id,pickup_stop_id:l.id,delivery_stop_id:{placeholder:!0,location_id:i.location.id,stop_type:"client",client_actions:"delivery"},is_late_shipment:!0,laboratory_client_id:i.id};return console.log(`📋 Création shipment: ${l.stop_type} → client delivery`),{newStops:[a],newShipments:[c]}}async processLatePickup(e,r,n){console.log(`🔄 Traitement late pickup pour ${e.client?.name}`);const s=e.lab_tour?.laboratory,i=e.client;if(!s||!i)throw new Error("Données laboratoire ou client manquantes");const a=[],l=[],c={route_id:r.id,location_id:i.location.id,stop_order:n,stop_type:"client",client_actions:"pickup",is_late_stop:!0};a.push(c),console.log(`📍 Création stop pickup position ${n} pour ${i.name}`);const d=this.findExistingDropoffForLaboratory(r,s.id,s.depot_is_lab);let f;if(d)f=d.id,console.log(`✅ Dropoff existant trouvé: ${d.stop_type} (${d.id})`);else{console.log(`⚠️ Aucun dropoff trouvé pour ${s.name}, création nécessaire`);const{dropoffStop:m,dropoffPosition:g}=await this.createNewDropoff(s,r,n);a.push(m),f={placeholder:!0,location_id:m.location_id,stop_type:m.stop_type},console.log(`📍 Création dropoff ${m.stop_type} position ${g}`)}const p={laboratory_id:s.id,pickup_stop_id:{placeholder:!0,location_id:i.location.id,stop_type:"client",client_actions:"pickup"},delivery_stop_id:f,is_late_shipment:!0,laboratory_client_id:i.id};return l.push(p),console.log(`📋 Création shipment: client pickup → ${typeof f=="string"?"dropoff existant":f.stop_type}`),{newStops:a,newShipments:l}}findSourcePickupForLaboratory(e,r,n){if(n){const s=e.stops.find(i=>i.stop_type==="depot_pickup");return console.log(`🔍 Recherche depot_pickup pour lab depot_is_lab: ${s?"TROUVÉ":"NON TROUVÉ"}`),s||null}else{const s=e.stops.find(i=>i.stop_type==="lab_pickup"&&i.laboratory_id===r);return console.log(`🔍 Recherche lab_pickup pour ${r}: ${s?"TROUVÉ":"NON TROUVÉ"}`),s||null}}findExistingDropoffForLaboratory(e,r,n){if(n){const s=e.stops.find(i=>i.stop_type==="depot_dropoff");return console.log(`🔍 Recherche depot_dropoff existant: ${s?"TROUVÉ":"NON TROUVÉ"}`),s||null}else{const s=e.stops.find(i=>i.stop_type==="lab_dropoff"&&i.laboratory_id===r);return console.log(`🔍 Recherche lab_dropoff existant pour ${r}: ${s?"TROUVÉ":"NON TROUVÉ"}`),s||null}}async createNewDropoff(e,r,n){let s,i;e.depot_is_lab?(i="depot_dropoff",s=await this.getDepotLocationId()):(i="lab_dropoff",s=e.location.id);const a=this.findBestDropoffPosition(r,n);return{dropoffStop:{route_id:r.id,location_id:s,stop_order:a,stop_type:i,client_actions:null,is_late_stop:!0},dropoffPosition:a}}findBestDropoffPosition(e,r){const n=e.stops.filter(i=>i.stop_type.includes("pickup")||i.stop_type==="client"&&i.client_actions==="pickup");return n.length===0?r+1:Math.max(...n.map(i=>i.stop_order),r)+1}async getDepotLocationId(){const{data:e,error:r}=await Y.from("depot").select("location_id").eq("is_active",!0).limit(1).single();if(r||!e)throw new Error("Impossible de trouver le dépôt principal");return e.location_id}}const LA=new CG;class kG{async insertLateStops(e,r,n){if(r.length===0)return{insertedStops:[],updatedCount:0};console.log(`🔄 Insertion de ${r.length} stops à partir de la position ${n}`),console.log(`📊 Décalage des stops existants +${r.length} positions...`);const{error:s}=await Y.rpc("increment_stop_orders",{route_id_param:e,from_order:n,increment:r.length});if(s)throw console.error("❌ Erreur lors du décalage:",s),new Error(`Impossible de décaler les stops: ${s.message}`);console.log("✅ Décalage des stops terminé");const i=r.map((c,d)=>({route_id:c.route_id,location_id:c.location_id,stop_order:n+d,stop_type:c.stop_type,client_actions:c.client_actions,is_late_stop:!0,completed:!1}));console.log("📍 Stops à insérer:",i.map(c=>`${c.stop_type}@${c.stop_order}`).join(", "));const{data:a,error:l}=await Y.from("driver_route_stops").insert(i).select(`
        *,
        location:locations(
          id,
          latitude,
          longitude,
          formatted_address
        )
      `);if(l)throw console.error("❌ Erreur lors de l'insertion:",l),new Error(`Impossible d'insérer les stops: ${l.message}`);if(!a)throw new Error("Aucun stop inséré");return console.log(`✅ ${a.length} stops insérés avec succès`),{insertedStops:a,updatedCount:r.length}}async createLateShipments(e,r){if(e.length===0)return[];console.log(`📦 Création de ${e.length} shipments...`);const n=e.map(a=>{const l=this.resolveStopId(a.pickup_stop_id,r),c=this.resolveStopId(a.delivery_stop_id,r);return console.log(`🔗 Shipment: pickup=${l} → delivery=${c}`),{laboratory_id:a.laboratory_id,pickup_stop_id:l,delivery_stop_id:c,is_late_shipment:!0,laboratory_client_id:a.laboratory_client_id,pickup_status:"pending",delivery_status:"pending"}}),{data:s,error:i}=await Y.from("driver_route_shipments").insert(n).select("*");if(i)throw console.error("❌ Erreur lors de la création des shipments:",i),new Error(`Impossible de créer les shipments: ${i.message}`);return console.log(`✅ ${s?.length||0} shipments créés`),s||[]}async approveLateStop(e,r){console.log(`✅ Approbation du late stop ${e}...`);const{error:n}=await Y.from("lab_tour_late_stops").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by:r||null}).eq("id",e);if(n)throw console.error("❌ Erreur lors de l'approbation:",n),new Error(`Impossible d'approuver le late stop: ${n.message}`);console.log("✅ Late stop approuvé en base")}async processCompleteLateStopInsertion(e,r,n,s,i,a){console.log(`🚀 Traitement complet late stop ${r}...`);try{const{insertedStops:l}=await this.insertLateStops(e,n,i),c=await this.createLateShipments(s,l);return await this.approveLateStop(r,a),console.log("🎉 Traitement complet terminé avec succès !"),{insertedStops:l,createdShipments:c,success:!0}}catch(l){throw console.error("💥 Erreur lors du traitement complet:",l),l}}resolveStopId(e,r){if(typeof e=="string")return e;const n=e,s=r.find(i=>i.location_id===n.location_id&&i.stop_type===n.stop_type&&i.client_actions===n.client_actions);if(!s)throw console.error("❌ Impossible de résoudre le placeholder:",n),new Error(`Stop non trouvé pour le placeholder ${JSON.stringify(n)}`);return console.log(`🔄 Placeholder résolu: ${n.stop_type} → ${s.id}`),s.id}async checkIncrementStopOrdersFunction(){try{const{error:e}=await Y.rpc("increment_stop_orders",{route_id_param:"00000000-0000-0000-0000-000000000000",from_order:999,increment:1});return!e||!e.message.includes("function increment_stop_orders")}catch{return!1}}}const MA=new kG;class PG{async prepareLateStopInsertion(e){console.log(`🎯 === DÉBUT PRÉPARATION LATE STOP ${e} ===`);try{const r=await this.getLateStopData(e);console.log(`📋 Late stop récupéré: ${r.client?.name} - ${this.getActionText(r)}`);const n=await TA.getDriverRoute(r.client?.driver_id,r.lab_tour?.date);console.log(`🚛 Tournée trouvée: ${n.stops.length} stops, statut: ${n.status}`);const s=TA.findOptimalInsertion(n.stops,r.client?.location);console.log(`📍 Position optimale: ${s.position} (coût: ${s.insertionCost.toFixed(2)}km)`);const i=r.has_delivery?await LA.processLateDelivery(r,n,s.position):await LA.processLatePickup(r,n,s.position);console.log(`📦 Règles métier appliquées: ${i.newStops.length} stops, ${i.newShipments.length} shipments`);const a={lateStopId:e,driverRouteId:n.id,clientName:r.client?.name||"Client inconnu",clientAddress:r.client?.location?.formatted_address||"Adresse inconnue",actionType:this.getActionText(r),driverRoute:n,optimalInsertion:s,newStops:i.newStops,newShipments:i.newShipments,estimatedImpact:{distanceAdded:s.insertionCost,timeAdded:s.estimatedTimeAdded,stopsAdded:i.newStops.length},processedAt:new Date().toISOString()};return console.log("✅ === PRÉPARATION TERMINÉE ==="),a}catch(r){throw console.error("❌ Erreur lors de la préparation:",r),r}}async applyLateStopInsertion(e,r,n){const s=r??e.optimalInsertion.position;console.log(`🚀 === DÉBUT APPLICATION LATE STOP ${e.lateStopId} ===`),console.log(`📍 Position finale: ${s} (${r!==void 0?"ajustée par admin":"position optimale"})`);try{const i=e.newStops.map((l,c)=>({...l,stop_order:s+c})),a=await MA.processCompleteLateStopInsertion(e.driverRouteId,e.lateStopId,i,e.newShipments,s,n);return console.log("✅ === APPLICATION TERMINÉE ==="),console.log(`📊 Résultat: ${a.insertedStops.length} stops, ${a.createdShipments.length} shipments`),{success:a.success,insertedStopsCount:a.insertedStops.length,createdShipmentsCount:a.createdShipments.length}}catch(i){throw console.error("❌ Erreur lors de l'application:",i),i}}async processLateStopComplete(e,r){console.log(`⚡ === TRAITEMENT COMPLET LATE STOP ${e} ===`);try{const n=await this.prepareLateStopInsertion(e),s=await this.applyLateStopInsertion(n,void 0,r);return console.log("🎉 === TRAITEMENT COMPLET RÉUSSI ==="),s}catch(n){throw console.error("💥 Erreur lors du traitement complet:",n),n}}async getLateStopData(e){const{supabase:r}=await Ci(async()=>{const{supabase:i}=await Promise.resolve().then(()=>pG);return{supabase:i}},void 0),{data:n,error:s}=await r.from("lab_tour_late_stops").select(`
        *,
        client:laboratory_clients(
          id,
          name,
          driver_id,
          location:locations(
            id,
            latitude,
            longitude,
            formatted_address
          )
        ),
        lab_tour:lab_tours(
          id,
          date,
          laboratory:laboratories(
            id,
            name,
            depot_is_lab,
            shared_pickup,
            location:locations(
              id,
              latitude,
              longitude,
              formatted_address
            )
          )
        )
      `).eq("id",e).single();if(s)throw new Error(`Late stop ${e} non trouvé: ${s.message}`);if(!n)throw new Error(`Late stop ${e} non trouvé`);return n}getActionText(e){return e.has_pickup&&e.has_delivery?"Récupération + Livraison":e.has_pickup?"Récupération":e.has_delivery?"Livraison":"Action inconnue"}async healthCheck(){try{return{gpsService:!0,businessRules:!0,supabaseOps:!0,incrementFunction:await MA.checkIncrementStopOrdersFunction()}}catch(e){return console.error("❌ Erreur health check:",e),{gpsService:!0,businessRules:!0,supabaseOps:!1,incrementFunction:!1}}}}const RA=new PG,OG=(t,e)=>({problems:{lateStops:[],isLoading:!1,error:null,pendingProblemsCount:0,isProcessingOptimization:!1,currentOptimization:null,realtimeSubscription:null,fetchLateStops:async()=>{t(r=>({...r,problems:{...r.problems,isLoading:!0,error:null}}));try{const r=new Date().toISOString().split("T")[0],{data:n,error:s}=await Y.from("lab_tour_late_stops").select(`
            *,
            client:laboratory_clients(
              id,
              name,
              location:locations(formatted_address)
            ),
            lab_tour:lab_tours(
              id,
              date,
              laboratory:laboratories(name)
            )
          `).gte("requested_at",`${r}T00:00:00`).lte("requested_at",`${r}T23:59:59`).order("requested_at",{ascending:!1});if(s)throw new Error(`Erreur lors de la récupération des late stops: ${s.message}`);const i=n||[],a=i.filter(l=>l.status==="pending").length;t(l=>({...l,problems:{...l.problems,lateStops:i,pendingProblemsCount:a,isLoading:!1,error:null}})),console.log(`📊 Late stops récupérés: ${i.length} (${a} en attente)`)}catch(r){console.error("Erreur lors de la récupération des late stops:",r),t(n=>({...n,problems:{...n.problems,isLoading:!1,error:r instanceof Error?r.message:"Erreur inconnue"}}))}},approveLateStop:async r=>{try{const{error:n}=await Y.from("lab_tour_late_stops").update({status:"approved",reviewed_at:new Date().toISOString()}).eq("id",r);return n?(console.error("Erreur lors de l'approbation du late stop:",n),!1):(await e().problems.fetchLateStops(),console.log(`✅ Late stop ${r} approuvé avec succès`),!0)}catch(n){return console.error("Erreur lors de l'approbation:",n),!1}},rejectLateStop:async(r,n)=>{try{const{error:s}=await Y.from("lab_tour_late_stops").update({status:"rejected",rejection_reason:n,reviewed_at:new Date().toISOString()}).eq("id",r);return s?(console.error("Erreur lors du rejet du late stop:",s),!1):(await e().problems.fetchLateStops(),console.log(`❌ Late stop ${r} rejeté avec succès`),!0)}catch(s){return console.error("Erreur lors du rejet:",s),!1}},prepareOptimization:async r=>{t(n=>({...n,problems:{...n.problems,isProcessingOptimization:!0,error:null}}));try{console.log(`🎯 === TRAITEMENT FRONT-END Late Stop ${r} ===`);const n=await RA.prepareLateStopInsertion(r);return t(s=>({...s,problems:{...s.problems,currentOptimization:n,isProcessingOptimization:!1}})),console.log("✅ Late stop préparé avec succès côté front-end !"),n}catch(n){throw console.error("❌ Erreur lors de la préparation front-end:",n),t(s=>({...s,problems:{...s.problems,isProcessingOptimization:!1,error:n instanceof Error?n.message:"Erreur inconnue"}})),n}},applyOptimization:async(r,n,s)=>{t(i=>({...i,problems:{...i.problems,isProcessingOptimization:!0}}));try{console.log(`🚀 === APPLICATION FRONT-END Late Stop ${r.lateStopId} ===`);const i=await RA.applyLateStopInsertion(r,n,s);if(i.success)return console.log(`✅ Insertion réussie: ${i.insertedStopsCount} stops, ${i.createdShipmentsCount} shipments`),t(a=>({...a,problems:{...a.problems,currentOptimization:null,isProcessingOptimization:!1}})),await e().problems.fetchLateStops(),!0;throw new Error("Échec de l'insertion en base")}catch(i){return console.error("❌ Erreur lors de l'application front-end:",i),t(a=>({...a,problems:{...a.problems,isProcessingOptimization:!1,error:i instanceof Error?i.message:"Erreur inconnue"}})),!1}},clearCurrentOptimization:()=>{t(r=>({...r,problems:{...r.problems,currentOptimization:null,isProcessingOptimization:!1}}))},subscribeToRealtime:()=>{const r=e(),n=r.problems.realtimeSubscription;n&&n.unsubscribe(),console.log("🔔 Abonnement aux changements de late stops...");const s=Y.channel("problems-late-stops-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"lab_tour_late_stops"},async i=>{console.log("🆕 Nouveau late stop détecté:",i),await r.problems.fetchLateStops()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lab_tour_late_stops"},async i=>{console.log("🔄 Mise à jour late stop détectée:",i),await r.problems.fetchLateStops()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"lab_tour_late_stops"},async i=>{console.log("🗑️ Suppression late stop détectée:",i),await r.problems.fetchLateStops()}).subscribe();t(i=>({...i,problems:{...i.problems,realtimeSubscription:s}}))},unsubscribeFromRealtime:()=>{const n=e().problems.realtimeSubscription;n&&(console.log("🔕 Désabonnement des changements de late stops"),n.unsubscribe(),t(s=>({...s,problems:{...s.problems,realtimeSubscription:null}})))},getPendingProblemsCount:()=>{const{pendingProblemsCount:r}=e().problems;return r},refreshProblemsStats:async()=>{await e().problems.fetchLateStops()}}});async function AG(){console.log("🔍 Récupération de la liste des laboratoires...");const{data:t,error:e}=await Y.from("laboratories").select("id, name").order("name");if(e)throw console.error("❌ Erreur lors de la récupération des laboratoires:",e),new Error(`Erreur lors de la récupération des laboratoires: ${e.message}`);return console.log(`✅ ${t?.length||0} laboratoires récupérés`),t||[]}async function TG(t,e,r){console.log(`🔍 Récupération des statistiques pour le laboratoire ${t} (${e} -> ${r})`);try{const{data:n,error:s}=await Y.rpc("calculate_laboratory_statistics",{p_laboratory_id:t,p_period_start:e,p_period_end:r});if(s)throw console.error("❌ Erreur lors du calcul des statistiques:",s),new Error(`Erreur lors du calcul des statistiques: ${s.message}`);console.log("✅ Statistiques calculées, ID:",n);const{data:i,error:a}=await Y.from("laboratory_statistics").select("*").eq("laboratory_id",t).eq("period_start",e).eq("period_end",r).single();if(a)throw console.error("❌ Erreur lors de la récupération des statistiques:",a),new Error(`Erreur lors de la récupération des statistiques: ${a.message}`);if(!i)return console.log("⚠️ Aucune statistique trouvée"),null;const l={...i,weekly_activity:i.weekly_activity||[],market_share_data:i.market_share_data||{lab_volume:0,total_volume:0,lab_percentage:0,other_percentage:0}};return console.log("✅ Statistiques récupérées avec succès"),l}catch(n){throw console.error("❌ Erreur dans getLaboratoryStatistics:",n),n}}function LG(){const t=new Date,e=new Date(t);return e.setDate(t.getDate()-7),{start:e.toISOString().slice(0,10),end:t.toISOString().slice(0,10)}}function MG(t){return["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(r=>{const n=t.find(s=>s.name===r);return{name:r,deliveries:n?.deliveries||0,pickups:n?.pickups||0,avgDeliveries:n?.avgDeliveries||0,avgPickups:n?.avgPickups||0}})}function RG(t,e){return[{name:e,value:t.lab_percentage},{name:"Autres laboratoires",value:t.other_percentage}]}const DG=as((t,e)=>({laboratories:[],selectedLaboratory:null,statistics:null,dateRange:LG(),isLoading:!1,error:null,fetchLaboratories:async()=>{console.log("🏪 [Store] Chargement des laboratoires..."),t({isLoading:!0,error:null});try{const r=await AG();t({laboratories:r,isLoading:!1}),console.log(`✅ [Store] ${r.length} laboratoires chargés`)}catch(r){console.error("❌ [Store] Erreur chargement laboratoires:",r),t({error:r instanceof Error?r.message:"Erreur lors du chargement des laboratoires",isLoading:!1})}},setSelectedLaboratory:r=>{console.log("🏪 [Store] Sélection laboratoire:",r?.name||"Aucun"),t({selectedLaboratory:r,statistics:null}),r&&e().fetchStatistics()},setDateRange:(r,n)=>{console.log(`🏪 [Store] Nouvelle période: ${r} -> ${n}`),t({dateRange:{start:r,end:n},statistics:null});const{selectedLaboratory:s}=e();s&&e().fetchStatistics()},fetchStatistics:async()=>{const{selectedLaboratory:r,dateRange:n}=e();if(!r){console.log("ℹ️ [Store] Aucun laboratoire sélectionné");return}console.log(`🏪 [Store] Chargement statistiques ${r.name}...`),t({isLoading:!0,error:null});try{const s=await TG(r.id,n.start,n.end);t({statistics:s,isLoading:!1}),console.log("✅ [Store] Statistiques chargées:",s?"Données trouvées":"Aucune donnée")}catch(s){console.error("❌ [Store] Erreur chargement statistiques:",s),t({error:s instanceof Error?s.message:"Erreur lors du chargement des statistiques",isLoading:!1})}},refreshStatistics:async()=>{console.log("🔄 [Store] Actualisation des statistiques..."),await e().fetchStatistics()},clearError:()=>{t({error:null})},getFormattedWeeklyActivity:()=>{const{statistics:r}=e();return r?.weekly_activity?MG(r.weekly_activity):[]},getFormattedMarketShare:()=>{const{statistics:r,selectedLaboratory:n}=e();return!r?.market_share_data||!n?[{name:"Votre laboratoire",value:0},{name:"Autres laboratoires",value:100}]:RG(r.market_share_data,n.name)},getStats:()=>{const{statistics:r}=e();return r?{mostDelivered:{name:r.most_delivered_client_name||"Aucun client",count:r.most_delivered_count},leastDelivered:{name:r.least_delivered_client_name||"Aucun client",count:r.least_delivered_count},successRate:r.success_rate,failureRate:r.failure_rate}:{mostDelivered:{name:"Aucune donnée",count:0},leastDelivered:{name:"Aucune donnée",count:0},successRate:0,failureRate:0}}})),IG=()=>{const t=DG();return{laboratories:t.laboratories,selectedLaboratory:t.selectedLaboratory,statistics:t.statistics,dateRange:t.dateRange,isLoading:t.isLoading,error:t.error,fetchLaboratories:t.fetchLaboratories,setSelectedLaboratory:t.setSelectedLaboratory,setDateRange:t.setDateRange,fetchStatistics:t.fetchStatistics,refreshStatistics:t.refreshStatistics,clearError:t.clearError,weeklyActivityData:t.getFormattedWeeklyActivity(),marketShareData:t.getFormattedMarketShare(),stats:t.getStats(),hasData:!!t.statistics,hasLaboratories:t.laboratories.length>0,isReady:!t.isLoading&&t.laboratories.length>0}},$G=t=>{if(!t||t.length===0)return[];const e=[];let r=0;for(;r<t.length;){const n=t[r],s=[n];let i=r+1;for(;i<t.length&&t[i].location_id===n.location_id&&t[i].stop_type==="client"&&n.stop_type==="client";)s.push(t[i]),i++;if(s.length>1){const a=s.some(g=>g.client_actions==="pickup"||g.client_actions==="both"),l=s.some(g=>g.client_actions==="delivery"||g.client_actions==="both");let c;a&&l?c="both":a?c="pickup":c="delivery";const d=s.every(g=>g.completed),f=s.filter(g=>g.arrival_time).sort((g,y)=>new Date(y.arrival_time).getTime()-new Date(g.arrival_time).getTime())[0]?.arrival_time;let p="";n.client_name?(p=n.client_name,n.laboratory_name&&(p+=` (${n.laboratory_name})`)):p=n.location.formatted_address||"Adresse inconnue";const m={...n,client_actions:c,displayAction:c,completed:d,arrival_time:f||n.arrival_time,isMerged:!0,mergedStopsIds:s.slice(1).map(g=>g.id),mergedStopsCount:s.length,displayName:p,displayType:"dentist"};e.push(m)}else{let a="";n.stop_type.includes("lab")?n.laboratory_name?(a=n.laboratory_name,n.stop_type==="lab_pickup"?a+=" (Récupération)":n.stop_type==="lab_dropoff"&&(a+=" (Retour)")):a=n.location?.formatted_address||"Laboratoire":n.stop_type.includes("depot")?a="Dépôt PROVENCE COURSES":n.client_name?(a=n.client_name,n.laboratory_name&&(a+=` (${n.laboratory_name})`)):a=n.location?.formatted_address||"Client";const l={...n,displayName:a,displayType:n.stop_type.includes("lab")?"laboratory":n.stop_type.includes("depot")?"depot":"dentist",displayAction:n.client_actions||"delivery",isMerged:!1};e.push(l)}r=i}return e},FG=t=>{if(!t||t.length===0)return[];const e=[];let r=0;for(;r<t.length;){const n=t[r],s=[n];let i=r+1;for(;i<t.length&&t[i].location_id===n.location_id&&t[i].stop_type==="client"&&n.stop_type==="client";)s.push(t[i]),i++;e.push(s),r=i}return e},BG=t=>{const e=t.length,r=t.filter(a=>a.completed).length;let n=0,s=0;t.forEach(a=>{a.displayAction==="pickup"?n++:a.displayAction==="delivery"?s++:a.displayAction==="both"&&(n++,s++)});const i=e>0?r/e*100:0;return{totalStops:e,completedStops:r,totalPickups:n,totalDeliveries:s,progress:i}},zG=as((t,e)=>({routes:[],isLoading:!1,error:null,searchQuery:"",fetchRoutes:async()=>{t({isLoading:!0,error:null});try{const r=new Date().toISOString().split("T")[0];console.log(`🔄 Récupération des tournées du soir pour ${r}`);const{data:n,error:s}=await Y.from("driver_routes").select(`
          id,
          driver_id,
          date,
          status,
          estimated_duration,
          total_distance_km,
          created_at,
          updated_at,
          polyline,
          driver:drivers!driver_routes_driver_id_fkey (
            id,
            full_name,
            email,
            start_address
          )
        `).eq("date",r).in("status",["optimized","validated"]).order("created_at",{ascending:!1});if(s)throw new Error(`Erreur lors de la récupération des routes: ${s.message}`);console.log(`✅ ${n?.length||0} routes trouvées`);const a=(await Promise.all((n||[]).map(async l=>{const{data:c,error:d}=await Y.from("driver_route_stops").select(`
              id, 
              route_id, 
              location_id, 
              stop_order, 
              stop_type, 
              client_actions, 
              completed,
              arrival_time,
              estimated_arrival_time,
              estimated_departure_time,
              duration_from_previous,
              distance_from_previous,
              created_at,
              location:locations!driver_route_stops_location_id_fkey (
                id,
                formatted_address,
                latitude,
                longitude,
                delivery_instructions,
                type
              )
            `).eq("route_id",l.id).order("stop_order",{ascending:!0});if(d)return console.error(`Erreur stops pour route ${l.id}:`,d),null;const f=await Promise.all((c||[]).map(async g=>{let y={...g};if(g.stop_type.includes("lab"))try{const{data:b,error:x}=await Y.from("laboratories").select("name").eq("location_id",g.location_id).maybeSingle();!x&&b&&(y.laboratory_name=b.name)}catch(b){console.warn(`Impossible de récupérer le laboratoire pour location ${g.location_id}:`,b)}if(g.stop_type==="client")try{const{data:b,error:x}=await Y.from("driver_route_shipments").select(`
                      laboratory_client_id,
                      laboratory_clients!inner(name, laboratory_id, laboratories!inner(name))
                    `).or(`pickup_stop_id.eq.${g.id},delivery_stop_id.eq.${g.id}`).limit(1);if(!x&&b&&b.length>0){const j=b[0].laboratory_clients,S=j?.laboratories;y.client_name=j?.name,y.laboratory_name=S?.name}else{const{data:j,error:S}=await Y.from("laboratory_clients").select(`
                        name,
                        laboratory:laboratories!laboratory_clients_laboratory_id_fkey (name)
                      `).eq("location_id",g.location_id).limit(1);!S&&j&&j.length>0&&(y.client_name=j[0].name,y.laboratory_name=j[0].laboratory?.name)}}catch(b){console.warn(`Impossible de récupérer le client pour stop ${g.id}:`,b)}return y})),p=$G(f||[]),m=BG(p);return{...l,stops:p,...m}}))).filter(l=>l!==null);t({routes:a,isLoading:!1,error:null}),console.log(`✅ ${a.length} routes traitées avec succès`)}catch(r){console.error("❌ Erreur lors de la récupération des tournées:",r),t({error:r instanceof Error?r.message:"Erreur inconnue",isLoading:!1})}},setSearchQuery:r=>{t({searchQuery:r})},clearError:()=>{t({error:null})},reorderStops:async(r,n,s)=>{try{const i=e().getRouteById(r);if(!i)throw new Error("Route non trouvée");console.log(`🔄 Réorganisation des stops: ${n} -> ${s}`);const a=[...i.stops],[l]=a.splice(n,1);a.splice(s,0,l);const c=[];let d=1;for(const p of a)if(p.isMerged&&p.mergedStopsIds&&p.mergedStopsIds.length>0){c.push({id:p.id,stop_order:d}),d++;for(const m of p.mergedStopsIds)c.push({id:m,stop_order:d}),d++}else c.push({id:p.id,stop_order:d}),d++;console.log(`🔄 Préparation de ${c.length} mises à jour d'ordres séquentiels`),console.log("📋 Détail des mises à jour:",c.map(p=>`${p.id.slice(-6)}: ${p.stop_order}`).join(", "));const{error:f}=await Y.rpc("update_stop_orders_batch",{updates:c});if(f){console.error("❌ Erreur lors de la mise à jour par batch, fallback sur mise à jour séquentielle:",f);for(const p of c){const{error:m}=await Y.from("driver_route_stops").update({stop_order:p.stop_order}).eq("id",p.id);if(m)throw new Error(`Erreur lors de la mise à jour du stop ${p.id}: ${m.message}`)}}return console.log(`✅ ${c.length} stops mis à jour en base avec ordres séquentiels préservant les fusions`),setTimeout(()=>{t(p=>({routes:p.routes.map(m=>m.id===r?{...m,stops:a.map((g,y)=>({...g,stop_order:y+1}))}:m)}))},100),!0}catch(i){return console.error("❌ Erreur lors de la réorganisation:",i),await e().fetchRoutes(),t({error:i instanceof Error?i.message:"Erreur lors de la réorganisation"}),!1}},moveStopUp:async(r,n)=>n<=0?!1:await e().reorderStops(r,n,n-1),moveStopDown:async(r,n)=>{const s=e().getRouteById(r);return!s||n>=s.stops.length-1?!1:await e().reorderStops(r,n,n+1)},updateStopOrder:async(r,n,s)=>{try{const{error:i}=await Y.from("driver_route_stops").update({stop_order:s}).eq("id",n);if(i)throw new Error(`Erreur lors de la mise à jour: ${i.message}`);return await e().fetchRoutes(),!0}catch(i){return console.error("❌ Erreur lors de la mise à jour du stop:",i),t({error:i instanceof Error?i.message:"Erreur lors de la mise à jour"}),!1}},validateRoute:async r=>{try{const{error:n}=await Y.from("driver_routes").update({status:"validated",updated_at:new Date().toISOString()}).eq("id",r);if(n)throw new Error(`Erreur lors de la validation: ${n.message}`);return t(s=>({routes:s.routes.map(i=>i.id===r?{...i,status:"validated"}:i)})),console.log(`✅ Route ${r} validée avec succès`),!0}catch(n){return console.error("❌ Erreur lors de la validation:",n),t({error:n instanceof Error?n.message:"Erreur lors de la validation"}),!1}},reverseRoute:async r=>{try{console.log(`🔄 Inversion de la route ${r}`);const{data:n,error:s}=await Y.from("driver_route_stops").select("id, stop_order, location_id, stop_type, client_actions").eq("route_id",r).order("stop_order",{ascending:!0});if(s)throw new Error(`Erreur lors de la récupération des stops: ${s.message}`);if(!n||n.length===0)throw new Error("Aucun stop trouvé pour cette route");console.log(`📋 ${n.length} stops récupérés pour inversion`);const i=FG(n);console.log(`🔗 ${i.length} groupes identifiés (certains peuvent être fusionnés)`);const a=i.reverse(),l=[];let c=1;for(const f of a)for(const p of f)l.push({id:p.id,stop_order:c}),c++;console.log(`🔄 Préparation de ${l.length} mises à jour d'ordres pour inversion`);const{error:d}=await Y.rpc("update_stop_orders_batch",{updates:l});if(d){console.warn("⚠️ Erreur batch, utilisation du fallback séquentiel:",d);for(const f of l){const{error:p}=await Y.from("driver_route_stops").update({stop_order:f.stop_order}).eq("id",f.id);if(p)throw new Error(`Erreur lors de la mise à jour du stop ${f.id}: ${p.message}`)}}return console.log(`✅ Route ${r} inversée avec succès - ${l.length} stops mis à jour`),await e().fetchRoutes(),!0}catch(n){return console.error("❌ Erreur lors de l'inversion:",n),t({error:n instanceof Error?n.message:"Erreur lors de l'inversion"}),!1}},getFilteredRoutes:()=>{const{routes:r,searchQuery:n}=e();return n.trim()?r.filter(s=>s.driver.full_name.toLowerCase().includes(n.toLowerCase())):r},getRouteById:r=>e().routes.find(n=>n.id===r)})),ht=as()(uW((t,e,r)=>({...vG(t),...yG(t,e),...wG(t,e),...jG(t,e),...NG(t,e),...OG(t,e),reset:()=>{t(n=>({...n,auth:{...n.auth,user:null,isLoading:!1,error:null,initialized:!1},realtime:{...n.realtime,isConnected:!1,subscriptions:[],connectionError:null},driverRoutes:{...n.driverRoutes,routes:[],selectedRoute:null,isLoading:!1,isOptimizing:!1,optimizingRouteId:null,error:null,filters:{date:new Date().toISOString().split("T")[0],status:"all",searchTerm:void 0},realtimeSubscriptions:null},monitoring:{...n.monitoring,routes:[],selectedRouteId:null,isLoading:!1,error:null,filters:{status:"all",searchQuery:""},stats:{totalRoutes:0,activeRoutes:0,completedRoutes:0,totalDistance:0,totalDuration:0,totalStops:0,completedStops:0,totalDeliveries:0,completedDeliveries:0,totalPickups:0,completedPickups:0,overallProgress:0},lastUpdated:null},labTours:{...n.labTours,tours:[],filteredTours:[],laboratories:[],searchQuery:"",isLoading:!1,error:null,realtimeSubscription:null},problems:{...n.problems,lateStops:[],isLoading:!1,error:null,pendingProblemsCount:0,isProcessingOptimization:!1,currentOptimization:null}}))},hydrate:async()=>{try{await e().auth.checkSession(),e().auth.user&&e().realtime.initializeSubscriptions()}catch(n){console.error("Erreur lors de l'hydratation:",n)}}}),{name:"provence-courses-store"})),UG=()=>ht(t=>t.monitoring),H3=()=>ht(t=>({login:t.auth.login,logout:t.auth.logout,checkSession:t.auth.checkSession,clearError:t.auth.clearError})),Fh=()=>ht(t=>({fetchRoutes:t.driverRoutes.fetchRoutes,generateRoutes:t.driverRoutes.generateRoutes,optimizeRoute:t.driverRoutes.optimizeRoute,optimizeRouteSimple:t.driverRoutes.optimizeRouteSimple,validateRoute:t.driverRoutes.validateRoute,setFilters:t.driverRoutes.setFilters,resetFilters:t.driverRoutes.resetFilters,setSelectedRoute:t.driverRoutes.setSelectedRoute,getDriversRoutesValidationCount:t.driverRoutes.getDriversRoutesValidationCount,getInProgressRoutesCount:t.driverRoutes.getInProgressRoutesCount,checkGenerationStatus:t.driverRoutes.checkGenerationStatus,setGenerationState:t.driverRoutes.setGenerationState})),qG=()=>ht(t=>({fetchMonitoringRoutes:t.monitoring.fetchMonitoringRoutes,setSelectedRoute:t.monitoring.setSelectedRoute,setFilters:t.monitoring.setFilters,updateStopStatus:t.monitoring.updateStopStatus,updateShipmentStatus:t.monitoring.updateShipmentStatus,refreshData:t.monitoring.refreshData,setupRealtimeMonitoring:t.monitoring.setupRealtimeMonitoring,cleanupRealtimeMonitoring:t.monitoring.cleanupRealtimeMonitoring})),VG=()=>ht(t=>({fetchAllTours:t.labTours.fetchAllTours,fetchTourDetails:t.labTours.fetchTourDetails,updateTourStatus:t.labTours.updateTourStatus,updateTourStops:t.labTours.updateTourStops,deleteTour:t.labTours.deleteTour,createTour:t.labTours.createTour,subscribeToRealtime:t.labTours.subscribeToRealtime,unsubscribeFromRealtime:t.labTours.unsubscribeFromRealtime,filterToursByLaboratory:t.labTours.filterToursByLaboratory,fetchLaboratoryClients:t.labTours.fetchLaboratoryClients,getTodayTotalDeliveries:t.labTours.getTodayTotalDeliveries,getTodayTotalPickups:t.labTours.getTodayTotalPickups,getTodayToursCount:t.labTours.getTodayToursCount,getPendingValidationsCount:t.labTours.getPendingValidationsCount})),G3=()=>ht(t=>t.auth.user),WN=()=>ht(t=>t.auth.isLoading),WG=()=>ht(t=>t.auth.error),HN=()=>ht(t=>t.auth.initialized),HG=()=>ht(t=>t.driverRoutes.routes),K3=()=>ht(t=>t.driverRoutes.isLoading),GG=()=>ht(t=>t.driverRoutes.error),Z3=()=>ht(t=>t.driverRoutes.isOptimizing),X3=()=>ht(t=>t.driverRoutes.optimizingRouteId),KG=()=>ht(t=>t.driverRoutes.selectedRoute),ZG=()=>ht(t=>t.driverRoutes.lastGenerationResult),XG=()=>ht(t=>t.driverRoutes.isGenerating),YG=()=>ht(t=>t.driverRoutes.generationStartTime),JG=()=>ht(t=>t.driverRoutes.generationDate),QG=()=>ht(t=>t.monitoring.isLoading),eK=()=>ht(t=>t.monitoring.error),tK=()=>ht(t=>t.monitoring.stats),rK=()=>ht(t=>t.labTours.isLoading),nK=()=>ht(t=>({reset:t.reset,hydrate:t.hydrate}));console.log("🏪 Store central initialisé avec les slices:",{auth:"✅ Authentification",realtime:"✅ Temps réel",driverRoutes:"✅ Routes de livreurs",monitoring:"✅ Monitoring temps réel",labTours:"✅ Tournées laboratoires",problems:"🚨 Problèmes"});const sK=async()=>{try{console.log("Vérification et création des buckets nécessaires...");const{data:t,error:e}=await Y.storage.listBuckets();if(e)return console.error("Erreur lors de la récupération des buckets:",e),console.log("Impossible de vérifier les buckets existants, on suppose qu'ils existent déjà"),!0;const r=[{name:"locations",public:!0,fileSizeLimit:5242880},{name:"photos-delivery",public:!0,fileSizeLimit:5242880}];for(const n of r)if(t?.some(i=>i.name===n.name))console.log(`Le bucket ${n.name} existe déjà`);else{console.log(`Tentative de création du bucket ${n.name}...`);try{const{error:i}=await Y.storage.createBucket(n.name,{public:n.public,fileSizeLimit:n.fileSizeLimit});if(i){i.message.includes("violates row-level security policy")||i.message.includes("already exists")?console.log(`Le bucket ${n.name} existe probablement déjà ou n'est pas accessible`):console.error(`Erreur lors de la création du bucket ${n.name}:`,i);continue}console.log(`Bucket ${n.name} créé avec succès`)}catch(i){console.error(`Exception lors de la création du bucket ${n.name}:`,i)}}return!0}catch(t){return console.error("Erreur lors de la création des buckets:",t),!0}};let iK={data:""},aK=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||iK,oK=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lK=/\/\*[^]*?\*\/|  +/g,DA=/\n+/g,Qa=(t,e)=>{let r="",n="",s="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+a+";":n+=i[1]=="f"?Qa(a,i):i+"{"+Qa(a,i[1]=="k"?"":e)+"}":typeof a=="object"?n+=Qa(a,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Qa.p?Qa.p(i,a):i+":"+a+";")}return r+(e&&s?e+"{"+s+"}":s)+n},Wi={},Y3=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Y3(t[r]);return e}return t},cK=(t,e,r,n,s)=>{let i=Y3(t),a=Wi[i]||(Wi[i]=(c=>{let d=0,f=11;for(;d<c.length;)f=101*f+c.charCodeAt(d++)>>>0;return"go"+f})(i));if(!Wi[a]){let c=i!==t?t:(d=>{let f,p,m=[{}];for(;f=oK.exec(d.replace(lK,""));)f[4]?m.shift():f[3]?(p=f[3].replace(DA," ").trim(),m.unshift(m[0][p]=m[0][p]||{})):m[0][f[1]]=f[2].replace(DA," ").trim();return m[0]})(t);Wi[a]=Qa(s?{["@keyframes "+a]:c}:c,r?"":"."+a)}let l=r&&Wi.g?Wi.g:null;return r&&(Wi.g=Wi[a]),((c,d,f,p)=>{p?d.data=d.data.replace(p,c):d.data.indexOf(c)===-1&&(d.data=f?c+d.data:d.data+c)})(Wi[a],e,n,l),a},uK=(t,e,r)=>t.reduce((n,s,i)=>{let a=e[i];if(a&&a.call){let l=a(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":Qa(l,""):l===!1?"":l}return n+s+(a??"")},"");function $v(t){let e=this||{},r=t.call?t(e.p):t;return cK(r.unshift?r.raw?uK(r,[].slice.call(arguments,1),e.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):r,aK(e.target),e.g,e.o,e.k)}let J3,C1,k1;$v.bind({g:1});let aa=$v.bind({k:1});function dK(t,e,r,n){Qa.p=e,J3=t,C1=r,k1=n}function jo(t,e){let r=this||{};return function(){let n=arguments;function s(i,a){let l=Object.assign({},i),c=l.className||s.className;r.p=Object.assign({theme:C1&&C1()},l),r.o=/ *go\d+/.test(c),l.className=$v.apply(r,n)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),k1&&d[0]&&k1(l),J3(d,l)}return s}}var fK=t=>typeof t=="function",Ym=(t,e)=>fK(t)?t(e):t,hK=(()=>{let t=0;return()=>(++t).toString()})(),Q3=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),pK=20,e6=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,pK)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:r}=e;return e6(t,{type:t.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},Bm=[],nl={toasts:[],pausedAt:void 0},kl=t=>{nl=e6(nl,t),Bm.forEach(e=>{e(nl)})},mK={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},gK=(t={})=>{let[e,r]=w.useState(nl),n=w.useRef(nl);w.useEffect(()=>(n.current!==nl&&r(nl),Bm.push(r),()=>{let i=Bm.indexOf(r);i>-1&&Bm.splice(i,1)}),[]);let s=e.toasts.map(i=>{var a,l,c;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((a=t[i.type])==null?void 0:a.removeDelay)||t?.removeDelay,duration:i.duration||((l=t[i.type])==null?void 0:l.duration)||t?.duration||mK[i.type],style:{...t.style,...(c=t[i.type])==null?void 0:c.style,...i.style}}});return{...e,toasts:s}},vK=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:r?.id||hK()}),Bh=t=>(e,r)=>{let n=vK(e,t,r);return kl({type:2,toast:n}),n.id},Ht=(t,e)=>Bh("blank")(t,e);Ht.error=Bh("error");Ht.success=Bh("success");Ht.loading=Bh("loading");Ht.custom=Bh("custom");Ht.dismiss=t=>{kl({type:3,toastId:t})};Ht.remove=t=>kl({type:4,toastId:t});Ht.promise=(t,e,r)=>{let n=Ht.loading(e.loading,{...r,...r?.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Ym(e.success,s):void 0;return i?Ht.success(i,{id:n,...r,...r?.success}):Ht.dismiss(n),s}).catch(s=>{let i=e.error?Ym(e.error,s):void 0;i?Ht.error(i,{id:n,...r,...r?.error}):Ht.dismiss(n)}),t};var yK=(t,e)=>{kl({type:1,toast:{id:t,height:e}})},xK=()=>{kl({type:5,time:Date.now()})},af=new Map,bK=1e3,wK=(t,e=bK)=>{if(af.has(t))return;let r=setTimeout(()=>{af.delete(t),kl({type:4,toastId:t})},e);af.set(t,r)},_K=t=>{let{toasts:e,pausedAt:r}=gK(t);w.useEffect(()=>{if(r)return;let i=Date.now(),a=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&Ht.dismiss(l.id);return}return setTimeout(()=>Ht.dismiss(l.id),c)});return()=>{a.forEach(l=>l&&clearTimeout(l))}},[e,r]);let n=w.useCallback(()=>{r&&kl({type:6,time:Date.now()})},[r]),s=w.useCallback((i,a)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=a||{},f=e.filter(g=>(g.position||d)===(i.position||d)&&g.height),p=f.findIndex(g=>g.id===i.id),m=f.filter((g,y)=>y<p&&g.visible).length;return f.filter(g=>g.visible).slice(...l?[m+1]:[0,m]).reduce((g,y)=>g+(y.height||0)+c,0)},[e]);return w.useEffect(()=>{e.forEach(i=>{if(i.dismissed)wK(i.id,i.removeDelay);else{let a=af.get(i.id);a&&(clearTimeout(a),af.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:yK,startPause:xK,endPause:n,calculateOffset:s}}},jK=aa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,SK=aa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,NK=aa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,EK=jo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jK} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${SK} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${NK} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,CK=aa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,kK=jo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${CK} 1s linear infinite;
`,PK=aa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,OK=aa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,AK=jo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PK} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${OK} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,TK=jo("div")`
  position: absolute;
`,LK=jo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,MK=aa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RK=jo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${MK} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,DK=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?w.createElement(RK,null,e):e:r==="blank"?null:w.createElement(LK,null,w.createElement(kK,{...n}),r!=="loading"&&w.createElement(TK,null,r==="error"?w.createElement(EK,{...n}):w.createElement(AK,{...n})))},IK=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,$K=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,FK="0%{opacity:0;} 100%{opacity:1;}",BK="0%{opacity:1;} 100%{opacity:0;}",zK=jo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,UK=jo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qK=(t,e)=>{let r=t.includes("top")?1:-1,[n,s]=Q3()?[FK,BK]:[IK(r),$K(r)];return{animation:e?`${aa(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${aa(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},VK=w.memo(({toast:t,position:e,style:r,children:n})=>{let s=t.height?qK(t.position||e||"top-center",t.visible):{opacity:0},i=w.createElement(DK,{toast:t}),a=w.createElement(UK,{...t.ariaProps},Ym(t.message,t));return w.createElement(zK,{className:t.className,style:{...s,...r,...t.style}},typeof n=="function"?n({icon:i,message:a}):w.createElement(w.Fragment,null,i,a))});dK(w.createElement);var WK=({id:t,className:e,style:r,onHeightUpdate:n,children:s})=>{let i=w.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;n(t,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return w.createElement("div",{ref:i,className:e,style:r},s)},HK=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Q3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...s}},GK=$v`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,vm=16,KK=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:s,containerStyle:i,containerClassName:a})=>{let{toasts:l,handlers:c}=_K(r);return w.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:vm,left:vm,right:vm,bottom:vm,pointerEvents:"none",...i},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let f=d.position||e,p=c.calculateOffset(d,{reverseOrder:t,gutter:n,defaultPosition:e}),m=HK(f,p);return w.createElement(WK,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?GK:"",style:m},d.type==="custom"?Ym(d.message,d):s?s(d):w.createElement(VK,{toast:d,position:f}))}))},Ur=Ht;const ZK=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState(null),[s,i]=w.useState(!1);return w.useEffect(()=>{const c=p=>{if(s){console.log("🔒 Mise à jour déjà en cours, ignoré...");return}const m=localStorage.getItem("last-pwa-update");if(m&&Date.now()-parseInt(m)<3e4){console.log("🕐 Mise à jour récente détectée, ignoré...");return}e(!0),n(()=>p.detail.updateSW)},d=()=>{console.log("Application prête pour utilisation hors ligne")},f=async()=>{if(console.log("🚨 Vérification forcée de mise à jour déclenchée"),localStorage.removeItem("last-pwa-update"),localStorage.removeItem("app-version"),localStorage.removeItem("pwa-app-version"),localStorage.removeItem("pwa-version"),"serviceWorker"in navigator)try{const p=await navigator.serviceWorker.getRegistrations();for(const m of p)await m.update(),console.log("Service worker mis à jour");if("caches"in window){const m=await caches.keys();await Promise.all(m.map(g=>(console.log("Suppression du cache:",g),caches.delete(g))))}}catch(p){console.warn("Erreur lors de la force update:",p)}setTimeout(()=>{e(!0),n(()=>()=>{console.log("Rechargement forcé de la PWA..."),window.location.reload()})},1e3)};return window.addEventListener("pwa-update-available",c),window.addEventListener("pwa-offline-ready",d),window.addEventListener("pwa-force-update-check",f),()=>{window.removeEventListener("pwa-update-available",c),window.removeEventListener("pwa-offline-ready",d),window.removeEventListener("pwa-force-update-check",f)}},[]),{updateAvailable:t,updateSW:r,dismissUpdate:()=>{e(!1)},applyUpdate:async()=>{if(r&&!s){if(i(!0),e(!1),localStorage.setItem("last-pwa-update",Date.now().toString()),console.log("🧹 Nettoyage des données de cache avant mise à jour..."),localStorage.removeItem("app-version"),localStorage.removeItem("pwa-app-version"),localStorage.removeItem("pwa-version"),"serviceWorker"in navigator)try{const c=await navigator.serviceWorker.getRegistrations();for(const d of c)await d.unregister();if("caches"in window){const d=await caches.keys();await Promise.all(d.map(f=>caches.delete(f)))}}catch(c){console.warn("Erreur lors du nettoyage des caches:",c)}setTimeout(()=>{r()},500)}}}},GN=w.createContext({});function KN(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const Fv=w.createContext(null),ZN=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class XK extends w.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function YK({children:t,isPresent:e}){const r=w.useId(),n=w.useRef(null),s=w.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=w.useContext(ZN);return w.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:d}=s.current;if(e||!n.current||!a||!l)return;n.current.dataset.motionPopId=r;const f=document.createElement("style");return i&&(f.nonce=i),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),o.jsx(XK,{isPresent:e,childRef:n,sizeRef:s,children:w.cloneElement(t,{ref:n})})}const JK=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=KN(QK),c=w.useId(),d=w.useCallback(p=>{l.set(p,!0);for(const m of l.values())if(!m)return;n&&n()},[l,n]),f=w.useMemo(()=>({id:c,initial:e,isPresent:r,custom:s,onExitComplete:d,register:p=>(l.set(p,!1),()=>l.delete(p))}),i?[Math.random(),d]:[r,d]);return w.useMemo(()=>{l.forEach((p,m)=>l.set(m,!1))},[r]),w.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(t=o.jsx(YK,{isPresent:r,children:t})),o.jsx(Fv.Provider,{value:f,children:t})};function QK(){return new Map}function t6(t=!0){const e=w.useContext(Fv);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,i=w.useId();w.useEffect(()=>{t&&s(i)},[t]);const a=w.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,a]:[!0]}const ym=t=>t.key||"";function IA(t){const e=[];return w.Children.forEach(t,r=>{w.isValidElement(r)&&e.push(r)}),e}const XN=typeof window<"u",r6=XN?w.useLayoutEffect:w.useEffect,Rt=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1})=>{const[l,c]=t6(a),d=w.useMemo(()=>IA(t),[t]),f=a&&!l?[]:d.map(ym),p=w.useRef(!0),m=w.useRef(d),g=KN(()=>new Map),[y,b]=w.useState(d),[x,j]=w.useState(d);r6(()=>{p.current=!1,m.current=d;for(let E=0;E<x.length;E++){const N=ym(x[E]);f.includes(N)?g.delete(N):g.get(N)!==!0&&g.set(N,!1)}},[x,f.length,f.join("-")]);const S=[];if(d!==y){let E=[...d];for(let N=0;N<x.length;N++){const P=x[N],O=ym(P);f.includes(O)||(E.splice(N,0,P),S.push(P))}i==="wait"&&S.length&&(E=S),j(IA(E)),b(d);return}const{forceRender:C}=w.useContext(GN);return o.jsx(o.Fragment,{children:x.map(E=>{const N=ym(E),P=a&&!l?!1:d===x||f.includes(N),O=()=>{if(g.has(N))g.set(N,!0);else return;let L=!0;g.forEach(A=>{A||(L=!1)}),L&&(C?.(),j(m.current),a&&c?.(),n&&n())};return o.jsx(JK,{isPresent:P,initial:!p.current||r?void 0:!1,custom:P?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:P?void 0:O,children:E},N)})})},Jn=t=>t;let n6=Jn;function YN(t){let e;return()=>(e===void 0&&(e=t()),e)}const Uc=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},ra=t=>t*1e3,na=t=>t/1e3,eZ={useManualTiming:!1};function tZ(t){let e=new Set,r=new Set,n=!1,s=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(c.schedule(d),t()),d(a)}const c={schedule:(d,f=!1,p=!1)=>{const g=p&&n?e:r;return f&&i.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(a=d,n){s=!0;return}n=!0,[e,r]=[r,e],e.forEach(l),e.clear(),n=!1,s&&(s=!1,c.process(d))}};return c}const xm=["read","resolveKeyframes","update","preRender","render","postRender"],rZ=40;function s6(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,a=xm.reduce((j,S)=>(j[S]=tZ(i),j),{}),{read:l,resolveKeyframes:c,update:d,preRender:f,render:p,postRender:m}=a,g=()=>{const j=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(j-s.timestamp,rZ),1),s.timestamp=j,s.isProcessing=!0,l.process(s),c.process(s),d.process(s),f.process(s),p.process(s),m.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(g))},y=()=>{r=!0,n=!0,s.isProcessing||t(g)};return{schedule:xm.reduce((j,S)=>{const C=a[S];return j[S]=(E,N=!1,P=!1)=>(r||y(),C.schedule(E,N,P)),j},{}),cancel:j=>{for(let S=0;S<xm.length;S++)a[xm[S]].cancel(j)},state:s,steps:a}}const{schedule:Qt,cancel:co,state:tn,steps:Dx}=s6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jn,!0),i6=w.createContext({strict:!1}),$A={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qc={};for(const t in $A)qc[t]={isEnabled:e=>$A[t].some(r=>!!e[r])};function nZ(t){for(const e in t)qc[e]={...qc[e],...t[e]}}const sZ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||sZ.has(t)}let a6=t=>!Jm(t);function iZ(t){t&&(a6=e=>e.startsWith("on")?!Jm(e):t(e))}try{iZ(require("@emotion/is-prop-valid").default)}catch{}function aZ(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(a6(s)||r===!0&&Jm(s)||!e&&!Jm(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function oZ(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Bv=w.createContext({});function Tf(t){return typeof t=="string"||Array.isArray(t)}function zv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const JN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],QN=["initial",...JN];function Uv(t){return zv(t.animate)||QN.some(e=>Tf(t[e]))}function o6(t){return!!(Uv(t)||t.variants)}function lZ(t,e){if(Uv(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Tf(r)?r:void 0,animate:Tf(n)?n:void 0}}return t.inherit!==!1?e:{}}function cZ(t){const{initial:e,animate:r}=lZ(t,w.useContext(Bv));return w.useMemo(()=>({initial:e,animate:r}),[FA(e),FA(r)])}function FA(t){return Array.isArray(t)?t.join(" "):t}const uZ=Symbol.for("motionComponentSymbol");function yc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dZ(t,e,r){return w.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):yc(r)&&(r.current=n))},[e])}const eE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fZ="framerAppearId",l6="data-"+eE(fZ),{schedule:tE}=s6(queueMicrotask,!1),c6=w.createContext({});function hZ(t,e,r,n,s){var i,a;const{visualElement:l}=w.useContext(Bv),c=w.useContext(i6),d=w.useContext(Fv),f=w.useContext(ZN).reducedMotion,p=w.useRef(null);n=n||c.renderer,!p.current&&n&&(p.current=n(t,{visualState:e,parent:l,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const m=p.current,g=w.useContext(c6);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&pZ(p.current,r,s,g);const y=w.useRef(!1);w.useInsertionEffect(()=>{m&&y.current&&m.update(r,d)});const b=r[l6],x=w.useRef(!!b&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,b))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,b)));return r6(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),tE.render(m.render),x.current&&m.animationState&&m.animationState.animateChanges())}),w.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)===null||j===void 0||j.call(window,b)}),x.current=!1))}),m}function pZ(t,e,r,n){const{layoutId:s,layout:i,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:u6(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||l&&yc(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function u6(t){if(t)return t.options.allowProjection!==!1?t.projection:u6(t.parent)}function mZ({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){var i,a;t&&nZ(t);function l(d,f){let p;const m={...w.useContext(ZN),...d,layoutId:gZ(d)},{isStatic:g}=m,y=cZ(d),b=n(d,g);if(!g&&XN){vZ();const x=yZ(m);p=x.MeasureLayout,y.visualElement=hZ(s,b,m,e,x.ProjectionNode)}return o.jsxs(Bv.Provider,{value:y,children:[p&&y.visualElement?o.jsx(p,{visualElement:y.visualElement,...m}):null,r(s,d,dZ(b,y.visualElement,f),b,g,y.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(a=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&a!==void 0?a:""})`}`;const c=w.forwardRef(l);return c[uZ]=s,c}function gZ({layoutId:t}){const e=w.useContext(GN).id;return e&&t!==void 0?e+"-"+t:t}function vZ(t,e){w.useContext(i6).strict}function yZ(t){const{drag:e,layout:r}=qc;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const xZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rE(t){return typeof t!="string"||t.includes("-")?!1:!!(xZ.indexOf(t)>-1||/[A-Z]/u.test(t))}function BA(t){const e=[{},{}];return t?.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function nE(t,e,r,n){if(typeof e=="function"){const[s,i]=BA(n);e=e(r!==void 0?r:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=BA(n);e=e(r!==void 0?r:t.custom,s,i)}return e}const P1=t=>Array.isArray(t),bZ=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),wZ=t=>P1(t)?t[t.length-1]||0:t,hn=t=>!!(t&&t.getVelocity);function zm(t){const e=hn(t)?t.get():t;return bZ(e)?e.toValue():e}function _Z({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:r},n,s,i){const a={latestValues:jZ(n,s,i,t),renderState:e()};return r&&(a.onMount=l=>r({props:n,current:l,...a}),a.onUpdate=l=>r(l)),a}const d6=t=>(e,r)=>{const n=w.useContext(Bv),s=w.useContext(Fv),i=()=>_Z(t,e,n,s);return r?i():KN(i)};function jZ(t,e,r,n){const s={},i=n(t,{});for(const m in i)s[m]=zm(i[m]);let{initial:a,animate:l}=t;const c=Uv(t),d=o6(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let f=r?r.initial===!1:!1;f=f||a===!1;const p=f?l:a;if(p&&typeof p!="boolean"&&!zv(p)){const m=Array.isArray(p)?p:[p];for(let g=0;g<m.length;g++){const y=nE(t,m[g]);if(y){const{transitionEnd:b,transition:x,...j}=y;for(const S in j){let C=j[S];if(Array.isArray(C)){const E=f?C.length-1:0;C=C[E]}C!==null&&(s[S]=C)}for(const S in b)s[S]=b[S]}}}return s}const ku=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Pl=new Set(ku),f6=t=>e=>typeof e=="string"&&e.startsWith(t),h6=f6("--"),SZ=f6("var(--"),sE=t=>SZ(t)?NZ.test(t.split("/*")[0].trim()):!1,NZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,p6=(t,e)=>e&&typeof t=="number"?e.transform(t):t,oa=(t,e,r)=>r>e?e:r<t?t:r,Pu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Lf={...Pu,transform:t=>oa(0,1,t)},bm={...Pu,default:1},zh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Va=zh("deg"),wi=zh("%"),Je=zh("px"),EZ=zh("vh"),CZ=zh("vw"),zA={...wi,parse:t=>wi.parse(t)/100,transform:t=>wi.transform(t*100)},kZ={borderWidth:Je,borderTopWidth:Je,borderRightWidth:Je,borderBottomWidth:Je,borderLeftWidth:Je,borderRadius:Je,radius:Je,borderTopLeftRadius:Je,borderTopRightRadius:Je,borderBottomRightRadius:Je,borderBottomLeftRadius:Je,width:Je,maxWidth:Je,height:Je,maxHeight:Je,top:Je,right:Je,bottom:Je,left:Je,padding:Je,paddingTop:Je,paddingRight:Je,paddingBottom:Je,paddingLeft:Je,margin:Je,marginTop:Je,marginRight:Je,marginBottom:Je,marginLeft:Je,backgroundPositionX:Je,backgroundPositionY:Je},PZ={rotate:Va,rotateX:Va,rotateY:Va,rotateZ:Va,scale:bm,scaleX:bm,scaleY:bm,scaleZ:bm,skew:Va,skewX:Va,skewY:Va,distance:Je,translateX:Je,translateY:Je,translateZ:Je,x:Je,y:Je,z:Je,perspective:Je,transformPerspective:Je,opacity:Lf,originX:zA,originY:zA,originZ:Je},UA={...Pu,transform:Math.round},iE={...kZ,...PZ,zIndex:UA,size:Je,fillOpacity:Lf,strokeOpacity:Lf,numOctaves:UA},OZ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AZ=ku.length;function TZ(t,e,r){let n="",s=!0;for(let i=0;i<AZ;i++){const a=ku[i],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const d=p6(l,iE[a]);if(!c){s=!1;const f=OZ[a]||a;n+=`${f}(${d}) `}r&&(e[a]=d)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function aE(t,e,r){const{style:n,vars:s,transformOrigin:i}=t;let a=!1,l=!1;for(const c in e){const d=e[c];if(Pl.has(c)){a=!0;continue}else if(h6(c)){s[c]=d;continue}else{const f=p6(d,iE[c]);c.startsWith("origin")?(l=!0,i[c]=f):n[c]=f}}if(e.transform||(a||r?n.transform=TZ(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:f=0}=i;n.transformOrigin=`${c} ${d} ${f}`}}const LZ={offset:"stroke-dashoffset",array:"stroke-dasharray"},MZ={offset:"strokeDashoffset",array:"strokeDasharray"};function RZ(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?LZ:MZ;t[i.offset]=Je.transform(-n);const a=Je.transform(e),l=Je.transform(r);t[i.array]=`${a} ${l}`}function qA(t,e,r){return typeof t=="string"?t:Je.transform(e+r*t)}function DZ(t,e,r){const n=qA(e,t.x,t.width),s=qA(r,t.y,t.height);return`${n} ${s}`}function oE(t,{attrX:e,attrY:r,attrScale:n,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...d},f,p){if(aE(t,d,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:y}=t;m.transform&&(y&&(g.transform=m.transform),delete m.transform),y&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=DZ(y,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),a!==void 0&&RZ(m,a,l,c,!1)}const lE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),m6=()=>({...lE(),attrs:{}}),cE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function g6(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const v6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function y6(t,e,r,n){g6(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(v6.has(s)?s:eE(s),e.attrs[s])}const Qm={};function IZ(t){Object.assign(Qm,t)}function x6(t,{layout:e,layoutId:r}){return Pl.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Qm[t]||t==="opacity")}function uE(t,e,r){var n;const{style:s}=t,i={};for(const a in s)(hn(s[a])||e.style&&hn(e.style[a])||x6(a,t)||((n=r?.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[a]=s[a]);return i}function b6(t,e,r){const n=uE(t,e,r);for(const s in t)if(hn(t[s])||hn(e[s])){const i=ku.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=t[s]}return n}function $Z(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const VA=["x","y","width","height","cx","cy","r"],FZ={useVisualState:d6({scrapeMotionValuesFromProps:b6,createRenderState:m6,onUpdate:({props:t,prevProps:e,current:r,renderState:n,latestValues:s})=>{if(!r)return;let i=!!t.drag;if(!i){for(const l in s)if(Pl.has(l)){i=!0;break}}if(!i)return;let a=!e;if(e)for(let l=0;l<VA.length;l++){const c=VA[l];t[c]!==e[c]&&(a=!0)}a&&Qt.read(()=>{$Z(r,n),Qt.render(()=>{oE(n,s,cE(r.tagName),t.transformTemplate),y6(r,n)})})}})},BZ={useVisualState:d6({scrapeMotionValuesFromProps:uE,createRenderState:lE})};function w6(t,e,r){for(const n in e)!hn(e[n])&&!x6(n,r)&&(t[n]=e[n])}function zZ({transformTemplate:t},e){return w.useMemo(()=>{const r=lE();return aE(r,e,t),Object.assign({},r.vars,r.style)},[e])}function UZ(t,e){const r=t.style||{},n={};return w6(n,r,t),Object.assign(n,zZ(t,e)),n}function qZ(t,e){const r={},n=UZ(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}function VZ(t,e,r,n){const s=w.useMemo(()=>{const i=m6();return oE(i,e,cE(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};w6(i,t.style,t),s.style={...i,...s.style}}return s}function WZ(t=!1){return(r,n,s,{latestValues:i},a)=>{const c=(rE(r)?VZ:qZ)(n,i,a,r),d=aZ(n,typeof r=="string",t),f=r!==w.Fragment?{...d,...c,ref:s}:{},{children:p}=n,m=w.useMemo(()=>hn(p)?p.get():p,[p]);return w.createElement(r,{...f,children:m})}}function HZ(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...rE(n)?FZ:BZ,preloadedFeatures:t,useRender:WZ(s),createVisualElement:e,Component:n};return mZ(a)}}function _6(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function qv(t,e,r){const n=t.getProps();return nE(n,e,r!==void 0?r:n.custom,t)}const GZ=YN(()=>window.ScrollTimeline!==void 0);class KZ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(s=>{if(GZ()&&s.attachTimeline)return s.attachTimeline(e);if(typeof r=="function")return r(s)});return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class ZZ extends KZ{then(e,r){return Promise.all(this.animations).then(e).catch(r)}}function dE(t,e){return t?t[e]||t.default||t:void 0}const O1=2e4;function j6(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<O1;)e+=r,n=t.next(e);return e>=O1?1/0:e}function fE(t){return typeof t=="function"}function WA(t,e){t.timeline=e,t.onfinish=null}const hE=t=>Array.isArray(t)&&typeof t[0]=="number",XZ={linearEasing:void 0};function YZ(t,e){const r=YN(t);return()=>{var n;return(n=XZ[e])!==null&&n!==void 0?n:r()}}const eg=YZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),S6=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let i=0;i<s;i++)n+=t(Uc(0,s-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function N6(t){return!!(typeof t=="function"&&eg()||!t||typeof t=="string"&&(t in A1||eg())||hE(t)||Array.isArray(t)&&t.every(N6))}const Hd=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,A1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hd([0,.65,.55,1]),circOut:Hd([.55,0,1,.45]),backIn:Hd([.31,.01,.66,-.59]),backOut:Hd([.33,1.53,.69,.99])};function E6(t,e){if(t)return typeof t=="function"&&eg()?S6(t,e):hE(t)?Hd(t):Array.isArray(t)?t.map(r=>E6(r,e)||A1.easeOut):A1[t]}const Ws={x:!1,y:!1};function C6(){return Ws.x||Ws.y}function JZ(t,e,r){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function k6(t,e){const r=JZ(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function HA(t){return e=>{e.pointerType==="touch"||C6()||t(e)}}function QZ(t,e,r={}){const[n,s,i]=k6(t,r),a=HA(l=>{const{target:c}=l,d=e(l);if(typeof d!="function"||!c)return;const f=HA(p=>{d(p),c.removeEventListener("pointerleave",f)});c.addEventListener("pointerleave",f,s)});return n.forEach(l=>{l.addEventListener("pointerenter",a,s)}),i}const P6=(t,e)=>e?t===e?!0:P6(t,e.parentElement):!1,pE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,eX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function tX(t){return eX.has(t.tagName)||t.tabIndex!==-1}const Gd=new WeakSet;function GA(t){return e=>{e.key==="Enter"&&t(e)}}function Ix(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const rX=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=GA(()=>{if(Gd.has(r))return;Ix(r,"down");const s=GA(()=>{Ix(r,"up")}),i=()=>Ix(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function KA(t){return pE(t)&&!C6()}function nX(t,e,r={}){const[n,s,i]=k6(t,r),a=l=>{const c=l.currentTarget;if(!KA(l)||Gd.has(c))return;Gd.add(c);const d=e(l),f=(g,y)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),!(!KA(g)||!Gd.has(c))&&(Gd.delete(c),typeof d=="function"&&d(g,{success:y}))},p=g=>{f(g,r.useGlobalTarget||P6(c,g.target))},m=g=>{f(g,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",m,s)};return n.forEach(l=>{!tX(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),l.addEventListener("focus",d=>rX(d,s),s)}),i}function sX(t){return t==="x"||t==="y"?Ws[t]?null:(Ws[t]=!0,()=>{Ws[t]=!1}):Ws.x||Ws.y?null:(Ws.x=Ws.y=!0,()=>{Ws.x=Ws.y=!1})}const O6=new Set(["width","height","top","left","right","bottom",...ku]);let Um;function iX(){Um=void 0}const _i={now:()=>(Um===void 0&&_i.set(tn.isProcessing||eZ.useManualTiming?tn.timestamp:performance.now()),Um),set:t=>{Um=t,queueMicrotask(iX)}};function mE(t,e){t.indexOf(e)===-1&&t.push(e)}function gE(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class vE{constructor(){this.subscriptions=[]}add(e){return mE(this.subscriptions,e),()=>gE(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function A6(t,e){return e?t*(1e3/e):0}const ZA=30,aX=t=>!isNaN(parseFloat(t));class oX{constructor(e,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const i=_i.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=_i.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=aX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new vE);const n=this.events[e].add(r);return e==="change"?()=>{n(),Qt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_i.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ZA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,ZA);return A6(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mf(t,e){return new oX(t,e)}function lX(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Mf(r))}function cX(t,e){const r=qv(t,e);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const a in i){const l=wZ(i[a]);lX(t,a,l)}}function uX(t){return!!(hn(t)&&t.add)}function T1(t,e){const r=t.getValue("willChange");if(uX(r))return r.add(e)}function T6(t){return t.props[l6]}const L6=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,dX=1e-7,fX=12;function hX(t,e,r,n,s){let i,a,l=0;do a=e+(r-e)/2,i=L6(a,n,s)-t,i>0?r=a:e=a;while(Math.abs(i)>dX&&++l<fX);return a}function Uh(t,e,r,n){if(t===e&&r===n)return Jn;const s=i=>hX(i,0,1,t,r);return i=>i===0||i===1?i:L6(s(i),e,n)}const M6=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,R6=t=>e=>1-t(1-e),D6=Uh(.33,1.53,.69,.99),yE=R6(D6),I6=M6(yE),$6=t=>(t*=2)<1?.5*yE(t):.5*(2-Math.pow(2,-10*(t-1))),xE=t=>1-Math.sin(Math.acos(t)),F6=R6(xE),B6=M6(xE),z6=t=>/^0[^.\s]+$/u.test(t);function pX(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||z6(t):!0}const of=t=>Math.round(t*1e5)/1e5,bE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mX(t){return t==null}const gX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wE=(t,e)=>r=>!!(typeof r=="string"&&gX.test(r)&&r.startsWith(t)||e&&!mX(r)&&Object.prototype.hasOwnProperty.call(r,e)),U6=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,i,a,l]=n.match(bE);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},vX=t=>oa(0,255,t),$x={...Pu,transform:t=>Math.round(vX(t))},sl={test:wE("rgb","red"),parse:U6("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+$x.transform(t)+", "+$x.transform(e)+", "+$x.transform(r)+", "+of(Lf.transform(n))+")"};function yX(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const L1={test:wE("#"),parse:yX,transform:sl.transform},xc={test:wE("hsl","hue"),parse:U6("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+wi.transform(of(e))+", "+wi.transform(of(r))+", "+of(Lf.transform(n))+")"},un={test:t=>sl.test(t)||L1.test(t)||xc.test(t),parse:t=>sl.test(t)?sl.parse(t):xc.test(t)?xc.parse(t):L1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?sl.transform(t):xc.transform(t)},xX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bX(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bE))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(xX))===null||r===void 0?void 0:r.length)||0)>0}const q6="number",V6="color",wX="var",_X="var(",XA="${}",jX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rf(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(jX,c=>(un.test(c)?(n.color.push(i),s.push(V6),r.push(un.parse(c))):c.startsWith(_X)?(n.var.push(i),s.push(wX),r.push(c)):(n.number.push(i),s.push(q6),r.push(parseFloat(c))),++i,XA)).split(XA);return{values:r,split:l,indexes:n,types:s}}function W6(t){return Rf(t).values}function H6(t){const{split:e,types:r}=Rf(t),n=e.length;return s=>{let i="";for(let a=0;a<n;a++)if(i+=e[a],s[a]!==void 0){const l=r[a];l===q6?i+=of(s[a]):l===V6?i+=un.transform(s[a]):i+=s[a]}return i}}const SX=t=>typeof t=="number"?0:t;function NX(t){const e=W6(t);return H6(t)(e.map(SX))}const uo={test:bX,parse:W6,createTransformer:H6,getAnimatableNone:NX},EX=new Set(["brightness","contrast","saturate","opacity"]);function CX(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(bE)||[];if(!n)return t;const s=r.replace(n,"");let i=EX.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const kX=/\b([a-z-]*)\(.*?\)/gu,M1={...uo,getAnimatableNone:t=>{const e=t.match(kX);return e?e.map(CX).join(" "):t}},PX={...iE,color:un,backgroundColor:un,outlineColor:un,fill:un,stroke:un,borderColor:un,borderTopColor:un,borderRightColor:un,borderBottomColor:un,borderLeftColor:un,filter:M1,WebkitFilter:M1},_E=t=>PX[t];function G6(t,e){let r=_E(t);return r!==M1&&(r=uo),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const OX=new Set(["auto","none","0"]);function AX(t,e,r){let n=0,s;for(;n<t.length&&!s;){const i=t[n];typeof i=="string"&&!OX.has(i)&&Rf(i).values.length&&(s=t[n]),n++}if(s&&r)for(const i of e)t[i]=G6(r,s)}const YA=t=>t===Pu||t===Je,JA=(t,e)=>parseFloat(t.split(", ")[e]),QA=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return JA(s[1],e);{const i=n.match(/^matrix\((.+)\)$/u);return i?JA(i[1],t):0}},TX=new Set(["x","y","z"]),LX=ku.filter(t=>!TX.has(t));function MX(t){const e=[];return LX.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Vc={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:QA(4,13),y:QA(5,14)};Vc.translateX=Vc.x;Vc.translateY=Vc.y;const fl=new Set;let R1=!1,D1=!1;function K6(){if(D1){const t=Array.from(fl).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=MX(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,a])=>{var l;(l=n.getValue(i))===null||l===void 0||l.set(a)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}D1=!1,R1=!1,fl.forEach(t=>t.complete()),fl.clear()}function Z6(){fl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(D1=!0)})}function RX(){Z6(),K6()}class jE{constructor(e,r,n,s,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(fl.add(this),R1||(R1=!0,Qt.read(Z6),Qt.resolveKeyframes(K6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const a=s?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&r){const c=n.readValue(r,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&a===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),fl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,fl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const X6=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),DX=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function IX(t){const e=DX.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function Y6(t,e,r=1){const[n,s]=IX(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const a=i.trim();return X6(a)?parseFloat(a):a}return sE(s)?Y6(s,e,r+1):s}const J6=t=>e=>e.test(t),$X={test:t=>t==="auto",parse:t=>t},Q6=[Pu,Je,wi,Va,CZ,EZ,$X],e2=t=>Q6.find(J6(t));class eF extends jE{constructor(e,r,n,s,i){super(e,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),sE(d))){const f=Y6(d,r.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!O6.has(n)||e.length!==2)return;const[s,i]=e,a=e2(s),l=e2(i);if(a!==l)if(YA(a)&&YA(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)pX(e[s])&&n.push(s);n.length&&AX(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,l=s[a];s[a]=Vc[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{r.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const t2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(uo.test(t)||t==="0")&&!t.startsWith("url("));function FX(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function BX(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=t2(s,e),l=t2(i,e);return!a||!l?!1:FX(t)||(r==="spring"||fE(r))&&n}const zX=t=>t!==null;function Vv(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(zX),i=e&&r!=="loop"&&e%2===1?0:s.length-1;return!i||n===void 0?s[i]:n}const UX=40;class tF{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=_i.now(),this.options={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:a,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>UX?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&RX(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=_i.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:i,delay:a,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!BX(e,n,s,i))if(a)this.options.duration=0;else{c&&c(Vv(e,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,r);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...f},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ur=(t,e,r)=>t+(e-t)*r;function Fx(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function qX({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,a=0;if(!e)s=i=a=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;s=Fx(c,l,t+1/3),i=Fx(c,l,t),a=Fx(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}function tg(t,e){return r=>r>0?e:t}const Bx=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},VX=[L1,sl,xc],WX=t=>VX.find(e=>e.test(t));function r2(t){const e=WX(t);if(!e)return!1;let r=e.parse(t);return e===xc&&(r=qX(r)),r}const n2=(t,e)=>{const r=r2(t),n=r2(e);if(!r||!n)return tg(t,e);const s={...r};return i=>(s.red=Bx(r.red,n.red,i),s.green=Bx(r.green,n.green,i),s.blue=Bx(r.blue,n.blue,i),s.alpha=ur(r.alpha,n.alpha,i),sl.transform(s))},HX=(t,e)=>r=>e(t(r)),qh=(...t)=>t.reduce(HX),I1=new Set(["none","hidden"]);function GX(t,e){return I1.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function KX(t,e){return r=>ur(t,e,r)}function SE(t){return typeof t=="number"?KX:typeof t=="string"?sE(t)?tg:un.test(t)?n2:YX:Array.isArray(t)?rF:typeof t=="object"?un.test(t)?n2:ZX:tg}function rF(t,e){const r=[...t],n=r.length,s=t.map((i,a)=>SE(i)(i,e[a]));return i=>{for(let a=0;a<n;a++)r[a]=s[a](i);return r}}function ZX(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=SE(t[s])(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function XX(t,e){var r;const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=t.indexes[a][s[a]],c=(r=t.values[l])!==null&&r!==void 0?r:0;n[i]=c,s[a]++}return n}const YX=(t,e)=>{const r=uo.createTransformer(e),n=Rf(t),s=Rf(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?I1.has(t)&&!s.values.length||I1.has(e)&&!n.values.length?GX(t,e):qh(rF(XX(n,s),s.values),r):tg(t,e)};function nF(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?ur(t,e,r):SE(t)(t,e)}const JX=5;function sF(t,e,r){const n=Math.max(e-JX,0);return A6(r-t(n),e-n)}const pr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zx=.001;function QX({duration:t=pr.duration,bounce:e=pr.bounce,velocity:r=pr.velocity,mass:n=pr.mass}){let s,i,a=1-e;a=oa(pr.minDamping,pr.maxDamping,a),t=oa(pr.minDuration,pr.maxDuration,na(t)),a<1?(s=d=>{const f=d*a,p=f*t,m=f-r,g=$1(d,a),y=Math.exp(-p);return zx-m/g*y},i=d=>{const p=d*a*t,m=p*r+r,g=Math.pow(a,2)*Math.pow(d,2)*t,y=Math.exp(-p),b=$1(Math.pow(d,2),a);return(-s(d)+zx>0?-1:1)*((m-g)*y)/b}):(s=d=>{const f=Math.exp(-d*t),p=(d-r)*t+1;return-zx+f*p},i=d=>{const f=Math.exp(-d*t),p=(r-d)*(t*t);return f*p});const l=5/t,c=tY(s,i,l);if(t=ra(t),isNaN(c))return{stiffness:pr.stiffness,damping:pr.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:a*2*Math.sqrt(n*d),duration:t}}}const eY=12;function tY(t,e,r){let n=r;for(let s=1;s<eY;s++)n=n-t(n)/e(n);return n}function $1(t,e){return t*Math.sqrt(1-e*e)}const rY=["duration","bounce"],nY=["stiffness","damping","mass"];function s2(t,e){return e.some(r=>t[r]!==void 0)}function sY(t){let e={velocity:pr.velocity,stiffness:pr.stiffness,damping:pr.damping,mass:pr.mass,isResolvedFromDuration:!1,...t};if(!s2(t,nY)&&s2(t,rY))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*oa(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:pr.mass,stiffness:s,damping:i}}else{const r=QX(t);e={...e,...r,mass:pr.mass},e.isResolvedFromDuration=!0}return e}function iF(t=pr.visualDuration,e=pr.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:f,duration:p,velocity:m,isResolvedFromDuration:g}=sY({...r,velocity:-na(r.velocity||0)}),y=m||0,b=d/(2*Math.sqrt(c*f)),x=a-i,j=na(Math.sqrt(c/f)),S=Math.abs(x)<5;n||(n=S?pr.restSpeed.granular:pr.restSpeed.default),s||(s=S?pr.restDelta.granular:pr.restDelta.default);let C;if(b<1){const N=$1(j,b);C=P=>{const O=Math.exp(-b*j*P);return a-O*((y+b*j*x)/N*Math.sin(N*P)+x*Math.cos(N*P))}}else if(b===1)C=N=>a-Math.exp(-j*N)*(x+(y+j*x)*N);else{const N=j*Math.sqrt(b*b-1);C=P=>{const O=Math.exp(-b*j*P),L=Math.min(N*P,300);return a-O*((y+b*j*x)*Math.sinh(L)+N*x*Math.cosh(L))/N}}const E={calculatedDuration:g&&p||null,next:N=>{const P=C(N);if(g)l.done=N>=p;else{let O=0;b<1&&(O=N===0?ra(y):sF(C,N,P));const L=Math.abs(O)<=n,A=Math.abs(a-P)<=s;l.done=L&&A}return l.value=l.done?a:P,l},toString:()=>{const N=Math.min(j6(E),O1),P=S6(O=>E.next(N*O).value,N,30);return N+"ms "+P}};return E}function i2({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:f}){const p=t[0],m={done:!1,value:p},g=L=>l!==void 0&&L<l||c!==void 0&&L>c,y=L=>l===void 0?c:c===void 0||Math.abs(l-L)<Math.abs(c-L)?l:c;let b=r*e;const x=p+b,j=a===void 0?x:a(x);j!==x&&(b=j-p);const S=L=>-b*Math.exp(-L/n),C=L=>j+S(L),E=L=>{const A=S(L),R=C(L);m.done=Math.abs(A)<=d,m.value=m.done?j:R};let N,P;const O=L=>{g(m.value)&&(N=L,P=iF({keyframes:[m.value,y(m.value)],velocity:sF(C,L,m.value),damping:s,stiffness:i,restDelta:d,restSpeed:f}))};return O(0),{calculatedDuration:null,next:L=>{let A=!1;return!P&&N===void 0&&(A=!0,E(L),O(L)),N!==void 0&&L>=N?P.next(L-N):(!A&&E(L),m)}}}const iY=Uh(.42,0,1,1),aY=Uh(0,0,.58,1),aF=Uh(.42,0,.58,1),oY=t=>Array.isArray(t)&&typeof t[0]!="number",lY={linear:Jn,easeIn:iY,easeInOut:aF,easeOut:aY,circIn:xE,circInOut:B6,circOut:F6,backIn:yE,backInOut:I6,backOut:D6,anticipate:$6},a2=t=>{if(hE(t)){n6(t.length===4);const[e,r,n,s]=t;return Uh(e,r,n,s)}else if(typeof t=="string")return lY[t];return t};function cY(t,e,r){const n=[],s=r||nF,i=t.length-1;for(let a=0;a<i;a++){let l=s(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Jn:e;l=qh(c,l)}n.push(l)}return n}function uY(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(n6(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=cY(e,n,s),c=l.length,d=f=>{if(a&&f<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const m=Uc(t[p],t[p+1],f);return l[p](m)};return r?f=>d(oa(t[0],t[i-1],f)):d}function dY(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=Uc(0,e,n);t.push(ur(r,1,s))}}function fY(t){const e=[0];return dY(e,t.length-1),e}function hY(t,e){return t.map(r=>r*e)}function pY(t,e){return t.map(()=>e||aF).splice(0,t.length-1)}function rg({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=oY(n)?n.map(a2):a2(n),i={done:!1,value:e[0]},a=hY(r&&r.length===e.length?r:fY(e),t),l=uY(a,e,{ease:Array.isArray(s)?s:pY(e,s)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const mY=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Qt.update(e,!0),stop:()=>co(e),now:()=>tn.isProcessing?tn.timestamp:_i.now()}},gY={decay:i2,inertia:i2,tween:rg,keyframes:rg,spring:iF},vY=t=>t/100;class NE extends tF{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:s,keyframes:i}=this.options,a=s?.KeyframeResolver||jE,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new a(i,l,r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=this.options,l=fE(r)?r:gY[r]||rg;let c,d;l!==rg&&typeof e[0]!="number"&&(c=qh(vY,nF(e[0],e[1])),e=[0,100]);const f=l({...this.options,keyframes:e});i==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=j6(f));const{calculatedDuration:p}=f,m=p+s,g=m*(n+1)-s;return{generator:f,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:p,resolvedDuration:m,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:L}=this.options;return{done:!0,value:L[L.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:a,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:f,resolvedDuration:p}=n;if(this.startTime===null)return i.next(0);const{delay:m,repeat:g,repeatType:y,repeatDelay:b,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const j=this.currentTime-m*(this.speed>=0?1:-1),S=this.speed>=0?j<0:j>f;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let C=this.currentTime,E=i;if(g){const L=Math.min(this.currentTime,f)/p;let A=Math.floor(L),R=L%1;!R&&L>=1&&(R=1),R===1&&A--,A=Math.min(A,g+1),!!(A%2)&&(y==="reverse"?(R=1-R,b&&(R-=b/p)):y==="mirror"&&(E=a)),C=oa(0,1,R)*p}const N=S?{done:!1,value:c[0]}:E.next(C);l&&(N.value=l(N.value));let{done:P}=N;!S&&d!==null&&(P=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return O&&s!==void 0&&(N.value=Vv(c,this.options,s)),x&&x(N.value),O&&this.finish(),N}get duration(){const{resolved:e}=this;return e?na(e.calculatedDuration):0}get time(){return na(this.currentTime)}set time(e){e=ra(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=na(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=mY,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const yY=new Set(["opacity","clipPath","filter","transform"]);function xY(t,e,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:l="easeInOut",times:c}={}){const d={[e]:r};c&&(d.offset=c);const f=E6(l,s);return Array.isArray(f)&&(d.easing=f),t.animate(d,{delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}const bY=YN(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ng=10,wY=2e4;function _Y(t){return fE(t.type)||t.type==="spring"||!N6(t.ease)}function jY(t,e){const r=new NE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const s=[];let i=0;for(;!n.done&&i<wY;)n=r.sample(i),s.push(n.value),i+=ng;return{times:void 0,keyframes:s,duration:i-ng,ease:"linear"}}const oF={anticipate:$6,backInOut:I6,circInOut:B6};function SY(t){return t in oF}class o2 extends tF{constructor(e){super(e);const{name:r,motionValue:n,element:s,keyframes:i}=this.options;this.resolver=new eF(i,(a,l)=>this.onKeyframesResolved(a,l),r,n,s),this.resolver.scheduleResolve()}initPlayback(e,r){let{duration:n=300,times:s,ease:i,type:a,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof i=="string"&&eg()&&SY(i)&&(i=oF[i]),_Y(this.options)){const{onComplete:p,onUpdate:m,motionValue:g,element:y,...b}=this.options,x=jY(e,b);e=x.keyframes,e.length===1&&(e[1]=e[0]),n=x.duration,s=x.times,i=x.ease,a="keyframes"}const f=xY(l.owner.current,c,e,{...this.options,duration:n,times:s,ease:i});return f.startTime=d??this.calcStartTime(),this.pendingTimeline?(WA(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;l.set(Vv(e,this.options,r)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:n,times:s,type:a,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return na(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return na(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=ra(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return Jn;const{animation:n}=r;WA(n,e)}return Jn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:s,type:i,ease:a,times:l}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:f,onComplete:p,element:m,...g}=this.options,y=new NE({...g,keyframes:n,duration:s,type:i,ease:a,times:l,isGenerator:!0}),b=ra(this.time);d.setWithVelocity(y.sample(b-ng).value,y.sample(b).value,ng)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:a,type:l}=e;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=r.owner.getProps();return bY()&&n&&yY.has(n)&&!c&&!d&&!s&&i!=="mirror"&&a!==0&&l!=="inertia"}}const NY={type:"spring",stiffness:500,damping:25,restSpeed:10},EY=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CY={type:"keyframes",duration:.8},kY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PY=(t,{keyframes:e})=>e.length>2?CY:Pl.has(t)?t.startsWith("scale")?EY(e[1]):NY:kY;function OY({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:d,...f}){return!!Object.keys(f).length}const EE=(t,e,r,n={},s,i)=>a=>{const l=dE(n,t)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-ra(c);let f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};OY(l)||(f={...f,...PY(t,f)}),f.duration&&(f.duration=ra(f.duration)),f.repeatDelay&&(f.repeatDelay=ra(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(p=!0)),p&&!i&&e.get()!==void 0){const m=Vv(f.keyframes,l);if(m!==void 0)return Qt.update(()=>{f.onUpdate(m),f.onComplete()}),new ZZ([])}return!i&&o2.supports(f)?new o2(f):new NE(f)};function AY({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function lF(t,e,{delay:r=0,transitionOverride:n,type:s}={}){var i;let{transition:a=t.getDefaultTransition(),transitionEnd:l,...c}=e;n&&(a=n);const d=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const p in c){const m=t.getValue(p,(i=t.latestValues[p])!==null&&i!==void 0?i:null),g=c[p];if(g===void 0||f&&AY(f,p))continue;const y={delay:r,...dE(a||{},p)};let b=!1;if(window.MotionHandoffAnimation){const j=T6(t);if(j){const S=window.MotionHandoffAnimation(j,p,Qt);S!==null&&(y.startTime=S,b=!0)}}T1(t,p),m.start(EE(p,m,g,t.shouldReduceMotion&&O6.has(p)?{type:!1}:y,t,b));const x=m.animation;x&&d.push(x)}return l&&Promise.all(d).then(()=>{Qt.update(()=>{l&&cX(t,l)})}),d}function F1(t,e,r={}){var n;const s=qv(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const a=s?()=>Promise.all(lF(t,s,r)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=i;return TY(t,e,f+d,p,m,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,f]=c==="beforeChildren"?[a,l]:[l,a];return d().then(()=>f())}else return Promise.all([a(),l(r.delay)])}function TY(t,e,r=0,n=0,s=1,i){const a=[],l=(t.variantChildren.size-1)*n,c=s===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(t.variantChildren).sort(LY).forEach((d,f)=>{d.notify("AnimationStart",e),a.push(F1(d,e,{...i,delay:r+c(f)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function LY(t,e){return t.sortNodePosition(e)}function MY(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>F1(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=F1(t,e,r);else{const s=typeof e=="function"?qv(t,e,r.custom):e;n=Promise.all(lF(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const RY=QN.length;function cF(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?cF(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<RY;r++){const n=QN[r],s=t.props[n];(Tf(s)||s===!1)&&(e[n]=s)}return e}const DY=[...JN].reverse(),IY=JN.length;function $Y(t){return e=>Promise.all(e.map(({animation:r,options:n})=>MY(t,r,n)))}function FY(t){let e=$Y(t),r=l2(),n=!0;const s=c=>(d,f)=>{var p;const m=qv(t,f,c==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(m){const{transition:g,transitionEnd:y,...b}=m;d={...d,...b,...y}}return d};function i(c){e=c(t)}function a(c){const{props:d}=t,f=cF(t.parent)||{},p=[],m=new Set;let g={},y=1/0;for(let x=0;x<IY;x++){const j=DY[x],S=r[j],C=d[j]!==void 0?d[j]:f[j],E=Tf(C),N=j===c?S.isActive:null;N===!1&&(y=x);let P=C===f[j]&&C!==d[j]&&E;if(P&&n&&t.manuallyAnimateOnMount&&(P=!1),S.protectedKeys={...g},!S.isActive&&N===null||!C&&!S.prevProp||zv(C)||typeof C=="boolean")continue;const O=BY(S.prevProp,C);let L=O||j===c&&S.isActive&&!P&&E||x>y&&E,A=!1;const R=Array.isArray(C)?C:[C];let M=R.reduce(s(j),{});N===!1&&(M={});const{prevResolvedValues:D={}}=S,B={...D,...M},F=G=>{L=!0,m.has(G)&&(A=!0,m.delete(G)),S.needsAnimating[G]=!0;const q=t.getValue(G);q&&(q.liveStyle=!1)};for(const G in B){const q=M[G],U=D[G];if(g.hasOwnProperty(G))continue;let W=!1;P1(q)&&P1(U)?W=!_6(q,U):W=q!==U,W?q!=null?F(G):m.add(G):q!==void 0&&m.has(G)?F(G):S.protectedKeys[G]=!0}S.prevProp=C,S.prevResolvedValues=M,S.isActive&&(g={...g,...M}),n&&t.blockInitialAnimation&&(L=!1),L&&(!(P&&O)||A)&&p.push(...R.map(G=>({animation:G,options:{type:j}})))}if(m.size){const x={};m.forEach(j=>{const S=t.getBaseTarget(j),C=t.getValue(j);C&&(C.liveStyle=!0),x[j]=S??null}),p.push({animation:x})}let b=!!p.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(b=!1),n=!1,b?e(p):Promise.resolve()}function l(c,d){var f;if(r[c].isActive===d)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(c,d)}),r[c].isActive=d;const p=a(c);for(const m in r)r[m].protectedKeys={};return p}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=l2(),n=!0}}}function BY(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_6(e,t):!1}function Wo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function l2(){return{animate:Wo(!0),whileInView:Wo(),whileHover:Wo(),whileTap:Wo(),whileDrag:Wo(),whileFocus:Wo(),exit:Wo()}}class So{constructor(e){this.isMounted=!1,this.node=e}update(){}}class zY extends So{constructor(e){super(e),e.animationState||(e.animationState=FY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let UY=0;class qY extends So{constructor(){super(...arguments),this.id=UY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const VY={animation:{Feature:zY},exit:{Feature:qY}};function Df(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function Vh(t){return{point:{x:t.pageX,y:t.pageY}}}const WY=t=>e=>pE(e)&&t(e,Vh(e));function lf(t,e,r,n){return Df(t,e,WY(r),n)}const c2=(t,e)=>Math.abs(t-e);function HY(t,e){const r=c2(t.x,e.x),n=c2(t.y,e.y);return Math.sqrt(r**2+n**2)}class uF{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=qx(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=HY(p.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:y}=p,{timestamp:b}=tn;this.history.push({...y,timestamp:b});const{onStart:x,onMove:j}=this.handlers;m||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Ux(m,this.transformPagePoint),Qt.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=qx(p.type==="pointercancel"?this.lastMoveEventInfo:Ux(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,x),y&&y(p,x)},!pE(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=Vh(e),l=Ux(a,this.transformPagePoint),{point:c}=l,{timestamp:d}=tn;this.history=[{...c,timestamp:d}];const{onSessionStart:f}=r;f&&f(e,qx(l,this.history)),this.removeListeners=qh(lf(this.contextWindow,"pointermove",this.handlePointerMove),lf(this.contextWindow,"pointerup",this.handlePointerUp),lf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),co(this.updatePoint)}}function Ux(t,e){return e?{point:e(t.point)}:t}function u2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qx({point:t},e){return{point:t,delta:u2(t,dF(e)),offset:u2(t,GY(e)),velocity:KY(e,.1)}}function GY(t){return t[0]}function dF(t){return t[t.length-1]}function KY(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=dF(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>ra(e)));)r--;if(!n)return{x:0,y:0};const i=na(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const fF=1e-4,ZY=1-fF,XY=1+fF,hF=.01,YY=0-hF,JY=0+hF;function ns(t){return t.max-t.min}function QY(t,e,r){return Math.abs(t-e)<=r}function d2(t,e,r,n=.5){t.origin=n,t.originPoint=ur(e.min,e.max,t.origin),t.scale=ns(r)/ns(e),t.translate=ur(r.min,r.max,t.origin)-t.originPoint,(t.scale>=ZY&&t.scale<=XY||isNaN(t.scale))&&(t.scale=1),(t.translate>=YY&&t.translate<=JY||isNaN(t.translate))&&(t.translate=0)}function cf(t,e,r,n){d2(t.x,e.x,r.x,n?n.originX:void 0),d2(t.y,e.y,r.y,n?n.originY:void 0)}function f2(t,e,r){t.min=r.min+e.min,t.max=t.min+ns(e)}function eJ(t,e,r){f2(t.x,e.x,r.x),f2(t.y,e.y,r.y)}function h2(t,e,r){t.min=e.min-r.min,t.max=t.min+ns(e)}function uf(t,e,r){h2(t.x,e.x,r.x),h2(t.y,e.y,r.y)}function tJ(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?ur(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?ur(r,t,n.max):Math.min(t,r)),t}function p2(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function rJ(t,{top:e,left:r,bottom:n,right:s}){return{x:p2(t.x,r,s),y:p2(t.y,e,n)}}function m2(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function nJ(t,e){return{x:m2(t.x,e.x),y:m2(t.y,e.y)}}function sJ(t,e){let r=.5;const n=ns(t),s=ns(e);return s>n?r=Uc(e.min,e.max-n,t.min):n>s&&(r=Uc(t.min,t.max-s,e.min)),oa(0,1,r)}function iJ(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const B1=.35;function aJ(t=B1){return t===!1?t=0:t===!0&&(t=B1),{x:g2(t,"left","right"),y:g2(t,"top","bottom")}}function g2(t,e,r){return{min:v2(t,e),max:v2(t,r)}}function v2(t,e){return typeof t=="number"?t:t[e]||0}const y2=()=>({translate:0,scale:1,origin:0,originPoint:0}),bc=()=>({x:y2(),y:y2()}),x2=()=>({min:0,max:0}),br=()=>({x:x2(),y:x2()});function _s(t){return[t("x"),t("y")]}function pF({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function oJ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function lJ(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Vx(t){return t===void 0||t===1}function z1({scale:t,scaleX:e,scaleY:r}){return!Vx(t)||!Vx(e)||!Vx(r)}function Yo(t){return z1(t)||mF(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function mF(t){return b2(t.x)||b2(t.y)}function b2(t){return t&&t!=="0%"}function sg(t,e,r){const n=t-r,s=e*n;return r+s}function w2(t,e,r,n,s){return s!==void 0&&(t=sg(t,s,n)),sg(t,r,n)+e}function U1(t,e=0,r=1,n,s){t.min=w2(t.min,e,r,n,s),t.max=w2(t.max,e,r,n,s)}function gF(t,{x:e,y:r}){U1(t.x,e.translate,e.scale,e.originPoint),U1(t.y,r.translate,r.scale,r.originPoint)}const _2=.999999999999,j2=1.0000000000001;function cJ(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,a;for(let l=0;l<s;l++){i=r[l],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&_c(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,gF(t,a)),n&&Yo(i.latestValues)&&_c(t,i.latestValues))}e.x<j2&&e.x>_2&&(e.x=1),e.y<j2&&e.y>_2&&(e.y=1)}function wc(t,e){t.min=t.min+e,t.max=t.max+e}function S2(t,e,r,n,s=.5){const i=ur(t.min,t.max,s);U1(t,e,r,i,n)}function _c(t,e){S2(t.x,e.x,e.scaleX,e.scale,e.originX),S2(t.y,e.y,e.scaleY,e.scale,e.originY)}function vF(t,e){return pF(lJ(t.getBoundingClientRect(),e))}function uJ(t,e,r){const n=vF(t,r),{scroll:s}=e;return s&&(wc(n.x,s.offset.x),wc(n.y,s.offset.y)),n}const yF=({current:t})=>t?t.ownerDocument.defaultView:null,dJ=new WeakMap;class fJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=br(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Vh(f).point)},i=(f,p)=>{const{drag:m,dragPropagation:g,onDragStart:y}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=sX(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_s(x=>{let j=this.getAxisMotionValue(x).get()||0;if(wi.test(j)){const{projection:S}=this.visualElement;if(S&&S.layout){const C=S.layout.layoutBox[x];C&&(j=ns(C)*(parseFloat(j)/100))}}this.originPoint[x]=j}),y&&Qt.postRender(()=>y(f,p)),T1(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,p)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:y,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:x}=p;if(g&&this.currentDirection===null){this.currentDirection=hJ(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,x),this.updateAxis("y",p.point,x),this.visualElement.render(),b&&b(f,p)},l=(f,p)=>this.stop(f,p),c=()=>_s(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new uF(e,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:yF(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Qt.postRender(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!wm(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=tJ(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&yc(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=rJ(s.layoutBox,r):this.constraints=!1,this.elastic=aJ(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&_s(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=iJ(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!yc(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=uJ(n,s.root,this.visualElement.getTransformPagePoint());let a=nJ(s.layout.layoutBox,i);if(r){const l=r(oJ(a));this.hasMutatedConstraints=!!l,l&&(a=pF(l))}return a}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=_s(f=>{if(!wm(f,r,this.currentDirection))return;let p=c&&c[f]||{};a&&(p={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,y={type:"inertia",velocity:n?e[f]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(f,y)});return Promise.all(d).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return T1(this.visualElement,e),n.start(EE(e,n,0,r,this.visualElement,!1))}stopAnimation(){_s(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_s(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){_s(r=>{const{drag:n}=this.getProps();if(!wm(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];i.set(e[r]-ur(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!yc(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_s(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=sJ({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),_s(a=>{if(!wm(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];l.set(ur(c,d,s[a]))})}addListeners(){if(!this.visualElement.current)return;dJ.set(this.visualElement,this);const e=this.visualElement.current,r=lf(e,"pointerdown",c=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();yc(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Qt.read(n);const a=Df(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(_s(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=c[f].translate,p.set(p.get()+c[f].translate))}),this.visualElement.render())});return()=>{a(),r(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=B1,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function wm(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function hJ(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class pJ extends So{constructor(e){super(e),this.removeGroupControls=Jn,this.removeListeners=Jn,this.controls=new fJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jn}unmount(){this.removeGroupControls(),this.removeListeners()}}const N2=t=>(e,r)=>{t&&Qt.postRender(()=>t(e,r))};class mJ extends So{constructor(){super(...arguments),this.removePointerDownListener=Jn}onPointerDown(e){this.session=new uF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:N2(e),onStart:N2(r),onMove:n,onEnd:(i,a)=>{delete this.session,s&&Qt.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=lf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function E2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Je.test(t))t=parseFloat(t);else return t;const r=E2(t,e.target.x),n=E2(t,e.target.y);return`${r}% ${n}%`}},gJ={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=uo.parse(t);if(s.length>5)return n;const i=uo.createTransformer(t),a=typeof s[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;s[0+a]/=l,s[1+a]/=c;const d=ur(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=d),typeof s[3+a]=="number"&&(s[3+a]/=d),i(s)}};class vJ extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;IZ(yJ),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),qm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,a=n.projection;return a&&(a.isPresent=i,s||e.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Qt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xF(t){const[e,r]=t6(),n=w.useContext(GN);return o.jsx(vJ,{...t,layoutGroup:n,switchLayoutGroup:w.useContext(c6),isPresent:e,safeToRemove:r})}const yJ={borderRadius:{...Cd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cd,borderTopRightRadius:Cd,borderBottomLeftRadius:Cd,borderBottomRightRadius:Cd,boxShadow:gJ};function xJ(t,e,r){const n=hn(t)?t:Mf(t);return n.start(EE("",n,e,r)),n.animation}function bJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const wJ=(t,e)=>t.depth-e.depth;class _J{constructor(){this.children=[],this.isDirty=!1}add(e){mE(this.children,e),this.isDirty=!0}remove(e){gE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wJ),this.isDirty=!1,this.children.forEach(e)}}function jJ(t,e){const r=_i.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(co(n),t(i-e))};return Qt.read(n,!0),()=>co(n)}const bF=["TopLeft","TopRight","BottomLeft","BottomRight"],SJ=bF.length,C2=t=>typeof t=="string"?parseFloat(t):t,k2=t=>typeof t=="number"||Je.test(t);function NJ(t,e,r,n,s,i){s?(t.opacity=ur(0,r.opacity!==void 0?r.opacity:1,EJ(n)),t.opacityExit=ur(e.opacity!==void 0?e.opacity:1,0,CJ(n))):i&&(t.opacity=ur(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<SJ;a++){const l=`border${bF[a]}Radius`;let c=P2(e,l),d=P2(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||k2(c)===k2(d)?(t[l]=Math.max(ur(C2(c),C2(d),n),0),(wi.test(d)||wi.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||r.rotate)&&(t.rotate=ur(e.rotate||0,r.rotate||0,n))}function P2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const EJ=wF(0,.5,F6),CJ=wF(.5,.95,Jn);function wF(t,e,r){return n=>n<t?0:n>e?1:r(Uc(t,e,n))}function O2(t,e){t.min=e.min,t.max=e.max}function vs(t,e){O2(t.x,e.x),O2(t.y,e.y)}function A2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function T2(t,e,r,n,s){return t-=e,t=sg(t,1/r,n),s!==void 0&&(t=sg(t,1/s,n)),t}function kJ(t,e=0,r=1,n=.5,s,i=t,a=t){if(wi.test(e)&&(e=parseFloat(e),e=ur(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=ur(i.min,i.max,n);t===i&&(l-=e),t.min=T2(t.min,e,r,l,s),t.max=T2(t.max,e,r,l,s)}function L2(t,e,[r,n,s],i,a){kJ(t,e[r],e[n],e[s],e.scale,i,a)}const PJ=["x","scaleX","originX"],OJ=["y","scaleY","originY"];function M2(t,e,r,n){L2(t.x,e,PJ,r?r.x:void 0,n?n.x:void 0),L2(t.y,e,OJ,r?r.y:void 0,n?n.y:void 0)}function R2(t){return t.translate===0&&t.scale===1}function _F(t){return R2(t.x)&&R2(t.y)}function D2(t,e){return t.min===e.min&&t.max===e.max}function AJ(t,e){return D2(t.x,e.x)&&D2(t.y,e.y)}function I2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function jF(t,e){return I2(t.x,e.x)&&I2(t.y,e.y)}function $2(t){return ns(t.x)/ns(t.y)}function F2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class TJ{constructor(){this.members=[]}add(e){mE(this.members,e),e.scheduleRender()}remove(e){if(gE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LJ(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=r?.z||0;if((s||i||a)&&(n=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:d,rotate:f,rotateX:p,rotateY:m,skewX:g,skewY:y}=r;d&&(n=`perspective(${d}px) ${n}`),f&&(n+=`rotate(${f}deg) `),p&&(n+=`rotateX(${p}deg) `),m&&(n+=`rotateY(${m}deg) `),g&&(n+=`skewX(${g}deg) `),y&&(n+=`skewY(${y}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Jo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Kd=typeof window<"u"&&window.MotionDebug!==void 0,Wx=["","X","Y","Z"],MJ={visibility:"hidden"},B2=1e3;let RJ=0;function Hx(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function SF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=T6(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Qt,!(s||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&SF(n)}function NF({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=e?.()){this.id=RJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Kd&&(Jo.totalNodes=Jo.resolvedTargetDeltas=Jo.recalculatedProjection=0),this.nodes.forEach($J),this.nodes.forEach(qJ),this.nodes.forEach(VJ),this.nodes.forEach(FJ),Kd&&window.MotionDebug.record(Jo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new _J)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new vE),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=bJ(a),this.instance=a;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),t){let p;const m=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=jJ(m,250),qm.hasAnimatedSinceResize&&(qm.hasAnimatedSinceResize=!1,this.nodes.forEach(U2))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||ZJ,{onLayoutAnimationStart:x,onLayoutAnimationComplete:j}=f.getProps(),S=!this.targetLayout||!jF(this.targetLayout,y)||g,C=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,C);const E={...dE(b,"layout"),onPlay:x,onComplete:j};(f.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else m||U2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,co(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WJ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&SF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(z2);return}this.isUpdating||this.nodes.forEach(zJ),this.isUpdating=!1,this.nodes.forEach(UJ),this.nodes.forEach(DJ),this.nodes.forEach(IJ),this.clearAllSnapshots();const l=_i.now();tn.delta=oa(0,1e3/60,l-tn.timestamp),tn.timestamp=l,tn.isProcessing=!0,Dx.update.process(tn),Dx.preRender.process(tn),Dx.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BJ),this.sharedNodes.forEach(HJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=br(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!_F(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;a&&(l||Yo(this.latestValues)||f)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),XJ(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:l}=this.options;if(!l)return br();const c=l.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(YJ))){const{scroll:f}=this.root;f&&(wc(c.x,f.offset.x),wc(c.y,f.offset.y))}return c}removeElementScroll(a){var l;const c=br();if(vs(c,a),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&vs(c,a),wc(c.x,p.offset.x),wc(c.y,p.offset.y))}return c}applyTransform(a,l=!1){const c=br();vs(c,a);for(let d=0;d<this.path.length;d++){const f=this.path[d];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&_c(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Yo(f.latestValues)&&_c(c,f.latestValues)}return Yo(this.latestValues)&&_c(c,this.latestValues),c}removeTransform(a){const l=br();vs(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Yo(d.latestValues))continue;z1(d.latestValues)&&d.updateSnapshot();const f=br(),p=d.measurePageBox();vs(f,p),M2(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return Yo(this.latestValues)&&M2(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=tn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=br(),this.relativeTargetOrigin=br(),uf(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=br(),this.targetWithTransforms=br()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vs(this.target,this.layout.layoutBox),gF(this.target,this.targetDelta)):vs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=br(),this.relativeTargetOrigin=br(),uf(this.relativeTargetOrigin,this.target,g.target),vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Kd&&Jo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||z1(this.parent.latestValues)||mF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;vs(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;cJ(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=br());const{target:y}=l;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(A2(this.prevProjectionDelta.x,this.projectionDelta.x),A2(this.prevProjectionDelta.y,this.projectionDelta.y)),cf(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!F2(this.projectionDelta.x,this.prevProjectionDelta.x)||!F2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Kd&&Jo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bc(),this.projectionDelta=bc(),this.projectionDeltaWithTransform=bc()}setAnimationOrigin(a,l=!1){const c=this.snapshot,d=c?c.latestValues:{},f={...this.latestValues},p=bc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=br(),g=c?c.source:void 0,y=this.layout?this.layout.source:void 0,b=g!==y,x=this.getStack(),j=!x||x.members.length<=1,S=!!(b&&!j&&this.options.crossfade===!0&&!this.path.some(KJ));this.animationProgress=0;let C;this.mixTargetDelta=E=>{const N=E/1e3;q2(p.x,a.x,N),q2(p.y,a.y,N),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(uf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GJ(this.relativeTarget,this.relativeTargetOrigin,m,N),C&&AJ(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=br()),vs(C,this.relativeTarget)),b&&(this.animationValues=f,NJ(f,d,this.latestValues,N,S,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(co(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qt.update(()=>{qm.hasAnimatedSinceResize=!0,this.currentAnimation=xJ(0,B2,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:f}=a;if(!(!l||!c||!d)){if(this!==a&&this.layout&&d&&EF(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||br();const p=ns(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+p;const m=ns(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}vs(l,c),_c(l,f),cf(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new TJ),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Hx("z",a,d,this.animationValues);for(let f=0;f<Wx.length;f++)Hx(`rotate${Wx[f]}`,a,d,this.animationValues),Hx(`skew${Wx[f]}`,a,d,this.animationValues);a.render();for(const f in d)a.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return MJ;const d={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=zm(a?.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none",d;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=zm(a?.pointerEvents)||""),this.hasProjected&&!Yo(this.latestValues)&&(b.transform=f?f({},""):"none",this.hasProjected=!1),b}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),d.transform=LJ(this.projectionDeltaWithTransform,this.treeScale,m),f&&(d.transform=f(m,d.transform));const{x:g,y}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,p.animationValues?d.opacity=p===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in Qm){if(m[b]===void 0)continue;const{correct:x,applyTo:j}=Qm[b],S=d.transform==="none"?m[b]:x(m[b],p);if(j){const C=j.length;for(let E=0;E<C;E++)d[j[E]]=S}else d[b]=S}return this.options.layoutId&&(d.pointerEvents=p===this?zm(a?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(z2),this.root.sharedNodes.clear()}}}function DJ(t){t.updateLayout()}function IJ(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,a=r.source!==t.layout.source;i==="size"?_s(p=>{const m=a?r.measuredBox[p]:r.layoutBox[p],g=ns(m);m.min=n[p].min,m.max=m.min+g}):EF(i,r.layoutBox,n)&&_s(p=>{const m=a?r.measuredBox[p]:r.layoutBox[p],g=ns(n[p]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+g)});const l=bc();cf(l,n,r.layoutBox);const c=bc();a?cf(c,t.applyTransform(s,!0),r.measuredBox):cf(c,n,r.layoutBox);const d=!_F(l);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:g}=p;if(m&&g){const y=br();uf(y,r.layoutBox,m.layoutBox);const b=br();uf(b,n,g.layoutBox),jF(y,b)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=y,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function $J(t){Kd&&Jo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function FJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function BJ(t){t.clearSnapshot()}function z2(t){t.clearMeasurements()}function zJ(t){t.isLayoutDirty=!1}function UJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function U2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qJ(t){t.resolveTargetDelta()}function VJ(t){t.calcProjection()}function WJ(t){t.resetSkewAndRotation()}function HJ(t){t.removeLeadSnapshot()}function q2(t,e,r){t.translate=ur(e.translate,0,r),t.scale=ur(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function V2(t,e,r,n){t.min=ur(e.min,r.min,n),t.max=ur(e.max,r.max,n)}function GJ(t,e,r,n){V2(t.x,e.x,r.x,n),V2(t.y,e.y,r.y,n)}function KJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ZJ={duration:.45,ease:[.4,0,.1,1]},W2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),H2=W2("applewebkit/")&&!W2("chrome/")?Math.round:Jn;function G2(t){t.min=H2(t.min),t.max=H2(t.max)}function XJ(t){G2(t.x),G2(t.y)}function EF(t,e,r){return t==="position"||t==="preserve-aspect"&&!QY($2(e),$2(r),.2)}function YJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const JJ=NF({attachResizeListener:(t,e)=>Df(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gx={current:void 0},CF=NF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gx.current){const t=new JJ({});t.mount(window),t.setOptions({layoutScroll:!0}),Gx.current=t}return Gx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),QJ={pan:{Feature:mJ},drag:{Feature:pJ,ProjectionNode:CF,MeasureLayout:xF}};function K2(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Qt.postRender(()=>i(e,Vh(e)))}class eQ extends So{mount(){const{current:e}=this.node;e&&(this.unmount=QZ(e,r=>(K2(this.node,r,"Start"),n=>K2(this.node,n,"End"))))}unmount(){}}class tQ extends So{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qh(Df(this.node.current,"focus",()=>this.onFocus()),Df(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Z2(t,e,r){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Qt.postRender(()=>i(e,Vh(e)))}class rQ extends So{mount(){const{current:e}=this.node;e&&(this.unmount=nX(e,r=>(Z2(this.node,r,"Start"),(n,{success:s})=>Z2(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const q1=new WeakMap,Kx=new WeakMap,nQ=t=>{const e=q1.get(t.target);e&&e(t)},sQ=t=>{t.forEach(nQ)};function iQ({root:t,...e}){const r=t||document;Kx.has(r)||Kx.set(r,{});const n=Kx.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(sQ,{root:t,...e})),n[s]}function aQ(t,e,r){const n=iQ(e);return q1.set(t,r),n.observe(t),()=>{q1.delete(t),n.unobserve(t)}}const oQ={some:0,all:1};class lQ extends So{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:oQ[s]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),m=d?f:p;m&&m(c)};return aQ(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(cQ(e,r))&&this.startObserver()}unmount(){}}function cQ({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const uQ={inView:{Feature:lQ},tap:{Feature:rQ},focus:{Feature:tQ},hover:{Feature:eQ}},dQ={layout:{ProjectionNode:CF,MeasureLayout:xF}},V1={current:null},kF={current:!1};function fQ(){if(kF.current=!0,!!XN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>V1.current=t.matches;t.addListener(e),e()}else V1.current=!1}const hQ=[...Q6,un,uo],pQ=t=>hQ.find(J6(t)),X2=new WeakMap;function mQ(t,e,r){for(const n in e){const s=e[n],i=r[n];if(hn(s))t.addValue(n,s);else if(hn(i))t.addValue(n,Mf(s,{owner:t}));else if(i!==s)if(t.hasValue(n)){const a=t.getValue(n);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(n);t.addValue(n,Mf(a!==void 0?a:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const Y2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class gQ{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=_i.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Qt.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:f}=a;this.onUpdate=f,this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Uv(r),this.isVariantNode=o6(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(r,{},this);for(const g in m){const y=m[g];c[g]!==void 0&&hn(y)&&y.set(c[g],!1)}}mount(e){this.current=e,X2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),kF.current||fQ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:V1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){X2.delete(this.current),this.projection&&this.projection.unmount(),co(this.notifyUpdate),co(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Pl.has(e),s=r.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Qt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),i(),a&&a(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qc){const r=qc[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):br()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Y2.length;n++){const s=Y2[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=mQ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Mf(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(X6(s)||z6(s))?s=parseFloat(s):!pQ(s)&&uo.test(r)&&(s=G6(e,r)),this.setBaseTarget(e,hn(s)?s.get():s)),hn(s)?s.get():s}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const a=nE(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);a&&(s=a[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!hn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new vE),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class PF extends gQ{constructor(){super(...arguments),this.KeyframeResolver=eF}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hn(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function vQ(t){return window.getComputedStyle(t)}class yQ extends PF{constructor(){super(...arguments),this.type="html",this.renderInstance=g6}readValueFromInstance(e,r){if(Pl.has(r)){const n=_E(r);return n&&n.default||0}else{const n=vQ(e),s=(h6(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return vF(e,r)}build(e,r,n){aE(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return uE(e,r,n)}}class xQ extends PF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=br}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Pl.has(r)){const n=_E(r);return n&&n.default||0}return r=v6.has(r)?r:eE(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return b6(e,r,n)}build(e,r,n){oE(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,s){y6(e,r,n,s)}mount(e){this.isSVGTag=cE(e.tagName),super.mount(e)}}const bQ=(t,e)=>rE(t)?new xQ(e):new yQ(e,{allowProjection:t!==w.Fragment}),wQ=HZ({...VY,...uQ,...QJ,...dQ},bQ),Ae=oZ(wQ);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Me=(t,e)=>{const r=w.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...d},f)=>w.createElement("svg",{ref:f,..._Q,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${jQ(t)}`,l].join(" "),...d},[...e.map(([p,m])=>w.createElement(p,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=Me("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Me("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=Me("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=Me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=Me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=Me("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=Me("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=Me("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Me("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=Me("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Me("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=Me("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=Me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=Me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=Me("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=Me("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=Me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=Me("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=Me("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=Me("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=Me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=Me("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=Me("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=Me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=Me("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Me("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Me("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Me("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=Me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=Me("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Me("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=Me("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=Me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Me("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Me("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=Me("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Me("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=Me("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=Me("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=Me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=Me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Me("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=Me("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=Me("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=Me("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=Me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=Me("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=Me("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=Me("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=Me("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=Me("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=Me("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Me("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=Me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=Me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Me("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Me("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function RF(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=RF(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function st(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=RF(t))&&(n&&(n+=" "),n+=e);return n}const AE="-",VQ=t=>{const e=HQ(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const l=a.split(AE);return l[0]===""&&l.length!==1&&l.shift(),DF(l,e)||WQ(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},DF=(t,e)=>{if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?DF(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(AE);return e.validators.find(({validator:a})=>a(i))?.classGroupId},rT=/^\[(.+)\]$/,WQ=t=>{if(rT.test(t)){const e=rT.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},HQ=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return KQ(Object.entries(t.classGroups),r).forEach(([i,a])=>{K1(a,n,i,e)}),n},K1=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:nT(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(GQ(s)){K1(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{K1(a,nT(e,i),r,n)})})},nT=(t,e)=>{let r=t;return e.split(AE).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},GQ=t=>t.isThemeGetter,KQ=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[r,s]}):t,ZQ=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},IF="!",XQ=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,f=0,p;for(let x=0;x<l.length;x++){let j=l[x];if(d===0){if(j===s&&(n||l.slice(x,x+i)===e)){c.push(l.slice(f,x)),f=x+i;continue}if(j==="/"){p=x;continue}}j==="["?d++:j==="]"&&d--}const m=c.length===0?l:l.substring(f),g=m.startsWith(IF),y=g?m.substring(1):m,b=p&&p>f?p-f:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:b}};return r?l=>r({className:l,parseClassName:a}):a},YQ=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},JQ=t=>({cache:ZQ(t.cacheSize),parseClassName:XQ(t),...VQ(t)}),QQ=/\s+/,eee=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(QQ);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:f,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}=r(d);let y=!!g,b=n(y?m.substring(0,g):m);if(!b){if(!y){l=d+(l.length>0?" "+l:l);continue}if(b=n(m),!b){l=d+(l.length>0?" "+l:l);continue}y=!1}const x=YQ(f).join(":"),j=p?x+IF:x,S=j+b;if(i.includes(S))continue;i.push(S);const C=s(b,y);for(let E=0;E<C.length;++E){const N=C[E];i.push(j+N)}l=d+(l.length>0?" "+l:l)}return l};function tee(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=$F(e))&&(n&&(n+=" "),n+=r);return n}const $F=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=$F(t[n]))&&(r&&(r+=" "),r+=e);return r};function ree(t,...e){let r,n,s,i=a;function a(c){const d=e.reduce((f,p)=>p(f),t());return r=JQ(d),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const f=eee(c,r);return s(c,f),f}return function(){return i(tee.apply(null,arguments))}}const Xt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},FF=/^\[(?:([a-z-]+):)?(.+)\]$/i,nee=/^\d+\/\d+$/,see=new Set(["px","full","screen"]),iee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,lee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hi=t=>Ac(t)||see.has(t)||nee.test(t),Ba=t=>Ou(t,"length",vee),Ac=t=>!!t&&!Number.isNaN(Number(t)),Xx=t=>Ou(t,"number",Ac),kd=t=>!!t&&Number.isInteger(Number(t)),uee=t=>t.endsWith("%")&&Ac(t.slice(0,-1)),lt=t=>FF.test(t),za=t=>iee.test(t),dee=new Set(["length","size","percentage"]),fee=t=>Ou(t,dee,BF),hee=t=>Ou(t,"position",BF),pee=new Set(["image","url"]),mee=t=>Ou(t,pee,xee),gee=t=>Ou(t,"",yee),Pd=()=>!0,Ou=(t,e,r)=>{const n=FF.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},vee=t=>aee.test(t)&&!oee.test(t),BF=()=>!1,yee=t=>lee.test(t),xee=t=>cee.test(t),bee=()=>{const t=Xt("colors"),e=Xt("spacing"),r=Xt("blur"),n=Xt("brightness"),s=Xt("borderColor"),i=Xt("borderRadius"),a=Xt("borderSpacing"),l=Xt("borderWidth"),c=Xt("contrast"),d=Xt("grayscale"),f=Xt("hueRotate"),p=Xt("invert"),m=Xt("gap"),g=Xt("gradientColorStops"),y=Xt("gradientColorStopPositions"),b=Xt("inset"),x=Xt("margin"),j=Xt("opacity"),S=Xt("padding"),C=Xt("saturate"),E=Xt("scale"),N=Xt("sepia"),P=Xt("skew"),O=Xt("space"),L=Xt("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",lt,e],D=()=>[lt,e],B=()=>["",Hi,Ba],F=()=>["auto",Ac,lt],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",lt],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[Ac,lt];return{cacheSize:500,separator:":",theme:{colors:[Pd],spacing:[Hi,Ba],blur:["none","",za,lt],brightness:I(),borderColor:[t],borderRadius:["none","","full",za,lt],borderSpacing:D(),borderWidth:B(),contrast:I(),grayscale:U(),hueRotate:I(),invert:U(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[uee,Ba],inset:M(),margin:M(),opacity:I(),padding:D(),saturate:I(),scale:I(),sepia:U(),skew:I(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",lt]}],container:["container"],columns:[{columns:[za]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),lt]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",kd,lt]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",lt]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",kd,lt]}],"grid-cols":[{"grid-cols":[Pd]}],"col-start-end":[{col:["auto",{span:["full",kd,lt]},lt]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Pd]}],"row-start-end":[{row:["auto",{span:[kd,lt]},lt]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",lt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",lt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",lt,e]}],"min-w":[{"min-w":[lt,e,"min","max","fit"]}],"max-w":[{"max-w":[lt,e,"none","full","min","max","fit","prose",{screen:[za]},za]}],h:[{h:[lt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[lt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[lt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[lt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",za,Ba]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xx]}],"font-family":[{font:[Pd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",lt]}],"line-clamp":[{"line-clamp":["none",Ac,Xx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hi,lt]}],"list-image":[{"list-image":["none",lt]}],"list-style-type":[{list:["none","disc","decimal",lt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hi,Ba]}],"underline-offset":[{"underline-offset":["auto",Hi,lt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),hee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mee]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Hi,lt]}],"outline-w":[{outline:[Hi,Ba]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Hi,Ba]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",za,gee]}],"shadow-color":[{shadow:[Pd]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",za,lt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[C]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",lt]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",lt]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",lt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[kd,lt]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",lt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Hi,Ba,Xx]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},wee=ree(bee);function No(...t){return wee(st(t))}const ve=z.forwardRef(({className:t,children:e,variant:r="primary",size:n="md",isLoading:s=!1,leftIcon:i,rightIcon:a,disabled:l,...c},d)=>{const f="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",p={primary:"bg-primary-500 text-white hover:bg-primary-600 focus-visible:ring-primary-500",secondary:"bg-secondary-500 text-white hover:bg-secondary-600 focus-visible:ring-secondary-500",accent:"bg-accent-500 text-white hover:bg-accent-600 focus-visible:ring-accent-500",outline:"border border-input bg-transparent hover:bg-accent-100 hover:text-accent-700",ghost:"hover:bg-accent-100 hover:text-accent-700 bg-transparent",link:"text-primary-500 underline-offset-4 hover:underline bg-transparent",danger:"bg-error-500 text-white hover:bg-error-600 focus-visible:ring-error-500"},m={sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2",lg:"h-12 px-6 py-3 text-lg"};return o.jsxs("button",{className:No(f,p[r],m[n],s&&"opacity-70 pointer-events-none",t),disabled:l||s,ref:d,...c,children:[s&&o.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!s&&i&&o.jsx("span",{className:"mr-2",children:i}),e,!s&&a&&o.jsx("span",{className:"ml-2",children:a})]})});ve.displayName="Button";const _ee=({onUpdate:t,onDismiss:e,isVisible:r})=>o.jsx(Rt,{children:r&&o.jsxs(o.Fragment,{children:[o.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e}),o.jsx(Ae.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(tr,{className:"h-5 w-5"})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"h-16 w-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:o.jsx(PQ,{className:"h-8 w-8 text-white"})})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Mise à jour disponible"}),o.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Une nouvelle version de PROVENCE COURSES est disponible (v","1.3.1","). Mettez à jour maintenant pour profiter des dernières améliorations."]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsxs(ve,{onClick:t,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium py-3 px-4 rounded-xl transition-all duration-200 flex items-center justify-center gap-2",children:[o.jsx(UQ,{className:"h-4 w-4"}),"Mettre à jour"]}),o.jsx(ve,{onClick:e,variant:"outline",className:"flex-1 py-3 px-4 rounded-xl border-gray-300 text-gray-700 hover:bg-gray-50 transition-all duration-200",children:"Plus tard"})]}),o.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"La mise à jour prendra quelques secondes"})]})})]})}),jee=()=>{const[t,e]=w.useState(null),[r,n]=w.useState(!1),{updateAvailable:s,dismissUpdate:i,applyUpdate:a}=ZK();w.useEffect(()=>(window.addEventListener("beforeinstallprompt",d=>{d.preventDefault(),e(d),n(!0)}),window.addEventListener("appinstalled",()=>{Ht.success("Application installée avec succès!"),n(!1)}),window.matchMedia("(display-mode: standalone)").matches&&n(!1),()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})}),[]);const l=async()=>{if(!t)return;t.prompt();const{outcome:d}=await t.userChoice;e(null),d==="accepted"?Ht.success("Merci d'avoir installé notre application!"):Ht("Vous pouvez installer l'application plus tard depuis le menu du navigateur")};w.useEffect(()=>{if(r){const d=setTimeout(()=>{Ht(f=>o.jsxs("div",{children:[o.jsx("p",{children:"Installez cette application sur votre appareil"}),o.jsx("button",{onClick:()=>{l(),Ht.dismiss(f.id)},className:"px-4 py-2 mt-2 bg-blue-500 text-white rounded",children:"Installer"})]}),{duration:1e4})},1e4);return()=>clearTimeout(d)}},[r]);const c=()=>{console.log("🚨 Forçage de la vérification de mise à jour..."),localStorage.removeItem("last-pwa-update"),window.dispatchEvent(new CustomEvent("pwa-force-update-check"))};return o.jsxs(o.Fragment,{children:[o.jsx(_ee,{isVisible:s,onUpdate:a,onDismiss:i}),window.location.search.includes("debug=true")&&o.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:o.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-2 rounded shadow-lg",title:"Forcer la vérification de mise à jour (Debug)",children:"🔄 Force Update Check"})})]})},See=()=>{const t=G3(),e=WN();if(HN()&&!e&&t){const n=t.role==="admin"?"/admin":"/laboratory";return o.jsx(Km,{to:n,replace:!0})}return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"h-16 w-16 bg-primary-500 text-white flex items-center justify-center rounded-full",children:o.jsx(gt,{className:"h-8 w-8"})})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Provence Courses"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Gestion des livraisons pour laboratoires dentaires"})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsx("div",{className:"bg-white py-8 px-4 shadow-card sm:rounded-2xl sm:px-10",children:o.jsx(j3,{})})})]})},Yx=()=>"1.3.1",Nee=()=>{const[t,e]=w.useState(!1),{logout:r}=H3(),n=Rv(),s=async()=>{await r(),n("/login")},i=[{icon:o.jsx(TQ,{className:"h-5 w-5"}),name:"Tableau de bord",path:"/admin"},{icon:o.jsx(eT,{className:"h-5 w-5"}),name:"Validation laboratoires",path:"/admin/validate-labs"},{icon:o.jsx(eT,{className:"h-5 w-5"}),name:"Validation tournées",path:"/admin/validate-routes"},{icon:o.jsx(gt,{className:"h-5 w-5"}),name:"Tournées optimisées",path:"/admin/evening-routes"},{icon:o.jsx(Hv,{className:"h-5 w-5"}),name:"Suivi en temps réel",path:"/admin/monitoring",separator:!0},{icon:o.jsx(PE,{className:"h-5 w-5"}),name:"Historique livreurs",path:"/admin/driver-history"},{icon:o.jsx(H1,{className:"h-5 w-5"}),name:"Sac Marseille",path:"/admin/depots",separator:!0},{icon:o.jsx(J2,{className:"h-5 w-5"}),name:"Stats laboratoires",path:"/admin/statistics/laboratory"},{icon:o.jsx(J2,{className:"h-5 w-5"}),name:"Stats livreurs",path:"/admin/statistics/driver"},{icon:o.jsx(Wv,{className:"h-5 w-5"}),name:"Facturation",path:"/admin/billing",separator:!0},{icon:o.jsx(Dt,{className:"h-5 w-5"}),name:"Laboratoires",path:"/admin/laboratories"},{icon:o.jsx(Ln,{className:"h-5 w-5"}),name:"Gestion comptes",path:"/admin/accounts"},{icon:o.jsx(pl,{className:"h-5 w-5"}),name:"Paramètres",path:"/admin/settings"}];return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(Rt,{children:t&&o.jsx(Ae.div,{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-40 lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)})}),o.jsx(Rt,{children:t&&o.jsxs(Ae.aside,{className:"fixed inset-y-0 left-0 max-w-xs w-full bg-white shadow-xl z-50 lg:hidden",initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:300},children:[o.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"h-8 w-8 bg-primary-500 text-white flex items-center justify-center rounded-md",children:o.jsx(gt,{className:"h-5 w-5"})}),o.jsxs("div",{className:"ml-2",children:[o.jsx("span",{className:"font-semibold text-xl",children:"PROVENCE COURSES"}),o.jsxs("div",{className:"text-xs text-gray-500 leading-none",children:["v",Yx()]})]})]}),o.jsx("button",{onClick:()=>e(!1),className:"rounded-md p-2 text-gray-500 hover:text-gray-600 hover:bg-gray-100",children:o.jsx(tr,{className:"h-6 w-6"})})]}),o.jsx("nav",{className:"mt-5 px-4 space-y-1 flex-1 overflow-y-auto",children:i.map(a=>o.jsxs(z.Fragment,{children:[o.jsxs(KO,{to:a.path,end:a.path==="/admin",className:({isActive:l})=>`flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-colors ${l?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>e(!1),children:[a.icon,o.jsx("span",{className:"ml-3",children:a.name})]}),a.separator&&o.jsx("div",{className:"border-t border-gray-200 my-2"})]},a.path))}),o.jsx("div",{className:"px-4 pb-4 border-t border-gray-200 pt-4",children:o.jsxs("button",{onClick:s,className:"w-full flex items-center px-4 py-3 text-sm font-medium rounded-xl text-gray-700 hover:bg-gray-100 transition-colors",children:[o.jsx(tT,{className:"h-5 w-5"}),o.jsx("span",{className:"ml-3",children:"Déconnexion"})]})})]})}),o.jsx("aside",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:flex-col lg:w-64",children:o.jsxs("div",{className:"flex flex-col flex-grow pt-5 bg-white overflow-y-auto border-r",children:[o.jsxs(g1,{to:"/admin",className:"flex items-center justify-center h-16 flex-shrink-0 px-4",children:[o.jsx("div",{className:"h-8 w-8 bg-primary-500 text-white flex items-center justify-center rounded-md",children:o.jsx(gt,{className:"h-5 w-5"})}),o.jsxs("div",{className:"ml-2",children:[o.jsx("span",{className:"font-semibold text-xl",children:"PROVENCE COURSES"}),o.jsxs("div",{className:"text-xs text-gray-500 leading-none",children:["v",Yx()]})]})]}),o.jsx("div",{className:"mt-5 flex-1 flex flex-col px-3 space-y-1 overflow-y-auto",children:i.map(a=>o.jsxs(z.Fragment,{children:[o.jsxs(KO,{to:a.path,end:a.path==="/admin",className:({isActive:l})=>`flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-colors ${l?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-100"}`,children:[a.icon,o.jsx("span",{className:"ml-3",children:a.name})]}),a.separator&&o.jsx("div",{className:"border-t border-gray-200 my-2"})]},a.path))}),o.jsx("div",{className:"p-4 border-t",children:o.jsxs(ve,{onClick:s,variant:"ghost",className:"w-full flex items-center justify-center gap-2",children:[o.jsx(tT,{className:"h-4 w-4"}),o.jsx("span",{children:"Déconnexion"})]})})]})}),o.jsxs("div",{className:"lg:pl-64 flex flex-col min-h-screen",children:[o.jsx("header",{className:"bg-white shadow-sm z-10",children:o.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center lg:hidden",children:[o.jsx("button",{onClick:()=>e(!0),className:"p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100",children:o.jsx(MQ,{className:"h-6 w-6"})}),o.jsxs(g1,{to:"/admin",className:"flex items-center ml-2",children:[o.jsx("div",{className:"h-8 w-8 bg-primary-500 text-white flex items-center justify-center rounded-md",children:o.jsx(gt,{className:"h-5 w-5"})}),o.jsxs("div",{className:"ml-2",children:[o.jsx("span",{className:"font-semibold text-xl",children:"PROVENCE COURSES"}),o.jsxs("div",{className:"text-xs text-gray-500 leading-none",children:["v",Yx()]})]})]})]}),o.jsx("div",{className:"ml-4 flex items-center md:ml-6"})]})})}),o.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:o.jsx(j3,{})})]})]})};var Wh=t=>t.type==="checkbox",il=t=>t instanceof Date,bn=t=>t==null;const zF=t=>typeof t=="object";var wr=t=>!bn(t)&&!Array.isArray(t)&&zF(t)&&!il(t),Eee=t=>wr(t)&&t.target?Wh(t.target)?t.target.checked:t.target.value:t,Cee=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,kee=(t,e)=>t.has(Cee(e)),Pee=t=>{const e=t.constructor&&t.constructor.prototype;return wr(e)&&e.hasOwnProperty("isPrototypeOf")},TE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cn(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(TE&&(t instanceof Blob||n))&&(r||wr(t)))if(e=r?[]:{},!r&&!Pee(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=cn(t[s]));else return t;return e}var Gv=t=>Array.isArray(t)?t.filter(Boolean):[],Nr=t=>t===void 0,Be=(t,e,r)=>{if(!e||!wr(t))return r;const n=Gv(e.split(/[,[\].]+?/)).reduce((s,i)=>bn(s)?s:s[i],t);return Nr(n)||n===t?Nr(t[e])?r:t[e]:n},vi=t=>typeof t=="boolean",LE=t=>/^\w*$/.test(t),UF=t=>Gv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),It=(t,e,r)=>{let n=-1;const s=LE(e)?[e]:UF(e),i=s.length,a=i-1;for(;++n<i;){const l=s[n];let c=r;if(n!==a){const d=t[l];c=wr(d)||Array.isArray(d)?d:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const sT={BLUR:"blur",FOCUS_OUT:"focusout"},Zs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Gi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};z.createContext(null);var Oee=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const a=i;return e._proxyFormState[a]!==Zs.all&&(e._proxyFormState[a]=!n||Zs.all),t[a]}});return s},yi=t=>typeof t=="string",Aee=(t,e,r,n,s)=>yi(t)?(n&&e.watch.add(t),Be(r,t,s)):Array.isArray(t)?t.map(i=>(n&&e.watch.add(i),Be(r,i))):(n&&(e.watchAll=!0),r),qF=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},hf=t=>Array.isArray(t)?t:[t],iT=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},Z1=t=>bn(t)||!zF(t);function eo(t,e){if(Z1(t)||Z1(e))return t===e;if(il(t)&&il(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const i=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const a=e[s];if(il(i)&&il(a)||wr(i)&&wr(a)||Array.isArray(i)&&Array.isArray(a)?!eo(i,a):i!==a)return!1}}return!0}var xn=t=>wr(t)&&!Object.keys(t).length,ME=t=>t.type==="file",Xs=t=>typeof t=="function",ag=t=>{if(!TE)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},VF=t=>t.type==="select-multiple",RE=t=>t.type==="radio",Tee=t=>RE(t)||Wh(t),Jx=t=>ag(t)&&t.isConnected;function Lee(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Nr(t)?n++:t[e[n++]];return t}function Mee(t){for(const e in t)if(t.hasOwnProperty(e)&&!Nr(t[e]))return!1;return!0}function Tr(t,e){const r=Array.isArray(e)?e:LE(e)?[e]:UF(e),n=r.length===1?t:Lee(t,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(wr(n)&&xn(n)||Array.isArray(n)&&Mee(n))&&Tr(t,r.slice(0,-1)),t}var WF=t=>{for(const e in t)if(Xs(t[e]))return!0;return!1};function og(t,e={}){const r=Array.isArray(t);if(wr(t)||r)for(const n in t)Array.isArray(t[n])||wr(t[n])&&!WF(t[n])?(e[n]=Array.isArray(t[n])?[]:{},og(t[n],e[n])):bn(t[n])||(e[n]=!0);return e}function HF(t,e,r){const n=Array.isArray(t);if(wr(t)||n)for(const s in t)Array.isArray(t[s])||wr(t[s])&&!WF(t[s])?Nr(e)||Z1(r[s])?r[s]=Array.isArray(t[s])?og(t[s],[]):{...og(t[s])}:HF(t[s],bn(e)?{}:e[s],r[s]):r[s]=!eo(t[s],e[s]);return r}var Od=(t,e)=>HF(t,e,og(e));const aT={value:!1,isValid:!1},oT={value:!0,isValid:!0};var GF=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Nr(t[0].attributes.value)?Nr(t[0].value)||t[0].value===""?oT:{value:t[0].value,isValid:!0}:oT:aT}return aT},KF=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Nr(t)?t:e?t===""?NaN:t&&+t:r&&yi(t)?new Date(t):n?n(t):t;const lT={isValid:!1,value:null};var ZF=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,lT):lT;function cT(t){const e=t.ref;return ME(e)?e.files:RE(e)?ZF(t.refs).value:VF(e)?[...e.selectedOptions].map(({value:r})=>r):Wh(e)?GF(t.refs).value:KF(Nr(e.value)?t.ref.value:e.value,t)}var Ree=(t,e,r,n)=>{const s={};for(const i of t){const a=Be(e,i);a&&It(s,i,a._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},lg=t=>t instanceof RegExp,Ad=t=>Nr(t)?t:lg(t)?t.source:wr(t)?lg(t.value)?t.value.source:t.value:t,uT=t=>({isOnSubmit:!t||t===Zs.onSubmit,isOnBlur:t===Zs.onBlur,isOnChange:t===Zs.onChange,isOnAll:t===Zs.all,isOnTouch:t===Zs.onTouched});const dT="AsyncFunction";var Dee=t=>!!t&&!!t.validate&&!!(Xs(t.validate)&&t.validate.constructor.name===dT||wr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===dT)),Iee=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),fT=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const pf=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const i=Be(t,s);if(i){const{_f:a,...l}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!n)return!0;if(a.ref&&e(a.ref,a.name)&&!n)return!0;if(pf(l,e))break}else if(wr(l)&&pf(l,e))break}}};function hT(t,e,r){const n=Be(t,r);if(n||LE(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),a=Be(e,i),l=Be(t,i);if(a&&!Array.isArray(a)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};s.pop()}return{name:r}}var $ee=(t,e,r,n)=>{r(t);const{name:s,...i}=t;return xn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!n||Zs.all))},Fee=(t,e,r)=>!t||!e||t===e||hf(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),Bee=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,zee=(t,e)=>!Gv(Be(t,e)).length&&Tr(t,e),Uee=(t,e,r)=>{const n=hf(Be(t,r));return It(n,"root",e[r]),It(t,r,n),t},Vm=t=>yi(t);function pT(t,e,r="validate"){if(Vm(t)||Array.isArray(t)&&t.every(Vm)||vi(t)&&!t)return{type:r,message:Vm(t)?t:"",ref:e}}var dc=t=>wr(t)&&!lg(t)?t:{value:t,message:""},mT=async(t,e,r,n,s,i)=>{const{ref:a,refs:l,required:c,maxLength:d,minLength:f,min:p,max:m,pattern:g,validate:y,name:b,valueAsNumber:x,mount:j}=t._f,S=Be(r,b);if(!j||e.has(b))return{};const C=l?l[0]:a,E=D=>{s&&C.reportValidity&&(C.setCustomValidity(vi(D)?"":D||""),C.reportValidity())},N={},P=RE(a),O=Wh(a),L=P||O,A=(x||ME(a))&&Nr(a.value)&&Nr(S)||ag(a)&&a.value===""||S===""||Array.isArray(S)&&!S.length,R=qF.bind(null,b,n,N),M=(D,B,F,V=Gi.maxLength,J=Gi.minLength)=>{const G=D?B:F;N[b]={type:D?V:J,message:G,ref:a,...R(D?V:J,G)}};if(i?!Array.isArray(S)||!S.length:c&&(!L&&(A||bn(S))||vi(S)&&!S||O&&!GF(l).isValid||P&&!ZF(l).isValid)){const{value:D,message:B}=Vm(c)?{value:!!c,message:c}:dc(c);if(D&&(N[b]={type:Gi.required,message:B,ref:C,...R(Gi.required,B)},!n))return E(B),N}if(!A&&(!bn(p)||!bn(m))){let D,B;const F=dc(m),V=dc(p);if(!bn(S)&&!isNaN(S)){const J=a.valueAsNumber||S&&+S;bn(F.value)||(D=J>F.value),bn(V.value)||(B=J<V.value)}else{const J=a.valueAsDate||new Date(S),G=W=>new Date(new Date().toDateString()+" "+W),q=a.type=="time",U=a.type=="week";yi(F.value)&&S&&(D=q?G(S)>G(F.value):U?S>F.value:J>new Date(F.value)),yi(V.value)&&S&&(B=q?G(S)<G(V.value):U?S<V.value:J<new Date(V.value))}if((D||B)&&(M(!!D,F.message,V.message,Gi.max,Gi.min),!n))return E(N[b].message),N}if((d||f)&&!A&&(yi(S)||i&&Array.isArray(S))){const D=dc(d),B=dc(f),F=!bn(D.value)&&S.length>+D.value,V=!bn(B.value)&&S.length<+B.value;if((F||V)&&(M(F,D.message,B.message),!n))return E(N[b].message),N}if(g&&!A&&yi(S)){const{value:D,message:B}=dc(g);if(lg(D)&&!S.match(D)&&(N[b]={type:Gi.pattern,message:B,ref:a,...R(Gi.pattern,B)},!n))return E(B),N}if(y){if(Xs(y)){const D=await y(S,r),B=pT(D,C);if(B&&(N[b]={...B,...R(Gi.validate,B.message)},!n))return E(B.message),N}else if(wr(y)){let D={};for(const B in y){if(!xn(D)&&!n)break;const F=pT(await y[B](S,r),C,B);F&&(D={...F,...R(B,F.message)},E(F.message),n&&(N[b]=D))}if(!xn(D)&&(N[b]={ref:C,...D},!n))return N}}return E(!0),N};const qee={mode:Zs.onSubmit,reValidateMode:Zs.onChange,shouldFocusError:!0};function Vee(t={}){let e={...qee,...t},r={submitCount:0,isDirty:!1,isLoading:Xs(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let s=wr(e.defaultValues)||wr(e.values)?cn(e.values||e.defaultValues)||{}:{},i=e.shouldUnregister?{}:cn(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const m={array:iT(),state:iT()},g=uT(e.mode),y=uT(e.reValidateMode),b=e.criteriaMode===Zs.all,x=Q=>ie=>{clearTimeout(d),d=setTimeout(Q,ie)},j=async Q=>{if(!e.disabled&&(f.isValid||p.isValid||Q)){const ie=e.resolver?xn((await A()).errors):await M(n,!0);ie!==r.isValid&&m.state.next({isValid:ie})}},S=(Q,ie)=>{!e.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((Q||Array.from(l.mount)).forEach(Z=>{Z&&(ie?It(r.validatingFields,Z,ie):Tr(r.validatingFields,Z))}),m.state.next({validatingFields:r.validatingFields,isValidating:!xn(r.validatingFields)}))},C=(Q,ie=[],Z,ye,Pe=!0,xe=!0)=>{if(ye&&Z&&!e.disabled){if(a.action=!0,xe&&Array.isArray(Be(n,Q))){const Te=Z(Be(n,Q),ye.argA,ye.argB);Pe&&It(n,Q,Te)}if(xe&&Array.isArray(Be(r.errors,Q))){const Te=Z(Be(r.errors,Q),ye.argA,ye.argB);Pe&&It(r.errors,Q,Te),zee(r.errors,Q)}if((f.touchedFields||p.touchedFields)&&xe&&Array.isArray(Be(r.touchedFields,Q))){const Te=Z(Be(r.touchedFields,Q),ye.argA,ye.argB);Pe&&It(r.touchedFields,Q,Te)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=Od(s,i)),m.state.next({name:Q,isDirty:B(Q,ie),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else It(i,Q,ie)},E=(Q,ie)=>{It(r.errors,Q,ie),m.state.next({errors:r.errors})},N=Q=>{r.errors=Q,m.state.next({errors:r.errors,isValid:!1})},P=(Q,ie,Z,ye)=>{const Pe=Be(n,Q);if(Pe){const xe=Be(i,Q,Nr(Z)?Be(s,Q):Z);Nr(xe)||ye&&ye.defaultChecked||ie?It(i,Q,ie?xe:cT(Pe._f)):J(Q,xe),a.mount&&j()}},O=(Q,ie,Z,ye,Pe)=>{let xe=!1,Te=!1;const nt={name:Q};if(!e.disabled){if(!Z||ye){(f.isDirty||p.isDirty)&&(Te=r.isDirty,r.isDirty=nt.isDirty=B(),xe=Te!==nt.isDirty);const Nt=eo(Be(s,Q),ie);Te=!!Be(r.dirtyFields,Q),Nt?Tr(r.dirtyFields,Q):It(r.dirtyFields,Q,!0),nt.dirtyFields=r.dirtyFields,xe=xe||(f.dirtyFields||p.dirtyFields)&&Te!==!Nt}if(Z){const Nt=Be(r.touchedFields,Q);Nt||(It(r.touchedFields,Q,Z),nt.touchedFields=r.touchedFields,xe=xe||(f.touchedFields||p.touchedFields)&&Nt!==Z)}xe&&Pe&&m.state.next(nt)}return xe?nt:{}},L=(Q,ie,Z,ye)=>{const Pe=Be(r.errors,Q),xe=(f.isValid||p.isValid)&&vi(ie)&&r.isValid!==ie;if(e.delayError&&Z?(c=x(()=>E(Q,Z)),c(e.delayError)):(clearTimeout(d),c=null,Z?It(r.errors,Q,Z):Tr(r.errors,Q)),(Z?!eo(Pe,Z):Pe)||!xn(ye)||xe){const Te={...ye,...xe&&vi(ie)?{isValid:ie}:{},errors:r.errors,name:Q};r={...r,...Te},m.state.next(Te)}},A=async Q=>{S(Q,!0);const ie=await e.resolver(i,e.context,Ree(Q||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return S(Q),ie},R=async Q=>{const{errors:ie}=await A(Q);if(Q)for(const Z of Q){const ye=Be(ie,Z);ye?It(r.errors,Z,ye):Tr(r.errors,Z)}else r.errors=ie;return ie},M=async(Q,ie,Z={valid:!0})=>{for(const ye in Q){const Pe=Q[ye];if(Pe){const{_f:xe,...Te}=Pe;if(xe){const nt=l.array.has(xe.name),Nt=Pe._f&&Dee(Pe._f);Nt&&f.validatingFields&&S([ye],!0);const yt=await mT(Pe,l.disabled,i,b,e.shouldUseNativeValidation&&!ie,nt);if(Nt&&f.validatingFields&&S([ye]),yt[xe.name]&&(Z.valid=!1,ie))break;!ie&&(Be(yt,xe.name)?nt?Uee(r.errors,yt,xe.name):It(r.errors,xe.name,yt[xe.name]):Tr(r.errors,xe.name))}!xn(Te)&&await M(Te,ie,Z)}}return Z.valid},D=()=>{for(const Q of l.unMount){const ie=Be(n,Q);ie&&(ie._f.refs?ie._f.refs.every(Z=>!Jx(Z)):!Jx(ie._f.ref))&&ce(Q)}l.unMount=new Set},B=(Q,ie)=>!e.disabled&&(Q&&ie&&It(i,Q,ie),!eo(H(),s)),F=(Q,ie,Z)=>Aee(Q,l,{...a.mount?i:Nr(ie)?s:yi(Q)?{[Q]:ie}:ie},Z,ie),V=Q=>Gv(Be(a.mount?i:s,Q,e.shouldUnregister?Be(s,Q,[]):[])),J=(Q,ie,Z={})=>{const ye=Be(n,Q);let Pe=ie;if(ye){const xe=ye._f;xe&&(!xe.disabled&&It(i,Q,KF(ie,xe)),Pe=ag(xe.ref)&&bn(ie)?"":ie,VF(xe.ref)?[...xe.ref.options].forEach(Te=>Te.selected=Pe.includes(Te.value)):xe.refs?Wh(xe.ref)?xe.refs.length>1?xe.refs.forEach(Te=>(!Te.defaultChecked||!Te.disabled)&&(Te.checked=Array.isArray(Pe)?!!Pe.find(nt=>nt===Te.value):Pe===Te.value)):xe.refs[0]&&(xe.refs[0].checked=!!Pe):xe.refs.forEach(Te=>Te.checked=Te.value===Pe):ME(xe.ref)?xe.ref.value="":(xe.ref.value=Pe,xe.ref.type||m.state.next({name:Q,values:cn(i)})))}(Z.shouldDirty||Z.shouldTouch)&&O(Q,Pe,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&I(Q)},G=(Q,ie,Z)=>{for(const ye in ie){const Pe=ie[ye],xe=`${Q}.${ye}`,Te=Be(n,xe);(l.array.has(Q)||wr(Pe)||Te&&!Te._f)&&!il(Pe)?G(xe,Pe,Z):J(xe,Pe,Z)}},q=(Q,ie,Z={})=>{const ye=Be(n,Q),Pe=l.array.has(Q),xe=cn(ie);It(i,Q,xe),Pe?(m.array.next({name:Q,values:cn(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&Z.shouldDirty&&m.state.next({name:Q,dirtyFields:Od(s,i),isDirty:B(Q,xe)})):ye&&!ye._f&&!bn(xe)?G(Q,xe,Z):J(Q,xe,Z),fT(Q,l)&&m.state.next({...r}),m.state.next({name:a.mount?Q:void 0,values:cn(i)})},U=async Q=>{a.mount=!0;const ie=Q.target;let Z=ie.name,ye=!0;const Pe=Be(n,Z),xe=Te=>{ye=Number.isNaN(Te)||il(Te)&&isNaN(Te.getTime())||eo(Te,Be(i,Z,Te))};if(Pe){let Te,nt;const Nt=ie.type?cT(Pe._f):Eee(Q),yt=Q.type===sT.BLUR||Q.type===sT.FOCUS_OUT,Ri=!Iee(Pe._f)&&!e.resolver&&!Be(r.errors,Z)&&!Pe._f.deps||Bee(yt,Be(r.touchedFields,Z),r.isSubmitted,y,g),$n=fT(Z,l,yt);It(i,Z,Nt),yt?(Pe._f.onBlur&&Pe._f.onBlur(Q),c&&c(0)):Pe._f.onChange&&Pe._f.onChange(Q);const Ts=O(Z,Nt,yt),os=!xn(Ts)||$n;if(!yt&&m.state.next({name:Z,type:Q.type,values:cn(i)}),Ri)return(f.isValid||p.isValid)&&(e.mode==="onBlur"?yt&&j():yt||j()),os&&m.state.next({name:Z,...$n?{}:Ts});if(!yt&&$n&&m.state.next({...r}),e.resolver){const{errors:ls}=await A([Z]);if(xe(Nt),ye){const cs=hT(r.errors,n,Z),us=hT(ls,n,cs.name||Z);Te=us.error,Z=us.name,nt=xn(ls)}}else S([Z],!0),Te=(await mT(Pe,l.disabled,i,b,e.shouldUseNativeValidation))[Z],S([Z]),xe(Nt),ye&&(Te?nt=!1:(f.isValid||p.isValid)&&(nt=await M(n,!0)));ye&&(Pe._f.deps&&I(Pe._f.deps),L(Z,nt,Te,Ts))}},W=(Q,ie)=>{if(Be(r.errors,ie)&&Q.focus)return Q.focus(),1},I=async(Q,ie={})=>{let Z,ye;const Pe=hf(Q);if(e.resolver){const xe=await R(Nr(Q)?Q:Pe);Z=xn(xe),ye=Q?!Pe.some(Te=>Be(xe,Te)):Z}else Q?(ye=(await Promise.all(Pe.map(async xe=>{const Te=Be(n,xe);return await M(Te&&Te._f?{[xe]:Te}:Te)}))).every(Boolean),!(!ye&&!r.isValid)&&j()):ye=Z=await M(n);return m.state.next({...!yi(Q)||(f.isValid||p.isValid)&&Z!==r.isValid?{}:{name:Q},...e.resolver||!Q?{isValid:Z}:{},errors:r.errors}),ie.shouldFocus&&!ye&&pf(n,W,Q?Pe:l.mount),ye},H=Q=>{const ie={...a.mount?i:s};return Nr(Q)?ie:yi(Q)?Be(ie,Q):Q.map(Z=>Be(ie,Z))},ne=(Q,ie)=>({invalid:!!Be((ie||r).errors,Q),isDirty:!!Be((ie||r).dirtyFields,Q),error:Be((ie||r).errors,Q),isValidating:!!Be(r.validatingFields,Q),isTouched:!!Be((ie||r).touchedFields,Q)}),ge=Q=>{Q&&hf(Q).forEach(ie=>Tr(r.errors,ie)),m.state.next({errors:Q?r.errors:{}})},K=(Q,ie,Z)=>{const ye=(Be(n,Q,{_f:{}})._f||{}).ref,Pe=Be(r.errors,Q)||{},{ref:xe,message:Te,type:nt,...Nt}=Pe;It(r.errors,Q,{...Nt,...ie,ref:ye}),m.state.next({name:Q,errors:r.errors,isValid:!1}),Z&&Z.shouldFocus&&ye&&ye.focus&&ye.focus()},de=(Q,ie)=>Xs(Q)?m.state.subscribe({next:Z=>Q(F(void 0,ie),Z)}):F(Q,ie,!0),ue=Q=>m.state.subscribe({next:ie=>{Fee(Q.name,ie.name,Q.exact)&&$ee(ie,Q.formState||f,ir,Q.reRenderRoot)&&Q.callback({values:{...i},...r,...ie})}}).unsubscribe,he=Q=>(a.mount=!0,p={...p,...Q.formState},ue({...Q,formState:p})),ce=(Q,ie={})=>{for(const Z of Q?hf(Q):l.mount)l.mount.delete(Z),l.array.delete(Z),ie.keepValue||(Tr(n,Z),Tr(i,Z)),!ie.keepError&&Tr(r.errors,Z),!ie.keepDirty&&Tr(r.dirtyFields,Z),!ie.keepTouched&&Tr(r.touchedFields,Z),!ie.keepIsValidating&&Tr(r.validatingFields,Z),!e.shouldUnregister&&!ie.keepDefaultValue&&Tr(s,Z);m.state.next({values:cn(i)}),m.state.next({...r,...ie.keepDirty?{isDirty:B()}:{}}),!ie.keepIsValid&&j()},te=({disabled:Q,name:ie})=>{(vi(Q)&&a.mount||Q||l.disabled.has(ie))&&(Q?l.disabled.add(ie):l.disabled.delete(ie))},pe=(Q,ie={})=>{let Z=Be(n,Q);const ye=vi(ie.disabled)||vi(e.disabled);return It(n,Q,{...Z||{},_f:{...Z&&Z._f?Z._f:{ref:{name:Q}},name:Q,mount:!0,...ie}}),l.mount.add(Q),Z?te({disabled:vi(ie.disabled)?ie.disabled:e.disabled,name:Q}):P(Q,!0,ie.value),{...ye?{disabled:ie.disabled||e.disabled}:{},...e.progressive?{required:!!ie.required,min:Ad(ie.min),max:Ad(ie.max),minLength:Ad(ie.minLength),maxLength:Ad(ie.maxLength),pattern:Ad(ie.pattern)}:{},name:Q,onChange:U,onBlur:U,ref:Pe=>{if(Pe){pe(Q,ie),Z=Be(n,Q);const xe=Nr(Pe.value)&&Pe.querySelectorAll&&Pe.querySelectorAll("input,select,textarea")[0]||Pe,Te=Tee(xe),nt=Z._f.refs||[];if(Te?nt.find(Nt=>Nt===xe):xe===Z._f.ref)return;It(n,Q,{_f:{...Z._f,...Te?{refs:[...nt.filter(Jx),xe,...Array.isArray(Be(s,Q))?[{}]:[]],ref:{type:xe.type,name:Q}}:{ref:xe}}}),P(Q,!1,void 0,xe)}else Z=Be(n,Q,{}),Z._f&&(Z._f.mount=!1),(e.shouldUnregister||ie.shouldUnregister)&&!(kee(l.array,Q)&&a.action)&&l.unMount.add(Q)}}},ae=()=>e.shouldFocusError&&pf(n,W,l.mount),Oe=Q=>{vi(Q)&&(m.state.next({disabled:Q}),pf(n,(ie,Z)=>{const ye=Be(n,Z);ye&&(ie.disabled=ye._f.disabled||Q,Array.isArray(ye._f.refs)&&ye._f.refs.forEach(Pe=>{Pe.disabled=ye._f.disabled||Q}))},0,!1))},Ee=(Q,ie)=>async Z=>{let ye;Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let Pe=cn(i);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:xe,values:Te}=await A();r.errors=xe,Pe=Te}else await M(n);if(l.disabled.size)for(const xe of l.disabled)It(Pe,xe,void 0);if(Tr(r.errors,"root"),xn(r.errors)){m.state.next({errors:{}});try{await Q(Pe,Z)}catch(xe){ye=xe}}else ie&&await ie({...r.errors},Z),ae(),setTimeout(ae);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xn(r.errors)&&!ye,submitCount:r.submitCount+1,errors:r.errors}),ye)throw ye},ke=(Q,ie={})=>{Be(n,Q)&&(Nr(ie.defaultValue)?q(Q,cn(Be(s,Q))):(q(Q,ie.defaultValue),It(s,Q,cn(ie.defaultValue))),ie.keepTouched||Tr(r.touchedFields,Q),ie.keepDirty||(Tr(r.dirtyFields,Q),r.isDirty=ie.defaultValue?B(Q,cn(Be(s,Q))):B()),ie.keepError||(Tr(r.errors,Q),f.isValid&&j()),m.state.next({...r}))},We=(Q,ie={})=>{const Z=Q?cn(Q):s,ye=cn(Z),Pe=xn(Q),xe=Pe?s:ye;if(ie.keepDefaultValues||(s=Z),!ie.keepValues){if(ie.keepDirtyValues){const Te=new Set([...l.mount,...Object.keys(Od(s,i))]);for(const nt of Array.from(Te))Be(r.dirtyFields,nt)?It(xe,nt,Be(i,nt)):q(nt,Be(xe,nt))}else{if(TE&&Nr(Q))for(const Te of l.mount){const nt=Be(n,Te);if(nt&&nt._f){const Nt=Array.isArray(nt._f.refs)?nt._f.refs[0]:nt._f.ref;if(ag(Nt)){const yt=Nt.closest("form");if(yt){yt.reset();break}}}}for(const Te of l.mount)q(Te,Be(xe,Te))}i=cn(xe),m.array.next({values:{...xe}}),m.state.next({values:{...xe}})}l={mount:ie.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!f.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues,a.watch=!!e.shouldUnregister,m.state.next({submitCount:ie.keepSubmitCount?r.submitCount:0,isDirty:Pe?!1:ie.keepDirty?r.isDirty:!!(ie.keepDefaultValues&&!eo(Q,s)),isSubmitted:ie.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Pe?{}:ie.keepDirtyValues?ie.keepDefaultValues&&i?Od(s,i):r.dirtyFields:ie.keepDefaultValues&&Q?Od(s,Q):ie.keepDirty?r.dirtyFields:{},touchedFields:ie.keepTouched?r.touchedFields:{},errors:ie.keepErrors?r.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},St=(Q,ie)=>We(Xs(Q)?Q(i):Q,ie),fr=(Q,ie={})=>{const Z=Be(n,Q),ye=Z&&Z._f;if(ye){const Pe=ye.refs?ye.refs[0]:ye.ref;Pe.focus&&(Pe.focus(),ie.shouldSelect&&Xs(Pe.select)&&Pe.select())}},ir=Q=>{r={...r,...Q}},Tt={control:{register:pe,unregister:ce,getFieldState:ne,handleSubmit:Ee,setError:K,_subscribe:ue,_runSchema:A,_getWatch:F,_getDirty:B,_setValid:j,_setFieldArray:C,_setDisabledField:te,_setErrors:N,_getFieldArray:V,_reset:We,_resetDefaultValues:()=>Xs(e.defaultValues)&&e.defaultValues().then(Q=>{St(Q,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Oe,_subjects:m,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return a},set _state(Q){a=Q},get _defaultValues(){return s},get _names(){return l},set _names(Q){l=Q},get _formState(){return r},get _options(){return e},set _options(Q){e={...e,...Q}}},subscribe:he,trigger:I,register:pe,handleSubmit:Ee,watch:de,setValue:q,getValues:H,reset:St,resetField:ke,clearErrors:ge,unregister:ce,setError:K,setFocus:fr,getFieldState:ne};return{...Tt,formControl:Tt}}function Wee(t={}){const e=z.useRef(void 0),r=z.useRef(void 0),[n,s]=z.useState({isDirty:!1,isValidating:!1,isLoading:Xs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Xs(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:Vee(t),formState:n},t.formControl&&t.defaultValues&&!Xs(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,z.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0}),[i]),z.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),z.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==n.isDirty&&i._subjects.state.next({isDirty:a})}},[i,n.isDirty]),z.useEffect(()=>{t.values&&!eo(t.values,r.current)?(i._reset(t.values,i._options.resetOptions),r.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[t.values,i]),z.useEffect(()=>{t.errors&&!xn(t.errors)&&i._setErrors(t.errors)},[t.errors,i]),z.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),z.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=Oee(n,i),e.current}var _t;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of i)a[l]=s[l];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(_t||(_t={}));var X1;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(X1||(X1={}));const De=_t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ji=t=>{switch(typeof t){case"undefined":return De.undefined;case"string":return De.string;case"number":return isNaN(t)?De.nan:De.number;case"boolean":return De.boolean;case"function":return De.function;case"bigint":return De.bigint;case"symbol":return De.symbol;case"object":return Array.isArray(t)?De.array:t===null?De.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?De.promise:typeof Map<"u"&&t instanceof Map?De.map:typeof Set<"u"&&t instanceof Set?De.set:typeof Date<"u"&&t instanceof Date?De.date:De.object;default:return De.unknown}},Se=_t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Hee=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ts extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,c=0;for(;c<a.path.length;){const d=a.path[c];c===a.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(a))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return s(this),n}static assert(e){if(!(e instanceof ts))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ts.create=t=>new ts(t);const Hc=(t,e)=>{let r;switch(t.code){case Se.invalid_type:t.received===De.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,_t.jsonStringifyReplacer)}`;break;case Se.unrecognized_keys:r=`Unrecognized key(s) in object: ${_t.joinValues(t.keys,", ")}`;break;case Se.invalid_union:r="Invalid input";break;case Se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${_t.joinValues(t.options)}`;break;case Se.invalid_enum_value:r=`Invalid enum value. Expected ${_t.joinValues(t.options)}, received '${t.received}'`;break;case Se.invalid_arguments:r="Invalid function arguments";break;case Se.invalid_return_type:r="Invalid function return type";break;case Se.invalid_date:r="Invalid date";break;case Se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:_t.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Se.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Se.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Se.custom:r="Invalid input";break;case Se.invalid_intersection_types:r="Intersection results could not be merged";break;case Se.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Se.not_finite:r="Number must be finite";break;default:r=e.defaultError,_t.assertNever(t)}return{message:r}};let XF=Hc;function Gee(t){XF=t}function cg(){return XF}const ug=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(a,{data:e,defaultError:l}).message;return{...s,path:i,message:l}},Kee=[];function Le(t,e){const r=cg(),n=ug({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Hc?void 0:Hc].filter(s=>!!s)});t.common.issues.push(n)}class mn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return tt;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const i=await s.key,a=await s.value;n.push({key:i,value:a})}return mn.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return tt;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const tt=Object.freeze({status:"aborted"}),jc=t=>({status:"dirty",value:t}),Nn=t=>({status:"valid",value:t}),Y1=t=>t.status==="aborted",J1=t=>t.status==="dirty",xl=t=>t.status==="valid",$f=t=>typeof Promise<"u"&&t instanceof Promise;function dg(t,e,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function YF(t,e,r,n,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var Ve;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ve||(Ve={}));var Zd,Xd;class Pi{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const gT=(t,e)=>{if(xl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ts(t.common.issues);return this._error=r,this._error}}};function ot(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,l)=>{var c,d;const{message:f}=t;return a.code==="invalid_enum_value"?{message:f??l.defaultError}:typeof l.data>"u"?{message:(c=f??n)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(d=f??r)!==null&&d!==void 0?d:l.defaultError}},description:s}}class ft{get description(){return this._def.description}_getType(e){return Ji(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ji(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new mn,ctx:{common:e.parent.common,data:e.data,parsedType:Ji(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if($f(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ji(e)},i=this._parseSync({data:e,path:s.path,parent:s});return gT(s,i)}"~validate"(e){var r,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ji(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return xl(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((n=(r=i?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>xl(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ji(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await($f(s)?s:Promise.resolve(s));return gT(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const a=e(s),l=()=>i.addIssue({code:Se.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new si({schema:this,typeName:et.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Si.create(this,this._def)}nullable(){return vo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ti.create(this)}promise(){return Kc.create(this,this._def)}or(e){return Uf.create([this,e],this._def)}and(e){return qf.create(this,e,this._def)}transform(e){return new si({...ot(this._def),schema:this,typeName:et.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Kf({...ot(this._def),innerType:this,defaultValue:r,typeName:et.ZodDefault})}brand(){return new DE({typeName:et.ZodBranded,type:this,...ot(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Zf({...ot(this._def),innerType:this,catchValue:r,typeName:et.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Hh.create(this,e)}readonly(){return Xf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Zee=/^c[^\s-]{8,}$/i,Xee=/^[0-9a-z]+$/,Yee=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Jee=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Qee=/^[a-z0-9_-]{21}$/i,ete=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tte=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rte=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nte="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qx;const ste=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ite=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ate=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ote=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,lte=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cte=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,JF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ute=new RegExp(`^${JF}$`);function QF(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function dte(t){return new RegExp(`^${QF(t)}$`)}function eB(t){let e=`${JF}T${QF(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function fte(t,e){return!!((e==="v4"||!e)&&ste.test(t)||(e==="v6"||!e)&&ate.test(t))}function hte(t,e){if(!ete.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function pte(t,e){return!!((e==="v4"||!e)&&ite.test(t)||(e==="v6"||!e)&&ote.test(t))}class ei extends ft{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==De.string){const i=this._getOrReturnCtx(e);return Le(i,{code:Se.invalid_type,expected:De.string,received:i.parsedType}),tt}const n=new mn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,l=e.data.length<i.value;(a||l)&&(s=this._getOrReturnCtx(e,s),a?Le(s,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Le(s,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")rte.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"email",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Qx||(Qx=new RegExp(nte,"u")),Qx.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"emoji",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Jee.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"uuid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Qee.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"nanoid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Zee.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"cuid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Xee.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"cuid2",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Yee.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"ulid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Le(s,{validation:"url",code:Se.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"regex",code:Se.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?eB(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?ute.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?dte(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?tte.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"duration",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?fte(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"ip",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?hte(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"jwt",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?pte(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"cidr",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?lte.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"base64",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?cte.test(e.data)||(s=this._getOrReturnCtx(e,s),Le(s,{validation:"base64url",code:Se.invalid_string,message:i.message}),n.dirty()):_t.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:Se.invalid_string,...Ve.errToObj(n)})}_addCheck(e){return new ei({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ve.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ve.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ve.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ve.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Ve.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ve.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ve.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Ve.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Ve.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Ve.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Ve.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Ve.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Ve.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Ve.errToObj(r)})}nonempty(e){return this.min(1,Ve.errToObj(e))}trim(){return new ei({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ei({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ei({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ei.create=t=>{var e;return new ei({checks:[],typeName:et.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ot(t)})};function mte(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class po extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==De.number){const i=this._getOrReturnCtx(e);return Le(i,{code:Se.invalid_type,expected:De.number,received:i.parsedType}),tt}let n;const s=new mn;for(const i of this._def.checks)i.kind==="int"?_t.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Le(n,{code:Se.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Le(n,{code:Se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Le(n,{code:Se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?mte(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),Le(n,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Le(n,{code:Se.not_finite,message:i.message}),s.dirty()):_t.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Ve.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ve.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ve.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ve.toString(r))}setLimit(e,r,n,s){return new po({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ve.toString(s)}]})}_addCheck(e){return new po({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ve.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ve.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_t.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}po.create=t=>new po({checks:[],typeName:et.ZodNumber,coerce:t?.coerce||!1,...ot(t)});class mo extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==De.bigint)return this._getInvalidInput(e);let n;const s=new mn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Le(n,{code:Se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Le(n,{code:Se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Le(n,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):_t.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return Le(r,{code:Se.invalid_type,expected:De.bigint,received:r.parsedType}),tt}gte(e,r){return this.setLimit("min",e,!0,Ve.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Ve.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Ve.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Ve.toString(r))}setLimit(e,r,n,s){return new mo({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Ve.toString(s)}]})}_addCheck(e){return new mo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ve.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Ve.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}mo.create=t=>{var e;return new mo({checks:[],typeName:et.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ot(t)})};class Ff extends ft{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==De.boolean){const n=this._getOrReturnCtx(e);return Le(n,{code:Se.invalid_type,expected:De.boolean,received:n.parsedType}),tt}return Nn(e.data)}}Ff.create=t=>new Ff({typeName:et.ZodBoolean,coerce:t?.coerce||!1,...ot(t)});class bl extends ft{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==De.date){const i=this._getOrReturnCtx(e);return Le(i,{code:Se.invalid_type,expected:De.date,received:i.parsedType}),tt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Le(i,{code:Se.invalid_date}),tt}const n=new mn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Le(s,{code:Se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):_t.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new bl({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Ve.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Ve.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}bl.create=t=>new bl({checks:[],coerce:t?.coerce||!1,typeName:et.ZodDate,...ot(t)});class fg extends ft{_parse(e){if(this._getType(e)!==De.symbol){const n=this._getOrReturnCtx(e);return Le(n,{code:Se.invalid_type,expected:De.symbol,received:n.parsedType}),tt}return Nn(e.data)}}fg.create=t=>new fg({typeName:et.ZodSymbol,...ot(t)});class Bf extends ft{_parse(e){if(this._getType(e)!==De.undefined){const n=this._getOrReturnCtx(e);return Le(n,{code:Se.invalid_type,expected:De.undefined,received:n.parsedType}),tt}return Nn(e.data)}}Bf.create=t=>new Bf({typeName:et.ZodUndefined,...ot(t)});class zf extends ft{_parse(e){if(this._getType(e)!==De.null){const n=this._getOrReturnCtx(e);return Le(n,{code:Se.invalid_type,expected:De.null,received:n.parsedType}),tt}return Nn(e.data)}}zf.create=t=>new zf({typeName:et.ZodNull,...ot(t)});class Gc extends ft{constructor(){super(...arguments),this._any=!0}_parse(e){return Nn(e.data)}}Gc.create=t=>new Gc({typeName:et.ZodAny,...ot(t)});class ml extends ft{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nn(e.data)}}ml.create=t=>new ml({typeName:et.ZodUnknown,...ot(t)});class la extends ft{_parse(e){const r=this._getOrReturnCtx(e);return Le(r,{code:Se.invalid_type,expected:De.never,received:r.parsedType}),tt}}la.create=t=>new la({typeName:et.ZodNever,...ot(t)});class hg extends ft{_parse(e){if(this._getType(e)!==De.undefined){const n=this._getOrReturnCtx(e);return Le(n,{code:Se.invalid_type,expected:De.void,received:n.parsedType}),tt}return Nn(e.data)}}hg.create=t=>new hg({typeName:et.ZodVoid,...ot(t)});class ti extends ft{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==De.array)return Le(r,{code:Se.invalid_type,expected:De.array,received:r.parsedType}),tt;if(s.exactLength!==null){const a=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(a||l)&&(Le(r,{code:a?Se.too_big:Se.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(Le(r,{code:Se.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(Le(r,{code:Se.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>s.type._parseAsync(new Pi(r,a,r.path,l)))).then(a=>mn.mergeArray(n,a));const i=[...r.data].map((a,l)=>s.type._parseSync(new Pi(r,a,r.path,l)));return mn.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new ti({...this._def,minLength:{value:e,message:Ve.toString(r)}})}max(e,r){return new ti({...this._def,maxLength:{value:e,message:Ve.toString(r)}})}length(e,r){return new ti({...this._def,exactLength:{value:e,message:Ve.toString(r)}})}nonempty(e){return this.min(1,e)}}ti.create=(t,e)=>new ti({type:t,minLength:null,maxLength:null,exactLength:null,typeName:et.ZodArray,...ot(e)});function vc(t){if(t instanceof lr){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Si.create(vc(n))}return new lr({...t._def,shape:()=>e})}else return t instanceof ti?new ti({...t._def,type:vc(t.element)}):t instanceof Si?Si.create(vc(t.unwrap())):t instanceof vo?vo.create(vc(t.unwrap())):t instanceof Oi?Oi.create(t.items.map(e=>vc(e))):t}class lr extends ft{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=_t.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==De.object){const d=this._getOrReturnCtx(e);return Le(d,{code:Se.invalid_type,expected:De.object,received:d.parsedType}),tt}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof la&&this._def.unknownKeys==="strip"))for(const d in s.data)a.includes(d)||l.push(d);const c=[];for(const d of a){const f=i[d],p=s.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Pi(s,p,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof la){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of l)c.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(d==="strict")l.length>0&&(Le(s,{code:Se.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of l){const p=s.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Pi(s,p,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of c){const p=await f.key,m=await f.value;d.push({key:p,value:m,alwaysSet:f.alwaysSet})}return d}).then(d=>mn.mergeObjectSync(n,d)):mn.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Ve.errToObj,new lr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,a,l;const c=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Ve.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new lr({...this._def,unknownKeys:"strip"})}passthrough(){return new lr({...this._def,unknownKeys:"passthrough"})}extend(e){return new lr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new lr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:et.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new lr({...this._def,catchall:e})}pick(e){const r={};return _t.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new lr({...this._def,shape:()=>r})}omit(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new lr({...this._def,shape:()=>r})}deepPartial(){return vc(this)}partial(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new lr({...this._def,shape:()=>r})}required(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Si;)i=i._def.innerType;r[n]=i}}),new lr({...this._def,shape:()=>r})}keyof(){return tB(_t.objectKeys(this.shape))}}lr.create=(t,e)=>new lr({shape:()=>t,unknownKeys:"strip",catchall:la.create(),typeName:et.ZodObject,...ot(e)});lr.strictCreate=(t,e)=>new lr({shape:()=>t,unknownKeys:"strict",catchall:la.create(),typeName:et.ZodObject,...ot(e)});lr.lazycreate=(t,e)=>new lr({shape:t,unknownKeys:"strip",catchall:la.create(),typeName:et.ZodObject,...ot(e)});class Uf extends ft{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const a=i.map(l=>new ts(l.ctx.common.issues));return Le(r,{code:Se.invalid_union,unionErrors:a}),tt}if(r.common.async)return Promise.all(n.map(async i=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},f=c._parseSync({data:r.data,path:r.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=a.map(c=>new ts(c));return Le(r,{code:Se.invalid_union,unionErrors:l}),tt}}get options(){return this._def.options}}Uf.create=(t,e)=>new Uf({options:t,typeName:et.ZodUnion,...ot(e)});const Zi=t=>t instanceof Wf?Zi(t.schema):t instanceof si?Zi(t.innerType()):t instanceof Hf?[t.value]:t instanceof go?t.options:t instanceof Gf?_t.objectValues(t.enum):t instanceof Kf?Zi(t._def.innerType):t instanceof Bf?[void 0]:t instanceof zf?[null]:t instanceof Si?[void 0,...Zi(t.unwrap())]:t instanceof vo?[null,...Zi(t.unwrap())]:t instanceof DE||t instanceof Xf?Zi(t.unwrap()):t instanceof Zf?Zi(t._def.innerType):[];class Kv extends ft{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==De.object)return Le(r,{code:Se.invalid_type,expected:De.object,received:r.parsedType}),tt;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(Le(r,{code:Se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),tt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const a=Zi(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new Kv({typeName:et.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...ot(n)})}}function Q1(t,e){const r=Ji(t),n=Ji(e);if(t===e)return{valid:!0,data:t};if(r===De.object&&n===De.object){const s=_t.objectKeys(e),i=_t.objectKeys(t).filter(l=>s.indexOf(l)!==-1),a={...t,...e};for(const l of i){const c=Q1(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(r===De.array&&n===De.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],l=e[i],c=Q1(a,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===De.date&&n===De.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class qf extends ft{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(Y1(i)||Y1(a))return tt;const l=Q1(i.value,a.value);return l.valid?((J1(i)||J1(a))&&r.dirty(),{status:r.value,value:l.data}):(Le(n,{code:Se.invalid_intersection_types}),tt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}qf.create=(t,e,r)=>new qf({left:t,right:e,typeName:et.ZodIntersection,...ot(r)});class Oi extends ft{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==De.array)return Le(n,{code:Se.invalid_type,expected:De.array,received:n.parsedType}),tt;if(n.data.length<this._def.items.length)return Le(n,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&n.data.length>this._def.items.length&&(Le(n,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((a,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Pi(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>mn.mergeArray(r,a)):mn.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Oi({...this._def,rest:e})}}Oi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oi({items:t,typeName:et.ZodTuple,rest:null,...ot(e)})};class Vf extends ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==De.object)return Le(n,{code:Se.invalid_type,expected:De.object,received:n.parsedType}),tt;const s=[],i=this._def.keyType,a=this._def.valueType;for(const l in n.data)s.push({key:i._parse(new Pi(n,l,n.path,l)),value:a._parse(new Pi(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?mn.mergeObjectAsync(r,s):mn.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ft?new Vf({keyType:e,valueType:r,typeName:et.ZodRecord,...ot(n)}):new Vf({keyType:ei.create(),valueType:e,typeName:et.ZodRecord,...ot(r)})}}class pg extends ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==De.map)return Le(n,{code:Se.invalid_type,expected:De.map,received:n.parsedType}),tt;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([l,c],d)=>({key:s._parse(new Pi(n,l,n.path,[d,"key"])),value:i._parse(new Pi(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of a){const d=await c.key,f=await c.value;if(d.status==="aborted"||f.status==="aborted")return tt;(d.status==="dirty"||f.status==="dirty")&&r.dirty(),l.set(d.value,f.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of a){const d=c.key,f=c.value;if(d.status==="aborted"||f.status==="aborted")return tt;(d.status==="dirty"||f.status==="dirty")&&r.dirty(),l.set(d.value,f.value)}return{status:r.value,value:l}}}}pg.create=(t,e,r)=>new pg({valueType:e,keyType:t,typeName:et.ZodMap,...ot(r)});class wl extends ft{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==De.set)return Le(n,{code:Se.invalid_type,expected:De.set,received:n.parsedType}),tt;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Le(n,{code:Se.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Le(n,{code:Se.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function a(c){const d=new Set;for(const f of c){if(f.status==="aborted")return tt;f.status==="dirty"&&r.dirty(),d.add(f.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new Pi(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,r){return new wl({...this._def,minSize:{value:e,message:Ve.toString(r)}})}max(e,r){return new wl({...this._def,maxSize:{value:e,message:Ve.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}wl.create=(t,e)=>new wl({valueType:t,minSize:null,maxSize:null,typeName:et.ZodSet,...ot(e)});class Tc extends ft{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==De.function)return Le(r,{code:Se.invalid_type,expected:De.function,received:r.parsedType}),tt;function n(l,c){return ug({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,cg(),Hc].filter(d=>!!d),issueData:{code:Se.invalid_arguments,argumentsError:c}})}function s(l,c){return ug({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,cg(),Hc].filter(d=>!!d),issueData:{code:Se.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Kc){const l=this;return Nn(async function(...c){const d=new ts([]),f=await l._def.args.parseAsync(c,i).catch(g=>{throw d.addIssue(n(c,g)),d}),p=await Reflect.apply(a,this,f);return await l._def.returns._def.type.parseAsync(p,i).catch(g=>{throw d.addIssue(s(p,g)),d})})}else{const l=this;return Nn(function(...c){const d=l._def.args.safeParse(c,i);if(!d.success)throw new ts([n(c,d.error)]);const f=Reflect.apply(a,this,d.data),p=l._def.returns.safeParse(f,i);if(!p.success)throw new ts([s(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Tc({...this._def,args:Oi.create(e).rest(ml.create())})}returns(e){return new Tc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Tc({args:e||Oi.create([]).rest(ml.create()),returns:r||ml.create(),typeName:et.ZodFunction,...ot(n)})}}class Wf extends ft{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Wf.create=(t,e)=>new Wf({getter:t,typeName:et.ZodLazy,...ot(e)});class Hf extends ft{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Le(r,{received:r.data,code:Se.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Hf.create=(t,e)=>new Hf({value:t,typeName:et.ZodLiteral,...ot(e)});function tB(t,e){return new go({values:t,typeName:et.ZodEnum,...ot(e)})}class go extends ft{constructor(){super(...arguments),Zd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Le(r,{expected:_t.joinValues(n),received:r.parsedType,code:Se.invalid_type}),tt}if(dg(this,Zd)||YF(this,Zd,new Set(this._def.values)),!dg(this,Zd).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Le(r,{received:r.data,code:Se.invalid_enum_value,options:n}),tt}return Nn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return go.create(e,{...this._def,...r})}exclude(e,r=this._def){return go.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}Zd=new WeakMap;go.create=tB;class Gf extends ft{constructor(){super(...arguments),Xd.set(this,void 0)}_parse(e){const r=_t.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==De.string&&n.parsedType!==De.number){const s=_t.objectValues(r);return Le(n,{expected:_t.joinValues(s),received:n.parsedType,code:Se.invalid_type}),tt}if(dg(this,Xd)||YF(this,Xd,new Set(_t.getValidEnumValues(this._def.values))),!dg(this,Xd).has(e.data)){const s=_t.objectValues(r);return Le(n,{received:n.data,code:Se.invalid_enum_value,options:s}),tt}return Nn(e.data)}get enum(){return this._def.values}}Xd=new WeakMap;Gf.create=(t,e)=>new Gf({values:t,typeName:et.ZodNativeEnum,...ot(e)});class Kc extends ft{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==De.promise&&r.common.async===!1)return Le(r,{code:Se.invalid_type,expected:De.promise,received:r.parsedType}),tt;const n=r.parsedType===De.promise?r.data:Promise.resolve(r.data);return Nn(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Kc.create=(t,e)=>new Kc({type:t,typeName:et.ZodPromise,...ot(e)});class si extends ft{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===et.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{Le(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return tt;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?tt:c.status==="dirty"||r.value==="dirty"?jc(c.value):c});{if(r.value==="aborted")return tt;const l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?tt:l.status==="dirty"||r.value==="dirty"?jc(l.value):l}}if(s.type==="refinement"){const a=l=>{const c=s.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?tt:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?tt:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!xl(a))return a;const l=s.transform(a.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>xl(a)?Promise.resolve(s.transform(a.value,i)).then(l=>({status:r.value,value:l})):a);_t.assertNever(s)}}si.create=(t,e,r)=>new si({schema:t,typeName:et.ZodEffects,effect:e,...ot(r)});si.createWithPreprocess=(t,e,r)=>new si({schema:e,effect:{type:"preprocess",transform:t},typeName:et.ZodEffects,...ot(r)});class Si extends ft{_parse(e){return this._getType(e)===De.undefined?Nn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Si.create=(t,e)=>new Si({innerType:t,typeName:et.ZodOptional,...ot(e)});class vo extends ft{_parse(e){return this._getType(e)===De.null?Nn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vo.create=(t,e)=>new vo({innerType:t,typeName:et.ZodNullable,...ot(e)});class Kf extends ft{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===De.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Kf.create=(t,e)=>new Kf({innerType:t,typeName:et.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ot(e)});class Zf extends ft{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return $f(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ts(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ts(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Zf.create=(t,e)=>new Zf({innerType:t,typeName:et.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ot(e)});class mg extends ft{_parse(e){if(this._getType(e)!==De.nan){const n=this._getOrReturnCtx(e);return Le(n,{code:Se.invalid_type,expected:De.nan,received:n.parsedType}),tt}return{status:"valid",value:e.data}}}mg.create=t=>new mg({typeName:et.ZodNaN,...ot(t)});const gte=Symbol("zod_brand");class DE extends ft{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Hh extends ft{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?tt:i.status==="dirty"?(r.dirty(),jc(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?tt:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new Hh({in:e,out:r,typeName:et.ZodPipeline})}}class Xf extends ft{_parse(e){const r=this._def.innerType._parse(e),n=s=>(xl(s)&&(s.value=Object.freeze(s.value)),s);return $f(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}Xf.create=(t,e)=>new Xf({innerType:t,typeName:et.ZodReadonly,...ot(e)});function vT(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function rB(t,e={},r){return t?Gc.create().superRefine((n,s)=>{var i,a;const l=t(n);if(l instanceof Promise)return l.then(c=>{var d,f;if(!c){const p=vT(e,n),m=(f=(d=p.fatal)!==null&&d!==void 0?d:r)!==null&&f!==void 0?f:!0;s.addIssue({code:"custom",...p,fatal:m})}});if(!l){const c=vT(e,n),d=(a=(i=c.fatal)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:!0;s.addIssue({code:"custom",...c,fatal:d})}}):Gc.create()}const vte={object:lr.lazycreate};var et;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(et||(et={}));const yte=(t,e={message:`Input not instance of ${t.name}`})=>rB(r=>r instanceof t,e),nB=ei.create,sB=po.create,xte=mg.create,bte=mo.create,iB=Ff.create,wte=bl.create,_te=fg.create,jte=Bf.create,Ste=zf.create,Nte=Gc.create,Ete=ml.create,Cte=la.create,kte=hg.create,Pte=ti.create,Ote=lr.create,Ate=lr.strictCreate,Tte=Uf.create,Lte=Kv.create,Mte=qf.create,Rte=Oi.create,Dte=Vf.create,Ite=pg.create,$te=wl.create,Fte=Tc.create,Bte=Wf.create,zte=Hf.create,Ute=go.create,qte=Gf.create,Vte=Kc.create,yT=si.create,Wte=Si.create,Hte=vo.create,Gte=si.createWithPreprocess,Kte=Hh.create,Zte=()=>nB().optional(),Xte=()=>sB().optional(),Yte=()=>iB().optional(),Jte={string:t=>ei.create({...t,coerce:!0}),number:t=>po.create({...t,coerce:!0}),boolean:t=>Ff.create({...t,coerce:!0}),bigint:t=>mo.create({...t,coerce:!0}),date:t=>bl.create({...t,coerce:!0})},Qte=tt;var eb=Object.freeze({__proto__:null,defaultErrorMap:Hc,setErrorMap:Gee,getErrorMap:cg,makeIssue:ug,EMPTY_PATH:Kee,addIssueToContext:Le,ParseStatus:mn,INVALID:tt,DIRTY:jc,OK:Nn,isAborted:Y1,isDirty:J1,isValid:xl,isAsync:$f,get util(){return _t},get objectUtil(){return X1},ZodParsedType:De,getParsedType:Ji,ZodType:ft,datetimeRegex:eB,ZodString:ei,ZodNumber:po,ZodBigInt:mo,ZodBoolean:Ff,ZodDate:bl,ZodSymbol:fg,ZodUndefined:Bf,ZodNull:zf,ZodAny:Gc,ZodUnknown:ml,ZodNever:la,ZodVoid:hg,ZodArray:ti,ZodObject:lr,ZodUnion:Uf,ZodDiscriminatedUnion:Kv,ZodIntersection:qf,ZodTuple:Oi,ZodRecord:Vf,ZodMap:pg,ZodSet:wl,ZodFunction:Tc,ZodLazy:Wf,ZodLiteral:Hf,ZodEnum:go,ZodNativeEnum:Gf,ZodPromise:Kc,ZodEffects:si,ZodTransformer:si,ZodOptional:Si,ZodNullable:vo,ZodDefault:Kf,ZodCatch:Zf,ZodNaN:mg,BRAND:gte,ZodBranded:DE,ZodPipeline:Hh,ZodReadonly:Xf,custom:rB,Schema:ft,ZodSchema:ft,late:vte,get ZodFirstPartyTypeKind(){return et},coerce:Jte,any:Nte,array:Pte,bigint:bte,boolean:iB,date:wte,discriminatedUnion:Lte,effect:yT,enum:Ute,function:Fte,instanceof:yte,intersection:Mte,lazy:Bte,literal:zte,map:Ite,nan:xte,nativeEnum:qte,never:Cte,null:Ste,nullable:Hte,number:sB,object:Ote,oboolean:Yte,onumber:Xte,optional:Wte,ostring:Zte,pipeline:Kte,preprocess:Gte,promise:Vte,record:Dte,set:$te,strictObject:Ate,string:nB,symbol:_te,transformer:yT,tuple:Rte,undefined:jte,union:Tte,unknown:Ete,void:kte,NEVER:Qte,ZodIssueCode:Se,quotelessJson:Hee,ZodError:ts});const xT=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Be(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},aB=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?xT(n.ref,r,t):n.refs&&n.refs.forEach(s=>xT(s,r,t))}},ere=(t,e)=>{e.shouldUseNativeValidation&&aB(t,e);const r={};for(const n in t){const s=Be(e.fields,n),i=Object.assign(t[n]||{},{ref:s&&s.ref});if(tre(e.names||Object.keys(t),n)){const a=Object.assign({},Be(r,n));It(a,"root",i),It(r,n,a)}else It(r,n,i)}return r},tre=(t,e)=>t.some(r=>r.startsWith(e+"."));var rre=function(t,e){for(var r={};t.length;){var n=t[0],s=n.code,i=n.message,a=n.path.join(".");if(!r[a])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[a]={message:l.message,type:l.code}}else r[a]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(f){return f.errors.forEach(function(p){return t.push(p)})}),e){var c=r[a].types,d=c&&c[n.code];r[a]=qF(a,e,r,s,d?[].concat(d,n.message):n.message)}t.shift()}return r},nre=function(t,e,r){return r===void 0&&(r={}),function(n,s,i){try{return Promise.resolve(function(a,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(d){return i.shouldUseNativeValidation&&aB({},i),{errors:{},values:r.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(a){if(function(l){return Array.isArray(l?.errors)}(a))return{values:{},errors:ere(rre(a.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw a}))}catch(a){return Promise.reject(a)}}};const Qe=z.forwardRef(({className:t,type:e,error:r,leftIcon:n,rightIcon:s,...i},a)=>o.jsxs("div",{className:"relative",children:[n&&o.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:n}),o.jsx("input",{type:e,className:No("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",r&&"border-error-500 focus-visible:ring-error-500",n&&"pl-10",s&&"pr-10",t),ref:a,...i}),s&&o.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:s}),r&&o.jsx("p",{className:"mt-1 text-sm text-error-500",children:r})]}));Qe.displayName="Input";const sre=eb.object({email:eb.string().email("Email invalide"),password:eb.string().min(6,"Le mot de passe doit contenir au moins 6 caractères")}),ire=()=>{const{login:t,clearError:e}=H3(),r=WN(),n=WG(),[s,i]=w.useState(!1),{register:a,handleSubmit:l,formState:{errors:c}}=Wee({resolver:nre(sre),defaultValues:{email:"",password:""}}),d=async f=>{e(),i(!1),await t(f.email,f.password),n&&i(!0)};return o.jsx("form",{onSubmit:l(d),children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),o.jsx("div",{className:"mt-1",children:o.jsx(Qe,{id:"email",type:"email",autoComplete:"email",leftIcon:o.jsx(df,{className:"h-4 w-4"}),error:c.email?.message,...a("email")})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsx(Qe,{id:"password",type:"password",autoComplete:"current-password",leftIcon:o.jsx(Wa,{className:"h-4 w-4"}),error:c.password?.message,...a("password")})})]}),n&&s&&o.jsxs(Ae.div,{className:"bg-error-50 border border-error-200 text-error-700 px-4 py-3 rounded-md flex items-start gap-2",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[o.jsx(ss,{className:"h-5 w-5 text-error-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Erreur de connexion"}),o.jsx("p",{className:"text-sm",children:n})]})]}),o.jsx("div",{children:o.jsx(ve,{type:"submit",className:"w-full",isLoading:r,children:"Se connecter"})})]})})},are=({isOpen:t,lateStop:e,driverRoute:r,optimalInsertion:n,newStopsCount:s,estimatedImpact:i,isProcessing:a=!1,onConfirm:l,onCancel:c})=>{const[d,f]=w.useState(n.position),[p,m]=w.useState(!1);w.useEffect(()=>{t&&f(n.position)},[t,n.position]);const g=async()=>{m(!0);try{await l(d)}finally{m(!1)}},y=()=>{d>0&&f(d-1)},b=()=>{f(d+1)},x=()=>{const O=r.stops.sort((R,M)=>R.stop_order-M.stop_order),L=d>0?O.find(R=>R.stop_order===d-1):null,A=O.find(R=>R.stop_order>=d);return{beforeStop:L,afterStop:A}},j=O=>O.stop_type==="client"?O.client_name||O.location.formatted_address.split(",")[0]:O.stop_type.includes("lab")?O.laboratory_name||"Laboratoire":O.stop_type.includes("depot")?"Dépôt":O.location.formatted_address.split(",")[0],S=()=>e.has_pickup&&e.has_delivery?"Récupération + Livraison":e.has_pickup?"Récupération":e.has_delivery?"Livraison":"Action inconnue",{beforeStop:C,afterStop:E}=x(),N=a||p,P=r.stops.length;return o.jsx(Rt,{children:t&&o.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:O=>O.target===O.currentTarget&&!N&&c(),children:o.jsx(Ae.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:O=>O.stopPropagation(),children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:o.jsx(ut,{className:"h-6 w-6 text-orange-600"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"📍 Placement du Late Stop"}),o.jsxs("p",{className:"text-gray-600",children:["Tournée de ",r.stops[0]?.location.formatted_address?.split(",")[1]?.trim()||"Chauffeur"]})]})]}),!N&&o.jsx(ve,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0",children:o.jsx(tr,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(If,{className:"h-5 w-5 text-blue-600 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-blue-900 text-lg",children:e.client?.name}),o.jsx("p",{className:"text-blue-700 font-medium mt-1",children:S()}),o.jsxs("p",{className:"text-blue-600 text-sm mt-2 flex items-center gap-1",children:[o.jsx(it,{className:"h-4 w-4"}),e.client?.location?.formatted_address]}),o.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:["Laboratoire: ",e.lab_tour?.laboratory?.name]})]})]})}),o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ki,{className:"h-5 w-5 text-green-600 mt-0.5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"🎯 Position optimale calculée (GPS)"}),o.jsx("div",{className:"text-sm text-green-800",children:n.beforeStop&&n.afterStop?o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{children:"Entre"}),o.jsx("span",{className:"bg-green-100 px-2 py-1 rounded font-medium",children:j(n.beforeStop)}),o.jsx(W1,{className:"h-4 w-4"}),o.jsx("span",{className:"bg-green-100 px-2 py-1 rounded font-medium",children:j(n.afterStop)})]}):n.beforeStop?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"Après"}),o.jsx("span",{className:"bg-green-100 px-2 py-1 rounded font-medium",children:j(n.beforeStop)})]}):n.afterStop?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"Avant"}),o.jsx("span",{className:"bg-green-100 px-2 py-1 rounded font-medium",children:j(n.afterStop)})]}):o.jsx("span",{children:"En début de tournée"})}),o.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-green-600",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(ki,{className:"h-3 w-3"}),"+",i.distanceAdded.toFixed(1)," km"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(bt,{className:"h-3 w-3"}),"+",i.timeAdded," min"]})]})]})]})}),o.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:"⚡ Ajuster la position"}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Position ",d+1," sur ",P+s]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-4",children:[o.jsxs(ve,{onClick:y,disabled:d===0||N,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(CE,{className:"h-4 w-4"}),"Vers le haut"]}),o.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg px-6 py-3 text-center min-w-[120px]",children:[o.jsxs("div",{className:"font-bold text-lg text-gray-900",children:["Position ",d+1]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s>1?`${s} stops`:"1 stop"})]}),o.jsxs(ve,{onClick:b,disabled:N,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(Es,{className:"h-4 w-4"}),"Vers le bas"]})]}),(C||E)&&o.jsx("div",{className:"mt-4 text-sm text-gray-600 text-center",children:C&&E?o.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[o.jsx("span",{children:"Entre"}),o.jsx("span",{className:"bg-gray-200 px-2 py-1 rounded text-gray-800",children:j(C)}),o.jsx(W1,{className:"h-4 w-4"}),o.jsx("span",{className:"bg-gray-200 px-2 py-1 rounded text-gray-800",children:j(E)})]}):C?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("span",{children:"Après"}),o.jsx("span",{className:"bg-gray-200 px-2 py-1 rounded text-gray-800",children:j(C)})]}):E?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("span",{children:"Avant"}),o.jsx("span",{className:"bg-gray-200 px-2 py-1 rounded text-gray-800",children:j(E)})]}):o.jsx("span",{children:"En début de tournée"})})]}),o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ss,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"📊 Impact sur la tournée"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{className:"text-yellow-800",children:[o.jsx("div",{className:"font-medium",children:"Distance ajoutée"}),o.jsxs("div",{className:"text-lg",children:["+",i.distanceAdded.toFixed(1)," km"]})]}),o.jsxs("div",{className:"text-yellow-800",children:[o.jsx("div",{className:"font-medium",children:"Temps ajouté"}),o.jsxs("div",{className:"text-lg",children:["+",i.timeAdded," min"]})]})]}),o.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"* Estimations basées sur les distances GPS et vitesse moyenne urbaine"})]})]})}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsxs(ve,{onClick:c,variant:"outline",disabled:N,className:"flex items-center gap-2",children:[o.jsx(tr,{className:"h-4 w-4"}),"Annuler"]}),o.jsx(ve,{onClick:g,disabled:N,className:"bg-green-600 hover:bg-green-700 flex items-center gap-2",children:N?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Insertion en cours..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Er,{className:"h-4 w-4"}),"Confirmer l'insertion"]})})]})]})})})})},ore=()=>{const t=ht(L=>L.problems.lateStops),e=ht(L=>L.problems.isLoading),r=ht(L=>L.problems.error),n=ht(L=>L.problems.isProcessingOptimization),s=ht(L=>L.problems.currentOptimization),i=ht(L=>L.problems.pendingProblemsCount),a=ht(L=>L.problems.fetchLateStops);ht(L=>L.problems.approveLateStop);const l=ht(L=>L.problems.rejectLateStop),c=ht(L=>L.problems.prepareOptimization),d=ht(L=>L.problems.applyOptimization),f=ht(L=>L.problems.clearCurrentOptimization),p=ht(L=>L.problems.subscribeToRealtime),m=ht(L=>L.problems.unsubscribeFromRealtime),g=t.filter(L=>L.status==="pending"),y=t.filter(L=>L.status!=="pending"),b=w.useCallback(async L=>{try{return await c(L)}catch(A){return console.error("Erreur lors de la préparation de l'optimisation:",A),null}},[c]),x=w.useCallback(async L=>{try{return await d(L)}catch(A){return console.error("Erreur lors de l'application de l'optimisation:",A),!1}},[d]),j=w.useCallback(async(L,A)=>{if(!A?.trim())return!1;try{return await l(L,A)}catch(R){return console.error("Erreur lors du rejet:",R),!1}},[l]),S=w.useCallback(()=>{f()},[f]),C=w.useCallback(L=>L.has_pickup&&L.has_delivery?"Livraison + Récupération":L.has_pickup?"Récupération":L.has_delivery?"Livraison":"Action inconnue",[]),E=w.useCallback(L=>{switch(L){case"pending":return"bg-warning-50 text-warning-700 border-warning-200";case"approved":return"bg-success-50 text-success-700 border-success-200";case"rejected":return"bg-error-50 text-error-700 border-error-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},[]),N=w.useCallback(L=>{switch(L){case"pending":return"En attente";case"approved":return"Approuvé";case"rejected":return"Rejeté";default:return L}},[]),P=w.useCallback(L=>new Date(L).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),[]),O=w.useCallback(L=>new Date(L).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),[]);return{lateStops:t,isLoading:e,error:r,isProcessingOptimization:n,currentOptimization:s,pendingProblemsCount:i,pendingLateStops:g,reviewedLateStops:y,fetchLateStops:a,handlePrepareOptimization:b,handleApplyOptimization:x,handleReject:j,handleCancelOptimization:S,subscribeToRealtime:p,unsubscribeFromRealtime:m,getActionText:C,getStatusColor:E,getStatusText:N,formatTime:P,formatDate:O}},lre=()=>{const[t,e]=w.useState({isOpen:!1,data:null}),{prepareOptimization:r,applyOptimization:n,isProcessingOptimization:s}=ht(d=>d.problems);return{insertionModal:t,isProcessing:s,handleLateStopApproval:async d=>{try{console.log(`🎯 Début approbation late stop ${d}`);const f=await r(d);e({isOpen:!0,data:f}),console.log("✅ Modal de confirmation ouverte")}catch(f){console.error("❌ Erreur lors de la préparation:",f);let p="Erreur inconnue",m="";f instanceof Error&&(p=f.message,f.message.includes("Aucune tournée active")?m="Vérifiez qu'une tournée est bien générée et en cours pour ce chauffeur.":f.message.includes("Late stop")&&f.message.includes("non trouvé")?m="Cette demande a peut-être été supprimée ou déjà traitée.":f.message.includes("Aucun pickup source")&&(m="Le laboratoire n'a pas de pickup dans cette tournée. Vérifiez la configuration."));const g=m?`${p}

${m}`:p;Ht.error(g,{duration:5e3,style:{maxWidth:"500px"}})}},handleConfirmInsertion:async d=>{if(!t.data){Ht.error("Aucune donnée de confirmation disponible");return}try{if(console.log(`🚀 Confirmation insertion position ${d}`),await n(t.data,d,void 0)){e({isOpen:!1,data:null});const p=t.data.estimatedImpact.stopsAdded,m=t.data.clientName;Ht.success(`🎉 Late stop intégré avec succès !

• Client: ${m}
• ${p} stop${p>1?"s":""} ajouté${p>1?"s":""} à la position ${d+1}
• Impact: +${t.data.estimatedImpact.distanceAdded.toFixed(1)}km, +${t.data.estimatedImpact.timeAdded}min`,{duration:6e3,style:{maxWidth:"500px"}}),console.log("✅ Late stop intégré avec succès !")}else Ht.error("Échec de l'intégration du late stop")}catch(f){console.error("❌ Erreur lors de l'insertion finale:",f);const p=f instanceof Error?f.message:"Erreur inconnue";Ht.error(`Erreur lors de l'insertion:
${p}`,{duration:5e3})}},handleCancelInsertion:()=>{console.log("❌ Annulation de l'insertion"),e({isOpen:!1,data:null})},handleDirectProcessing:async d=>{try{console.log(`⚡ Traitement direct late stop ${d}`);const f=await r(d),p=await n(f);return p&&Ht.success(`✅ Late stop traité automatiquement !

Client: ${f.clientName} intégré à la position optimale.`,{duration:4e3}),p}catch(f){throw console.error("❌ Erreur traitement direct:",f),f}}}};class cre{API_BASE_URL="https://api.provence-courses.fr/api/v1";async determineLateStopLogic(e){try{const{data:r,error:n}=await Y.from("laboratory_clients").select(`
          *,
          location:locations(*)
        `).eq("id",e.client_id).single();if(n)throw n;const s=r.is_return_depot?"depot_dropoff":"lab_dropoff";let i=null;if(s==="lab_dropoff"){const{data:a,error:l}=await Y.from("laboratories").select("location:locations(*)").eq("id",r.laboratory_id).single();if(!l&&a.location){const c=a.location;i={id:c.id,latitude:c.latitude,longitude:c.longitude,formatted_address:c.formatted_address,delivery_instructions:c.delivery_instructions}}}else{const{data:a,error:l}=await Y.from("depot").select("location:locations(*)").limit(1).single();if(!l&&a.location){const c=a.location;i={id:c.id,latitude:c.latitude,longitude:c.longitude,formatted_address:c.formatted_address,delivery_instructions:c.delivery_instructions}}}return{client:r,dropoffType:s,dropoffLocation:i,pickupRequiresDropoff:!0}}catch(r){throw console.error("Erreur lors de la détermination de la logique late stop:",r),r}}async checkExistingDropoffInRoute(e,r,n){try{const{data:s,error:i}=await Y.from("driver_route_stops").select("*").eq("route_id",e).eq("stop_type",r).eq("location_id",n);if(i)throw i;return s.length>0}catch(s){return console.error("Erreur lors de la vérification du dropoff existant:",s),!1}}async getCurrentRouteStops(e){try{const{data:r,error:n}=await Y.from("driver_route_stops").select(`
          *,
          location:locations(*)
        `).eq("route_id",e).order("stop_order");if(n)throw n;return r.map(s=>({id:s.id,location_id:s.location_id,stop_order:s.stop_order,stop_type:s.stop_type,location:{id:s.location.id,latitude:s.location.latitude,longitude:s.location.longitude,formatted_address:s.location.formatted_address,delivery_instructions:s.location.delivery_instructions}}))}catch(r){throw console.error("Erreur lors de la récupération des arrêts de la tournée:",r),r}}async getDriverRouteForLateStop(e){try{const{data:r,error:n}=await Y.from("laboratory_clients").select("driver_id").eq("id",e.client_id).single();if(n)throw n;const{data:s,error:i}=await Y.from("driver_routes").select(`
          *,
          driver:drivers(*)
        `).eq("driver_id",r.driver_id).eq("date",e.lab_tour?.date).eq("status","validated").single();if(i)throw i;return s}catch(r){throw console.error("Erreur lors de la récupération de la tournée driver:",r),r}}async processLateStopRequest(e){try{console.log("🎯 Traitement Late Stop Request via nouvelle API"),console.log(`📦 Late Stop Request ID: ${e}`);const r=await fetch(`${this.API_BASE_URL}/tours/late-stops/${e}/process`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":"B99pb355iyUKtEwvAFLFl/y4Aosym/asUDX1Dy4Efps="}});if(!r.ok){const s=await r.json();throw console.error("❌ Erreur API détaillée:",s),s.detail?typeof s.detail=="string"?new Error(`API Error: ${s.detail}`):s.detail.error_code&&s.detail.message?new Error(`${s.detail.error_code}: ${s.detail.message}`):new Error(`API Error: ${JSON.stringify(s.detail)}`):s.status==="error"?new Error(`${s.error_code}: ${s.message}`):new Error(`API Error: ${s.message||r.statusText}`)}const n=await r.json();return console.log("📥 Réponse API Late Stop:",JSON.stringify(n,null,2)),n}catch(r){throw console.error("Erreur API Late Stop:",r),r}}async testLateStopProcessing(e){try{console.log("🧪 Test Late Stop Processing");const n=await(await fetch(`${this.API_BASE_URL}/tours/test-late-stop-processing`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":"B99pb355iyUKtEwvAFLFl/y4Aosym/asUDX1Dy4Efps="},body:JSON.stringify({late_stop_id:e,simulate_placement:!0})})).json();return console.log("📥 Réponse Test API:",JSON.stringify(n,null,2)),n}catch(r){throw console.error("Erreur Test API:",r),r}}async getStopName(e){try{if(e.stop_type==="lab_pickup"||e.stop_type==="lab_dropoff"){const{data:r}=await Y.from("laboratories").select("name").eq("location_id",e.location_id).single();return r?.name||"Laboratoire"}else if(e.stop_type==="depot_pickup"||e.stop_type==="depot_dropoff"){const{data:r}=await Y.from("depot").select("name").eq("location_id",e.location_id).single();return r?.name||"Dépôt"}else if(e.stop_type==="client_pickup"||e.stop_type==="client_delivery"||e.stop_type==="client"){const{data:r}=await Y.from("laboratory_clients").select("name").eq("location_id",e.location_id).single();return r?.name||"Client"}else return console.warn("Type d'arrêt inconnu:",e.stop_type),"Arrêt inconnu"}catch(r){return console.error("Erreur lors de la récupération du nom de l'arrêt:",r),"Arrêt"}}async processLateStop(e){try{console.log("🚀 Début du traitement du late stop:",e);const r=await this.processLateStopRequest(e);if(r.status!=="success")throw new Error(r.message||"Erreur lors du traitement");const{error:n}=await Y.from("lab_tour_late_stops").update({status:"approved",reviewed_at:new Date().toISOString(),reviewed_by:"admin"}).eq("id",e);return n&&console.error("Erreur lors de la mise à jour du statut:",n),console.log("✅ Late stop traité avec succès"),r}catch(r){throw console.error("❌ Erreur lors du traitement:",r),r}}async prepareConfirmationData(e,r,n,s,i){const a=c=>c.has_pickup&&c.has_delivery?"Livraison + Récupération":c.has_pickup?"Récupération":c.has_delivery?"Livraison":"Action inconnue",l=async(c,d)=>{console.log(`🔍 Insertion à la position ${c} (stop_order basé sur 0)`);const f=d.sort((b,x)=>b.stop_order-x.stop_order),p=f.find(b=>b.stop_order===c-1),m=f.find(b=>b.stop_order===c);if(console.log(`🔍 Cherche stop_order ${c-1} (précédent):`,p?`TROUVÉ - ${p.id}`:"NON TROUVÉ"),console.log(`🔍 Cherche stop_order ${c} (suivant):`,m?`TROUVÉ - ${m.id}`:"NON TROUVÉ"),!p&&!m)return`à la position ${c}`;if(!p)return"au début de la tournée";if(!m)return"à la fin de la tournée";let g=null,y=null;return p&&(g=await this.getStopName(p),console.log("🔍 Arrêt précédent:",{id:p.id,stop_order:p.stop_order,stop_type:p.stop_type,location_id:p.location_id,name:g})),m&&(y=await this.getStopName(m),console.log("🔍 Arrêt suivant:",{id:m.id,stop_order:m.stop_order,stop_type:m.stop_type,location_id:m.location_id,name:y})),g&&y?`entre ${g} et ${y}`:g&&!y?`après ${g}`:!g&&y?`avant ${y}`:`à la position ${c}`};return{lateStopId:e.id,clientName:e.client?.name||"Client inconnu",clientAddress:e.client?.location?.formatted_address||"Adresse non disponible",actionType:a(e),originalDistance:r.original_stats.total_distance_km,newDistance:r.new_stats.total_distance_km,distanceAdded:r.insertion_info.distance_added_km,originalTime:r.original_stats.estimated_duration_minutes,newTime:r.new_stats.estimated_duration_minutes,timeAdded:r.insertion_info.time_added_minutes,stopsAdded:r.insertion_info.total_stops_added,insertionInfo:{pickupInfo:r.new_stops_created?.pickup_stop?{insertedAt:r.insertion_info.pickup_inserted_at,estimatedTime:r.new_stops_created.pickup_stop.estimated_arrival_time,insertedBetween:await l(r.insertion_info.pickup_inserted_at,i)}:void 0,deliveryInfo:r.new_stops_created?.delivery_stop?{insertedAt:r.insertion_info.delivery_inserted_at,estimatedTime:r.new_stops_created.delivery_stop.estimated_arrival_time,insertedBetween:await l(r.insertion_info.delivery_inserted_at,i)}:void 0,dropoffInfo:r.new_stops_created?.dropoff_stop?{insertedAt:r.insertion_info.dropoff_inserted_at,estimatedTime:r.new_stops_created.dropoff_stop.estimated_arrival_time,insertedBetween:await l(r.insertion_info.dropoff_inserted_at,i),type:s.dropoffType==="lab_dropoff"?"laboratoire":"dépôt"}:void 0},apiResult:r,driverRoute:n,lateStopLogic:s}}async applyOptimization(e){const{apiResult:r,driverRoute:n,lateStopLogic:s}=e;try{console.log("🎯 Application de l'optimisation...");const i=[],a=[];for(const p of r.optimized_route)if(p.is_late_stop){let m,g=null;p.stop_type==="client_pickup"?(m="client",g="pickup"):p.stop_type==="client_delivery"?(m="client",g="delivery"):p.stop_type==="lab_dropoff"?(m="lab_dropoff",g=null):(m=p.stop_type,g=p.late_stop_type==="pickup"?"pickup":p.late_stop_type==="delivery"?"delivery":null),a.push({route_id:n.id,location_id:p.location_id,stop_order:p.stop_order,stop_type:m,client_actions:g,estimated_arrival_time:p.estimated_arrival_time,estimated_departure_time:null,distance_from_previous:p.distance_from_previous||null,duration_from_previous:p.duration_from_previous||null,completed:!1,is_late_stop:!0})}else i.push({stop_id:p.stop_id,new_position:p.stop_order,estimated_arrival_time:p.estimated_arrival_time,duration_from_previous:p.duration_from_previous||null,distance_from_previous:p.distance_from_previous||null});const l=i.map(p=>Y.from("driver_route_stops").update({stop_order:p.new_position,estimated_arrival_time:p.estimated_arrival_time,duration_from_previous:p.duration_from_previous,distance_from_previous:p.distance_from_previous}).eq("id",p.stop_id)),d=(await Promise.all(l)).filter(p=>p.error);if(d.length>0)throw new Error(`${d.length} erreur(s) lors de la mise à jour des stops existants`);let f=[];if(a.length>0){const{data:p,error:m}=await Y.from("driver_route_stops").insert(a).select();if(m)throw new Error(`Erreur insertion late stops: ${m.message}`);f=p||[]}f.length>0&&await this.createLateStopShipment(e,s,f,n.id),await this.updateRouteStats(n.id,r.new_stats),console.log("✅ Optimisation appliquée avec succès")}catch(i){throw console.error("❌ Erreur lors de l'application de l'optimisation:",i),i}}async createLateStopShipment(e,r,n,s){const i=r.client.name||"Client",a={has_pickup:e.actionType.includes("Récupération"),has_delivery:e.actionType.includes("Livraison")},l=a.has_pickup&&a.has_delivery?"both":a.has_pickup?"client_pickup":"client_delivery",c={laboratory_id:r.client.laboratory_id,laboratory_client_id:r.client.id,route_id:s,is_late_shipment:!0,unexpected:!1},d=[];l==="both"?(d.push({...c,shipment_ref:`Récupération ${i}`,shipment_type:"client_pickup",pickup_stop_id:n.find(f=>f.client_actions==="pickup")?.id,delivery_stop_id:n.find(f=>f.stop_type==="lab_dropoff"||f.stop_type==="depot_dropoff")?.id,pickup_status:"pending",delivery_status:"pending"}),d.push({...c,shipment_ref:`Livraison ${i}`,shipment_type:"client_delivery",pickup_stop_id:n.find(f=>f.stop_type==="lab_pickup")?.id,delivery_stop_id:n.find(f=>f.client_actions==="delivery")?.id,pickup_status:!0,pickup_date_time:new Date().toISOString(),delivery_status:"pending"})):l==="client_pickup"?d.push({...c,shipment_ref:`Récupération ${i}`,shipment_type:"client_pickup",pickup_stop_id:n.find(f=>f.client_actions==="pickup")?.id,delivery_stop_id:n.find(f=>f.stop_type==="lab_dropoff"||f.stop_type==="depot_dropoff")?.id,pickup_status:"pending",delivery_status:"pending"}):d.push({...c,shipment_ref:`Livraison ${i}`,shipment_type:"client_delivery",pickup_stop_id:n.find(f=>f.stop_type==="lab_pickup")?.id,delivery_stop_id:n.find(f=>f.client_actions==="delivery")?.id,pickup_status:!0,pickup_date_time:new Date().toISOString(),delivery_status:"pending"});for(const f of d){const{error:p}=await Y.from("driver_route_shipments").insert(f);if(p)throw new Error(`Erreur création shipment: ${p.message}`)}}async updateRouteStats(e,r){const n={estimated_duration:r.estimated_duration_minutes,total_distance_km:r.total_distance_km,updated_at:new Date().toISOString()},{error:s}=await Y.from("driver_routes").update(n).eq("id",e);if(s)throw new Error(`Erreur mise à jour route: ${s.message}`)}}const ure=new cre,dre=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState({}),[s,i]=w.useState(null),[a,l]=w.useState({}),{isLoading:c,pendingProblemsCount:d,pendingLateStops:f,reviewedLateStops:p,fetchLateStops:m,handleReject:g,subscribeToRealtime:y,unsubscribeFromRealtime:b,getStatusColor:x,getStatusText:j,formatTime:S,formatDate:C}=ore(),{insertionModal:E,isProcessing:N,handleLateStopApproval:P,handleConfirmInsertion:O,handleCancelInsertion:L}=lre(),A=d>0;w.useEffect(()=>(m(),y(),()=>{b()}),[m,y,b]),w.useEffect(()=>{t&&f.length>0&&l({urgentRequests:!0})},[t,f.length]);const R=()=>{e(!t)},M=async W=>{i(W);try{console.log(`🎯 === DÉBUT APPROBATION FRONT-END ${W} ===`),await P(W)}catch(I){console.error("❌ Erreur lors de l'approbation:",I)}finally{i(null)}},D=async()=>{try{console.log("🧪 Test de l'API de simulation...");const W=await ure.testLateStopProcessing("test-simulation");console.log("✅ Résultat du test:",W);const I=W.workflow_steps?.join(`
• `)||"Aucune étape retournée";alert(`✅ Test API réussi !

Statut: ${W.status}
Message: ${W.message}

Étapes:
• ${I}`)}catch(W){console.error("❌ Erreur test API:",W),alert(`❌ Erreur lors du test API:

${W instanceof Error?W.message:"Erreur inconnue"}`)}},B=async W=>{const I=r[W];if(!I?.trim()){alert("Veuillez saisir une raison de rejet");return}i(W),await g(W,I)&&n(ne=>({...ne,[W]:""})),i(null)},F=W=>{l(I=>({...I,[W]:!I[W]}))},V={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},J={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},G={hidden:{height:0,opacity:0,marginTop:0},visible:{height:"auto",opacity:1,marginTop:24,transition:{duration:.5,ease:"easeOut"}},exit:{height:0,opacity:0,marginTop:0,transition:{duration:.3,ease:"easeIn"}}},q={hidden:{height:0,opacity:0},visible:{height:"auto",opacity:1,transition:{duration:.4,ease:"easeOut"}},exit:{height:0,opacity:0,transition:{duration:.3,ease:"easeIn"}}},U={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.4,ease:"easeOut"}}};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-8 px-4",children:o.jsx(Ae.div,{className:"w-full",variants:V,initial:"hidden",animate:"show",children:o.jsxs(Ae.div,{variants:J,children:[o.jsx("div",{className:`backdrop-blur-sm border-0 shadow-sm rounded-xl p-4 hover:shadow-card-hover transition-all duration-200 cursor-pointer ${A?"bg-error-100/80 ring-1 ring-error-200":"bg-success-100/80 ring-1 ring-success-200"}`,onClick:R,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 ${A?"bg-error-200":"bg-success-200"} rounded-lg`,children:o.jsx(ss,{className:`h-5 w-5 ${A?"text-error-700":"text-success-700"}`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:`text-lg font-bold ${A?"text-error-700":"text-success-700"}`,children:c?"...":d}),o.jsx("p",{className:"text-sm text-gray-700 truncate",children:A?"Problèmes à traiter":"Aucun problème"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[A&&o.jsx("span",{className:"bg-error-200 text-error-700 px-2 py-1 rounded-full text-xs font-semibold",children:d}),o.jsx(Ae.div,{animate:{rotate:t?180:0},transition:{duration:.3},className:A?"text-error-600":"text-success-600",children:o.jsx(Es,{className:"h-5 w-5"})})]})]})}),o.jsx(Rt,{children:t&&o.jsx(Ae.div,{variants:G,initial:"hidden",animate:"visible",exit:"exit",className:"overflow-hidden",children:o.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg p-4",children:c?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-red-500 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600 text-sm",children:"Chargement..."})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"mb-4",children:o.jsx(ve,{size:"sm",onClick:D,className:"bg-blue-600 hover:bg-blue-700 text-white text-xs px-4 py-2 rounded-lg",children:"🧪 Tester l'API Late Stops"})}),o.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[o.jsx(Ae.div,{className:`p-3 cursor-pointer transition-all duration-200 ${f.length>0?"bg-gradient-to-r from-red-50 to-orange-50 hover:from-red-100 hover:to-orange-100":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>F("urgentRequests"),whileHover:{scale:1.01},whileTap:{scale:.99},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${f.length>0?"bg-gradient-to-br from-red-500 to-red-600":"bg-gray-400"}`,children:o.jsx(sr,{className:"h-4 w-4 text-white"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-base font-bold text-gray-900 truncate",children:"Demandes urgentes"}),o.jsx("p",{className:"text-xs text-gray-600 truncate",children:f.length>0?`${f.length} en attente`:"Aucune demande"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[f.length>0&&o.jsx("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs font-semibold animate-pulse",children:f.length}),o.jsx(Ae.div,{animate:{rotate:a.urgentRequests?180:0},transition:{duration:.3},children:o.jsx(Es,{className:"h-4 w-4 text-gray-500"})})]})]})}),o.jsx(Rt,{children:a.urgentRequests&&o.jsx(Ae.div,{variants:q,initial:"hidden",animate:"visible",exit:"exit",className:"border-t border-gray-200 bg-white",children:o.jsx("div",{className:"p-3",children:f.length>0?o.jsx("div",{className:"space-y-3",children:f.map((W,I)=>o.jsxs(Ae.div,{variants:U,initial:"hidden",animate:"visible",transition:{delay:I*.1},className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-3 shadow-sm",children:[o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg flex-shrink-0",children:o.jsx(ut,{className:"h-4 w-4 text-white"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h4",{className:"text-sm font-bold text-gray-900 truncate",children:W.client?.name||"Client inconnu"}),o.jsx("div",{className:"flex items-center gap-2 mt-1",children:o.jsxs("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[o.jsx(bt,{className:"h-3 w-3"}),S(W.requested_at)]})})]})]}),o.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-semibold border border-orange-200 flex-shrink-0",children:"Urgent"})]}),o.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[W.has_pickup&&o.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-semibold border border-purple-200 flex items-center gap-1",children:[o.jsx(ut,{className:"h-3 w-3"}),"Récupération"]}),W.has_delivery&&o.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-semibold border border-green-200 flex items-center gap-1",children:[o.jsx(ut,{className:"h-3 w-3"}),"Livraison"]})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 mb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"}),o.jsx("span",{className:"text-xs font-semibold text-blue-800 truncate",children:W.lab_tour?.laboratory?.name||"Laboratoire"}),o.jsxs("span",{className:"text-xs text-blue-600",children:["• ",C(W.lab_tour?.date||"")]})]})})]}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsx("div",{className:"bg-white/80 border border-orange-200 rounded-lg p-2",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(it,{className:"h-3 w-3 text-orange-600 mt-1 flex-shrink-0"}),o.jsx("p",{className:"text-xs text-gray-700 line-clamp-2",children:W.client?.location?.formatted_address||"Adresse non disponible"})]})}),W.urgent_instructions&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(sr,{className:"h-3 w-3 text-red-600 mt-1 flex-shrink-0"}),o.jsx("p",{className:"text-xs text-red-700 line-clamp-2",children:W.urgent_instructions})]})})]}),o.jsxs("div",{className:"space-y-2 pt-2 border-t border-orange-200",children:[o.jsxs(ve,{size:"sm",onClick:()=>M(W.id),disabled:s===W.id||N,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg text-xs",children:[o.jsx(Er,{className:"h-3 w-3 mr-1"}),s===W.id?"Traitement...":"🎯 Traiter côté front-end"]}),o.jsx(Qe,{placeholder:"Motif du rejet...",value:r[W.id]||"",onChange:H=>n(ne=>({...ne,[W.id]:H.target.value})),className:"w-full rounded-lg border-gray-300 bg-white/80 text-xs h-8"}),o.jsxs(ve,{size:"sm",variant:"outline",onClick:()=>B(W.id),disabled:s===W.id||!r[W.id]?.trim(),className:"w-full text-red-600 border-red-300 hover:bg-red-50 rounded-lg text-xs",children:[o.jsx(es,{className:"h-3 w-3 mr-1"}),"Rejeter"]})]})]},W.id))}):o.jsxs("div",{className:"text-center py-6",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg w-8 h-8 mx-auto mb-2",children:o.jsx(Er,{className:"h-4 w-4 text-green-600"})}),o.jsx("p",{className:"text-xs text-green-600",children:"Toutes les demandes traitées !"})]})})})})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[o.jsx(Ae.div,{className:"p-3 cursor-pointer bg-gray-50 hover:bg-gray-100 transition-all duration-200",onClick:()=>F("history"),whileHover:{scale:1.01},whileTap:{scale:.99},children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-gradient-to-br from-gray-500 to-gray-600 rounded-lg",children:o.jsx(bt,{className:"h-4 w-4 text-white"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-base font-bold text-gray-900 truncate",children:"Historique"}),o.jsx("p",{className:"text-xs text-gray-600 truncate",children:p.length>0?`${p.length} traitée${p.length>1?"s":""}`:"Aucune"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[p.length>0&&o.jsx("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs font-semibold",children:p.length}),o.jsx(Ae.div,{animate:{rotate:a.history?180:0},transition:{duration:.3},children:o.jsx(Es,{className:"h-4 w-4 text-gray-500"})})]})]})}),o.jsx(Rt,{children:a.history&&o.jsx(Ae.div,{variants:q,initial:"hidden",animate:"visible",exit:"exit",className:"border-t border-gray-200 bg-white",children:o.jsx("div",{className:"p-3",children:p.length>0?o.jsx("div",{className:"space-y-2",children:p.map((W,I)=>o.jsx(Ae.div,{variants:U,initial:"hidden",animate:"visible",transition:{delay:I*.05},className:"bg-gray-50 border border-gray-200 rounded-lg p-2 hover:bg-gray-100 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:W.client?.name||"Client inconnu"}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[W.has_pickup&&o.jsx("span",{className:"bg-purple-50 text-purple-600 px-1 py-0.5 rounded text-xs",children:"Récup."}),W.has_delivery&&o.jsx("span",{className:"bg-green-50 text-green-600 px-1 py-0.5 rounded text-xs",children:"Livr."}),o.jsx("span",{children:"•"}),o.jsx("span",{children:S(W.requested_at)})]}),W.rejection_reason&&o.jsxs("div",{className:"text-red-600 mt-1 bg-red-50 p-1 rounded text-xs",children:[o.jsx("strong",{children:"Rejeté:"})," ",W.rejection_reason]})]})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold border ${x(W.status)} flex-shrink-0`,children:j(W.status)})]})},W.id))}):o.jsxs("div",{className:"text-center py-6",children:[o.jsx("div",{className:"p-2 bg-gray-100 rounded-lg w-8 h-8 mx-auto mb-2",children:o.jsx(bt,{className:"h-4 w-4 text-gray-500"})}),o.jsx("p",{className:"text-xs text-gray-500",children:"Aucun historique"})]})})})})]}),f.length===0&&p.length===0&&o.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-green-100 to-green-200 rounded-xl w-12 h-12 mx-auto mb-3",children:o.jsx(Er,{className:"h-6 w-6 text-green-600"})}),o.jsx("h3",{className:"text-base font-bold text-green-800 mb-1",children:"Journée parfaite ! 🎉"}),o.jsx("p",{className:"text-green-600 text-xs",children:"Aucun problème à signaler."})]})]})})})})]})})}),E.isOpen&&E.data&&o.jsx(are,{isOpen:E.isOpen,lateStop:f.find(W=>W.id===E.data?.lateStopId),driverRoute:E.data.driverRoute,optimalInsertion:E.data.optimalInsertion,newStopsCount:E.data.estimatedImpact.stopsAdded,estimatedImpact:{distanceAdded:E.data.estimatedImpact.distanceAdded,timeAdded:E.data.estimatedImpact.timeAdded},isProcessing:N,onConfirm:O,onCancel:L})]})},fre=()=>{const t=Rv(),{fetchAllTours:e,getTodayTotalDeliveries:r,getTodayTotalPickups:n,getTodayToursCount:s,getPendingValidationsCount:i}=VG(),{getDriversRoutesValidationCount:a,getInProgressRoutesCount:l}=Fh(),c=rK(),[d,f]=z.useState({total:0,withRoutes:0,pending:0,isLoading:!0}),[p,m]=z.useState({inProgress:0,isLoading:!0}),g=w.useRef([]);w.useEffect(()=>{(async()=>{await e();try{const M=await a();f({total:M.totalDrivers,withRoutes:M.totalDrivers-M.driversWithoutRoutes,pending:M.driversWithoutRoutes,isLoading:!1})}catch(M){console.error("Erreur lors du chargement des stats livreurs:",M),f(D=>({...D,isLoading:!1}))}try{const M=await l();m({inProgress:M,isLoading:!1})}catch(M){console.error("Erreur lors du chargement des stats monitoring:",M),m(D=>({...D,isLoading:!1}))}})();const L=async()=>{try{await e();const M=await a();f({total:M.totalDrivers,withRoutes:M.totalDrivers-M.driversWithoutRoutes,pending:M.driversWithoutRoutes,isLoading:!1});const D=await l();m({inProgress:D,isLoading:!1})}catch(M){console.error("Erreur lors du rafraîchissement des statistiques:",M)}},A=()=>{console.log("🔄 Configuration des abonnements temps réel pour le dashboard");const M=Y.channel("dashboard-lab-tours-changes").on("postgres_changes",{event:"*",schema:"public",table:"lab_tours"},async V=>{console.log("🔄 Changement détecté sur lab_tours (dashboard):",V.eventType),await L()}).on("postgres_changes",{event:"*",schema:"public",table:"lab_tour_stops"},async V=>{console.log("🔄 Changement détecté sur lab_tour_stops (dashboard):",V.eventType),await L()}).subscribe(),D=Y.channel("dashboard-driver-routes-changes").on("postgres_changes",{event:"*",schema:"public",table:"driver_routes"},async V=>{console.log("🔄 Changement détecté sur driver_routes (dashboard):",V.eventType),await L()}).subscribe(),B=Y.channel("dashboard-drivers-changes").on("postgres_changes",{event:"*",schema:"public",table:"drivers"},async V=>{console.log("🔄 Changement détecté sur drivers (dashboard):",V.eventType),await L()}).subscribe(),F=Y.channel("dashboard-problems-changes").on("postgres_changes",{event:"*",schema:"public",table:"lab_tour_late_stops"},async V=>{console.log("🔄 Changement détecté sur lab_tour_late_stops (dashboard):",V.eventType),await L()}).subscribe();g.current=[M,D,B,F]};return(()=>{g.current.forEach(M=>{Y.removeChannel(M)}),g.current=[],A()})(),()=>{console.log("🧹 Nettoyage des abonnements temps réel du dashboard"),g.current.forEach(M=>{Y.removeChannel(M)}),g.current=[]}},[e,a,l]);const y=r(),b=n(),x=s(),j=i(),S=j>0,C=d.pending>0,E=new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},P={hidden:{y:20,opacity:0},show:{y:0,opacity:1}};return o.jsx("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-50 via-slate-50 to-blue-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto py-8",children:[o.jsx("div",{className:"mb-8 px-4",children:o.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tableau de bord"}),o.jsx("p",{className:"text-gray-600",children:E})]})})}),o.jsx(dre,{}),o.jsxs("div",{className:"mb-8 px-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Activité du jour"}),o.jsxs(Ae.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",variants:N,initial:"hidden",animate:"show",children:[o.jsx(Ae.div,{variants:P,children:o.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-0 shadow-sm rounded-2xl p-6 hover:shadow-card-hover transition-shadow duration-200",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-primary-100 rounded-xl",children:o.jsx(ut,{className:"h-6 w-6 text-primary-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600",children:c?"...":y}),o.jsx("p",{className:"text-sm text-gray-600",children:"Livraisons"}),o.jsxs("p",{className:"text-xs text-gray-500",children:[x," tournée",x>1?"s":""]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-secondary-100 rounded-xl",children:o.jsx(it,{className:"h-6 w-6 text-secondary-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-2xl font-bold text-secondary-600",children:c?"...":b}),o.jsx("p",{className:"text-sm text-gray-600",children:"Récupérations"}),o.jsxs("p",{className:"text-xs text-gray-500",children:[x," tournée",x>1?"s":""]})]})]})]})})}),o.jsx(Ae.div,{variants:P,children:o.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-0 shadow-sm rounded-2xl p-6 hover:shadow-card-hover transition-shadow duration-200 cursor-pointer",onClick:()=>t("/admin/monitoring"),children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-accent-100 rounded-xl",children:o.jsx(Hv,{className:"h-6 w-6 text-accent-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-2xl font-bold text-accent-600",children:p.isLoading?"...":p.inProgress}),o.jsx("p",{className:"text-sm text-gray-600",children:"Tournées en cours"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Suivi en temps réel"})]})]})})})]})]}),o.jsxs("div",{className:"mb-8 px-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Actions requises"}),o.jsxs(Ae.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:N,initial:"hidden",animate:"show",children:[o.jsx(Ae.div,{variants:P,children:o.jsxs("div",{className:`backdrop-blur-sm border-0 shadow-sm rounded-2xl p-6 hover:shadow-card-hover transition-shadow duration-200 cursor-pointer ${S?"bg-warning-100/80 ring-2 ring-warning-200":"bg-success-100/80 ring-2 ring-success-200"}`,onClick:()=>t("/admin/validate-labs"),children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("div",{className:`p-3 ${S?"bg-warning-200":"bg-success-200"} rounded-xl`,children:o.jsx(Dt,{className:`h-6 w-6 ${S?"text-warning-700":"text-success-700"}`})}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`text-2xl font-bold ${S?"text-warning-700":"text-success-700"}`,children:c?"...":j})})]}),o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Validations laboratoires"}),o.jsx("p",{className:"text-sm text-gray-700",children:S?`${j} validation${j>1?"s":""} en attente`:"Toutes les tournées sont validées"})]})}),o.jsx(Ae.div,{variants:P,children:o.jsxs("div",{className:`backdrop-blur-sm border-0 shadow-sm rounded-2xl p-6 hover:shadow-card-hover transition-shadow duration-200 cursor-pointer ${C?"bg-warning-100/80 ring-2 ring-warning-200":"bg-success-100/80 ring-2 ring-success-200"}`,onClick:()=>t("/admin/validate-routes"),children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("div",{className:`p-3 ${C?"bg-warning-200":"bg-success-200"} rounded-xl`,children:o.jsx(kQ,{className:`h-6 w-6 ${C?"text-warning-700":"text-success-700"}`})}),o.jsx("div",{className:"text-right",children:o.jsx("div",{className:`text-2xl font-bold ${C?"text-warning-700":"text-success-700"}`,children:d.isLoading?"...":d.pending})})]}),o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Tournées livreurs"}),o.jsx("p",{className:"text-sm text-gray-700",children:C?`${d.pending} livreur${d.pending>1?"s":""} sans tournée`:`Tous les livreurs ont une tournée (${d.total})`})]})}),o.jsx(Ae.div,{variants:P,children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border-0 shadow-sm rounded-2xl p-6 hover:shadow-card-hover transition-shadow duration-200 cursor-pointer",onClick:()=>t("/admin/driver-history"),children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsx("div",{className:"p-3 bg-gray-100 rounded-xl",children:o.jsx(PE,{className:"h-6 w-6 text-gray-600"})})}),o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Historique livreurs"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Consulter l'historique des tournées effectuées"})]})})]})]})]})})},hre=t=>{const{onDataChange:e,enabled:r=!0}=t,n=w.useRef(null),s=w.useRef(!1),i=w.useCallback(()=>new Date().toISOString().split("T")[0],[]),a=w.useCallback(p=>{const m=i();return p===m},[i]),l=w.useCallback(async p=>{const{eventType:m,new:g,old:y,table:b}=p;if(console.log(`[Realtime] ${m} détecté sur ${b}:`,{newRecord:g,oldRecord:y}),b==="lab_tours"){const x=g?.date||y?.date;if(!x||!a(x)){console.log(`[Realtime] Tournée ignorée (pas du jour actuel): ${x}`);return}}if(b==="lab_tour_stops"){const x=g?.tour_id||y?.tour_id;if(x){const{data:j,error:S}=await Y.from("lab_tours").select("date").eq("id",x).single();if(S||!j||!a(j.date)){console.log(`[Realtime] Arrêt ignoré (tournée pas du jour actuel): ${x}`);return}}}try{await e(m,{table:b,new:g,old:y,tourId:b==="lab_tours"?g?.id||y?.id:g?.tour_id||y?.tour_id,laboratoryId:b==="lab_tours"?g?.laboratory_id||y?.laboratory_id:null})}catch(x){console.error("[Realtime] Erreur dans le callback onDataChange:",x)}},[e,a]),c=w.useCallback(()=>{if(!r||s.current)return;console.log("[Realtime] Abonnement aux changements lab_tours et lab_tour_stops...");const p=Y.channel("lab-tours-realtime-optimized").on("postgres_changes",{event:"INSERT",schema:"public",table:"lab_tours"},m=>l({eventType:"INSERT",new:m.new,old:m.old,table:"lab_tours"})).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lab_tours"},m=>l({eventType:"UPDATE",new:m.new,old:m.old,table:"lab_tours"})).on("postgres_changes",{event:"DELETE",schema:"public",table:"lab_tours"},m=>l({eventType:"DELETE",new:m.new,old:m.old,table:"lab_tours"})).on("postgres_changes",{event:"INSERT",schema:"public",table:"lab_tour_stops"},m=>l({eventType:"INSERT",new:m.new,old:m.old,table:"lab_tour_stops"})).on("postgres_changes",{event:"UPDATE",schema:"public",table:"lab_tour_stops"},m=>l({eventType:"UPDATE",new:m.new,old:m.old,table:"lab_tour_stops"})).on("postgres_changes",{event:"DELETE",schema:"public",table:"lab_tour_stops"},m=>l({eventType:"DELETE",new:m.new,old:m.old,table:"lab_tour_stops"})).subscribe(m=>{console.log("[Realtime] Statut de l'abonnement:",m),m==="SUBSCRIBED"?s.current=!0:(m==="CHANNEL_ERROR"||m==="TIMED_OUT")&&(s.current=!1,console.error("[Realtime] Erreur de connexion, tentative de reconnexion..."),setTimeout(()=>{r&&(d(),c())},5e3))});n.current=p},[r,l]),d=w.useCallback(()=>{n.current&&(console.log("[Realtime] Désabonnement des changements..."),n.current.unsubscribe(),n.current=null,s.current=!1)},[]),f=w.useCallback(()=>{const p=new Date,m=new Date(p);m.setHours(24,0,0,0);const g=m.getTime()-p.getTime(),y=setTimeout(()=>{console.log("[Realtime] Réinitialisation à minuit détectée"),e("UPDATE",{table:"midnight_reset",new:{date:i()},old:null,tourId:null,laboratoryId:null}),f()},g);return()=>clearTimeout(y)},[e,i]);return w.useEffect(()=>{if(r){c();const p=f();return()=>{d(),p()}}else d()},[r,c,d,f]),w.useEffect(()=>()=>{d()},[d]),{isSubscribed:s.current,subscribe:c,unsubscribe:d,getTodayDate:i}},pre=as((t,e)=>({tours:[],filteredTours:[],laboratories:[],searchQuery:"",isLoading:!1,error:null,initializeData:async()=>{t({isLoading:!0,error:null});try{console.log("[Store Optimized] Initialisation des données");const{data:r,error:n}=await Y.from("laboratories").select(`
          *,
          location:location_id (
            id, 
            formatted_address, 
            latitude, 
            longitude, 
            delivery_instructions
          )
        `);if(n)throw n;const s=new Date().toISOString().split("T")[0],{data:i,error:a}=await Y.from("lab_tours").select(`
          *,
          laboratory:laboratory_id (
            id, 
            name, 
            email,
            location_id,
            location:location_id (
              id, 
              formatted_address, 
              latitude, 
              longitude, 
              delivery_instructions
            )
          )
        `).eq("date",s).order("date",{ascending:!1});if(a)throw a;const c=(await Promise.all((i||[]).map(async g=>{const{data:y,error:b}=await Y.from("lab_tour_stops").select(`
              *,
              client:client_id (
                id,
                name,
                laboratory_id,
                location_id,
                client_type,
                location:location_id (
                  id,
                  formatted_address,
                  latitude,
                  longitude,
                  delivery_instructions
                )
              )
            `).eq("tour_id",g.id);if(b)return console.error(`Erreur arrêts pour tournée ${g.id}:`,b),{...g,stops:[],deliveriesCount:0,pickupsCount:0};const x=y?.map(j=>({...j,client:j.client?{id:j.client.id,name:j.client.name,address:j.client.location?.formatted_address||"",type:j.client.client_type,latitude:j.client.location?.latitude,longitude:j.client.location?.longitude,instructions:j.client.location?.delivery_instructions}:void 0}))||[];return{...g,stops:x,deliveriesCount:x?.filter(j=>j.has_delivery).length||0,pickupsCount:x?.filter(j=>j.has_pickup).length||0}}))).map(g=>({id:g.id,laboratory_id:g.laboratory_id,laboratoryName:g.laboratory?.name||"Laboratoire inconnu",address:g.laboratory?.location?.formatted_address||"Adresse inconnue",date:g.date,status:g.status,submission_time:g.submission_time,pickup_time:g.pickup_time,return_time:g.return_time,rejection_reason:g.rejection_reason,created_at:g.created_at,updated_at:g.updated_at,deliveriesCount:g.deliveriesCount,pickupsCount:g.pickupsCount,laboratory:g.laboratory,stops:g.stops})),d=c.map(g=>g.laboratory_id),p=r.filter(g=>!d.includes(g.id)).map(g=>({id:`virtual-${g.id}`,laboratory_id:g.id,laboratoryName:g.name||"Laboratoire inconnu",address:g.location?.formatted_address||"Adresse inconnue",date:s,status:"draft",submission_time:null,pickup_time:null,return_time:null,rejection_reason:null,deliveriesCount:0,pickupsCount:0,laboratory:g,stops:[],isVirtual:!0})),m=[...c,...p];t({tours:m,filteredTours:m,laboratories:r,isLoading:!1}),console.log("[Store Optimized] Données initialisées:",m.length,"tournées")}catch(r){console.error("[Store Optimized] Erreur initialisation:",r),t({error:"Impossible de récupérer les données. Veuillez réessayer.",isLoading:!1})}},handleRealtimeChange:async(r,n)=>{const{table:s,new:i,old:a,tourId:l,laboratoryId:c}=n;if(console.log(`[Store Optimized] Changement ${r} sur ${s}:`,{tourId:l,laboratoryId:c}),s==="midnight_reset"){console.log("[Store Optimized] Réinitialisation à minuit"),await e().initializeData();return}if(s==="lab_tours"){const d=e().tours;if(r==="INSERT"||r==="UPDATE"){const{data:f,error:p}=await Y.from("lab_tours").select(`
            *,
            laboratory:laboratory_id (
              id, 
              name, 
              email,
              location_id,
              location:location_id (
                formatted_address
              )
            )
          `).eq("id",l).single();if(p){console.error("[Store Optimized] Erreur récupération tournée:",p);return}const{data:m}=await Y.from("lab_tour_stops").select("*").eq("tour_id",l),g={id:f.id,laboratory_id:f.laboratory_id,laboratoryName:f.laboratory?.name||"Laboratoire inconnu",address:f.laboratory?.location?.formatted_address||"Adresse inconnue",date:f.date,status:f.status,submission_time:f.submission_time,pickup_time:f.pickup_time,return_time:f.return_time,rejection_reason:f.rejection_reason,deliveriesCount:m?.filter(x=>x.has_delivery).length||0,pickupsCount:m?.filter(x=>x.has_pickup).length||0,laboratory:f.laboratory,stops:m||[]},y=d.map(x=>x.id===l?g:x);r==="INSERT"&&!d.some(x=>x.id===l)&&y.push(g);const b=y.filter(x=>x.id!==`virtual-${c}`);t({tours:b,filteredTours:b.filter(x=>x.laboratoryName?.toLowerCase().includes(e().searchQuery.toLowerCase()))})}if(r==="DELETE"){const f=d.filter(m=>m.id!==l),p=e().laboratories.find(m=>m.id===c);if(p){const m={id:`virtual-${p.id}`,laboratory_id:p.id,laboratoryName:p.name||"Laboratoire inconnu",address:p.location?.formatted_address||"Adresse inconnue",date:new Date().toISOString().split("T")[0],status:"draft",submission_time:null,pickup_time:null,return_time:null,rejection_reason:null,deliveriesCount:0,pickupsCount:0,laboratory:p,stops:[],isVirtual:!0};f.push(m)}t({tours:f,filteredTours:f.filter(m=>m.laboratoryName?.toLowerCase().includes(e().searchQuery.toLowerCase()))})}}if(s==="lab_tour_stops"){const d=e().tours,f=d.find(p=>p.id===l);if(f&&!f.isVirtual){const{data:p}=await Y.from("lab_tour_stops").select("*").eq("tour_id",l),m={...f,stops:p||[],deliveriesCount:p?.filter(y=>y.has_delivery).length||0,pickupsCount:p?.filter(y=>y.has_pickup).length||0},g=d.map(y=>y.id===l?m:y);t({tours:g,filteredTours:g.filter(y=>y.laboratoryName?.toLowerCase().includes(e().searchQuery.toLowerCase()))})}}},fetchAllTours:async()=>{await e().initializeData()},fetchTourDetails:async r=>{try{if(r.startsWith("virtual-")){const c=r.split("-")[1],{data:d,error:f}=await Y.from("laboratories").select(`
            *,
            location:location_id (
              formatted_address
            )
          `).eq("id",c).single();return f?null:{id:r,laboratory_id:c,date:new Date().toISOString().split("T")[0],status:"draft",isVirtual:!0,laboratoryName:d.name,address:d.location?.formatted_address||"",stops:[]}}const{data:n,error:s}=await Y.from("lab_tours").select(`
          *,
          laboratory:laboratory_id (
            id, 
            name, 
            location_id,
            location:location_id (
              formatted_address
            )
          )
        `).eq("id",r).single();if(s)return null;const{data:i,error:a}=await Y.from("lab_tour_stops").select(`
          *,
          client:client_id (
            id,
            name,
            laboratory_id,
            location_id,
            client_type,
            location:location_id (
              id,
              formatted_address,
              latitude,
              longitude,
              delivery_instructions
            )
          )
        `).eq("tour_id",r);if(a)return{...n,stops:[]};const l=i?.map(c=>({...c,client:c.client?{id:c.client.id,name:c.client.name,address:c.client.location?.formatted_address||"",type:c.client.client_type,latitude:c.client.location?.latitude,longitude:c.client.location?.longitude,instructions:c.client.location?.delivery_instructions}:void 0}))||[];return{...n,stops:l,laboratoryName:n.laboratory?.name,address:n.laboratory?.location?.formatted_address,deliveriesCount:l.filter(c=>c.has_delivery).length||0,pickupsCount:l.filter(c=>c.has_pickup).length||0}}catch(n){return console.error("Erreur récupération détails tournée:",n),null}},updateTourStatus:async(r,n,s)=>{try{if(console.log(`Mise à jour du statut de la tournée ${r} vers ${n}`),r.startsWith("virtual-"))return console.log("Tentative de mise à jour d'une tournée virtuelle - opération ignorée"),!1;const{data:i,error:a}=await Y.from("lab_tours").select("status").eq("id",r).single();if(a)return console.error("Erreur lors de la récupération du statut de la tournée:",a),!1;const l=i?.status,c={status:n,submission_time:new Date().toISOString()};n==="rejected"&&s&&(c.rejection_reason=s);const{error:d}=await Y.from("lab_tours").update(c).eq("id",r);if(d)return console.error("Erreur mise à jour statut:",d),!1;if(n==="validated")if(console.log("Génération des lab tour shipments pour la tournée:",r),l==="pending_changes"){console.log("La tournée était en attente de modifications, remplacement sécurisé des shipments");try{const{error:f}=await Y.rpc("delete_lab_tour_shipments",{lab_tour_id:r});if(f)return console.error("Erreur lors de la suppression des anciens lab tour shipments:",f),!1;console.log("Anciens lab tour shipments supprimés avec succès")}catch(f){return console.error("Exception lors de la suppression des anciens lab tour shipments:",f),!1}try{const{error:f}=await Y.rpc("generate_lab_tour_shipments",{lab_tour_id:r});if(f)return console.error("Erreur lors de la génération des nouveaux lab tour shipments:",f),!1;console.log("Nouveaux lab tour shipments générés avec succès")}catch(f){return console.error("Exception lors de la génération des nouveaux lab tour shipments:",f),!1}}else try{const{error:f}=await Y.rpc("generate_lab_tour_shipments",{lab_tour_id:r});if(f)return console.error("Erreur lors de la génération des lab tour shipments:",f),!1;console.log("Lab tour shipments générés avec succès")}catch(f){return console.error("Exception lors de l'appel RPC generate_lab_tour_shipments:",f),!1}if(n==="rejected"){console.log("Suppression des lab tour shipments pour la tournée:",r);try{const{error:f}=await Y.rpc("delete_lab_tour_shipments",{lab_tour_id:r});f?console.error("Erreur lors de la suppression des lab tour shipments:",f):console.log("Lab tour shipments supprimés avec succès")}catch(f){console.error("Exception lors de l'appel RPC delete_lab_tour_shipments:",f)}try{const{error:f}=await Y.rpc("delete_shipments_for_lab_tour",{lab_tour_id:r});f?console.error("Erreur lors de la suppression des shipments (ancienne table):",f):console.log("Shipments (ancienne table) supprimés avec succès")}catch(f){console.error("Exception lors de l'appel RPC delete_shipments_for_lab_tour:",f)}}return!0}catch(i){return console.error("Erreur mise à jour statut:",i),!1}},updateTourStops:async(r,n)=>{try{if(r.startsWith("virtual-"))return!1;const{data:s,error:i}=await Y.from("lab_tours").select("id").eq("id",r).single();if(i||!s)return!1;const a=n.filter(f=>f.id),l=n.filter(f=>!f.id&&f.client_id);let c=!0;for(const f of a)if(!f.has_delivery&&!f.has_pickup){const{error:p}=await Y.from("lab_tour_stops").delete().eq("id",f.id);p&&(c=!1)}else{const{error:p}=await Y.from("lab_tour_stops").update({has_delivery:f.has_delivery,has_pickup:f.has_pickup}).eq("id",f.id);p&&(c=!1)}for(const f of l){if(!f.has_delivery&&!f.has_pickup)continue;const{error:p}=await Y.from("lab_tour_stops").insert({tour_id:r,client_id:f.client_id,has_delivery:f.has_delivery,has_pickup:f.has_pickup});p&&(c=!1)}const{data:d}=await Y.from("lab_tours").select("status").eq("id",r).single();return d&&["validated","submitted"].includes(d.status)&&await Y.from("lab_tours").update({status:"pending_changes",submission_time:new Date().toISOString()}).eq("id",r),c}catch(s){return console.error("Erreur mise à jour arrêts:",s),!1}},deleteTour:async r=>{try{if(r.startsWith("virtual-"))return!1;const{error:n}=await Y.from("lab_tour_stops").delete().eq("tour_id",r);if(n)return console.error("Erreur suppression arrêts:",n),!1;const{error:s}=await Y.from("lab_tours").delete().eq("id",r);return s?(console.error("Erreur suppression tournée:",s),!1):!0}catch(n){return console.error("Erreur suppression tournée:",n),!1}},createTour:async(r,n)=>{try{if(console.log("🚀 [createTour] Début création tournée"),console.log("📋 [createTour] laboratoryId:",r),console.log("📋 [createTour] stops:",JSON.stringify(n,null,2)),n.length===0)return console.log("❌ [createTour] Aucun arrêt fourni"),null;console.log("📡 [createTour] Insertion de la tournée dans la base...");const{data:s,error:i}=await Y.from("lab_tours").insert({laboratory_id:r,date:new Date().toISOString().split("T")[0],status:"submitted",submission_time:new Date().toISOString()}).select().single();if(i||!s)return console.log("❌ [createTour] Erreur lors de l'insertion de la tournée:",i),null;console.log("✅ [createTour] Tournée créée avec succès:",s),console.log("📡 [createTour] Création des arrêts...");const a=n.map((l,c)=>(console.log(`📍 [createTour] Création arrêt ${c+1}:`,l),Y.from("lab_tour_stops").insert({tour_id:s.id,client_id:l.client_id,has_delivery:l.has_delivery,has_pickup:l.has_pickup})));try{await Promise.all(a),console.log("✅ [createTour] Tous les arrêts créés avec succès")}catch(l){return console.log("❌ [createTour] Erreur lors de la création des arrêts:",l),console.log("🗑️ [createTour] Suppression de la tournée..."),await Y.from("lab_tours").delete().eq("id",s.id),null}return console.log("🔄 [createTour] Rafraîchissement des données..."),await e().fetchAllTours(),console.log("✅ [createTour] Données rafraîchies"),console.log("🎉 [createTour] Création terminée avec succès, tourId:",s.id),s.id}catch(s){return console.error("❌ [createTour] Erreur création tournée:",s),null}},filterToursByLaboratory:r=>{const{tours:n}=e();t({searchQuery:r,filteredTours:n.filter(s=>s.laboratoryName?.toLowerCase().includes(r.toLowerCase()))})},fetchLaboratoryClients:async r=>{try{const{data:n,error:s}=await Y.from("laboratory_clients").select(`
          *,
          location:location_id (
            id,
            formatted_address,
            latitude,
            longitude,
            delivery_instructions
          )
        `).eq("laboratory_id",r);return s?[]:n?.map(a=>({id:a.id,name:a.name||"Client sans nom",address:a.location?.formatted_address||"Adresse inconnue",city:a.city,postal_code:a.postal_code,type:a.client_type||"dentist",latitude:a.location?.latitude,longitude:a.location?.longitude,instructions:a.location?.delivery_instructions,location_id:a.location_id,is_pickup_depot:a.is_pickup_depot||!1,is_return_depot:a.is_return_depot||!1,depot_is_dentist:a.depot_is_dentist||!1,depot_is_lab:a.depot_is_lab||!1}))||[]}catch(n){return console.error("Erreur récupération clients:",n),[]}}})),mre=[{id:"dentist-1",name:"Dr. Martin",address:"15 Avenue de la République",city:"Marseille",postalCode:"13001",instructions:"Sonner à l'interphone",type:"dentist",deliveryType:"laboratory_to_dentist",pickupType:"dentist_to_laboratory"},{id:"dentist-2",name:"Dr. Dubois",address:"45 Rue Paradis",city:"Marseille",postalCode:"13006",instructions:"Boîte aux lettres n°12",type:"dentist",deliveryType:"laboratory_to_dentist",pickupType:"dentist_to_laboratory"},{id:"dentist-3",name:"Dr. Bernard",address:"8 Boulevard Longchamp",city:"Marseille",postalCode:"13001",instructions:"Déposer à l'accueil",type:"dentist",deliveryType:"laboratory_to_dentist",pickupType:"dentist_to_laboratory"},{id:"dentist-4",name:"Dr. Thomas",address:"120 Rue Saint-Pierre",city:"Marseille",postalCode:"13005",instructions:"Code : 1234",type:"dentist",deliveryType:"laboratory_to_dentist",pickupType:"dentist_to_laboratory"},{id:"lab-1",name:"Laboratoire Central",address:"15 Rue de la République",city:"Marseille",postalCode:"13001",type:"laboratory",deliveryType:"laboratory_to_laboratory",pickupType:"laboratory_to_laboratory"},{id:"lab-2",name:"Laboratoire Moderne",address:"45 Avenue du Prado",city:"Marseille",postalCode:"13006",type:"laboratory",deliveryType:"laboratory_to_laboratory",pickupType:"laboratory_to_laboratory"}],gre=[{id:"route-1",laboratoryId:"lab-1",date:new Date().toISOString(),status:"pending_validation",stops:[{id:"stop-1",routeId:"route-1",order:1,type:"laboratory_to_dentist",fromId:"lab-1",fromType:"laboratory",toId:"dentist-1",toType:"dentist",status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"stop-2",routeId:"route-1",order:2,type:"dentist_to_laboratory",fromId:"dentist-2",fromType:"dentist",toId:"lab-1",toType:"laboratory",status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],vre=as((t,e)=>({selectedDate:new Date,stops:mre,routes:gre,selectedStops:{},setSelectedDate:r=>t({selectedDate:r}),toggleDelivery:r=>t(n=>({selectedStops:{...n.selectedStops,[r]:{delivery:!n.selectedStops[r]?.delivery||!1,pickup:n.selectedStops[r]?.pickup||!1}}})),togglePickup:r=>t(n=>({selectedStops:{...n.selectedStops,[r]:{delivery:n.selectedStops[r]?.delivery||!1,pickup:!n.selectedStops[r]?.pickup||!1}}})),clearSelections:()=>t({selectedStops:{}}),submitRoute:()=>t(r=>{const n={id:Date.now().toString(),laboratoryId:"2",date:r.selectedDate.toISOString(),status:"pending_validation",stops:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return{routes:[...r.routes,n],selectedStops:{}}}),hasRouteForDate:r=>{const n=e().routes,s=r.toISOString().split("T")[0];return n.some(i=>new Date(i.date).toISOString().split("T")[0]===s)},loadStops:async()=>(console.log("Chargement des arrêts pour la planification"),Promise.resolve()),setSelectedStops:r=>{t({selectedStops:{...r}})},resetSelectedStops:()=>{t({selectedStops:{}})}})),oB=(t,e)=>{if(e)return"bg-red-50 border-red-200";switch(t){case"submitted":return"bg-orange-50 border-orange-200";case"pending_changes":return"bg-orange-100 border-orange-300";case"validated":return"bg-green-50 border-green-200";case"draft":return"bg-gray-50 border-gray-200";case"rejected":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}},yre=(t,e)=>{if(e)return"text-red-700 bg-gradient-to-r from-red-100 to-red-200 border border-red-300";switch(t){case"submitted":return"text-orange-700 bg-gradient-to-r from-orange-100 to-orange-200 border border-orange-300";case"pending_changes":return"text-amber-700 bg-gradient-to-r from-amber-100 to-amber-200 border border-amber-300";case"validated":return"text-green-700 bg-gradient-to-r from-green-100 to-green-200 border border-green-300";case"draft":return"text-gray-700 bg-gradient-to-r from-gray-100 to-gray-200 border border-gray-300";case"rejected":return"text-red-700 bg-gradient-to-r from-red-100 to-red-200 border border-red-300";default:return"text-gray-700 bg-gradient-to-r from-gray-100 to-gray-200 border border-gray-300"}},xre=(t,e)=>{if(e)return o.jsx(es,{className:"h-4 w-4"});switch(t){case"submitted":return o.jsx(bt,{className:"h-4 w-4"});case"pending_changes":return o.jsx(bt,{className:"h-4 w-4"});case"validated":return o.jsx(er,{className:"h-4 w-4"});case"draft":return o.jsx(bt,{className:"h-4 w-4"});case"rejected":return o.jsx(es,{className:"h-4 w-4"});default:return o.jsx(bt,{className:"h-4 w-4"})}},bre=(t,e)=>{if(e)return"Non soumise";switch(t){case"submitted":return"En attente";case"pending_changes":return"Changements en attente";case"validated":return"Validée";case"draft":return"Non reçue";case"rejected":return"Refusée";default:return"Statut inconnu"}},_m=t=>new Date(t).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),wre=t=>{if(t.isVirtual)return null;switch(t.status){case"submitted":return t.submission_time?_m(t.submission_time):null;case"pending_changes":return t.submission_time?_m(t.submission_time):null;case"validated":return t.submission_time?_m(t.submission_time):null;case"rejected":return t.submission_time?_m(t.submission_time):null;default:return null}},_re=t=>{if(t.isVirtual)return"Aucune tournée soumise pour aujourd'hui";const e=wre(t);if(!e)return"Heure inconnue";switch(t.status){case"submitted":return`Soumise à ${e}`;case"pending_changes":return`Dernière soumission à ${e}`;case"validated":return`Soumise à ${e}`;case"rejected":return`Dernière soumission à ${e}`;default:return`Soumise à ${e}`}},jre=({route:t,selectedRoute:e,selectedTourDetails:r,processingAction:n,loadingTourDetails:s,onSelect:i,onEdit:a,onAction:l})=>{const c=()=>{s||n||i(t.id)};return o.jsx("div",{className:`cursor-pointer transition-all duration-300 rounded-xl border-2 shadow-lg hover:shadow-xl ${e===t.id?"ring-2 ring-blue-200":""} ${oB(t.status,t.isVirtual)} ${s?"opacity-50 cursor-wait":""}`,onClick:c,children:o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:t.laboratoryName}),o.jsx("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:_re(t)}),e===t.id&&!t.isVirtual&&o.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center gap-1",children:[o.jsx(it,{className:"h-4 w-4"}),t.address]})]}),o.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-xs font-semibold flex items-center gap-1.5 shadow-sm ${yre(t.status,t.isVirtual)}`,children:[xre(t.status,t.isVirtual),bre(t.status,t.isVirtual)]})]}),!t.isVirtual&&o.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[o.jsx("div",{className:"flex-1 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-blue-700 mb-0.5",children:t.deliveriesCount||0}),o.jsx("div",{className:"text-xs font-medium text-blue-600",children:"Livraisons"})]}),o.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(ut,{className:"h-4 w-4 text-white"})})]})}),o.jsx("div",{className:"flex-1 bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-3 border border-orange-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-orange-700 mb-0.5",children:t.pickupsCount||0}),o.jsx("div",{className:"text-xs font-medium text-orange-600",children:"Récupérations"})]}),o.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(Rn,{className:"h-4 w-4 text-white"})})]})})]}),e===t.id&&r&&!t.isVirtual&&o.jsxs("div",{className:"mb-3 p-3 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200",children:[t.contact&&o.jsx("div",{className:"mb-3 p-2 bg-white rounded-lg border border-gray-150",children:o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(Dt,{className:"h-3 w-3 text-gray-600"}),o.jsx("span",{className:"font-medium text-gray-900",children:"Contact:"}),o.jsx("span",{className:"text-gray-700",children:t.contact})]})}),o.jsxs("div",{className:"space-y-3",children:[r.stops?.filter(d=>d.has_delivery).length>0&&o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(ut,{className:"h-4 w-4 text-white"})}),o.jsx("h4",{className:"text-sm font-bold text-blue-900",children:"Livraisons"}),o.jsx("div",{className:"ml-auto",children:o.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white rounded-full text-xs font-bold",children:r.stops?.filter(d=>d.has_delivery).length})})]}),o.jsx("div",{className:"space-y-2",children:r.stops?.filter(d=>d.has_delivery).map((d,f)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-blue-150 shadow-sm hover:shadow-md transition-shadow",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm",children:o.jsx("span",{className:"text-xs font-bold text-white",children:f+1})}),o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:d.client?.name||"Client inconnu"})})]},`delivery-${d.id||f}`))})]}),r.stops?.filter(d=>d.has_pickup).length>0&&o.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-3 border border-orange-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(Rn,{className:"h-4 w-4 text-white"})}),o.jsx("h4",{className:"text-sm font-bold text-orange-900",children:"Récupérations"}),o.jsx("div",{className:"ml-auto",children:o.jsx("span",{className:"px-2 py-1 bg-orange-500 text-white rounded-full text-xs font-bold",children:r.stops?.filter(d=>d.has_pickup).length})})]}),o.jsx("div",{className:"space-y-2",children:r.stops?.filter(d=>d.has_pickup).map((d,f)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-orange-150 shadow-sm hover:shadow-md transition-shadow",children:[o.jsx("div",{className:"w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm",children:o.jsx("span",{className:"text-xs font-bold text-white",children:f+1})}),o.jsx("div",{className:"flex-1",children:o.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:d.client?.name||"Client inconnu"})})]},`pickup-${d.id||f}`))})]}),(!r.stops||r.stops.length===0)&&o.jsxs("div",{className:"text-center py-4 text-gray-500",children:[o.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(ut,{className:"h-6 w-6 text-gray-400"})}),o.jsx("p",{className:"font-medium text-xs",children:"Aucun arrêt configuré pour cette tournée"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-4",children:[!t.isVirtual&&(t.status!=="validated"||e===t.id)&&o.jsxs(ve,{onClick:d=>a(t.id,d),variant:"outline",size:"sm",className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:bg-white text-white hover:text-white border-0 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 hover:border hover:border-blue-600",disabled:n,children:[o.jsx(ig,{className:"h-3 w-3"}),o.jsx("span",{className:"font-semibold text-xs",children:"Modifier"})]}),(t.status==="submitted"||t.status==="pending_changes")&&o.jsxs(o.Fragment,{children:[o.jsxs(ve,{onClick:d=>l(t.id,"rejected",d),variant:"outline",size:"sm",className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-orange-500 to-red-500 hover:bg-white text-white hover:text-white border-0 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 hover:border hover:border-red-600",disabled:n,children:[n?o.jsx(is,{className:"h-3 w-3 animate-spin"}):o.jsx(tr,{className:"h-3 w-3"}),o.jsx("span",{className:"font-semibold text-xs",children:"Refuser"})]}),o.jsxs(ve,{onClick:d=>l(t.id,"validated",d),size:"sm",className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 ring-2 ring-green-200 hover:ring-green-300",disabled:n,children:[n?o.jsx(is,{className:"h-3 w-3 animate-spin"}):o.jsx(Er,{className:"h-3 w-3"}),o.jsx("span",{className:"font-semibold text-xs",children:"Valider"})]})]})]})]})},t.id)},Sre=({isOpen:t,onClose:e,selectedTourDetails:r,laboratoryClients:n,selectedStops:s,processingAction:i,onSave:a,onToggleDelivery:l,onTogglePickup:c})=>{const d=()=>{i||e()},f=m=>{m.stopPropagation()},p=()=>{i||e()};return o.jsx(Rt,{children:t&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 overflow-y-auto",onClick:d,children:o.jsxs(Ae.div,{className:"bg-white rounded-3xl w-full max-w-2xl flex flex-col max-h-[90vh] shadow-2xl",onClick:f,initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsxs("div",{className:"p-6 flex items-start justify-between flex-shrink-0",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Modifier la tournée"}),o.jsx("p",{className:"text-gray-600",children:"Sélectionnez les livraisons et récupérations pour chaque client"})]}),o.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-full transition-colors ml-4",disabled:i,children:o.jsx(tr,{className:"h-6 w-6 text-gray-400"})})]}),o.jsx("div",{className:"px-6 pb-6",children:o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-2xl p-4 border border-purple-200",children:[o.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:Object.values(s).filter(m=>m.delivery||m.pickup).length}),o.jsx("div",{className:"text-sm font-medium text-purple-600",children:"Arrêts"})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-2xl p-4 border border-blue-200",children:[o.jsx("div",{className:"text-3xl font-bold text-blue-700 mb-1",children:Object.values(s).filter(m=>m.delivery).length}),o.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Livr."})]}),o.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 rounded-2xl p-4 border border-orange-200",children:[o.jsx("div",{className:"text-3xl font-bold text-orange-700 mb-1",children:Object.values(s).filter(m=>m.pickup).length}),o.jsx("div",{className:"text-sm font-medium text-orange-600",children:"Récup."})]})]})}),o.jsx("div",{className:"mx-6 border-t border-gray-200"}),o.jsx("div",{className:"flex-grow overflow-y-auto p-6",children:o.jsxs("div",{className:"space-y-4",children:[n.filter(m=>m.type==="dentist").sort((m,g)=>m.name.localeCompare(g.name)).map(m=>o.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 p-4 shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:m.name})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{className:`px-4 py-2 rounded-xl flex items-center gap-2 font-medium transition-all duration-200 ${s[m.id]?.delivery?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,onClick:()=>l(m.id),children:[o.jsx(ut,{className:"h-4 w-4"}),o.jsx("span",{children:"Livraison"})]}),o.jsxs("button",{className:`px-4 py-2 rounded-xl flex items-center gap-2 font-medium transition-all duration-200 ${s[m.id]?.pickup?"bg-orange-500 text-white shadow-md":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,onClick:()=>c(m.id),children:[o.jsx(Rn,{className:"h-4 w-4"}),o.jsx("span",{children:"Récup."})]})]})]})},m.id)),n.filter(m=>m.type==="dentist").length===0&&o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx(Dt,{className:"h-8 w-8 text-gray-400"})}),o.jsx("p",{className:"font-medium",children:"Aucun dentiste enregistré"})]})]})}),o.jsx("div",{className:"p-6 flex-shrink-0",children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(ve,{variant:"outline",className:"w-full h-12 rounded-xl font-medium border-gray-300 hover:bg-gray-50 transition-all duration-200",onClick:p,disabled:i,children:"Annuler"}),o.jsx(ve,{onClick:a,className:"w-full h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2",disabled:i,children:i?o.jsxs(o.Fragment,{children:[o.jsx(is,{className:"h-5 w-5 animate-spin"}),o.jsx("span",{children:"Enregistrement..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(ut,{className:"h-5 w-5"}),o.jsx("span",{children:r?.isVirtual?"Créer la tournée":"Enregistrer les modifications"})]})})]})})]})})})},Nre=({isOpen:t,onClose:e,onConfirm:r,pendingCount:n,processingAction:s})=>{const i=()=>{s||e()},a=c=>{c.stopPropagation()},l=()=>{s||e()};return o.jsx(Rt,{children:t&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:i,children:o.jsx(Ae.div,{className:"bg-white rounded-2xl w-full max-w-md flex flex-col",onClick:a,initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Er,{className:"h-8 w-8 text-green-600"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Valider toutes les tournées"}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["Êtes-vous sûr de vouloir valider toutes les ",o.jsxs("span",{className:"font-semibold",children:[n," tournées"]})," en attente ?"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(ve,{onClick:r,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-semibold shadow-md hover:shadow-lg transition-all duration-200",disabled:s,children:s?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(is,{className:"h-5 w-5 animate-spin"}),o.jsx("span",{children:"Validation en cours..."})]}):o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(Er,{className:"h-5 w-5"}),o.jsx("span",{children:"Oui, tout valider"})]})}),o.jsx(ve,{variant:"outline",className:"w-full py-3 rounded-xl font-semibold border-gray-300 hover:bg-gray-50 transition-all duration-200",onClick:l,disabled:s,children:"Annuler"})]})]})})})})},Ere=({searchQuery:t,onSearchChange:e})=>o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Qe,{placeholder:"Rechercher un laboratoire...",value:t,onChange:r=>e(r.target.value),className:"pl-10 pr-3 py-2 w-full border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-sm"})]})}),Cre=({totalDeliveries:t,totalPickups:e,pendingToursCount:r,processingAction:n,onValidateAll:s})=>o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"flex-1 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-bold text-blue-700 mb-0.5",children:t}),o.jsx("div",{className:"text-xs font-medium text-blue-600",children:"Livraisons totales"})]}),o.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(ut,{className:"h-5 w-5 text-white"})})]})}),o.jsx("div",{className:"flex-1 bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl p-3 border border-orange-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-bold text-orange-700 mb-0.5",children:e}),o.jsx("div",{className:"text-xs font-medium text-orange-600",children:"Récupérations totales"})]}),o.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(Rn,{className:"h-5 w-5 text-white"})})]})})]}),r>0&&o.jsx("div",{className:"mb-4",children:o.jsxs(ve,{onClick:s,className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-xl shadow-md hover:shadow-lg transition-all duration-200",disabled:n,children:[o.jsx(Er,{className:"h-4 w-4"}),o.jsxs("span",{className:"font-semibold text-sm",children:["Tout valider (",r," tournées)"]})]})})]}),kre=()=>{const{filteredTours:t,isLoading:e,error:r,initializeData:n,fetchTourDetails:s,updateTourStatus:i,updateTourStops:a,deleteTour:l,createTour:c,filterToursByLaboratory:d,fetchLaboratoryClients:f,handleRealtimeChange:p}=pre(),{selectedStops:m,toggleDelivery:g,togglePickup:y,setSelectedStops:b,resetSelectedStops:x}=vre(),[j,S]=w.useState(null),[C,E]=w.useState(null),[N,P]=w.useState(null),[O,L]=w.useState(""),[A,R]=w.useState(!1),[M,D]=w.useState([]),[B,F]=w.useState(!1),[V,J]=w.useState(!1);hre({onDataChange:p,enabled:!0}),w.useEffect(()=>{n()},[n]),w.useEffect(()=>{d(O)},[O,d]),w.useEffect(()=>(N?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[N]);const G=z.useMemo(()=>{const te=[...t],pe=te.filter(ke=>ke.status==="submitted"||ke.status==="pending_changes").sort((ke,We)=>(ke.laboratoryName||"").localeCompare(We.laboratoryName||"")),ae=te.filter(ke=>ke.status==="validated").sort((ke,We)=>(ke.laboratoryName||"").localeCompare(We.laboratoryName||"")),Oe=te.filter(ke=>ke.isVirtual).sort((ke,We)=>(ke.laboratoryName||"").localeCompare(We.laboratoryName||"")),Ee=te.filter(ke=>!["submitted","pending_changes","validated"].includes(ke.status)&&!ke.isVirtual).sort((ke,We)=>(ke.laboratoryName||"").localeCompare(We.laboratoryName||""));return{pending:pe,validated:ae,virtual:Oe,other:Ee}},[t]),q=z.useMemo(()=>{const te=[...G.pending,...G.validated],pe=te.reduce((Oe,Ee)=>Oe+(Ee.deliveriesCount||0),0),ae=te.reduce((Oe,Ee)=>Oe+(Ee.pickupsCount||0),0);return{totalDeliveries:pe,totalPickups:ae}},[G.pending,G.validated]),U=async(te,pe)=>{pe.stopPropagation(),console.log("🚀 [handleEditRoute] Début édition tournée"),console.log("📋 [handleEditRoute] routeId:",te),R(!0);try{const ae=te.startsWith("virtual-");console.log("📋 [handleEditRoute] isVirtual:",ae);let Oe="";if(ae){Oe=te.replace("virtual-",""),console.log("📋 [handleEditRoute] laboratoryId extrait:",Oe);const We={id:te,laboratory_id:Oe,status:"draft",date:new Date().toISOString(),stops:[],isVirtual:!0};console.log("📋 [handleEditRoute] Détails tournée virtuelle créés:",We),E(We)}else{console.log("📡 [handleEditRoute] Chargement détails tournée existante...");const We=await s(te);if(!We)throw new Error("Impossible de récupérer les détails de la tournée");console.log("📋 [handleEditRoute] Détails chargés:",We),E(We),Oe=We.laboratory_id}console.log("📋 [handleEditRoute] Ouverture modal avec routeId:",te),P(te),console.log("📡 [handleEditRoute] Chargement clients du laboratoire...");const Ee=await f(Oe);console.log("📋 [handleEditRoute] Clients chargés:",Ee),D(Ee);const ke={};console.log("🔄 [handleEditRoute] Reset des arrêts sélectionnés"),x(),!ae&&C?.stops&&C.stops.length>0?(console.log("📋 [handleEditRoute] Pré-remplissage arrêts existants:",C.stops),C.stops.forEach(We=>{We.client_id&&(ke[We.client_id]={delivery:We.has_delivery||!1,pickup:We.has_pickup||!1})}),console.log("📋 [handleEditRoute] Arrêts initialisés:",ke),b(ke)):console.log("📋 [handleEditRoute] Aucun arrêt à pré-remplir (tournée virtuelle ou vide)"),console.log("✅ [handleEditRoute] Modal ouverte avec succès")}catch(ae){console.error("❌ [handleEditRoute] Erreur lors de l'édition:",ae),console.error("❌ Erreur lors de l'ouverture de la modal")}finally{console.log("🏁 [handleEditRoute] Fin édition tournée"),R(!1)}},W=async()=>{if(console.log("🚀 [handleSaveRoute] Début sauvegarde"),console.log("📋 [handleSaveRoute] showEditModal:",N),console.log("📋 [handleSaveRoute] selectedTourDetails:",C),console.log("📋 [handleSaveRoute] selectedStops:",m),!N){console.log("❌ [handleSaveRoute] Pas de modal ouverte - abandon");return}let te=C;if(!te&&N.startsWith("virtual-")){console.log("🔄 [handleSaveRoute] Reconstruction des détails de la tournée virtuelle");const pe=N.replace("virtual-","");te={id:N,laboratory_id:pe,status:"draft",date:new Date().toISOString(),stops:[],isVirtual:!0},console.log("📋 [handleSaveRoute] Détails reconstruits:",te)}if(!te){console.log("❌ [handleSaveRoute] Impossible de récupérer les détails de la tournée - abandon");return}R(!0);try{if(te.isVirtual){console.log("🔄 [handleSaveRoute] Tournée virtuelle détectée");const pe=Object.entries(m).filter(([Oe,Ee])=>Ee.delivery||Ee.pickup).map(([Oe,Ee])=>({client_id:Oe,has_delivery:Ee.delivery,has_pickup:Ee.pickup}));if(console.log("📋 [handleSaveRoute] Arrêts à créer:",pe),pe.length===0){console.log("❌ [handleSaveRoute] Aucun arrêt sélectionné"),console.warn("⚠️ Veuillez sélectionner au moins un arrêt pour la tournée");return}console.log("📡 [handleSaveRoute] Appel createTour...");const ae=await c(te.laboratory_id,pe);console.log("📋 [handleSaveRoute] Résultat createTour:",ae),ae?(console.log("✅ [handleSaveRoute] Tournée créée avec succès"),P(null),console.log("🎉 La tournée a été créée avec succès")):(console.log("❌ [handleSaveRoute] Échec création tournée"),console.error("❌ Erreur lors de la création de la tournée"))}else{console.log("🔄 [handleSaveRoute] Tournée existante - mise à jour");const pe=[...te.stops?.map(ae=>({id:ae.id,has_delivery:m[ae.client_id]?.delivery||!1,has_pickup:m[ae.client_id]?.pickup||!1}))||[],...Object.entries(m).filter(([ae,Oe])=>!te.stops?.some(Ee=>Ee.client_id===ae)).map(([ae,Oe])=>({client_id:ae,has_delivery:Oe.delivery,has_pickup:Oe.pickup}))];if(console.log("📋 [handleSaveRoute] Modifications à appliquer:",pe),pe.length>0){console.log("📡 [handleSaveRoute] Appel updateTourStops...");const ae=await a(N,pe);console.log("📋 [handleSaveRoute] Résultat updateTourStops:",ae),ae?(console.log("✅ [handleSaveRoute] Mise à jour réussie"),P(null)):(console.log("❌ [handleSaveRoute] Échec mise à jour"),console.error("❌ Erreur lors de la mise à jour de la tournée"))}else console.log("ℹ️ [handleSaveRoute] Aucune modification à appliquer"),P(null)}}catch(pe){console.error("❌ [handleSaveRoute] Erreur lors de la sauvegarde:",pe),console.error("❌ Une erreur est survenue lors de la sauvegarde")}finally{console.log("🏁 [handleSaveRoute] Fin sauvegarde"),R(!1)}},I=async()=>{R(!0);try{const te=G.pending;for(const pe of te)await i(pe.id,"validated");F(!1)}catch(te){console.error("Erreur lors de la validation:",te)}finally{R(!1)}},H=async te=>{if(te===j){S(null),E(null);return}J(!0);try{const pe=await s(te);E(pe),S(te)}catch(pe){console.error("Erreur lors du chargement des détails:",pe),E(null),S(null)}finally{J(!1)}},ne=()=>{A||P(null)},ge=()=>{A||F(!1)},K=te=>o.jsx(jre,{route:te,selectedRoute:j,selectedTourDetails:C,processingAction:A,loadingTourDetails:V,onSelect:H,onEdit:U,onAction:de},te.id),de=async(te,pe,ae)=>{ae.stopPropagation(),R(!0);try{await i(te,pe)}catch(Oe){console.error(`Erreur lors de l'action ${pe}:`,Oe)}finally{R(!1)}},ue=(te,pe,ae,Oe)=>te.length===0?null:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg shadow-sm border ${Oe}`,children:[o.jsx("div",{className:"p-1.5 bg-white rounded-md shadow-sm",children:ae}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex-1",children:pe}),o.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md border border-gray-200",children:o.jsx("span",{className:"text-sm font-bold text-gray-700",children:te.length})})]}),o.jsx("div",{className:"space-y-2",children:te.map(Ee=>o.jsx(Ae.div,{variants:ce,children:o.jsx("div",{className:`rounded-xl shadow-sm border cursor-pointer overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1 ${oB(Ee.status,Ee.isVirtual)} ${j===Ee.id?"border-blue-400 shadow-xl ring-2 ring-blue-100":"border-gray-200"}`,onClick:()=>{Ee.isVirtual?U(Ee.id,new MouseEvent("click")):S(j===Ee.id?null:Ee.id)},children:K(Ee)})},Ee.id))})]}),he={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ce={hidden:{y:20,opacity:0},show:{y:0,opacity:1}};return e?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(is,{className:"h-8 w-8 animate-spin"})}):r?o.jsxs("div",{className:"p-6 bg-red-50 rounded-lg text-center",children:[o.jsx(es,{className:"h-10 w-10 text-red-500 mx-auto mb-4"}),o.jsx("p",{className:"text-red-700",children:r}),o.jsx(ve,{onClick:()=>n(),className:"mt-4",children:"Réessayer"})]}):o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mb-3",children:o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Validation des laboratoires"})}),o.jsx(Ere,{searchQuery:O,onSearchChange:L}),o.jsx(Cre,{totalDeliveries:q.totalDeliveries,totalPickups:q.totalPickups,pendingToursCount:G.pending.length,processingAction:A,onValidateAll:()=>F(!0)})]}),t.length===0?o.jsxs("div",{className:"p-8 text-center bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[o.jsx("div",{className:"p-3 bg-white rounded-full w-16 h-16 mx-auto mb-3 shadow-sm",children:o.jsx(Dt,{className:"h-10 w-10 text-gray-400"})}),o.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-2",children:"Aucune tournée trouvée"}),o.jsx("p",{className:"text-sm text-gray-500 max-w-md mx-auto",children:O?"Aucune tournée ne correspond à votre recherche":"Toutes les tournées ont été traitées"})]}):o.jsxs(Ae.div,{variants:he,initial:"hidden",animate:"show",className:"space-y-4",children:[ue(G.pending,"En attente de validation",o.jsx(bt,{className:"h-5 w-5 text-orange-600"}),"bg-orange-50"),ue(G.validated,"Tournées validées",o.jsx(er,{className:"h-5 w-5 text-green-600"}),"bg-green-50"),ue(G.virtual,"Laboratoires sans soumission",o.jsx(es,{className:"h-5 w-5 text-red-600"}),"bg-red-50"),ue(G.other,"Autres",o.jsx(Dt,{className:"h-5 w-5 text-gray-600"}),"bg-gray-50")]}),o.jsx(Sre,{isOpen:!!N,onClose:ne,selectedTourDetails:C,laboratoryClients:M,selectedStops:m,processingAction:A,onSave:W,onToggleDelivery:g,onTogglePickup:y}),o.jsx(Nre,{isOpen:B,onClose:ge,onConfirm:I,pendingCount:G.pending.length,processingAction:A})]})},Pre=()=>o.jsx("div",{className:"min-h-screen bg-gray-50",children:o.jsx("div",{className:"container mx-auto px-2 py-4",children:o.jsx(kre,{})})}),_e=z.forwardRef(({className:t,isPressable:e,isHoverable:r,isCompact:n,...s},i)=>o.jsx("div",{className:No("bg-white rounded-2xl shadow-card border border-gray-100",n?"p-4":"p-6",e&&"cursor-pointer active:scale-95 transition-transform",r&&"hover:shadow-card-hover transition-shadow duration-200",t),ref:i,...s}));_e.displayName="Card";const eS=z.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:No("mb-4 space-y-1.5 flex flex-col",t),...e}));eS.displayName="CardHeader";const Yd=z.forwardRef(({className:t,...e},r)=>o.jsx("h3",{ref:r,className:No("font-semibold text-xl leading-none tracking-tight",t),...e}));Yd.displayName="CardTitle";const Jd=z.forwardRef(({className:t,...e},r)=>o.jsx("p",{ref:r,className:No("text-sm text-gray-500",t),...e}));Jd.displayName="CardDescription";const Hr=z.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:No("",t),...e}));Hr.displayName="CardContent";const Ore=z.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:No("flex items-center pt-4 mt-auto",t),...e}));Ore.displayName="CardFooter";function Yf(t){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(t)}function Are(t,e){if(Yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tre(t){var e=Are(t,"string");return Yf(e)=="symbol"?e:e+""}function fe(t,e,r){return(e=Tre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lB(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tb,bT;function Lre(){if(bT)return tb;bT=1;var t=function(r,n,s,i,a,l,c,d){if(!r){var f;if(n===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[s,i,a,l,c,d],m=0;f=new Error(n.replace(/%s/g,function(){return p[m++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};return tb=t,tb}var Mre=Lre(),Rr=lB(Mre),dt=w.createContext(null);function Rre(){Rr(!!w.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=w.useContext(dt);return Rr(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function Dre(t,e,r){return Object.keys(t).reduce(function(s,i){return e(s,t[i],i)},r)}function Ire(t,e){Object.keys(t).forEach(r=>e(t[r],r))}function $re(t,e,r,n){var s={},i=(a,l)=>{var c=r[l];c!==e[l]&&(s[l]=c,a(n,c))};return Ire(t,i),s}function Fre(t,e,r){var n=Dre(r,function(i,a,l){return typeof t[l]=="function"&&i.push(google.maps.event.addListener(e,a,t[l])),i},[]);return n}function Bre(t){google.maps.event.removeListener(t)}function vt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(Bre)}function mt(t){var{updaterMap:e,eventMap:r,prevProps:n,nextProps:s,instance:i}=t,a=Fre(s,i,r);return $re(e,n,s,i),a}var wT={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},_T={extraMapTypes(t,e){e.forEach(function(n,s){t.mapTypes.set(String(s),n)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function zre(t){var{children:e,options:r,id:n,mapContainerStyle:s,mapContainerClassName:i,center:a,onClick:l,onDblClick:c,onDrag:d,onDragEnd:f,onDragStart:p,onMouseMove:m,onMouseOut:g,onMouseOver:y,onMouseDown:b,onMouseUp:x,onRightClick:j,onCenterChanged:S,onLoad:C,onUnmount:E}=t,[N,P]=w.useState(null),O=w.useRef(null),[L,A]=w.useState(null),[R,M]=w.useState(null),[D,B]=w.useState(null),[F,V]=w.useState(null),[J,G]=w.useState(null),[q,U]=w.useState(null),[W,I]=w.useState(null),[H,ne]=w.useState(null),[ge,K]=w.useState(null),[de,ue]=w.useState(null),[he,ce]=w.useState(null),[te,pe]=w.useState(null);return w.useEffect(()=>{r&&N!==null&&N.setOptions(r)},[N,r]),w.useEffect(()=>{N!==null&&typeof a<"u"&&N.setCenter(a)},[N,a]),w.useEffect(()=>{N&&c&&(R!==null&&google.maps.event.removeListener(R),M(google.maps.event.addListener(N,"dblclick",c)))},[c]),w.useEffect(()=>{N&&f&&(D!==null&&google.maps.event.removeListener(D),B(google.maps.event.addListener(N,"dragend",f)))},[f]),w.useEffect(()=>{N&&p&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(N,"dragstart",p)))},[p]),w.useEffect(()=>{N&&b&&(J!==null&&google.maps.event.removeListener(J),G(google.maps.event.addListener(N,"mousedown",b)))},[b]),w.useEffect(()=>{N&&m&&(q!==null&&google.maps.event.removeListener(q),U(google.maps.event.addListener(N,"mousemove",m)))},[m]),w.useEffect(()=>{N&&g&&(W!==null&&google.maps.event.removeListener(W),I(google.maps.event.addListener(N,"mouseout",g)))},[g]),w.useEffect(()=>{N&&y&&(H!==null&&google.maps.event.removeListener(H),ne(google.maps.event.addListener(N,"mouseover",y)))},[y]),w.useEffect(()=>{N&&x&&(ge!==null&&google.maps.event.removeListener(ge),K(google.maps.event.addListener(N,"mouseup",x)))},[x]),w.useEffect(()=>{N&&j&&(de!==null&&google.maps.event.removeListener(de),ue(google.maps.event.addListener(N,"rightclick",j)))},[j]),w.useEffect(()=>{N&&l&&(he!==null&&google.maps.event.removeListener(he),ce(google.maps.event.addListener(N,"click",l)))},[l]),w.useEffect(()=>{N&&d&&(te!==null&&google.maps.event.removeListener(te),pe(google.maps.event.addListener(N,"drag",d)))},[d]),w.useEffect(()=>{N&&S&&(L!==null&&google.maps.event.removeListener(L),A(google.maps.event.addListener(N,"center_changed",S)))},[l]),w.useEffect(()=>{var ae=O.current===null?null:new google.maps.Map(O.current,r);return P(ae),ae!==null&&C&&C(ae),()=>{ae!==null&&E&&E(ae)}},[]),o.jsx("div",{id:n,ref:O,style:s,className:i,children:o.jsx(dt.Provider,{value:N,children:N!==null?e:null})})}w.memo(zre);class IE extends w.PureComponent{constructor(){super(...arguments),fe(this,"state",{map:null}),fe(this,"registeredEvents",[]),fe(this,"mapRef",null),fe(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),fe(this,"panTo",e=>{var r=this.getInstance();r&&r.panTo(e)}),fe(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),fe(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=mt({updaterMap:_T,eventMap:wT,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:_T,eventMap:wT,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),vt(this.registeredEvents))}render(){return o.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:o.jsx(dt.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function jT(t,e,r,n,s,i,a){try{var l=t[i](a),c=l.value}catch(d){return void r(d)}l.done?e(c):Promise.resolve(c).then(n,s)}function cB(t){return function(){var e=this,r=arguments;return new Promise(function(n,s){var i=t.apply(e,r);function a(c){jT(i,n,s,a,l,"next",c)}function l(c){jT(i,n,s,a,l,"throw",c)}a(void 0)})}}function uB(t){var{googleMapsApiKey:e,googleMapsClientId:r,version:n="weekly",language:s,region:i,libraries:a,channel:l,mapIds:c,authReferrerPolicy:d}=t,f=[];return Rr(e&&r||!(e&&r),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?f.push("key=".concat(e)):r&&f.push("client=".concat(r)),n&&f.push("v=".concat(n)),s&&f.push("language=".concat(s)),i&&f.push("region=".concat(i)),a&&a.length&&f.push("libraries=".concat(a.sort().join(","))),l&&f.push("channel=".concat(l)),c&&c.length&&f.push("map_ids=".concat(c.join(","))),d&&f.push("auth_referrer_policy=".concat(d)),f.push("loading=async"),f.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(f.join("&"))}var al=typeof document<"u";function dB(t){var{url:e,id:r,nonce:n}=t;return al?new Promise(function(i,a){var l=document.getElementById(r),c=window;if(l){var d=l.getAttribute("data-state");if(l.src===e&&d!=="error"){if(d==="ready")return i(r);var f=c.initMap,p=l.onerror;c.initMap=function(){f&&f(),i(r)},l.onerror=function(g){p&&p(g),a(g)};return}else l.remove()}var m=document.createElement("script");m.type="text/javascript",m.src=e,m.id=r,m.async=!0,m.nonce=n||"",m.onerror=function(y){m.setAttribute("data-state","error"),a(y)},c.initMap=function(){m.setAttribute("data-state","ready"),i(r)},document.head.appendChild(m)}).catch(s=>{throw console.error("injectScript error: ",s),s}):Promise.reject(new Error("document is undefined"))}function ST(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function fB(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(s,i){return ST(s)||Reflect.apply(e,t,[s,i]),s};var r=t.appendChild.bind(t);t.appendChild=function(s){return ST(s)||Reflect.apply(r,t,[s]),s}}}var Td=!1;function hB(){return o.jsx("div",{children:"Loading..."})}var tS={id:"script-loader",version:"weekly"};class Ure extends w.PureComponent{constructor(){super(...arguments),fe(this,"check",null),fe(this,"state",{loaded:!1}),fe(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),fe(this,"isCleaningUp",cB(function*(){function e(r){if(!Td)r();else if(al)var n=window.setInterval(function(){Td||(window.clearInterval(n),r())},1)}return new Promise(e)})),fe(this,"cleanup",()=>{Td=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(n){return typeof n.src=="string"&&n.src.includes("maps.googleapis")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(n){return n.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(n){return n.innerText!==void 0&&n.innerText.length>0&&n.innerText.includes(".gm-")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)})}),fe(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&fB(),Rr(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:uB(this.props)};dB(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(r=>{this.props.onError&&this.props.onError(r),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),fe(this,"getRef",e=>{this.check=e})}componentDidMount(){if(al){if(window.google&&window.google.maps&&!Td){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(r){console.error("Error at injecting script after cleaning up: ",r)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),al&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(al){this.cleanup();var e=()=>{this.check||(delete window.google,Td=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||o.jsx(hB,{})]})}}fe(Ure,"defaultProps",tS);function qre(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;r[n]=t[n]}return r}function $E(t,e){if(t==null)return{};var r,n,s=qre(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.includes(r)||{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}var NT;function Zv(t){var{id:e=tS.id,version:r=tS.version,nonce:n,googleMapsApiKey:s,googleMapsClientId:i,language:a,region:l,libraries:c,preventGoogleFontsLoading:d,channel:f,mapIds:p,authReferrerPolicy:m}=t,g=w.useRef(!1),[y,b]=w.useState(!1),[x,j]=w.useState(void 0);w.useEffect(function(){return g.current=!0,()=>{g.current=!1}},[]),w.useEffect(function(){al&&d&&fB()},[d]),w.useEffect(function(){y&&Rr(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[y]);var S=uB({version:r,googleMapsApiKey:s,googleMapsClientId:i,language:a,region:l,libraries:c,channel:f,mapIds:p,authReferrerPolicy:m});w.useEffect(function(){if(!al)return;function N(){g.current&&(b(!0),NT=S)}if(window.google&&window.google.maps&&NT===S){N();return}dB({id:e,url:S,nonce:n}).then(N).catch(function(O){g.current&&j(O),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(s||"-",") or Client ID (").concat(i||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(O)})},[e,S,n]);var C=w.useRef(void 0);return w.useEffect(function(){C.current&&c!==C.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),C.current=c},[c]),{isLoaded:y,loadError:x,url:S}}var Vre=["loadingElement","onLoad","onError","onUnmount","children"],Wre=o.jsx(hB,{});function Hre(t){var{loadingElement:e,onLoad:r,onError:n,onUnmount:s,children:i}=t,a=$E(t,Vre),{isLoaded:l,loadError:c}=Zv(a);return w.useEffect(function(){l&&typeof r=="function"&&r()},[l,r]),w.useEffect(function(){c&&typeof n=="function"&&n(c)},[c,n]),w.useEffect(function(){return()=>{s&&s()}},[s]),l?i:e||Wre}w.memo(Hre);var ET;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(ET||(ET={}));function CT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function gg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CT(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var kT={},PT={options(t,e){t.setOptions(e)}};function Gre(t){var{options:e,onLoad:r,onUnmount:n}=t,s=w.useContext(dt),[i,a]=w.useState(null);return w.useEffect(()=>{i!==null&&i.setMap(s)},[s]),w.useEffect(()=>{e&&i!==null&&i.setOptions(e)},[i,e]),w.useEffect(()=>{var l=new google.maps.TrafficLayer(gg(gg({},e),{},{map:s}));return a(l),r&&r(l),()=>{i!==null&&(n&&n(i),i.setMap(null))}},[]),null}w.memo(Gre);class Kre extends w.PureComponent{constructor(){super(...arguments),fe(this,"state",{trafficLayer:null}),fe(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),fe(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(gg(gg({},this.props.options),{},{map:this.context}));this.registeredEvents=mt({updaterMap:PT,eventMap:kT,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:PT,eventMap:kT,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),vt(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}fe(Kre,"contextType",dt);function Zre(t){var{onLoad:e,onUnmount:r}=t,n=w.useContext(dt),[s,i]=w.useState(null);return w.useEffect(()=>{s!==null&&s.setMap(n)},[n]),w.useEffect(()=>{var a=new google.maps.BicyclingLayer;return i(a),a.setMap(n),e&&e(a),()=>{a!==null&&(r&&r(a),a.setMap(null))}},[]),null}w.memo(Zre);class Xre extends w.PureComponent{constructor(){super(...arguments),fe(this,"state",{bicyclingLayer:null}),fe(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}fe(Xre,"contextType",dt);function Yre(t){var{onLoad:e,onUnmount:r}=t,n=w.useContext(dt),[s,i]=w.useState(null);return w.useEffect(()=>{s!==null&&s.setMap(n)},[n]),w.useEffect(()=>{var a=new google.maps.TransitLayer;return i(a),a.setMap(n),e&&e(a),()=>{s!==null&&(r&&r(s),s.setMap(null))}},[]),null}w.memo(Yre);class Jre extends w.PureComponent{constructor(){super(...arguments),fe(this,"state",{transitLayer:null}),fe(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}fe(Jre,"contextType",dt);function OT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function vg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OT(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var AT={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},TT={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function Qre(t){var{options:e,drawingMode:r,onCircleComplete:n,onMarkerComplete:s,onOverlayComplete:i,onPolygonComplete:a,onPolylineComplete:l,onRectangleComplete:c,onLoad:d,onUnmount:f}=t,p=w.useContext(dt),[m,g]=w.useState(null),[y,b]=w.useState(null),[x,j]=w.useState(null),[S,C]=w.useState(null),[E,N]=w.useState(null),[P,O]=w.useState(null),[L,A]=w.useState(null);return w.useEffect(()=>{m!==null&&m.setMap(p)},[p]),w.useEffect(()=>{e&&m!==null&&m.setOptions(e)},[m,e]),w.useEffect(()=>{m!==null&&m.setDrawingMode(r??null)},[m,r]),w.useEffect(()=>{m&&n&&(y!==null&&google.maps.event.removeListener(y),b(google.maps.event.addListener(m,"circlecomplete",n)))},[m,n]),w.useEffect(()=>{m&&s&&(x!==null&&google.maps.event.removeListener(x),j(google.maps.event.addListener(m,"markercomplete",s)))},[m,s]),w.useEffect(()=>{m&&i&&(S!==null&&google.maps.event.removeListener(S),C(google.maps.event.addListener(m,"overlaycomplete",i)))},[m,i]),w.useEffect(()=>{m&&a&&(E!==null&&google.maps.event.removeListener(E),N(google.maps.event.addListener(m,"polygoncomplete",a)))},[m,a]),w.useEffect(()=>{m&&l&&(P!==null&&google.maps.event.removeListener(P),O(google.maps.event.addListener(m,"polylinecomplete",l)))},[m,l]),w.useEffect(()=>{m&&c&&(L!==null&&google.maps.event.removeListener(L),A(google.maps.event.addListener(m,"rectanglecomplete",c)))},[m,c]),w.useEffect(()=>{Rr(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var R=new google.maps.drawing.DrawingManager(vg(vg({},e),{},{map:p}));return r&&R.setDrawingMode(r),n&&b(google.maps.event.addListener(R,"circlecomplete",n)),s&&j(google.maps.event.addListener(R,"markercomplete",s)),i&&C(google.maps.event.addListener(R,"overlaycomplete",i)),a&&N(google.maps.event.addListener(R,"polygoncomplete",a)),l&&O(google.maps.event.addListener(R,"polylinecomplete",l)),c&&A(google.maps.event.addListener(R,"rectanglecomplete",c)),g(R),d&&d(R),()=>{m!==null&&(y&&google.maps.event.removeListener(y),x&&google.maps.event.removeListener(x),S&&google.maps.event.removeListener(S),E&&google.maps.event.removeListener(E),P&&google.maps.event.removeListener(P),L&&google.maps.event.removeListener(L),f&&f(m),m.setMap(null))}},[]),null}w.memo(Qre);class ene extends w.PureComponent{constructor(e){super(e),fe(this,"registeredEvents",[]),fe(this,"state",{drawingManager:null}),fe(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Rr(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(vg(vg({},this.props.options),{},{map:this.context}));this.registeredEvents=mt({updaterMap:TT,eventMap:AT,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:TT,eventMap:AT,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),vt(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}fe(ene,"contextType",dt);function LT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Lc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LT(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var MT={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},RT={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},yg={};function tne(t){var{position:e,options:r,clusterer:n,noClustererRedraw:s,children:i,draggable:a,visible:l,animation:c,clickable:d,cursor:f,icon:p,label:m,opacity:g,shape:y,title:b,zIndex:x,onClick:j,onDblClick:S,onDrag:C,onDragEnd:E,onDragStart:N,onMouseOut:P,onMouseOver:O,onMouseUp:L,onMouseDown:A,onRightClick:R,onClickableChanged:M,onCursorChanged:D,onAnimationChanged:B,onDraggableChanged:F,onFlatChanged:V,onIconChanged:J,onPositionChanged:G,onShapeChanged:q,onTitleChanged:U,onVisibleChanged:W,onZindexChanged:I,onLoad:H,onUnmount:ne}=t,ge=w.useContext(dt),[K,de]=w.useState(null),[ue,he]=w.useState(null),[ce,te]=w.useState(null),[pe,ae]=w.useState(null),[Oe,Ee]=w.useState(null),[ke,We]=w.useState(null),[St,fr]=w.useState(null),[ir,Bt]=w.useState(null),[Tt,Q]=w.useState(null),[ie,Z]=w.useState(null),[ye,Pe]=w.useState(null),[xe,Te]=w.useState(null),[nt,Nt]=w.useState(null),[yt,Ri]=w.useState(null),[$n,Ts]=w.useState(null),[os,ls]=w.useState(null),[cs,us]=w.useState(null),[li,ba]=w.useState(null),[Ls,zt]=w.useState(null),[gr,kr]=w.useState(null),[rn,Ir]=w.useState(null),[vr,Xr]=w.useState(null);w.useEffect(()=>{K!==null&&K.setMap(ge)},[ge]),w.useEffect(()=>{typeof r<"u"&&K!==null&&K.setOptions(r)},[K,r]),w.useEffect(()=>{typeof a<"u"&&K!==null&&K.setDraggable(a)},[K,a]),w.useEffect(()=>{e&&K!==null&&K.setPosition(e)},[K,e]),w.useEffect(()=>{typeof l<"u"&&K!==null&&K.setVisible(l)},[K,l]),w.useEffect(()=>{K?.setAnimation(c)},[K,c]),w.useEffect(()=>{K&&d!==void 0&&K.setClickable(d)},[K,d]),w.useEffect(()=>{K&&f!==void 0&&K.setCursor(f)},[K,f]),w.useEffect(()=>{K&&p!==void 0&&K.setIcon(p)},[K,p]),w.useEffect(()=>{K&&m!==void 0&&K.setLabel(m)},[K,m]),w.useEffect(()=>{K&&g!==void 0&&K.setOpacity(g)},[K,g]),w.useEffect(()=>{K&&y!==void 0&&K.setShape(y)},[K,y]),w.useEffect(()=>{K&&b!==void 0&&K.setTitle(b)},[K,b]),w.useEffect(()=>{K&&x!==void 0&&K.setZIndex(x)},[K,x]),w.useEffect(()=>{K&&S&&(ue!==null&&google.maps.event.removeListener(ue),he(google.maps.event.addListener(K,"dblclick",S)))},[S]),w.useEffect(()=>{K&&E&&(ce!==null&&google.maps.event.removeListener(ce),te(google.maps.event.addListener(K,"dragend",E)))},[E]),w.useEffect(()=>{K&&N&&(pe!==null&&google.maps.event.removeListener(pe),ae(google.maps.event.addListener(K,"dragstart",N)))},[N]),w.useEffect(()=>{K&&A&&(Oe!==null&&google.maps.event.removeListener(Oe),Ee(google.maps.event.addListener(K,"mousedown",A)))},[A]),w.useEffect(()=>{K&&P&&(ke!==null&&google.maps.event.removeListener(ke),We(google.maps.event.addListener(K,"mouseout",P)))},[P]),w.useEffect(()=>{K&&O&&(St!==null&&google.maps.event.removeListener(St),fr(google.maps.event.addListener(K,"mouseover",O)))},[O]),w.useEffect(()=>{K&&L&&(ir!==null&&google.maps.event.removeListener(ir),Bt(google.maps.event.addListener(K,"mouseup",L)))},[L]),w.useEffect(()=>{K&&R&&(Tt!==null&&google.maps.event.removeListener(Tt),Q(google.maps.event.addListener(K,"rightclick",R)))},[R]),w.useEffect(()=>{K&&j&&(ie!==null&&google.maps.event.removeListener(ie),Z(google.maps.event.addListener(K,"click",j)))},[j]),w.useEffect(()=>{K&&C&&(ye!==null&&google.maps.event.removeListener(ye),Pe(google.maps.event.addListener(K,"drag",C)))},[C]),w.useEffect(()=>{K&&M&&(xe!==null&&google.maps.event.removeListener(xe),Te(google.maps.event.addListener(K,"clickable_changed",M)))},[M]),w.useEffect(()=>{K&&D&&(nt!==null&&google.maps.event.removeListener(nt),Nt(google.maps.event.addListener(K,"cursor_changed",D)))},[D]),w.useEffect(()=>{K&&B&&(yt!==null&&google.maps.event.removeListener(yt),Ri(google.maps.event.addListener(K,"animation_changed",B)))},[B]),w.useEffect(()=>{K&&F&&($n!==null&&google.maps.event.removeListener($n),Ts(google.maps.event.addListener(K,"draggable_changed",F)))},[F]),w.useEffect(()=>{K&&V&&(os!==null&&google.maps.event.removeListener(os),ls(google.maps.event.addListener(K,"flat_changed",V)))},[V]),w.useEffect(()=>{K&&J&&(cs!==null&&google.maps.event.removeListener(cs),us(google.maps.event.addListener(K,"icon_changed",J)))},[J]),w.useEffect(()=>{K&&G&&(li!==null&&google.maps.event.removeListener(li),ba(google.maps.event.addListener(K,"position_changed",G)))},[G]),w.useEffect(()=>{K&&q&&(Ls!==null&&google.maps.event.removeListener(Ls),zt(google.maps.event.addListener(K,"shape_changed",q)))},[q]),w.useEffect(()=>{K&&U&&(gr!==null&&google.maps.event.removeListener(gr),kr(google.maps.event.addListener(K,"title_changed",U)))},[U]),w.useEffect(()=>{K&&W&&(rn!==null&&google.maps.event.removeListener(rn),Ir(google.maps.event.addListener(K,"visible_changed",W)))},[W]),w.useEffect(()=>{K&&I&&(vr!==null&&google.maps.event.removeListener(vr),Xr(google.maps.event.addListener(K,"zindex_changed",I)))},[I]),w.useEffect(()=>{var Lt=Lc(Lc(Lc({},r||yg),n?yg:{map:ge}),{},{position:e}),He=new google.maps.Marker(Lt);return n?n.addMarker(He,!!s):He.setMap(ge),e&&He.setPosition(e),typeof l<"u"&&He.setVisible(l),typeof a<"u"&&He.setDraggable(a),typeof d<"u"&&He.setClickable(d),typeof f=="string"&&He.setCursor(f),p&&He.setIcon(p),typeof m<"u"&&He.setLabel(m),typeof g<"u"&&He.setOpacity(g),y&&He.setShape(y),typeof b=="string"&&He.setTitle(b),typeof x=="number"&&He.setZIndex(x),S&&he(google.maps.event.addListener(He,"dblclick",S)),E&&te(google.maps.event.addListener(He,"dragend",E)),N&&ae(google.maps.event.addListener(He,"dragstart",N)),A&&Ee(google.maps.event.addListener(He,"mousedown",A)),P&&We(google.maps.event.addListener(He,"mouseout",P)),O&&fr(google.maps.event.addListener(He,"mouseover",O)),L&&Bt(google.maps.event.addListener(He,"mouseup",L)),R&&Q(google.maps.event.addListener(He,"rightclick",R)),j&&Z(google.maps.event.addListener(He,"click",j)),C&&Pe(google.maps.event.addListener(He,"drag",C)),M&&Te(google.maps.event.addListener(He,"clickable_changed",M)),D&&Nt(google.maps.event.addListener(He,"cursor_changed",D)),B&&Ri(google.maps.event.addListener(He,"animation_changed",B)),F&&Ts(google.maps.event.addListener(He,"draggable_changed",F)),V&&ls(google.maps.event.addListener(He,"flat_changed",V)),J&&us(google.maps.event.addListener(He,"icon_changed",J)),G&&ba(google.maps.event.addListener(He,"position_changed",G)),q&&zt(google.maps.event.addListener(He,"shape_changed",q)),U&&kr(google.maps.event.addListener(He,"title_changed",U)),W&&Ir(google.maps.event.addListener(He,"visible_changed",W)),I&&Xr(google.maps.event.addListener(He,"zindex_changed",I)),de(He),H&&H(He),()=>{ue!==null&&google.maps.event.removeListener(ue),ce!==null&&google.maps.event.removeListener(ce),pe!==null&&google.maps.event.removeListener(pe),Oe!==null&&google.maps.event.removeListener(Oe),ke!==null&&google.maps.event.removeListener(ke),St!==null&&google.maps.event.removeListener(St),ir!==null&&google.maps.event.removeListener(ir),Tt!==null&&google.maps.event.removeListener(Tt),ie!==null&&google.maps.event.removeListener(ie),xe!==null&&google.maps.event.removeListener(xe),nt!==null&&google.maps.event.removeListener(nt),yt!==null&&google.maps.event.removeListener(yt),$n!==null&&google.maps.event.removeListener($n),os!==null&&google.maps.event.removeListener(os),cs!==null&&google.maps.event.removeListener(cs),li!==null&&google.maps.event.removeListener(li),gr!==null&&google.maps.event.removeListener(gr),rn!==null&&google.maps.event.removeListener(rn),vr!==null&&google.maps.event.removeListener(vr),ne&&ne(He),n?n.removeMarker(He,!!s):He&&He.setMap(null)}},[]);var Ms=w.useMemo(()=>i?w.Children.map(i,Lt=>{if(!w.isValidElement(Lt))return Lt;var He=Lt;return w.cloneElement(He,{anchor:K})}):null,[i,K]);return o.jsx(o.Fragment,{children:Ms})||null}var rS=w.memo(tne);class pB extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[])}componentDidMount(){var e=this;return cB(function*(){var r=Lc(Lc(Lc({},e.props.options||yg),e.props.clusterer?yg:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(r),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=mt({updaterMap:RT,eventMap:MT,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:RT,eventMap:MT,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),vt(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?w.Children.map(this.props.children,r=>{if(!w.isValidElement(r))return r;var n=r;return w.cloneElement(n,{anchor:this.marker})}):null;return e||null}}fe(pB,"contextType",dt);var rne=function(){function t(e,r){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=r,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var r=this.cluster.getClusterer();if(google.maps.event.trigger(r,"click",this.cluster),google.maps.event.trigger(r,"clusterclick",this.cluster),r.getZoomOnClick()){var n=r.getMaxZoom(),s=this.cluster.getBounds(),i=r.getMap();i!==null&&"fitBounds"in i&&i.fitBounds(s),this.timeOut=window.setTimeout(function(){var a=r.getMap();if(a!==null){"fitBounds"in a&&a.fitBounds(s);var l=a.getZoom()||0;n!==null&&l>n&&a.setZoom(n+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var r=this.getMap();r!==null&&(this.boundsChangedListener=google.maps.event.addListener(r,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,r,n,s,i,a;if(this.div&&this.center){var l=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,c=this.backgroundPosition.split(" "),d=parseInt(((e=c[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),f=parseInt(((r=c[1])===null||r===void 0?void 0:r.replace(/^\s+|\s+$/g,""))||"0",10),p=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(p!==null?"".concat(p.y,"px"):"0","; left: ").concat(p!==null?"".concat(p.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var m=document.createElement("img");m.alt=l,m.src=this.url,m.width=this.width,m.height=this.height,m.setAttribute("style","position: absolute; top: ".concat(f,"px; left: ").concat(d,"px")),this.cluster.getClusterer().enableRetinaIcons||(m.style.clip="rect(-".concat(f,"px, -").concat(d+this.width,"px, -").concat(f+this.height,", -").concat(d,")"));var g=document.createElement("div");g.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((n=this.sums)===null||n===void 0)&&n.text&&(g.innerText="".concat((s=this.sums)===null||s===void 0?void 0:s.text)),!((i=this.sums)===null||i===void 0)&&i.html&&(g.innerHTML="".concat((a=this.sums)===null||a===void 0?void 0:a.html)),this.div.innerHTML="",this.div.appendChild(m),this.div.appendChild(g),this.div.title=l,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var r=this.cluster.getClusterer().getStyles(),n=r[Math.min(r.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var r=this.getProjection().fromLatLngToDivPixel(e);return r!==null&&(r.x-=this.anchorIcon[1],r.y-=this.anchorIcon[0]),r},t}(),nne=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new rne(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),r=this.getMarkers(),n=0,s=r;n<s.length;n++){var i=s[n],a=i.getPosition();a&&e.extend(a)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var r;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var n=e.getPosition();if(n){var s=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(s-1)+n.lat())/s,(this.center.lng()*(s-1)+n.lng())/s),this.calculateBounds()}}}else{var n=e.getPosition();n&&(this.center=n,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var i=this.markers.length,a=this.markerClusterer.getMaxZoom(),l=(r=this.map)===null||r===void 0?void 0:r.getZoom();if(a!==null&&typeof l<"u"&&l>a)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var c=0,d=this.markers;c<d.length;c++){var f=d[c];f.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var r=e.getPosition();if(r)return this.bounds.contains(r)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,r=this.markers.length,n=this.markerClusterer.getMaxZoom(),s=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(n!==null&&typeof s<"u"&&s>n){this.clusterIcon.hide();return}if(r<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var r=0;r<this.markers.length;r++)if(e===this.markers[r])return!0;return!1},t}();function sne(t,e){var r=t.length,n=r.toString().length,s=Math.min(n,e);return{text:r.toString(),index:s,title:""}}var ine=2e3,ane=500,one="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",lne="png",cne=[53,56,66,78,90],une="cluster",mB=function(){function t(e,r,n){r===void 0&&(r=[]),n===void 0&&(n={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=n.gridSize||60,this.minClusterSize=n.minimumClusterSize||2,this.maxZoom=n.maxZoom||null,this.styles=n.styles||[],this.title=n.title||"",this.zoomOnClick=!0,n.zoomOnClick!==void 0&&(this.zoomOnClick=n.zoomOnClick),this.averageCenter=!1,n.averageCenter!==void 0&&(this.averageCenter=n.averageCenter),this.ignoreHidden=!1,n.ignoreHidden!==void 0&&(this.ignoreHidden=n.ignoreHidden),this.enableRetinaIcons=!1,n.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=n.enableRetinaIcons),this.imagePath=n.imagePath||one,this.imageExtension=n.imageExtension||lne,this.imageSizes=n.imageSizes||cne,this.calculator=n.calculator||sne,this.batchSize=n.batchSize||ine,this.batchSizeIE=n.batchSizeIE||ane,this.clusterClass=n.clusterClass||une,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(r,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,r;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((r=this.getMap())===null||r===void 0?void 0:r.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,r=this.markers;e<r.length;e++){var n=r[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var s=0,i=this.clusters;s<i.length;s++){var a=i[s];a.remove()}this.clusters=[];for(var l=0,c=this.listeners;l<c.length;l++){var d=c[l];google.maps.event.removeListener(d)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),r=new google.maps.LatLngBounds,n=0,s=e;n<s.length;n++){var i=s[n],a=i.getPosition();a&&r.extend(a)}var l=this.getMap();l!==null&&"fitBounds"in l&&l.fitBounds(r)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,r){this.pushMarkerTo(e),r||this.redraw()},t.prototype.addMarkers=function(e,r){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=e[n];s&&this.pushMarkerTo(s)}r||this.redraw()},t.prototype.pushMarkerTo=function(e){var r=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){r.ready&&(e.isAdded=!1,r.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var r=-1;if(this.markers.indexOf)r=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){r=n;break}return r===-1?!1:(e.setMap(null),this.markers.splice(r,1),!0)},t.prototype.removeMarker=function(e,r){var n=this.removeMarker_(e);return!r&&n&&this.repaint(),n},t.prototype.removeMarkers=function(e,r){for(var n=!1,s=0,i=e;s<i.length;s++){var a=i[s];n=n||this.removeMarker_(a)}return!r&&n&&this.repaint(),n},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var n=0,s=e;n<s.length;n++){var i=s[n];i.remove()}},0)},t.prototype.getExtendedBounds=function(e){var r=this.getProjection(),n=r.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));n!==null&&(n.x+=this.gridSize,n.y-=this.gridSize);var s=r.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(s!==null&&(s.x-=this.gridSize,s.y+=this.gridSize),n!==null){var i=r.fromDivPixelToLatLng(n);i!==null&&e.extend(i)}if(s!==null){var a=r.fromDivPixelToLatLng(s);a!==null&&e.extend(a)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var r=0,n=this.clusters;r<n.length;r++){var s=n[r];s.remove()}this.clusters=[];for(var i=0,a=this.markers;i<a.length;i++){var l=a[i];l.isAdded=!1,e&&l.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,r){var n=6371,s=(r.lat()-e.lat())*Math.PI/180,i=(r.lng()-e.lng())*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(r.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return n*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},t.prototype.isMarkerInBounds=function(e,r){var n=e.getPosition();return n?r.contains(n):!1},t.prototype.addToClosestCluster=function(e){for(var r,n=4e4,s=null,i=0,a=this.clusters;i<a.length;i++){var l=a[i];r=l;var c=r.getCenter(),d=e.getPosition();if(c&&d){var f=this.distanceBetweenPoints(c,d);f<n&&(n=f,s=r)}}s&&s.isMarkerInClusterBounds(e)?s.addMarker(e):(r=new nne(this),r.addMarker(e),this.clusters.push(r))},t.prototype.createClusters=function(e){var r=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),s=n!==null&&("getBounds"in n)?n.getBounds():null,i=n?.getZoom()||0,a=i>3?new google.maps.LatLngBounds(s?.getSouthWest(),s?.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),l=this.getExtendedBounds(a),c=Math.min(e+this.batchSize,this.markers.length),d=e;d<c;d++){var f=this.markers[d];f&&!f.isAdded&&this.isMarkerInBounds(f,l)&&(!this.ignoreHidden||this.ignoreHidden&&f.getVisible())&&this.addToClosestCluster(f)}if(c<this.markers.length)this.timerRefStatic=window.setTimeout(function(){r.createClusters(c)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var p=0,m=this.clusters;p<m.length;p++){var g=m[p];g.updateIcon()}}}},t.prototype.extend=function(e,r){return function(s){for(var i in s.prototype){var a=i;this.prototype[a]=s.prototype[a]}return this}.apply(e,[r])},t}();function DT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function dne(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DT(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var js={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Ct={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},fne={};function hne(t){var{children:e,options:r,averageCenter:n,batchSizeIE:s,calculator:i,clusterClass:a,enableRetinaIcons:l,gridSize:c,ignoreHidden:d,imageExtension:f,imagePath:p,imageSizes:m,maxZoom:g,minimumClusterSize:y,styles:b,title:x,zoomOnClick:j,onClick:S,onClusteringBegin:C,onClusteringEnd:E,onMouseOver:N,onMouseOut:P,onLoad:O,onUnmount:L}=t,[A,R]=w.useState(null),M=w.useContext(dt),[D,B]=w.useState(null),[F,V]=w.useState(null),[J,G]=w.useState(null),[q,U]=w.useState(null),[W,I]=w.useState(null);return w.useEffect(()=>{A&&P&&(q!==null&&google.maps.event.removeListener(q),U(google.maps.event.addListener(A,js.onMouseOut,P)))},[P]),w.useEffect(()=>{A&&N&&(W!==null&&google.maps.event.removeListener(W),I(google.maps.event.addListener(A,js.onMouseOver,N)))},[N]),w.useEffect(()=>{A&&S&&(D!==null&&google.maps.event.removeListener(D),B(google.maps.event.addListener(A,js.onClick,S)))},[S]),w.useEffect(()=>{A&&C&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(A,js.onClusteringBegin,C)))},[C]),w.useEffect(()=>{A&&E&&(J!==null&&google.maps.event.removeListener(J),V(google.maps.event.addListener(A,js.onClusteringEnd,E)))},[E]),w.useEffect(()=>{typeof n<"u"&&A!==null&&Ct.averageCenter(A,n)},[A,n]),w.useEffect(()=>{typeof s<"u"&&A!==null&&Ct.batchSizeIE(A,s)},[A,s]),w.useEffect(()=>{typeof i<"u"&&A!==null&&Ct.calculator(A,i)},[A,i]),w.useEffect(()=>{typeof a<"u"&&A!==null&&Ct.clusterClass(A,a)},[A,a]),w.useEffect(()=>{typeof l<"u"&&A!==null&&Ct.enableRetinaIcons(A,l)},[A,l]),w.useEffect(()=>{typeof c<"u"&&A!==null&&Ct.gridSize(A,c)},[A,c]),w.useEffect(()=>{typeof d<"u"&&A!==null&&Ct.ignoreHidden(A,d)},[A,d]),w.useEffect(()=>{typeof f<"u"&&A!==null&&Ct.imageExtension(A,f)},[A,f]),w.useEffect(()=>{typeof p<"u"&&A!==null&&Ct.imagePath(A,p)},[A,p]),w.useEffect(()=>{typeof m<"u"&&A!==null&&Ct.imageSizes(A,m)},[A,m]),w.useEffect(()=>{typeof g<"u"&&A!==null&&Ct.maxZoom(A,g)},[A,g]),w.useEffect(()=>{typeof y<"u"&&A!==null&&Ct.minimumClusterSize(A,y)},[A,y]),w.useEffect(()=>{typeof b<"u"&&A!==null&&Ct.styles(A,b)},[A,b]),w.useEffect(()=>{typeof x<"u"&&A!==null&&Ct.title(A,x)},[A,x]),w.useEffect(()=>{typeof j<"u"&&A!==null&&Ct.zoomOnClick(A,j)},[A,j]),w.useEffect(()=>{if(M){var H=dne({},r||fne),ne=new mB(M,[],H);return n&&Ct.averageCenter(ne,n),s&&Ct.batchSizeIE(ne,s),i&&Ct.calculator(ne,i),a&&Ct.clusterClass(ne,a),l&&Ct.enableRetinaIcons(ne,l),c&&Ct.gridSize(ne,c),d&&Ct.ignoreHidden(ne,d),f&&Ct.imageExtension(ne,f),p&&Ct.imagePath(ne,p),m&&Ct.imageSizes(ne,m),g&&Ct.maxZoom(ne,g),y&&Ct.minimumClusterSize(ne,y),b&&Ct.styles(ne,b),x&&Ct.title(ne,x),j&&Ct.zoomOnClick(ne,j),P&&U(google.maps.event.addListener(ne,js.onMouseOut,P)),N&&I(google.maps.event.addListener(ne,js.onMouseOver,N)),S&&B(google.maps.event.addListener(ne,js.onClick,S)),C&&V(google.maps.event.addListener(ne,js.onClusteringBegin,C)),E&&G(google.maps.event.addListener(ne,js.onClusteringEnd,E)),R(ne),O&&O(ne),()=>{q!==null&&google.maps.event.removeListener(q),W!==null&&google.maps.event.removeListener(W),D!==null&&google.maps.event.removeListener(D),F!==null&&google.maps.event.removeListener(F),J!==null&&google.maps.event.removeListener(J),L&&L(ne)}}},[]),A!==null&&e(A)||null}w.memo(hne);class pne extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{markerClusterer:null}),fe(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new mB(this.context,[],this.props.options);this.registeredEvents=mt({updaterMap:Ct,eventMap:js,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:Ct,eventMap:js,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),vt(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}fe(pne,"contextType",dt);function IT(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var gB=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,r=function(f){f.returnValue=!1,f.preventDefault&&f.preventDefault(),e.enableEventPropagation||IT(f)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var n=this.getPanes();if(n!==null&&n[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],a=0,l=i;a<l.length;a++){var c=l[a];this.eventListeners.push(google.maps.event.addListener(this.div,c,IT))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",r),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var r=this.getMap();if(r instanceof google.maps.Map){var n=0,s=0,i=r.getBounds();i&&!i.contains(this.position)&&r.setCenter(this.position);var a=r.getDiv(),l=a.offsetWidth,c=a.offsetHeight,d=this.pixelOffset.width,f=this.pixelOffset.height,p=this.div.offsetWidth,m=this.div.offsetHeight,g=this.infoBoxClearance.width,y=this.infoBoxClearance.height,b=this.getProjection(),x=b.fromLatLngToContainerPixel(this.position);x!==null&&(x.x<-d+g?n=x.x+d-g:x.x+p+d+g>l&&(n=x.x+p+d+g-l),this.alignBottom?x.y<-f+y+m?s=x.y+f-y-m:x.y+f+y>c&&(s=x.y+f+y-c):x.y<-f+y?s=x.y+f-y:x.y+m+f+y>c&&(s=x.y+m+f+y-c)),n===0&&s===0||r.panBy(n,s)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.div.style[r]=e[r]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+n*100+')"',this.div.style.filter="alpha(opacity="+n*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var r=this.div.ownerDocument,n=r&&r.defaultView?r.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var s=this.div.currentStyle;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),r=e.fromLatLngToDivPixel(this.position);r!==null&&(this.div.style.left=r.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(r.y+this.pixelOffset.height)+"px":this.div.style.top=r.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,r){var n=this;r&&(this.position=r.getPosition(),this.moveListener=google.maps.event.addListener(r,"position_changed",function(){var s=r.getPosition();n.setPosition(s)}),this.mapListener=google.maps.event.addListener(r,"map_changed",function(){n.setMap(r.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,r=this.eventListeners;e<r.length;e++){var n=r[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,r){return function(s){for(var i in s.prototype)Object.prototype.hasOwnProperty.call(this,i)||(this.prototype[i]=s.prototype[i]);return this}.apply(e,[r])},t}(),mne=["position"],gne=["position"];function $T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function xg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$T(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$T(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var FT={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},BT={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},vne={};function yne(t){var{children:e,anchor:r,options:n,position:s,zIndex:i,onCloseClick:a,onDomReady:l,onContentChanged:c,onPositionChanged:d,onZindexChanged:f,onLoad:p,onUnmount:m}=t,g=w.useContext(dt),[y,b]=w.useState(null),[x,j]=w.useState(null),[S,C]=w.useState(null),[E,N]=w.useState(null),[P,O]=w.useState(null),[L,A]=w.useState(null),R=w.useRef(null);return w.useEffect(()=>{g&&y!==null&&(y.close(),r?y.open(g,r):y.getPosition()&&y.open(g))},[g,y,r]),w.useEffect(()=>{n&&y!==null&&y.setOptions(n)},[y,n]),w.useEffect(()=>{if(s&&y!==null){var M=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng);y.setPosition(M)}},[s]),w.useEffect(()=>{typeof i=="number"&&y!==null&&y.setZIndex(i)},[i]),w.useEffect(()=>{y&&a&&(x!==null&&google.maps.event.removeListener(x),j(google.maps.event.addListener(y,"closeclick",a)))},[a]),w.useEffect(()=>{y&&l&&(S!==null&&google.maps.event.removeListener(S),C(google.maps.event.addListener(y,"domready",l)))},[l]),w.useEffect(()=>{y&&c&&(E!==null&&google.maps.event.removeListener(E),N(google.maps.event.addListener(y,"content_changed",c)))},[c]),w.useEffect(()=>{y&&d&&(P!==null&&google.maps.event.removeListener(P),O(google.maps.event.addListener(y,"position_changed",d)))},[d]),w.useEffect(()=>{y&&f&&(L!==null&&google.maps.event.removeListener(L),A(google.maps.event.addListener(y,"zindex_changed",f)))},[f]),w.useEffect(()=>{if(g){var M=n||vne,{position:D}=M,B=$E(M,mne),F;D&&!(D instanceof google.maps.LatLng)&&(F=new google.maps.LatLng(D.lat,D.lng));var V=new gB(xg(xg({},B),F?{position:F}:{}));R.current=document.createElement("div"),b(V),a&&j(google.maps.event.addListener(V,"closeclick",a)),l&&C(google.maps.event.addListener(V,"domready",l)),c&&N(google.maps.event.addListener(V,"content_changed",c)),d&&O(google.maps.event.addListener(V,"position_changed",d)),f&&A(google.maps.event.addListener(V,"zindex_changed",f)),V.setContent(R.current),r?V.open(g,r):V.getPosition()?V.open(g):Rr(!1,"You must provide either an anchor or a position prop for <InfoBox>."),p&&p(V)}return()=>{y!==null&&(x&&google.maps.event.removeListener(x),E&&google.maps.event.removeListener(E),S&&google.maps.event.removeListener(S),P&&google.maps.event.removeListener(P),L&&google.maps.event.removeListener(L),m&&m(y),y.close())}},[]),R.current?Js.createPortal(w.Children.only(e),R.current):null}w.memo(yne);class xne extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"containerElement",null),fe(this,"state",{infoBox:null}),fe(this,"open",(e,r)=>{r?this.context!==null&&e.open(this.context,r):e.getPosition()?this.context!==null&&e.open(this.context):Rr(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),fe(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:r}=e,n=$E(e,gne),s;r&&!(r instanceof google.maps.LatLng)&&(s=new google.maps.LatLng(r.lat,r.lng));var i=new gB(xg(xg({},n),s?{position:s}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=mt({updaterMap:BT,eventMap:FT,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:r}=this.state;r!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:BT,eventMap:FT,prevProps:e,nextProps:this.props,instance:r}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:r}=this.state;r!==null&&(e&&e(r),vt(this.registeredEvents),r.close())}render(){return this.containerElement?Js.createPortal(w.Children.only(this.props.children),this.containerElement):null}}fe(xne,"contextType",dt);var rb,zT;function bne(){return zT||(zT=1,rb=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var a=i[s];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}),rb}var wne=bne(),UT=lB(wne),qT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],nb=1,Ld=8;class FE{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[r,n]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");var s=n>>4;if(s!==nb)throw new Error("Got v".concat(s," data when expected v").concat(nb,"."));var i=qT[n&15];if(!i)throw new Error("Unrecognized array type.");var[a]=new Uint16Array(e,2,1),[l]=new Uint32Array(e,4,1);return new FE(l,a,i,e)}constructor(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,s=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var i=qT.indexOf(this.ArrayType),a=e*2*this.ArrayType.BYTES_PER_ELEMENT,l=e*this.IndexArrayType.BYTES_PER_ELEMENT,c=(8-l%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(n,"."));s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,Ld,e),this.coords=new this.ArrayType(this.data,Ld+l+c,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Ld+a+l+c),this.ids=new this.IndexArrayType(this.data,Ld,e),this.coords=new this.ArrayType(this.data,Ld+l+c,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(nb<<4)+i]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=r,n}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return nS(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:a,nodeSize:l}=this,c=[0,i.length-1,0],d=[];c.length;){var f=c.pop()||0,p=c.pop()||0,m=c.pop()||0;if(p-m<=l){for(var g=m;g<=p;g++){var y=a[2*g],b=a[2*g+1];y>=e&&y<=n&&b>=r&&b<=s&&d.push(i[g])}continue}var x=m+p>>1,j=a[2*x],S=a[2*x+1];j>=e&&j<=n&&S>=r&&S<=s&&d.push(i[x]),(f===0?e<=j:r<=S)&&(c.push(m),c.push(x-1),c.push(1-f)),(f===0?n>=j:s>=S)&&(c.push(x+1),c.push(p),c.push(1-f))}return d}within(e,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:i,nodeSize:a}=this,l=[0,s.length-1,0],c=[],d=n*n;l.length;){var f=l.pop()||0,p=l.pop()||0,m=l.pop()||0;if(p-m<=a){for(var g=m;g<=p;g++)VT(i[2*g],i[2*g+1],e,r)<=d&&c.push(s[g]);continue}var y=m+p>>1,b=i[2*y],x=i[2*y+1];VT(b,x,e,r)<=d&&c.push(s[y]),(f===0?e-n<=b:r-n<=x)&&(l.push(m),l.push(y-1),l.push(1-f)),(f===0?e+n>=b:r+n>=x)&&(l.push(y+1),l.push(p),l.push(1-f))}return c}}function nS(t,e,r,n,s,i){if(!(s-n<=r)){var a=n+s>>1;vB(t,e,a,n,s,i),nS(t,e,r,n,a-1,1-i),nS(t,e,r,a+1,s,1-i)}}function vB(t,e,r,n,s,i){for(;s>n;){if(s-n>600){var a=s-n+1,l=r-n+1,c=Math.log(a),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(a-d)/a)*(l-a/2<0?-1:1),p=Math.max(n,Math.floor(r-l*d/a+f)),m=Math.min(s,Math.floor(r+(a-l)*d/a+f));vB(t,e,r,p,m,i)}var g=e[2*r+i],y=n,b=s;for(Md(t,e,n,r),e[2*s+i]>g&&Md(t,e,n,s);y<b;){for(Md(t,e,y,b),y++,b--;e[2*y+i]<g;)y++;for(;e[2*b+i]>g;)b--}e[2*n+i]===g?Md(t,e,n,b):(b++,Md(t,e,b,s)),b<=r&&(n=b+1),r<=b&&(s=b-1)}}function Md(t,e,r,n){sb(t,r,n),sb(e,2*r,2*n),sb(e,2*r+1,2*n+1)}function sb(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function VT(t,e,r,n){var s=t-r,i=e-n;return s*s+i*i}var _ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},WT=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),Ho=2,Za=3,ib=4,Ha=5,yB=6;class jne{constructor(e){this.options=Object.assign(Object.create(_ne),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:r,minZoom:n,maxZoom:s}=this.options;r&&console.time("total time");var i="prepare ".concat(e.length," points");r&&console.time(i),this.points=e;for(var a=[],l=0;l<e.length;l++){var c=e[l];if(c.geometry){var[d,f]=c.geometry.coordinates,p=WT(jm(d)),m=WT(Sm(f));a.push(p,m,1/0,l,-1,1),this.options.reduce&&a.push(0)}}var g=this.trees[s+1]=this._createTree(a);r&&console.timeEnd(i);for(var y=s;y>=n;y--){var b=+Date.now();g=this.trees[y]=this._createTree(this._cluster(g,y)),r&&console.log("z%d: %d clusters in %dms",y,g.numItems,+Date.now()-b)}return r&&console.timeEnd("total time"),this}getClusters(e,r){var n=((e[0]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,e[1])),i=e[2]===180?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var l=this.getClusters([n,s,180,a],r),c=this.getClusters([-180,s,i,a],r);return l.concat(c)}var d=this.trees[this._limitZoom(r)],f=d.range(jm(n),Sm(a),jm(i),Sm(s)),p=d.data,m=[];for(var g of f){var y=this.stride*g;m.push(p[y+Ha]>1?HT(p,y,this.clusterProps):this.points[p[y+Za]])}return m}getChildren(e){var r=this._getOriginId(e),n=this._getOriginZoom(e),s="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(s);var a=i.data;if(r*this.stride>=a.length)throw new Error(s);var l=this.options.radius/(this.options.extent*Math.pow(2,n-1)),c=a[r*this.stride],d=a[r*this.stride+1],f=i.within(c,d,l),p=[];for(var m of f){var g=m*this.stride;a[g+ib]===e&&p.push(a[g+Ha]>1?HT(a,g,this.clusterProps):this.points[a[g+Za]])}if(p.length===0)throw new Error(s);return p}getLeaves(e,r,n){r=r||10,n=n||0;var s=[];return this._appendLeaves(s,e,r,n,0),s}getTile(e,r,n){var s=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:a,radius:l}=this.options,c=l/a,d=(n-c)/i,f=(n+1+c)/i,p={features:[]};return this._addTileFeatures(s.range((r-c)/i,d,(r+1+c)/i,f),s.data,r,n,i,p),r===0&&this._addTileFeatures(s.range(1-c/i,d,1,f),s.data,i,n,i,p),r===i-1&&this._addTileFeatures(s.range(0,d,c/i,f),s.data,-1,n,i,p),p.features.length?p:null}getClusterExpansionZoom(e){for(var r=this._getOriginZoom(e)-1;r<=this.options.maxZoom;){var n=this.getChildren(e);if(r++,n.length!==1)break;e=n[0].properties.cluster_id}return r}_appendLeaves(e,r,n,s,i){var a=this.getChildren(r);for(var l of a){var c=l.properties;if(c&&c.cluster?i+c.point_count<=s?i+=c.point_count:i=this._appendLeaves(e,c.cluster_id,n,s,i):i<s?i++:e.push(l),e.length===n)break}return i}_createTree(e){for(var r=new FE(e.length/this.stride|0,this.options.nodeSize,Float32Array),n=0;n<e.length;n+=this.stride)r.add(e[n],e[n+1]);return r.finish(),r.data=e,r}_addTileFeatures(e,r,n,s,i,a){for(var l of e){var c=l*this.stride,d=r[c+Ha]>1,f=void 0,p=void 0,m=void 0;if(d)f=xB(r,c,this.clusterProps),p=r[c],m=r[c+1];else{var g=this.points[r[c+Za]];f=g.properties;var[y,b]=g.geometry.coordinates;p=jm(y),m=Sm(b)}var x={type:1,geometry:[[Math.round(this.options.extent*(p*i-n)),Math.round(this.options.extent*(m*i-s))]],tags:f},j=void 0;d||this.options.generateId?j=r[c+Za]:j=this.points[r[c+Za]].id,j!==void 0&&(x.id=j),a.features.push(x)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,r){for(var{radius:n,extent:s,reduce:i,minPoints:a}=this.options,l=n/(s*Math.pow(2,r)),c=e.data,d=[],f=this.stride,p=0;p<c.length;p+=f)if(!(c[p+Ho]<=r)){c[p+Ho]=r;var m=c[p],g=c[p+1],y=e.within(c[p],c[p+1],l),b=c[p+Ha],x=b;for(var j of y){var S=j*f;c[S+Ho]>r&&(x+=c[S+Ha])}if(x>b&&x>=a){var C=m*b,E=g*b,N=void 0,P=-1,O=((p/f|0)<<5)+(r+1)+this.points.length;for(var L of y){var A=L*f;if(!(c[A+Ho]<=r)){c[A+Ho]=r;var R=c[A+Ha];C+=c[A]*R,E+=c[A+1]*R,c[A+ib]=O,i&&(N||(N=this._map(c,p,!0),P=this.clusterProps.length,this.clusterProps.push(N)),i(N,this._map(c,A)))}}c[p+ib]=O,d.push(C/x,E/x,1/0,O,-1,x),i&&d.push(P)}else{for(var M=0;M<f;M++)d.push(c[p+M]);if(x>1)for(var D of y){var B=D*f;if(!(c[B+Ho]<=r)){c[B+Ho]=r;for(var F=0;F<f;F++)d.push(c[B+F])}}}}return d}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,r,n){if(e[r+Ha]>1){var s=this.clusterProps[e[r+yB]];return n?Object.assign({},s):s}var i=this.points[e[r+Za]].properties,a=this.options.map(i);return n&&a===i?Object.assign({},a):a}}function HT(t,e,r){return{type:"Feature",id:t[e+Za],properties:xB(t,e,r),geometry:{type:"Point",coordinates:[Sne(t[e]),Nne(t[e+1])]}}}function xB(t,e,r){var n=t[e+Ha],s=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,i=t[e+yB],a=i===-1?{}:Object.assign({},r[i]);return Object.assign(a,{cluster:!0,cluster_id:t[e+Za],point_count:n,point_count_abbreviated:s})}function jm(t){return t/360+.5}function Sm(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function Sne(t){return(t-.5)*360}function Nne(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ene(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}class Xn{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,r){this.isAdvancedMarker(e)?e.map=r:e.setMap(r)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class sS{constructor(e){var{markers:r,position:n}=e;this.markers=r,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var r of this.markers)e.extend(Xn.getPosition(r));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Xn.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Xn.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Cne{constructor(e){var{maxZoom:r=16}=e;this.maxZoom=r}noop(e){var{markers:r}=e;return kne(r)}}var kne=t=>{var e=t.map(r=>new sS({position:Xn.getPosition(r),markers:[r]}));return e};class Pne extends Cne{constructor(e){var{maxZoom:r,radius:n=60}=e,s=Ene(e,["maxZoom","radius"]);super({maxZoom:r}),this.state={zoom:-1},this.superCluster=new jne(Object.assign({maxZoom:this.maxZoom,radius:n},s))}calculate(e){var r=!1,n={zoom:e.map.getZoom()};if(!UT(e.markers,this.markers)){r=!0,this.markers=[...e.markers];var s=this.markers.map(i=>{var a=Xn.getPosition(i),l=[a.lng(),a.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:l},properties:{marker:i}}});this.superCluster.load(s)}return r||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(r=!UT(this.state,n)),this.state=n,r&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:r}}cluster(e){var{map:r}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(r.getZoom())).map(n=>this.transformCluster(n))}transformCluster(e){var{geometry:{coordinates:[r,n]},properties:s}=e;if(s.cluster)return new sS({markers:this.superCluster.getLeaves(s.cluster_id,1/0).map(a=>a.properties.marker),position:{lat:n,lng:r}});var i=s.marker;return new sS({markers:[i],position:Xn.getPosition(i)})}}class One{constructor(e,r){this.markers={sum:e.length};var n=r.map(i=>i.count),s=n.reduce((i,a)=>i+a,0);this.clusters={count:r.length,markers:{mean:s/r.length,sum:s,min:Math.min(...n),max:Math.max(...n)}}}}class Ane{render(e,r,n){var{count:s,position:i}=e,a=s>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",l='<svg fill="'.concat(a,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(s,`</text>
</svg>`),c="Cluster of ".concat(s," markers"),d=Number(google.maps.Marker.MAX_ZINDEX)+s;if(Xn.isAdvancedMarkerAvailable(n)){var f=new DOMParser,p=f.parseFromString(l,"image/svg+xml").documentElement;p.setAttribute("transform","translate(0 25)");var m={map:n,position:i,zIndex:d,title:c,content:p};return new google.maps.marker.AdvancedMarkerElement(m)}var g={position:i,zIndex:d,title:c,icon:{url:"data:image/svg+xml;base64,".concat(btoa(l)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(g)}}function Tne(t,e){for(var r in e.prototype)t.prototype[r]=e.prototype[r]}class BE{constructor(){Tne(BE,google.maps.OverlayView)}}var mf;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(mf||(mf={}));var Lne=(t,e,r)=>{r.fitBounds(e.bounds)};class Mne extends BE{constructor(e){var{map:r,markers:n=[],algorithmOptions:s={},algorithm:i=new Pne(s),renderer:a=new Ane,onClusterClick:l=Lne}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=i,this.renderer=a,this.onClusterClick=l,r&&this.setMap(r)}addMarker(e,r){this.markers.includes(e)||(this.markers.push(e),r||this.render())}addMarkers(e,r){e.forEach(n=>{this.addMarker(n,!0)}),r||this.render()}removeMarker(e,r){var n=this.markers.indexOf(e);return n===-1?!1:(Xn.setMap(e,null),this.markers.splice(n,1),r||this.render(),!0)}removeMarkers(e,r){var n=!1;return e.forEach(s=>{n=this.removeMarker(s,!0)||n}),n&&!r&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,mf.CLUSTERING_BEGIN,this);var{clusters:r,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||n==null){var s=new Set;for(var i of r)i.markers.length==1&&s.add(i.markers[0]);var a=[];for(var l of this.clusters)l.marker!=null&&(l.markers.length==1?s.has(l.marker)||Xn.setMap(l.marker,null):a.push(l.marker));this.clusters=r,this.renderClusters(),requestAnimationFrame(()=>a.forEach(c=>Xn.setMap(c,null)))}google.maps.event.trigger(this,mf.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Xn.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new One(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,r),n.markers.forEach(s=>Xn.setMap(s,null)),this.onClusterClick&&n.marker.addListener("click",s=>{google.maps.event.trigger(this,mf.CLUSTER_CLICK,n),this.onClusterClick(s,n,r)})),Xn.setMap(n.marker,r)})}}function GT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function KT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GT(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rne(t){var e=Rre(),[r,n]=w.useState(null);return w.useEffect(()=>{if(e&&r===null){var s=new Mne(KT(KT({},t),{},{map:e}));n(s)}},[e]),r}function Dne(t){var{children:e,options:r}=t,n=Rne(r);return n!==null?e(n):null}w.memo(Dne);var ZT={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},XT={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function Ine(t){var{children:e,anchor:r,options:n,position:s,zIndex:i,onCloseClick:a,onDomReady:l,onContentChanged:c,onPositionChanged:d,onZindexChanged:f,onLoad:p,onUnmount:m}=t,g=w.useContext(dt),[y,b]=w.useState(null),[x,j]=w.useState(null),[S,C]=w.useState(null),[E,N]=w.useState(null),[P,O]=w.useState(null),[L,A]=w.useState(null),R=w.useRef(null);return w.useEffect(()=>{y!==null&&(y.close(),r?y.open(g,r):y.getPosition()&&y.open(g))},[g,y,r]),w.useEffect(()=>{n&&y!==null&&y.setOptions(n)},[y,n]),w.useEffect(()=>{s&&y!==null&&y.setPosition(s)},[s]),w.useEffect(()=>{typeof i=="number"&&y!==null&&y.setZIndex(i)},[i]),w.useEffect(()=>{y&&a&&(x!==null&&google.maps.event.removeListener(x),j(google.maps.event.addListener(y,"closeclick",a)))},[a]),w.useEffect(()=>{y&&l&&(S!==null&&google.maps.event.removeListener(S),C(google.maps.event.addListener(y,"domready",l)))},[l]),w.useEffect(()=>{y&&c&&(E!==null&&google.maps.event.removeListener(E),N(google.maps.event.addListener(y,"content_changed",c)))},[c]),w.useEffect(()=>{y&&d&&(P!==null&&google.maps.event.removeListener(P),O(google.maps.event.addListener(y,"position_changed",d)))},[d]),w.useEffect(()=>{y&&f&&(L!==null&&google.maps.event.removeListener(L),A(google.maps.event.addListener(y,"zindex_changed",f)))},[f]),w.useEffect(()=>{var M=new google.maps.InfoWindow(n);return b(M),R.current=document.createElement("div"),a&&j(google.maps.event.addListener(M,"closeclick",a)),l&&C(google.maps.event.addListener(M,"domready",l)),c&&N(google.maps.event.addListener(M,"content_changed",c)),d&&O(google.maps.event.addListener(M,"position_changed",d)),f&&A(google.maps.event.addListener(M,"zindex_changed",f)),M.setContent(R.current),s&&M.setPosition(s),i&&M.setZIndex(i),r?M.open(g,r):M.getPosition()?M.open(g):Rr(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),p&&p(M),()=>{x&&google.maps.event.removeListener(x),E&&google.maps.event.removeListener(E),S&&google.maps.event.removeListener(S),P&&google.maps.event.removeListener(P),L&&google.maps.event.removeListener(L),m&&m(M),M.close()}},[]),R.current?Js.createPortal(w.Children.only(e),R.current):null}w.memo(Ine);class bB extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"containerElement",null),fe(this,"state",{infoWindow:null}),fe(this,"open",(e,r)=>{r?e.open(this.context,r):e.getPosition()?e.open(this.context):Rr(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),fe(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=mt({updaterMap:XT,eventMap:ZT,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:XT,eventMap:ZT,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(vt(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Js.createPortal(w.Children.only(this.props.children),this.containerElement):null}}fe(bB,"contextType",dt);function YT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function bg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YT(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var JT={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},QT={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},$ne={};function Fne(t){var{options:e,draggable:r,editable:n,visible:s,path:i,onDblClick:a,onDragEnd:l,onDragStart:c,onMouseDown:d,onMouseMove:f,onMouseOut:p,onMouseOver:m,onMouseUp:g,onRightClick:y,onClick:b,onDrag:x,onLoad:j,onUnmount:S}=t,C=w.useContext(dt),[E,N]=w.useState(null),[P,O]=w.useState(null),[L,A]=w.useState(null),[R,M]=w.useState(null),[D,B]=w.useState(null),[F,V]=w.useState(null),[J,G]=w.useState(null),[q,U]=w.useState(null),[W,I]=w.useState(null),[H,ne]=w.useState(null),[ge,K]=w.useState(null),[de,ue]=w.useState(null);return w.useEffect(()=>{E!==null&&E.setMap(C)},[C]),w.useEffect(()=>{typeof e<"u"&&E!==null&&E.setOptions(e)},[E,e]),w.useEffect(()=>{typeof r<"u"&&E!==null&&E.setDraggable(r)},[E,r]),w.useEffect(()=>{typeof n<"u"&&E!==null&&E.setEditable(n)},[E,n]),w.useEffect(()=>{typeof s<"u"&&E!==null&&E.setVisible(s)},[E,s]),w.useEffect(()=>{typeof i<"u"&&E!==null&&E.setPath(i)},[E,i]),w.useEffect(()=>{E&&a&&(P!==null&&google.maps.event.removeListener(P),O(google.maps.event.addListener(E,"dblclick",a)))},[a]),w.useEffect(()=>{E&&l&&(L!==null&&google.maps.event.removeListener(L),A(google.maps.event.addListener(E,"dragend",l)))},[l]),w.useEffect(()=>{E&&c&&(R!==null&&google.maps.event.removeListener(R),M(google.maps.event.addListener(E,"dragstart",c)))},[c]),w.useEffect(()=>{E&&d&&(D!==null&&google.maps.event.removeListener(D),B(google.maps.event.addListener(E,"mousedown",d)))},[d]),w.useEffect(()=>{E&&f&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(E,"mousemove",f)))},[f]),w.useEffect(()=>{E&&p&&(J!==null&&google.maps.event.removeListener(J),G(google.maps.event.addListener(E,"mouseout",p)))},[p]),w.useEffect(()=>{E&&m&&(q!==null&&google.maps.event.removeListener(q),U(google.maps.event.addListener(E,"mouseover",m)))},[m]),w.useEffect(()=>{E&&g&&(W!==null&&google.maps.event.removeListener(W),I(google.maps.event.addListener(E,"mouseup",g)))},[g]),w.useEffect(()=>{E&&y&&(H!==null&&google.maps.event.removeListener(H),ne(google.maps.event.addListener(E,"rightclick",y)))},[y]),w.useEffect(()=>{E&&b&&(ge!==null&&google.maps.event.removeListener(ge),K(google.maps.event.addListener(E,"click",b)))},[b]),w.useEffect(()=>{E&&x&&(de!==null&&google.maps.event.removeListener(de),ue(google.maps.event.addListener(E,"drag",x)))},[x]),w.useEffect(()=>{var he=new google.maps.Polyline(bg(bg({},e||$ne),{},{map:C}));return i&&he.setPath(i),typeof s<"u"&&he.setVisible(s),typeof n<"u"&&he.setEditable(n),typeof r<"u"&&he.setDraggable(r),a&&O(google.maps.event.addListener(he,"dblclick",a)),l&&A(google.maps.event.addListener(he,"dragend",l)),c&&M(google.maps.event.addListener(he,"dragstart",c)),d&&B(google.maps.event.addListener(he,"mousedown",d)),f&&V(google.maps.event.addListener(he,"mousemove",f)),p&&G(google.maps.event.addListener(he,"mouseout",p)),m&&U(google.maps.event.addListener(he,"mouseover",m)),g&&I(google.maps.event.addListener(he,"mouseup",g)),y&&ne(google.maps.event.addListener(he,"rightclick",y)),b&&K(google.maps.event.addListener(he,"click",b)),x&&ue(google.maps.event.addListener(he,"drag",x)),N(he),j&&j(he),()=>{P!==null&&google.maps.event.removeListener(P),L!==null&&google.maps.event.removeListener(L),R!==null&&google.maps.event.removeListener(R),D!==null&&google.maps.event.removeListener(D),F!==null&&google.maps.event.removeListener(F),J!==null&&google.maps.event.removeListener(J),q!==null&&google.maps.event.removeListener(q),W!==null&&google.maps.event.removeListener(W),H!==null&&google.maps.event.removeListener(H),ge!==null&&google.maps.event.removeListener(ge),S&&S(he),he.setMap(null)}},[]),null}var Bne=w.memo(Fne);class iS extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{polyline:null}),fe(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(bg(bg({},this.props.options),{},{map:this.context}));this.registeredEvents=mt({updaterMap:QT,eventMap:JT,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:QT,eventMap:JT,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),vt(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}fe(iS,"contextType",dt);function eL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function tL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rL={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},nL={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function zne(t){var{options:e,draggable:r,editable:n,visible:s,path:i,paths:a,onDblClick:l,onDragEnd:c,onDragStart:d,onMouseDown:f,onMouseMove:p,onMouseOut:m,onMouseOver:g,onMouseUp:y,onRightClick:b,onClick:x,onDrag:j,onLoad:S,onUnmount:C,onEdit:E}=t,N=w.useContext(dt),[P,O]=w.useState(null),[L,A]=w.useState(null),[R,M]=w.useState(null),[D,B]=w.useState(null),[F,V]=w.useState(null),[J,G]=w.useState(null),[q,U]=w.useState(null),[W,I]=w.useState(null),[H,ne]=w.useState(null),[ge,K]=w.useState(null),[de,ue]=w.useState(null),[he,ce]=w.useState(null);return w.useEffect(()=>{P!==null&&P.setMap(N)},[N]),w.useEffect(()=>{typeof e<"u"&&P!==null&&P.setOptions(e)},[P,e]),w.useEffect(()=>{typeof r<"u"&&P!==null&&P.setDraggable(r)},[P,r]),w.useEffect(()=>{typeof n<"u"&&P!==null&&P.setEditable(n)},[P,n]),w.useEffect(()=>{typeof s<"u"&&P!==null&&P.setVisible(s)},[P,s]),w.useEffect(()=>{typeof i<"u"&&P!==null&&P.setPath(i)},[P,i]),w.useEffect(()=>{typeof a<"u"&&P!==null&&P.setPaths(a)},[P,a]),w.useEffect(()=>{P&&typeof l=="function"&&(L!==null&&google.maps.event.removeListener(L),A(google.maps.event.addListener(P,"dblclick",l)))},[l]),w.useEffect(()=>{P&&(google.maps.event.addListener(P.getPath(),"insert_at",()=>{E?.(P)}),google.maps.event.addListener(P.getPath(),"set_at",()=>{E?.(P)}),google.maps.event.addListener(P.getPath(),"remove_at",()=>{E?.(P)}))},[P,E]),w.useEffect(()=>{P&&typeof c=="function"&&(R!==null&&google.maps.event.removeListener(R),M(google.maps.event.addListener(P,"dragend",c)))},[c]),w.useEffect(()=>{P&&typeof d=="function"&&(D!==null&&google.maps.event.removeListener(D),B(google.maps.event.addListener(P,"dragstart",d)))},[d]),w.useEffect(()=>{P&&typeof f=="function"&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(P,"mousedown",f)))},[f]),w.useEffect(()=>{P&&typeof p=="function"&&(J!==null&&google.maps.event.removeListener(J),G(google.maps.event.addListener(P,"mousemove",p)))},[p]),w.useEffect(()=>{P&&typeof m=="function"&&(q!==null&&google.maps.event.removeListener(q),U(google.maps.event.addListener(P,"mouseout",m)))},[m]),w.useEffect(()=>{P&&typeof g=="function"&&(W!==null&&google.maps.event.removeListener(W),I(google.maps.event.addListener(P,"mouseover",g)))},[g]),w.useEffect(()=>{P&&typeof y=="function"&&(H!==null&&google.maps.event.removeListener(H),ne(google.maps.event.addListener(P,"mouseup",y)))},[y]),w.useEffect(()=>{P&&typeof b=="function"&&(ge!==null&&google.maps.event.removeListener(ge),K(google.maps.event.addListener(P,"rightclick",b)))},[b]),w.useEffect(()=>{P&&typeof x=="function"&&(de!==null&&google.maps.event.removeListener(de),ue(google.maps.event.addListener(P,"click",x)))},[x]),w.useEffect(()=>{P&&typeof j=="function"&&(he!==null&&google.maps.event.removeListener(he),ce(google.maps.event.addListener(P,"drag",j)))},[j]),w.useEffect(()=>{var te=new google.maps.Polygon(tL(tL({},e),{},{map:N}));return i&&te.setPath(i),a&&te.setPaths(a),typeof s<"u"&&te.setVisible(s),typeof n<"u"&&te.setEditable(n),typeof r<"u"&&te.setDraggable(r),l&&A(google.maps.event.addListener(te,"dblclick",l)),c&&M(google.maps.event.addListener(te,"dragend",c)),d&&B(google.maps.event.addListener(te,"dragstart",d)),f&&V(google.maps.event.addListener(te,"mousedown",f)),p&&G(google.maps.event.addListener(te,"mousemove",p)),m&&U(google.maps.event.addListener(te,"mouseout",m)),g&&I(google.maps.event.addListener(te,"mouseover",g)),y&&ne(google.maps.event.addListener(te,"mouseup",y)),b&&K(google.maps.event.addListener(te,"rightclick",b)),x&&ue(google.maps.event.addListener(te,"click",x)),j&&ce(google.maps.event.addListener(te,"drag",j)),O(te),S&&S(te),()=>{L!==null&&google.maps.event.removeListener(L),R!==null&&google.maps.event.removeListener(R),D!==null&&google.maps.event.removeListener(D),F!==null&&google.maps.event.removeListener(F),J!==null&&google.maps.event.removeListener(J),q!==null&&google.maps.event.removeListener(q),W!==null&&google.maps.event.removeListener(W),H!==null&&google.maps.event.removeListener(H),ge!==null&&google.maps.event.removeListener(ge),de!==null&&google.maps.event.removeListener(de),C&&C(te),te.setMap(null)}},[]),null}w.memo(zne);let Une=class extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=mt({updaterMap:nL,eventMap:rL,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:nL,eventMap:rL,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),vt(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}};fe(Une,"contextType",dt);function sL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function wg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var iL={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},aL={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function qne(t){var{options:e,bounds:r,draggable:n,editable:s,visible:i,onDblClick:a,onDragEnd:l,onDragStart:c,onMouseDown:d,onMouseMove:f,onMouseOut:p,onMouseOver:m,onMouseUp:g,onRightClick:y,onClick:b,onDrag:x,onBoundsChanged:j,onLoad:S,onUnmount:C}=t,E=w.useContext(dt),[N,P]=w.useState(null),[O,L]=w.useState(null),[A,R]=w.useState(null),[M,D]=w.useState(null),[B,F]=w.useState(null),[V,J]=w.useState(null),[G,q]=w.useState(null),[U,W]=w.useState(null),[I,H]=w.useState(null),[ne,ge]=w.useState(null),[K,de]=w.useState(null),[ue,he]=w.useState(null),[ce,te]=w.useState(null);return w.useEffect(()=>{N!==null&&N.setMap(E)},[E]),w.useEffect(()=>{typeof e<"u"&&N!==null&&N.setOptions(e)},[N,e]),w.useEffect(()=>{typeof n<"u"&&N!==null&&N.setDraggable(n)},[N,n]),w.useEffect(()=>{typeof s<"u"&&N!==null&&N.setEditable(s)},[N,s]),w.useEffect(()=>{typeof i<"u"&&N!==null&&N.setVisible(i)},[N,i]),w.useEffect(()=>{typeof r<"u"&&N!==null&&N.setBounds(r)},[N,r]),w.useEffect(()=>{N&&a&&(O!==null&&google.maps.event.removeListener(O),L(google.maps.event.addListener(N,"dblclick",a)))},[a]),w.useEffect(()=>{N&&l&&(A!==null&&google.maps.event.removeListener(A),R(google.maps.event.addListener(N,"dragend",l)))},[l]),w.useEffect(()=>{N&&c&&(M!==null&&google.maps.event.removeListener(M),D(google.maps.event.addListener(N,"dragstart",c)))},[c]),w.useEffect(()=>{N&&d&&(B!==null&&google.maps.event.removeListener(B),F(google.maps.event.addListener(N,"mousedown",d)))},[d]),w.useEffect(()=>{N&&f&&(V!==null&&google.maps.event.removeListener(V),J(google.maps.event.addListener(N,"mousemove",f)))},[f]),w.useEffect(()=>{N&&p&&(G!==null&&google.maps.event.removeListener(G),q(google.maps.event.addListener(N,"mouseout",p)))},[p]),w.useEffect(()=>{N&&m&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(N,"mouseover",m)))},[m]),w.useEffect(()=>{N&&g&&(I!==null&&google.maps.event.removeListener(I),H(google.maps.event.addListener(N,"mouseup",g)))},[g]),w.useEffect(()=>{N&&y&&(ne!==null&&google.maps.event.removeListener(ne),ge(google.maps.event.addListener(N,"rightclick",y)))},[y]),w.useEffect(()=>{N&&b&&(K!==null&&google.maps.event.removeListener(K),de(google.maps.event.addListener(N,"click",b)))},[b]),w.useEffect(()=>{N&&x&&(ue!==null&&google.maps.event.removeListener(ue),he(google.maps.event.addListener(N,"drag",x)))},[x]),w.useEffect(()=>{N&&j&&(ce!==null&&google.maps.event.removeListener(ce),te(google.maps.event.addListener(N,"bounds_changed",j)))},[j]),w.useEffect(()=>{var pe=new google.maps.Rectangle(wg(wg({},e),{},{map:E}));return typeof i<"u"&&pe.setVisible(i),typeof s<"u"&&pe.setEditable(s),typeof n<"u"&&pe.setDraggable(n),typeof r<"u"&&pe.setBounds(r),a&&L(google.maps.event.addListener(pe,"dblclick",a)),l&&R(google.maps.event.addListener(pe,"dragend",l)),c&&D(google.maps.event.addListener(pe,"dragstart",c)),d&&F(google.maps.event.addListener(pe,"mousedown",d)),f&&J(google.maps.event.addListener(pe,"mousemove",f)),p&&q(google.maps.event.addListener(pe,"mouseout",p)),m&&W(google.maps.event.addListener(pe,"mouseover",m)),g&&H(google.maps.event.addListener(pe,"mouseup",g)),y&&ge(google.maps.event.addListener(pe,"rightclick",y)),b&&de(google.maps.event.addListener(pe,"click",b)),x&&he(google.maps.event.addListener(pe,"drag",x)),j&&te(google.maps.event.addListener(pe,"bounds_changed",j)),P(pe),S&&S(pe),()=>{O!==null&&google.maps.event.removeListener(O),A!==null&&google.maps.event.removeListener(A),M!==null&&google.maps.event.removeListener(M),B!==null&&google.maps.event.removeListener(B),V!==null&&google.maps.event.removeListener(V),G!==null&&google.maps.event.removeListener(G),U!==null&&google.maps.event.removeListener(U),I!==null&&google.maps.event.removeListener(I),ne!==null&&google.maps.event.removeListener(ne),K!==null&&google.maps.event.removeListener(K),ue!==null&&google.maps.event.removeListener(ue),ce!==null&&google.maps.event.removeListener(ce),C&&C(pe),pe.setMap(null)}},[]),null}w.memo(qne);let Vne=class extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{rectangle:null}),fe(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(wg(wg({},this.props.options),{},{map:this.context}));this.registeredEvents=mt({updaterMap:aL,eventMap:iL,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:aL,eventMap:iL,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),vt(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}};fe(Vne,"contextType",dt);function oL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function _g(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var lL={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},cL={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},Wne={};function Hne(t){var{options:e,center:r,radius:n,draggable:s,editable:i,visible:a,onDblClick:l,onDragEnd:c,onDragStart:d,onMouseDown:f,onMouseMove:p,onMouseOut:m,onMouseOver:g,onMouseUp:y,onRightClick:b,onClick:x,onDrag:j,onCenterChanged:S,onRadiusChanged:C,onLoad:E,onUnmount:N}=t,P=w.useContext(dt),[O,L]=w.useState(null),[A,R]=w.useState(null),[M,D]=w.useState(null),[B,F]=w.useState(null),[V,J]=w.useState(null),[G,q]=w.useState(null),[U,W]=w.useState(null),[I,H]=w.useState(null),[ne,ge]=w.useState(null),[K,de]=w.useState(null),[ue,he]=w.useState(null),[ce,te]=w.useState(null),[pe,ae]=w.useState(null),[Oe,Ee]=w.useState(null);return w.useEffect(()=>{O!==null&&O.setMap(P)},[P]),w.useEffect(()=>{typeof e<"u"&&O!==null&&O.setOptions(e)},[O,e]),w.useEffect(()=>{typeof s<"u"&&O!==null&&O.setDraggable(s)},[O,s]),w.useEffect(()=>{typeof i<"u"&&O!==null&&O.setEditable(i)},[O,i]),w.useEffect(()=>{typeof a<"u"&&O!==null&&O.setVisible(a)},[O,a]),w.useEffect(()=>{typeof n=="number"&&O!==null&&O.setRadius(n)},[O,n]),w.useEffect(()=>{typeof r<"u"&&O!==null&&O.setCenter(r)},[O,r]),w.useEffect(()=>{O&&l&&(A!==null&&google.maps.event.removeListener(A),R(google.maps.event.addListener(O,"dblclick",l)))},[l]),w.useEffect(()=>{O&&c&&(M!==null&&google.maps.event.removeListener(M),D(google.maps.event.addListener(O,"dragend",c)))},[c]),w.useEffect(()=>{O&&d&&(B!==null&&google.maps.event.removeListener(B),F(google.maps.event.addListener(O,"dragstart",d)))},[d]),w.useEffect(()=>{O&&f&&(V!==null&&google.maps.event.removeListener(V),J(google.maps.event.addListener(O,"mousedown",f)))},[f]),w.useEffect(()=>{O&&p&&(G!==null&&google.maps.event.removeListener(G),q(google.maps.event.addListener(O,"mousemove",p)))},[p]),w.useEffect(()=>{O&&m&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(O,"mouseout",m)))},[m]),w.useEffect(()=>{O&&g&&(I!==null&&google.maps.event.removeListener(I),H(google.maps.event.addListener(O,"mouseover",g)))},[g]),w.useEffect(()=>{O&&y&&(ne!==null&&google.maps.event.removeListener(ne),ge(google.maps.event.addListener(O,"mouseup",y)))},[y]),w.useEffect(()=>{O&&b&&(K!==null&&google.maps.event.removeListener(K),de(google.maps.event.addListener(O,"rightclick",b)))},[b]),w.useEffect(()=>{O&&x&&(ue!==null&&google.maps.event.removeListener(ue),he(google.maps.event.addListener(O,"click",x)))},[x]),w.useEffect(()=>{O&&j&&(ce!==null&&google.maps.event.removeListener(ce),te(google.maps.event.addListener(O,"drag",j)))},[j]),w.useEffect(()=>{O&&S&&(pe!==null&&google.maps.event.removeListener(pe),ae(google.maps.event.addListener(O,"center_changed",S)))},[x]),w.useEffect(()=>{O&&C&&(Oe!==null&&google.maps.event.removeListener(Oe),Ee(google.maps.event.addListener(O,"radius_changed",C)))},[C]),w.useEffect(()=>{var ke=new google.maps.Circle(_g(_g({},e||Wne),{},{map:P}));return typeof n=="number"&&ke.setRadius(n),typeof r<"u"&&ke.setCenter(r),typeof n=="number"&&ke.setRadius(n),typeof a<"u"&&ke.setVisible(a),typeof i<"u"&&ke.setEditable(i),typeof s<"u"&&ke.setDraggable(s),l&&R(google.maps.event.addListener(ke,"dblclick",l)),c&&D(google.maps.event.addListener(ke,"dragend",c)),d&&F(google.maps.event.addListener(ke,"dragstart",d)),f&&J(google.maps.event.addListener(ke,"mousedown",f)),p&&q(google.maps.event.addListener(ke,"mousemove",p)),m&&W(google.maps.event.addListener(ke,"mouseout",m)),g&&H(google.maps.event.addListener(ke,"mouseover",g)),y&&ge(google.maps.event.addListener(ke,"mouseup",y)),b&&de(google.maps.event.addListener(ke,"rightclick",b)),x&&he(google.maps.event.addListener(ke,"click",x)),j&&te(google.maps.event.addListener(ke,"drag",j)),S&&ae(google.maps.event.addListener(ke,"center_changed",S)),C&&Ee(google.maps.event.addListener(ke,"radius_changed",C)),L(ke),E&&E(ke),()=>{A!==null&&google.maps.event.removeListener(A),M!==null&&google.maps.event.removeListener(M),B!==null&&google.maps.event.removeListener(B),V!==null&&google.maps.event.removeListener(V),G!==null&&google.maps.event.removeListener(G),U!==null&&google.maps.event.removeListener(U),I!==null&&google.maps.event.removeListener(I),ne!==null&&google.maps.event.removeListener(ne),K!==null&&google.maps.event.removeListener(K),ue!==null&&google.maps.event.removeListener(ue),pe!==null&&google.maps.event.removeListener(pe),Oe!==null&&google.maps.event.removeListener(Oe),N&&N(ke),ke.setMap(null)}},[]),null}w.memo(Hne);class Gne extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{circle:null}),fe(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(_g(_g({},this.props.options),{},{map:this.context}));this.registeredEvents=mt({updaterMap:cL,eventMap:lL,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:cL,eventMap:lL,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),vt(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}fe(Gne,"contextType",dt);function uL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function jg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var dL={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},fL={add(t,e){t.add(e)},addgeojson(t,e,r){t.addGeoJson(e,r)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,r,n){t.loadGeoJson(e,r,n)},overridestyle(t,e,r){t.overrideStyle(e,r)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function Kne(t){var{options:e,onClick:r,onDblClick:n,onMouseDown:s,onMouseMove:i,onMouseOut:a,onMouseOver:l,onMouseUp:c,onRightClick:d,onAddFeature:f,onRemoveFeature:p,onRemoveProperty:m,onSetGeometry:g,onSetProperty:y,onLoad:b,onUnmount:x}=t,j=w.useContext(dt),[S,C]=w.useState(null),[E,N]=w.useState(null),[P,O]=w.useState(null),[L,A]=w.useState(null),[R,M]=w.useState(null),[D,B]=w.useState(null),[F,V]=w.useState(null),[J,G]=w.useState(null),[q,U]=w.useState(null),[W,I]=w.useState(null),[H,ne]=w.useState(null),[ge,K]=w.useState(null),[de,ue]=w.useState(null),[he,ce]=w.useState(null);return w.useEffect(()=>{S!==null&&S.setMap(j)},[j]),w.useEffect(()=>{S&&n&&(E!==null&&google.maps.event.removeListener(E),N(google.maps.event.addListener(S,"dblclick",n)))},[n]),w.useEffect(()=>{S&&s&&(P!==null&&google.maps.event.removeListener(P),O(google.maps.event.addListener(S,"mousedown",s)))},[s]),w.useEffect(()=>{S&&i&&(L!==null&&google.maps.event.removeListener(L),A(google.maps.event.addListener(S,"mousemove",i)))},[i]),w.useEffect(()=>{S&&a&&(R!==null&&google.maps.event.removeListener(R),M(google.maps.event.addListener(S,"mouseout",a)))},[a]),w.useEffect(()=>{S&&l&&(D!==null&&google.maps.event.removeListener(D),B(google.maps.event.addListener(S,"mouseover",l)))},[l]),w.useEffect(()=>{S&&c&&(F!==null&&google.maps.event.removeListener(F),V(google.maps.event.addListener(S,"mouseup",c)))},[c]),w.useEffect(()=>{S&&d&&(J!==null&&google.maps.event.removeListener(J),G(google.maps.event.addListener(S,"rightclick",d)))},[d]),w.useEffect(()=>{S&&r&&(q!==null&&google.maps.event.removeListener(q),U(google.maps.event.addListener(S,"click",r)))},[r]),w.useEffect(()=>{S&&f&&(W!==null&&google.maps.event.removeListener(W),I(google.maps.event.addListener(S,"addfeature",f)))},[f]),w.useEffect(()=>{S&&p&&(H!==null&&google.maps.event.removeListener(H),ne(google.maps.event.addListener(S,"removefeature",p)))},[p]),w.useEffect(()=>{S&&m&&(ge!==null&&google.maps.event.removeListener(ge),K(google.maps.event.addListener(S,"removeproperty",m)))},[m]),w.useEffect(()=>{S&&g&&(de!==null&&google.maps.event.removeListener(de),ue(google.maps.event.addListener(S,"setgeometry",g)))},[g]),w.useEffect(()=>{S&&y&&(he!==null&&google.maps.event.removeListener(he),ce(google.maps.event.addListener(S,"setproperty",y)))},[y]),w.useEffect(()=>{if(j!==null){var te=new google.maps.Data(jg(jg({},e),{},{map:j}));n&&N(google.maps.event.addListener(te,"dblclick",n)),s&&O(google.maps.event.addListener(te,"mousedown",s)),i&&A(google.maps.event.addListener(te,"mousemove",i)),a&&M(google.maps.event.addListener(te,"mouseout",a)),l&&B(google.maps.event.addListener(te,"mouseover",l)),c&&V(google.maps.event.addListener(te,"mouseup",c)),d&&G(google.maps.event.addListener(te,"rightclick",d)),r&&U(google.maps.event.addListener(te,"click",r)),f&&I(google.maps.event.addListener(te,"addfeature",f)),p&&ne(google.maps.event.addListener(te,"removefeature",p)),m&&K(google.maps.event.addListener(te,"removeproperty",m)),g&&ue(google.maps.event.addListener(te,"setgeometry",g)),y&&ce(google.maps.event.addListener(te,"setproperty",y)),C(te),b&&b(te)}return()=>{S&&(E!==null&&google.maps.event.removeListener(E),P!==null&&google.maps.event.removeListener(P),L!==null&&google.maps.event.removeListener(L),R!==null&&google.maps.event.removeListener(R),D!==null&&google.maps.event.removeListener(D),F!==null&&google.maps.event.removeListener(F),J!==null&&google.maps.event.removeListener(J),q!==null&&google.maps.event.removeListener(q),W!==null&&google.maps.event.removeListener(W),H!==null&&google.maps.event.removeListener(H),ge!==null&&google.maps.event.removeListener(ge),de!==null&&google.maps.event.removeListener(de),he!==null&&google.maps.event.removeListener(he),x&&x(S),S.setMap(null))}},[]),null}w.memo(Kne);class Zne extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{data:null}),fe(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(jg(jg({},this.props.options),{},{map:this.context}));this.registeredEvents=mt({updaterMap:fL,eventMap:dL,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:fL,eventMap:dL,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),vt(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}fe(Zne,"contextType",dt);function hL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function pL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var mL={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},gL={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class Xne extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{kmlLayer:null}),fe(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(pL(pL({},this.props.options),{},{map:this.context}));this.registeredEvents=mt({updaterMap:gL,eventMap:mL,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:gL,eventMap:mL,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),vt(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}fe(Xne,"contextType",dt);function wB(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function Yne(t,e){return new e(t.lat,t.lng)}function Jne(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function Qne(t,e,r){return t instanceof e?t:r(t,e)}function ese(t,e,r){return t instanceof e?t:r(t,e)}function tse(t,e,r){var n=t&&t.fromLatLngToDivPixel(r.getNorthEast()),s=t&&t.fromLatLngToDivPixel(r.getSouthWest());return n&&s?{left:"".concat(s.x+e.x,"px"),top:"".concat(n.y+e.y,"px"),width:"".concat(n.x-s.x-e.x,"px"),height:"".concat(s.y-n.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function rse(t,e,r){var n=t&&t.fromLatLngToDivPixel(r);if(n){var{x:s,y:i}=n;return{left:"".concat(s+e.x,"px"),top:"".concat(i+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function _B(t,e,r,n){return r!==void 0?tse(t,e,ese(r,google.maps.LatLngBounds,Jne)):rse(t,e,Qne(n,google.maps.LatLng,Yne))}function nse(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function vL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function sse(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ise(t,e,r,n,s){class i extends google.maps.OverlayView{constructor(l,c,d,f){super(),this.container=l,this.pane=c,this.position=d,this.bounds=f}onAdd(){var l,c=(l=this.getPanes())===null||l===void 0?void 0:l[this.pane];c?.appendChild(this.container)}draw(){var l=this.getProjection(),c=sse({},this.container?wB(this.container,s):{x:0,y:0}),d=_B(l,c,this.bounds,this.position);for(var[f,p]of Object.entries(d))this.container.style[f]=p}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new i(t,e,r,n)}function yL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ase(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xL(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function bL(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function ose(t){var{position:e,bounds:r,mapPaneName:n,zIndex:s,onLoad:i,onUnmount:a,getPixelPositionOffset:l,children:c}=t,d=w.useContext(dt),f=w.useMemo(()=>{var m=document.createElement("div");return m.style.position="absolute",m},[]),p=w.useMemo(()=>ise(f,n,e,r,l),[f,n,e,r]);return w.useEffect(()=>(i?.(p),p?.setMap(d),()=>{a?.(p),p?.setMap(null)}),[d,p]),w.useEffect(()=>{f.style.zIndex="".concat(s)},[s,f]),Js.createPortal(c,f)}w.memo(ose);class Au extends w.PureComponent{constructor(e){super(e),fe(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),fe(this,"updatePane",()=>{var n=this.props.mapPaneName,s=this.overlayView.getPanes();Rr(!!n,"OverlayView requires props.mapPaneName but got %s",n),s?this.setState({paneEl:s[n]}):this.setState({paneEl:null})}),fe(this,"onAdd",()=>{var n,s;this.updatePane(),(n=(s=this.props).onLoad)===null||n===void 0||n.call(s,this.overlayView)}),fe(this,"onPositionElement",()=>{var n=this.overlayView.getProjection(),s=ase({x:0,y:0},this.containerRef.current?wB(this.containerRef.current,this.props.getPixelPositionOffset):{}),i=_B(n,s,this.props.bounds,this.props.position);if(!nse(i,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var a,l,c,d;this.setState({containerStyle:{top:(a=i.top)!==null&&a!==void 0?a:0,left:(l=i.left)!==null&&l!==void 0?l:0,width:(c=i.width)!==null&&c!==void 0?c:0,height:(d=i.height)!==null&&d!==void 0?d:0,position:"absolute"}})}}),fe(this,"draw",()=>{this.onPositionElement()}),fe(this,"onRemove",()=>{var n,s;this.setState(()=>({paneEl:null})),(n=(s=this.props).onUnmount)===null||n===void 0||n.call(s,this.overlayView)}),this.containerRef=w.createRef();var r=new google.maps.OverlayView;r.onAdd=this.onAdd,r.draw=this.draw,r.onRemove=this.onRemove,this.overlayView=r}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var r=xL(e.position),n=xL(this.props.position),s=bL(e.bounds),i=bL(this.props.bounds);(r!==n||s!==i)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?Js.createPortal(o.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:w.Children.only(this.props.children)}),e):null}}fe(Au,"FLOAT_PANE","floatPane");fe(Au,"MAP_PANE","mapPane");fe(Au,"MARKER_LAYER","markerLayer");fe(Au,"OVERLAY_LAYER","overlayLayer");fe(Au,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");fe(Au,"contextType",dt);function lse(){}function wL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function _L(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var jL={onDblClick:"dblclick",onClick:"click"},SL={opacity(t,e){t.setOpacity(e)}};function cse(t){var{url:e,bounds:r,options:n,visible:s}=t,i=w.useContext(dt),a=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),l=w.useMemo(()=>new google.maps.GroundOverlay(e,a,n),[]);return w.useEffect(()=>{l!==null&&l.setMap(i)},[i]),w.useEffect(()=>{typeof e<"u"&&l!==null&&(l.set("url",e),l.setMap(i))},[l,e]),w.useEffect(()=>{typeof s<"u"&&l!==null&&l.setOpacity(s?1:0)},[l,s]),w.useEffect(()=>{var c=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));typeof r<"u"&&l!==null&&(l.set("bounds",c),l.setMap(i))},[l,r]),null}w.memo(cse);class jB extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{groundOverlay:null}),fe(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Rr(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,_L(_L({},this.props.options),{},{map:this.context}));this.registeredEvents=mt({updaterMap:SL,eventMap:jL,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:SL,eventMap:jL,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}fe(jB,"defaultProps",{onLoad:lse});fe(jB,"contextType",dt);function NL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Sg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NL(Object(r),!0).forEach(function(n){fe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var EL={},CL={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function use(t){var{data:e,onLoad:r,onUnmount:n,options:s}=t,i=w.useContext(dt),[a,l]=w.useState(null);return w.useEffect(()=>{google.maps.visualization||Rr(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),w.useEffect(()=>{Rr(!!e,"data property is required in HeatmapLayer %s",e)},[e]),w.useEffect(()=>{a!==null&&a.setMap(i)},[i]),w.useEffect(()=>{s&&a!==null&&a.setOptions(s)},[a,s]),w.useEffect(()=>{var c=new google.maps.visualization.HeatmapLayer(Sg(Sg({},s),{},{data:e,map:i}));return l(c),r&&r(c),()=>{a!==null&&(n&&n(a),a.setMap(null))}},[]),null}w.memo(use);class dse extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{heatmapLayer:null}),fe(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Rr(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Rr(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Sg(Sg({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=mt({updaterMap:CL,eventMap:EL,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:CL,eventMap:EL,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),vt(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}fe(dse,"contextType",dt);var kL={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},PL={register(t,e,r){t.registerPanoProvider(e,r)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class fse extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{streetViewPanorama:null}),fe(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,r,n=(e=(r=this.context)===null||r===void 0?void 0:r.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=mt({updaterMap:PL,eventMap:kL,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({streetViewPanorama:n}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:PL,eventMap:kL,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),vt(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}fe(fse,"contextType",dt);class hse extends w.PureComponent{constructor(){super(...arguments),fe(this,"state",{streetViewService:null}),fe(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}fe(hse,"contextType",dt);var OL={onDirectionsChanged:"directions_changed"},AL={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class pse extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"state",{directionsRenderer:null}),fe(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=mt({updaterMap:AL,eventMap:OL,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:AL,eventMap:OL,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),vt(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}fe(pse,"contextType",dt);var TL={onPlacesChanged:"places_changed"},LL={bounds(t,e){t.setBounds(e)}};class mse extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"containerElement",w.createRef()),fe(this,"state",{searchBox:null}),fe(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Rr(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var r=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=mt({updaterMap:LL,eventMap:TL,prevProps:{},nextProps:this.props,instance:r}),this.setState(function(){return{searchBox:r}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:LL,eventMap:TL,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),vt(this.registeredEvents))}render(){return o.jsx("div",{ref:this.containerElement,children:w.Children.only(this.props.children)})}}fe(mse,"contextType",dt);var ML={onPlaceChanged:"place_changed"},RL={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class SB extends w.PureComponent{constructor(){super(...arguments),fe(this,"registeredEvents",[]),fe(this,"containerElement",w.createRef()),fe(this,"state",{autocomplete:null}),fe(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Rr(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var r=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(r){var n=new google.maps.places.Autocomplete(r,this.props.options);this.registeredEvents=mt({updaterMap:RL,eventMap:ML,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({autocomplete:n}),this.setAutocompleteCallback)}}componentDidUpdate(e){vt(this.registeredEvents),this.registeredEvents=mt({updaterMap:RL,eventMap:ML,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&vt(this.registeredEvents)}render(){return o.jsx("div",{ref:this.containerElement,className:this.props.className,children:w.Children.only(this.props.children)})}}fe(SB,"defaultProps",{className:""});fe(SB,"contextType",dt);const gse=()=>{const[t,e]=w.useState(null),{generateRoutes:r,checkGenerationStatus:n}=Fh(),s=XG(),i=YG();JG();const a=ZG();w.useEffect(()=>{if(n(),s){const d=setInterval(()=>{n()},1e4);return()=>clearInterval(d)}},[s,n]);const l=()=>i?Math.floor((Date.now()-i)/1e3):0,c=async()=>{try{e({step:"Initialisation...",percentage:0});const d=new Date().toISOString().split("T")[0],f=[{step:"📦 Génération des données...",percentage:20},{step:"🔄 OR-Tools...",percentage:40},{step:"🔀 Fusion des stops...",percentage:60},{step:"📍 Google Directions...",percentage:80},{step:"💾 Mise à jour Supabase...",percentage:95}];let p=0;const m=setInterval(()=>{p<f.length&&(e(f[p]),p++)},2e3);await r(d),clearInterval(m),e({step:"Terminé ✓",percentage:100}),setTimeout(()=>e(null),2e3)}catch(d){console.error("Erreur lors de la génération des tournées:",d),e(null)}};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs(ve,{onClick:c,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white w-full h-12 font-medium shadow-lg hover:shadow-xl transition-all duration-200",disabled:s,children:[s?o.jsx(Qs,{className:"h-4 w-4 animate-spin"}):o.jsx(gt,{className:"h-4 w-4"}),o.jsx("span",{children:"Générer + Optimiser les tournées"}),!s&&o.jsx(Zx,{className:"h-3 w-3 text-yellow-200"})]}),a&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${a.success?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:[a.success?o.jsx(er,{className:"h-5 w-5 flex-shrink-0"}):o.jsx(es,{className:"h-5 w-5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:a.success?`✅ ${a.routes_created} tournées générées et optimisées avec succès !`:"❌ Échec de la génération des tournées"}),o.jsxs("div",{className:"flex items-center gap-4 text-sm mt-1",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(bt,{className:"h-3 w-3"}),a.execution_time_seconds.toFixed(1),"s"]}),a.success&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Zx,{className:"h-3 w-3"})," Optimisation automatique"]})]})]})]}),a.driver_results&&a.driver_results.length>0&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Détail par chauffeur"}),o.jsx("div",{className:"space-y-2",children:a.driver_results.map((d,f)=>o.jsxs("div",{className:`flex items-center justify-between p-2 rounded text-sm ${d.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[d.success?o.jsx(er,{className:"h-4 w-4"}):o.jsx(es,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:d.driver_name}),d.error&&o.jsxs("span",{className:"text-xs",children:["(",d.error,")"]})]}),d.success&&o.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[o.jsxs("span",{children:[d.stops_created," stops"]}),o.jsxs("span",{children:[d.shipments_created," expéditions"]}),o.jsxs("span",{className:`flex items-center gap-1 ${d.optimization_success?"text-green-600":"text-orange-600"}`,children:[o.jsx(Zx,{className:"h-3 w-3"}),d.optimization_success?"optimisé":"non optimisé","(",d.optimization_time_seconds.toFixed(1),"s)"]})]})]},f))})]}),a.warnings&&a.warnings.length>0&&o.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-orange-700 font-medium mb-1",children:[o.jsx(sr,{className:"h-4 w-4"}),"Avertissements"]}),o.jsx("ul",{className:"text-sm text-orange-600 space-y-1",children:a.warnings.map((d,f)=>o.jsxs("li",{children:["• ",d]},f))})]}),a.errors&&a.errors.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-medium mb-1",children:[o.jsx(es,{className:"h-4 w-4"}),"Erreurs"]}),o.jsx("ul",{className:"text-sm text-red-600 space-y-1",children:a.errors.map((d,f)=>o.jsxs("li",{children:["• ",d]},f))})]})]})]}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx(is,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-transparent rounded-full animate-spin"})})]}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Génération en cours..."}),t&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.step}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${t.percentage}%`}})}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.percentage,"%"]})]}),i&&o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500 mb-4",children:[o.jsx(bt,{className:"w-4 h-4"}),o.jsxs("span",{children:["Temps écoulé: ",l(),"s"]})]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["La génération et l'optimisation des tournées peuvent prendre plusieurs minutes.",o.jsx("br",{}),o.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Vous pouvez recharger la page, l'opération continue en arrière-plan."})]})]})})})]})},vse=()=>null,yse=()=>{const{optimizeRouteSimple:t,fetchRoutes:e,setSelectedRoute:r}=Fh(),n=Z3(),s=X3(),i=KG();return{handleOptimizeRoute:async l=>{if(console.log("=== handleOptimizeRoute appelé avec ID:",l),!!l)try{console.log("Appel de optimizeRouteSimple du store...");const c=await t(l);if(console.log("Résultat de optimizeRouteSimple:",c),c){await r(l);const d=i;console.log("Route optimisée récupérée:",{id:d?.id,status:d?.status,polylineExists:!!d?.polyline,polylineLength:d?.polyline?.length}),await e()}}catch(c){console.error("Erreur dans handleOptimizeRoute:",c)}},isOptimizing:n,optimizingRouteId:s}},xse=()=>null,bse=()=>{const{validateRoute:t,fetchRoutes:e,setSelectedRoute:r}=Fh(),n=K3();return{handleValidateRoute:async i=>{if(console.log("=== handleValidateRoute appelé avec ID:",i),!!i)try{console.log("Appel de validateRoute du store...");const a=await t(i);console.log("Résultat de validateRoute:",a),a&&(r(null),await e(),console.log("Route validée avec succès"))}catch(a){console.error("Erreur dans handleValidateRoute:",a)}},isLoading:n}},wse=({route:t,isSelected:e,onClick:r,isOptimizing:n})=>{const{handleOptimizeRoute:s,optimizingRouteId:i}=yse(),{handleValidateRoute:a,isLoading:l}=bse(),c=t.status==="optimized"||t.status==="validated",d={laboratories:t.stops.filter(g=>g.type==="laboratory").length,dentists:t.stops.filter(g=>g.type==="dentist").length,depots:t.stops.filter(g=>g.type==="depot").length,totalStops:t.stops.length},p=(g=>{switch(g){case"pending":return{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",badge:"bg-yellow-100 text-yellow-800",icon:bt,label:"En attente"};case"optimized":return{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",badge:"bg-blue-100 text-blue-800",icon:hl,label:"Optimisée"};case"validated":return{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",badge:"bg-green-100 text-green-800",icon:Er,label:"Validée"};default:return{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",badge:"bg-gray-100 text-gray-800",icon:sr,label:g}}})(t.status),m=p.icon;return o.jsxs(_e,{className:`overflow-hidden transition-all duration-300 ${e&&c?"ring-2 ring-blue-500 shadow-lg":c?"hover:shadow-md":"hover:shadow-sm"} bg-white/80 backdrop-blur-sm border-0 shadow-sm`,children:[o.jsxs("div",{className:c?"cursor-pointer":"",onClick:c?r:void 0,children:[o.jsx("div",{className:`${p.bg} ${p.border} border-l-4 p-6`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold text-lg",children:t.driverName.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 text-xl",children:t.driverName}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(m,{className:`h-4 w-4 ${p.text}`}),o.jsx("span",{className:`text-sm font-medium ${p.text}`,children:p.label}),o.jsx("span",{className:"text-gray-400",children:"•"}),o.jsxs("span",{className:"text-sm text-gray-600",children:[d.totalStops," arrêt",d.totalStops>1?"s":""]})]})]})]}),o.jsx("div",{className:"flex items-center gap-4",children:c&&o.jsx(Zn,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 ${e?"rotate-90":""}`})})]})}),o.jsx("div",{className:"p-4",children:c?o.jsx(Sse,{route:t,onOptimize:()=>s(t.id),onValidate:()=>a(t.id),isOptimizing:n&&i===t.id,isValidating:l}):o.jsx(jse,{route:t,onOptimize:()=>s(t.id),isOptimizing:n&&i===t.id,isValidating:l})})]}),c&&o.jsx(Rt,{children:e&&o.jsx(Ae.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeOut"},className:"overflow-hidden cursor-default",onClick:g=>g.stopPropagation(),children:o.jsx("div",{className:"px-4 pb-4",children:o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex justify-center items-center gap-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(Dt,{className:"h-4 w-4 text-blue-600"})}),o.jsx("p",{className:"text-sm text-gray-600",children:"Laboratoires"}),o.jsx("p",{className:"text-lg font-semibold text-blue-600",children:t.stops.filter(g=>g.type==="laboratory").length})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(it,{className:"h-4 w-4 text-green-600"})}),o.jsx("p",{className:"text-sm text-gray-600",children:"Dentistes"}),o.jsx("p",{className:"text-lg font-semibold text-green-600",children:t.stops.filter(g=>g.type==="dentist").length})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(gt,{className:"h-4 w-4 text-orange-600"})}),o.jsx("p",{className:"text-sm text-gray-600",children:"Dépôts"}),o.jsx("p",{className:"text-lg font-semibold text-orange-600",children:t.stops.filter(g=>g.type==="depot").length})]})]})}),t.stops&&t.stops.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[o.jsx(ki,{className:"h-4 w-4"}),"Itinéraire détaillé"]}),o.jsx("div",{className:"space-y-3",children:t.stops.map((g,y)=>o.jsx(_se,{stop:g,index:y,isLast:y===t.stops.length-1},g.id))})]})]})})})})]})},_se=({stop:t,index:e,isLast:r})=>{const n=l=>{switch(l){case"laboratory":return o.jsx(Dt,{className:"h-4 w-4 text-blue-600"});case"dentist":return o.jsx(it,{className:"h-4 w-4 text-green-600"});case"depot":return o.jsx(gt,{className:"h-4 w-4 text-orange-600"})}},s=l=>{switch(l){case"laboratory":return"bg-blue-50 border-blue-200";case"dentist":return"bg-green-50 border-green-200";case"depot":return"bg-orange-50 border-orange-200"}},i=l=>{switch(l){case"pickup":return o.jsx(Rn,{className:"h-4 w-4 text-orange-600"});case"delivery":return o.jsx(ut,{className:"h-4 w-4 text-blue-600"});case"both":return o.jsxs("div",{className:"flex -space-x-1",children:[o.jsx(ut,{className:"h-4 w-4 text-blue-600"}),o.jsx(Rn,{className:"h-4 w-4 text-orange-600"})]})}},a=(l,c)=>{if(c==="laboratory")return l==="pickup"?"Récupération laboratoire":"Retour laboratoire";if(c==="depot")return l==="pickup"?"Récupération dépôt":"Retour dépôt";if(c==="dentist")switch(l){case"both":return"Livraison + Récupération";case"pickup":return"Récupération";case"delivery":return"Livraison";default:return"Visite"}else return"Visite"};return o.jsxs("div",{className:"relative",children:[!r&&o.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-6 bg-gray-200"}),o.jsx("div",{className:`relative p-4 ${s(t.type)} border rounded-lg transition-all hover:shadow-sm`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-white border-2 border-gray-300 flex items-center justify-center text-sm font-medium",children:e+1})}),o.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/80 flex items-center justify-center",children:n(t.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h5",{className:"font-medium text-gray-900 truncate",children:t.name}),o.jsx("span",{className:"text-sm font-mono text-gray-600 ml-2",children:t.time})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1 truncate",children:t.address}),o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-white/80 border",children:[i(t.action),o.jsx("span",{className:"text-xs font-medium text-gray-700",children:a(t.action,t.type)})]})})]})]})})]})},jse=({route:t,onOptimize:e,isOptimizing:r=!1,isValidating:n=!1})=>{const s={laboratories:t.stops.filter(i=>i.type==="laboratory").length,dentists:t.stops.filter(i=>i.type==="dentist").length,depots:t.stops.filter(i=>i.type==="depot").length,deliveries:t.stops.filter(i=>i.type==="dentist"&&(i.action==="delivery"||i.action==="both")).length,pickups:t.stops.filter(i=>i.type==="dentist"&&(i.action==="pickup"||i.action==="both")).length,totalStops:t.stops.length};return o.jsxs("div",{className:"space-y-4",children:[e&&o.jsxs(ve,{className:"w-full h-12 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-md font-medium",onClick:e,disabled:r||n,children:[o.jsx(Qs,{className:`h-4 w-4 ${r?"animate-spin":""}`}),r?"Optimisation...":"Optimiser la tournée"]}),o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(sr,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-amber-800 mb-1",children:"Optimisation requise"}),o.jsx("p",{className:"text-sm text-amber-700",children:"Cette tournée doit être optimisée pour calculer l'itinéraire le plus efficace et obtenir les temps de trajet."})]})]})}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[o.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[o.jsx(it,{className:"h-4 w-4"}),"Composition de la tournée"]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(Dt,{className:"h-4 w-4 text-blue-600"})}),o.jsx("p",{className:"text-sm text-gray-600",children:"Laboratoires"}),o.jsx("p",{className:"text-lg font-semibold text-blue-600",children:s.laboratories})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(it,{className:"h-4 w-4 text-green-600"})}),o.jsx("p",{className:"text-sm text-gray-600",children:"Dentistes"}),o.jsx("p",{className:"text-lg font-semibold text-green-600",children:s.dentists})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2",children:o.jsx(gt,{className:"h-4 w-4 text-orange-600"})}),o.jsx("p",{className:"text-sm text-gray-600",children:"Dépôts"}),o.jsx("p",{className:"text-lg font-semibold text-orange-600",children:s.depots})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ut,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Livraisons"})]}),o.jsx("p",{className:"text-2xl font-semibold text-blue-900",children:s.deliveries}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:s.deliveries===1?"livraison chez clients":"livraisons chez clients"})]}),o.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-100",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Rn,{className:"h-4 w-4 text-orange-600"}),o.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Récupérations"})]}),o.jsx("p",{className:"text-2xl font-semibold text-orange-900",children:s.pickups}),o.jsx("p",{className:"text-xs text-orange-600 mt-1",children:s.pickups===1?"récupération chez clients":"récupérations chez clients"})]})]})]})},Sse=({route:t,onOptimize:e,onValidate:r,isOptimizing:n=!1,isValidating:s=!1})=>{const i={deliveries:t.stops.filter(a=>a.type==="dentist"&&(a.action==="delivery"||a.action==="both")).length,pickups:t.stops.filter(a=>a.type==="dentist"&&(a.action==="pickup"||a.action==="both")).length,totalStops:t.stops.length,totalActions:t.stops.filter(a=>a.type==="dentist"&&(a.action==="delivery"||a.action==="pickup"||a.action==="both")).length};return o.jsxs("div",{className:"space-y-4",children:[t.status!=="validated"&&o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e&&o.jsxs(ve,{className:"flex-1 h-12 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-md font-medium",onClick:e,disabled:n||s,children:[o.jsx(Qs,{className:`h-4 w-4 ${n?"animate-spin":""}`}),n?"Optimisation...":"Optimiser la tournée"]}),r&&o.jsxs(ve,{className:"flex-1 h-12 flex items-center justify-center gap-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-md font-medium",onClick:r,disabled:n||s,children:[o.jsx(Er,{className:"h-4 w-4"}),s?"Validation...":"Valider la tournée"]})]}),t.status==="validated"?o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(er,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-800 mb-1",children:"Tournée validée"}),o.jsx("p",{className:"text-sm text-green-700",children:"Cette tournée a été validée et est prête à être exécutée par le livreur."})]})]})}):o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(er,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-800 mb-1",children:"Tournée optimisée"}),o.jsx("p",{className:"text-sm text-green-700",children:"L'itinéraire a été calculé pour minimiser le temps de trajet et maximiser l'efficacité. Vous pouvez maintenant valider cette tournée."})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-3 border border-blue-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(hl,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Distance"})]}),o.jsx("p",{className:"text-lg font-semibold text-blue-900",children:t.totalDistance})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-3 border border-green-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(bt,{className:"h-4 w-4 text-green-600"}),o.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Durée"})]}),o.jsx("p",{className:"text-lg font-semibold text-green-900",children:t.totalDuration})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-3 border border-purple-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(it,{className:"h-4 w-4 text-purple-600"}),o.jsx("span",{className:"text-sm text-purple-600 font-medium",children:"Arrêts"})]}),o.jsx("p",{className:"text-lg font-semibold text-purple-900",children:i.totalStops})]}),o.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-3 border border-orange-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ut,{className:"h-4 w-4 text-orange-600"}),o.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Actions"})]}),o.jsx("p",{className:"text-lg font-semibold text-orange-900",children:i.totalActions})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ut,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Livraisons"})]}),o.jsx("p",{className:"text-2xl font-semibold text-blue-900",children:i.deliveries}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:i.deliveries===1?"livraison chez clients":"livraisons chez clients"})]}),o.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-100",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Rn,{className:"h-4 w-4 text-orange-600"}),o.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Récupérations"})]}),o.jsx("p",{className:"text-2xl font-semibold text-orange-900",children:i.pickups}),o.jsx("p",{className:"text-xs text-orange-600 mt-1",children:i.pickups===1?"récupération chez clients":"récupérations chez clients"})]})]})]})},Nse=t=>{if(!t)return[];const e=[];let r=0,n=0,s=0;for(;r<t.length;){let i,a=0,l=0;do i=t.charCodeAt(r++)-63,l|=(i&31)<<a,a+=5;while(i>=32);const c=(l&1)!==0?~(l>>1):l>>1;n+=c,a=0,l=0;do i=t.charCodeAt(r++)-63,l|=(i&31)<<a,a+=5;while(i>=32);const d=(l&1)!==0?~(l>>1):l>>1;s+=d,e.push({lat:n/1e5,lng:s/1e5})}return e},mi=["#4F46E5","#059669","#DC2626","#7C3AED","#EA580C","#0891B2","#BE185D","#65A30D"],Ese=({routes:t,className:e=""})=>{const[r,n]=w.useState(null),[s,i]=w.useState(null),[a,l]=w.useState(new Set),[c,d]=w.useState(!1),f=w.useMemo(()=>t.filter(g=>(g.status==="optimized"||g.status==="validated")&&g.polyline),[t]),p=w.useMemo(()=>{const g=f.flatMap(x=>x.stops);if(g.length===0)return{lat:43.6047,lng:1.4442};const y=g.reduce((x,j)=>x+j.lat,0)/g.length,b=g.reduce((x,j)=>x+j.lng,0)/g.length;return{lat:y,lng:b}},[f]);z.useEffect(()=>{f.length>0&&a.size===0&&l(new Set(f.map(g=>g.id)))},[f,a.size]);const m=g=>{const y=new Set(a),b=y.has(g);b?(y.delete(g),console.log(`🔍 Route ${g} cachée. Routes visibles:`,Array.from(y))):(y.add(g),console.log(`👁️ Route ${g} affichée. Routes visibles:`,Array.from(y))),l(y),b&&s?.route===g&&i(null)};return f.length===0?o.jsx(_e,{className:`bg-white/80 backdrop-blur-sm border-0 shadow-sm ${e}`,children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx(it,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-600",children:"Aucune tournée optimisée à afficher"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Optimisez des tournées pour voir leurs itinéraires sur la carte"})]})}):o.jsxs(_e,{className:`bg-white/80 backdrop-blur-sm border-0 shadow-sm ${e}`,children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[o.jsx(ki,{className:"h-5 w-5 text-blue-600"}),"Itinéraires optimisés"]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[f.length," tournée",f.length>1?"s":""," optimisée",f.length>1?"s":""]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>d(!c),children:[o.jsx(LQ,{className:"h-4 w-4"}),c?"Réduire":"Agrandir"]})})]})}),o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((g,y)=>o.jsxs(ve,{variant:a.has(g.id)?"primary":"outline",size:"sm",onClick:()=>m(g.id),className:"flex items-center gap-2",style:{backgroundColor:a.has(g.id)?mi[y%mi.length]:void 0,borderColor:mi[y%mi.length]},children:[a.has(g.id)?o.jsx(kE,{className:"h-3 w-3"}):o.jsx(OQ,{className:"h-3 w-3"}),o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:mi[y%mi.length]}}),g.driverName]},g.id))})}),o.jsx("div",{className:`${c?"h-96":"h-80"} transition-all duration-300`,children:o.jsxs(IE,{mapContainerStyle:{width:"100%",height:"100%"},center:p,zoom:11,options:{disableDefaultUI:!1,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},children:[f.map((g,y)=>{if(!a.has(g.id))return null;const b=Nse(g.polyline||""),x=mi[y%mi.length];return b.length>0?o.jsxs(z.Fragment,{children:[o.jsx(iS,{path:b,options:{strokeColor:"#374151",strokeOpacity:.3,strokeWeight:8,zIndex:1}}),o.jsx(iS,{path:b,options:{strokeColor:x,strokeOpacity:.8,strokeWeight:4,zIndex:2,geodesic:!0}})]},`polyline-${g.id}`):null}),f.map((g,y)=>{if(!a.has(g.id))return null;const b=mi[y%mi.length];return g.stops.map((x,j)=>o.jsx(pB,{position:{lat:x.lat,lng:x.lng},title:`${x.name} - ${x.action}`,icon:{url:`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(`
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                      <circle cx="16" cy="16" r="14" fill="${b}" stroke="white" stroke-width="2"/>
                      <text x="16" y="21" text-anchor="middle" fill="white" font-size="12" font-weight="bold">
                        ${j+1}
                      </text>
                    </svg>
                  `)}`,scaledSize:new window.google.maps.Size(32,32),anchor:new window.google.maps.Point(16,16)},onClick:()=>i({route:g.id,stop:x.id})},`marker-${g.id}-${x.id}`))}),s&&(()=>{const g=f.find(b=>b.id===s.route),y=g?.stops.find(b=>b.id===s.stop);return!g||!y||!a.has(g.id)?null:o.jsx(bB,{position:{lat:y.lat,lng:y.lng},onCloseClick:()=>i(null),children:o.jsxs("div",{className:"p-2 max-w-xs",children:[o.jsx("h4",{className:"font-semibold text-gray-900",children:y.name}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:y.address}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded",children:y.type==="laboratory"?"Laboratoire":y.type==="dentist"?"Dentiste":"Dépôt"}),o.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded",children:y.action==="pickup"?"Enlèvement":y.action==="delivery"?"Livraison":"Enlèvement + Livraison"})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Route: ",g.driverName]})]})})})()]})})]})},Cse=({isOpen:t,onClose:e,result:r})=>{if(!t||!r)return null;const n=a=>{switch(a){case"critical":return o.jsx(sr,{className:"h-5 w-5 text-red-500"});case"warning":return o.jsx(ss,{className:"h-5 w-5 text-yellow-500"});case"info":return o.jsx(yl,{className:"h-5 w-5 text-blue-500"})}},s=a=>{switch(a){case"critical":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}},i=a=>{switch(a){case"duplicates":return"Locations en double";case"missing_gps":return"Coordonnées GPS problématiques";case"missing_place_id":return"Place ID manquants";case"orphaned":return"Locations orphelines";default:return a}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(it,{className:"h-6 w-6 text-blue-500"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Analyse des Locations"})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(tr,{className:"h-6 w-6"})})]}),o.jsx("div",{className:"p-6 bg-gray-50 border-b",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(it,{className:"h-5 w-5 text-blue-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Total Locations"})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:r.totalLocations})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-5 w-5 bg-green-500 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Saines"})]}),o.jsx("div",{className:"text-2xl font-bold text-green-600 mt-1",children:r.healthyLocations})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"h-5 w-5 text-red-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Problèmes"})]}),o.jsx("div",{className:"text-2xl font-bold text-red-600 mt-1",children:r.issues.reduce((a,l)=>a+l.count,0)})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-5 w-5 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Qualité"})]}),o.jsxs("div",{className:"text-2xl font-bold text-blue-600 mt-1",children:[r.summary.validLocationsPercentage,"%"]})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:r.issues.length===0?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"bg-green-100 rounded-full p-3",children:o.jsx(yl,{className:"h-8 w-8 text-green-600"})})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"🎉 Parfait ! Aucun problème détecté"}),o.jsx("p",{className:"text-gray-600",children:"Toutes vos locations sont correctement configurées et ne présentent aucun doublon."})]}):o.jsx("div",{className:"p-6 space-y-6",children:r.issues.map((a,l)=>o.jsxs("div",{className:`border rounded-lg p-4 ${s(a.severity)}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n(a.severity),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i(a.type)}),o.jsxs("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-sm font-medium",children:[a.count," ",a.count>1?"problèmes":"problème"]})]}),o.jsxs("div",{className:"space-y-3",children:[a.details.slice(0,5).map((c,d)=>o.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(it,{className:"h-4 w-4 text-gray-400 mt-1 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:c.address}),o.jsx("p",{className:"text-xs text-red-600 mt-1",children:c.issue}),(c.clients?.length||c.laboratories?.length)&&o.jsxs("div",{className:"mt-3 space-y-2",children:[c.clients&&c.clients.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 mb-1",children:"Clients concernés :"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:c.clients.map((f,p)=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-md font-medium",children:[o.jsx(Ln,{className:"h-3 w-3"}),f]},p))})]}),c.laboratories&&c.laboratories.length>0&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-gray-500 mb-1",children:"Laboratoires concernés :"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:c.laboratories.map((f,p)=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-md font-medium",children:[o.jsx(Dt,{className:"h-3 w-3"}),f]},p))})]})]})]})]})},d)),a.details.length>5&&o.jsxs("div",{className:"text-center text-sm text-gray-500 py-2",children:["... et ",a.details.length-5," autres"]})]})]},l))})}),o.jsx("div",{className:"p-6 border-t bg-gray-50",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Analyse effectuée le ",new Date().toLocaleString("fr-FR")]}),o.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})]})})]})})},kse=as((t,e)=>({depot:null,isLoading:!1,error:null,fetchDepot:async()=>{t({isLoading:!0,error:null});try{const{data:r,error:n}=await Y.from("depot").select(`
          id,
          name,
          location_id,
          locations:location_id (
            id,
            formatted_address,
            place_id,
            latitude,
            longitude,
            delivery_instructions,
            type
          )
        `).limit(1).single();if(n){console.error("Erreur lors de la récupération du dépôt:",n),t({error:"Erreur lors de la récupération du dépôt",isLoading:!1});return}if(r){const{data:s,error:i}=await Y.from("location_photos").select("id, photo_url, description").eq("location_id",r.location_id);i&&console.error("Erreur lors de la récupération des photos:",i);let a;if(r.locations){const c=Array.isArray(r.locations)?r.locations[0]:r.locations;c&&(a={formatted_address:String(c.formatted_address||""),place_id:String(c.place_id||""),latitude:Number(c.latitude||0),longitude:Number(c.longitude||0),delivery_instructions:c.delivery_instructions,type:c.type})}const l={id:r.id,name:r.name,location_id:r.location_id,location:a,photos:s||[]};t({depot:l,isLoading:!1})}else t({depot:null,isLoading:!1})}catch(r){console.error("Erreur inattendue:",r),t({error:"Une erreur est survenue",isLoading:!1})}},createDepot:async(r,n)=>{t({isLoading:!0,error:null});try{const{data:s}=await Y.from("depot").select("id").limit(1).single();if(s)return t({error:"Un dépôt existe déjà. Veuillez le mettre à jour à la place.",isLoading:!1}),null;const{data:i,error:a}=await Y.from("depot").insert({name:r,location_id:n}).select().single();return a?(console.error("Erreur lors de la création du dépôt:",a),t({error:"Erreur lors de la création du dépôt",isLoading:!1}),null):(await e().fetchDepot(),i.id)}catch(s){return console.error("Erreur inattendue:",s),t({error:"Une erreur est survenue",isLoading:!1}),null}finally{t({isLoading:!1})}},updateDepot:async(r,n)=>{t({isLoading:!0,error:null});try{const{error:s}=await Y.from("depot").update({name:n.name,location_id:n.location_id}).eq("id",r);return s?(console.error("Erreur lors de la mise à jour du dépôt:",s),t({error:"Erreur lors de la mise à jour du dépôt",isLoading:!1}),!1):(await e().fetchDepot(),!0)}catch(s){return console.error("Erreur inattendue:",s),t({error:"Une erreur est survenue",isLoading:!1}),!1}finally{t({isLoading:!1})}},addDepotPhoto:async(r,n,s="")=>{t({isLoading:!0,error:null});try{const{data:i,error:a}=await Y.from("depot").select("location_id").eq("id",r).single();if(a)return console.error("Erreur lors de la récupération de l'ID d'emplacement:",a),t({error:"Erreur lors de l'ajout de la photo",isLoading:!1}),null;const{data:l,error:c}=await Y.from("location_photos").insert({location_id:i.location_id,photo_url:n,description:s}).select().single();return c?(console.error("Erreur lors de l'ajout de la photo:",c),t({error:"Erreur lors de l'ajout de la photo",isLoading:!1}),null):(await e().fetchDepot(),l.id)}catch(i){return console.error("Erreur inattendue:",i),t({error:"Une erreur est survenue",isLoading:!1}),null}finally{t({isLoading:!1})}},deleteDepotPhoto:async r=>{t({isLoading:!0,error:null});try{const{error:n}=await Y.from("location_photos").delete().eq("id",r);return n?(console.error("Erreur lors de la suppression de la photo:",n),t({error:"Erreur lors de la suppression de la photo",isLoading:!1}),!1):(await e().fetchDepot(),!0)}catch(n){return console.error("Erreur inattendue:",n),t({error:"Une erreur est survenue",isLoading:!1}),!1}finally{t({isLoading:!1})}},updatePhotoDescription:async(r,n)=>{t({isLoading:!0,error:null});try{const{error:s}=await Y.from("location_photos").update({description:n}).eq("id",r);return s?(console.error("Erreur lors de la mise à jour de la description:",s),t({error:"Erreur lors de la mise à jour de la description",isLoading:!1}),!1):(await e().fetchDepot(),!0)}catch(s){return console.error("Erreur inattendue:",s),t({error:"Une erreur est survenue",isLoading:!1}),!1}finally{t({isLoading:!1})}}})),Qr=[];for(let t=0;t<256;++t)Qr.push((t+256).toString(16).slice(1));function Pse(t,e=0){return(Qr[t[e+0]]+Qr[t[e+1]]+Qr[t[e+2]]+Qr[t[e+3]]+"-"+Qr[t[e+4]]+Qr[t[e+5]]+"-"+Qr[t[e+6]]+Qr[t[e+7]]+"-"+Qr[t[e+8]]+Qr[t[e+9]]+"-"+Qr[t[e+10]]+Qr[t[e+11]]+Qr[t[e+12]]+Qr[t[e+13]]+Qr[t[e+14]]+Qr[t[e+15]]).toLowerCase()}let ab;const Ose=new Uint8Array(16);function Ase(){if(!ab){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ab=crypto.getRandomValues.bind(crypto)}return ab(Ose)}const Tse=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DL={randomUUID:Tse};function Lse(t,e,r){if(DL.randomUUID&&!t)return DL.randomUUID();t=t||{};const n=t.random??t.rng?.()??Ase();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Pse(n)}function Ng(){return Ng=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ng.apply(this,arguments)}var IL=function(t){var e=w.useRef(t);return e.current=t,e},Mse=function(t,e){var r;return function(){for(var n=this,s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];r!==null&&(clearTimeout(r),r=null),r=setTimeout(function(){return t.apply(n,i)},e)}},Rse="💡 use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library",Dse=function(e){var r=e===void 0?{}:e,n=r.requestOptions,s=r.debounce,i=s===void 0?200:s,a=r.cache,l=a===void 0?1440*60:a,c=r.cacheKey,d=c===void 0?"upa":c,f=r.googleMaps,p=r.callbackName,m=r.defaultValue,g=m===void 0?"":m,y=r.initOnMount,b=y===void 0?!0:y,x=w.useState(!1),j=x[0],S=x[1],C=w.useState(g),E=C[0],N=C[1],P=w.useState({loading:!1,status:"",data:[]}),O=P[0],L=P[1],A=w.useRef(),R=IL(n),M=IL(f),D=w.useCallback(function(){var G;if(!A.current){var q=window,U=q.google,W=M.current,I=W?.places||(U==null||(G=U.maps)==null?void 0:G.places);if(!I){console.error(Rse);return}A.current=new I.AutocompleteService,S(!0)}},[M]),B=w.useCallback(function(){L({loading:!1,status:"",data:[]})},[]),F=w.useCallback(function(G){G===void 0&&(G=d);try{sessionStorage.removeItem(G)}catch{}},[d]),V=w.useCallback(Mse(function(G){var q;if(!G){B();return}L(function(W){return Ng({},W,{loading:!0})});var U={};try{U=JSON.parse(sessionStorage.getItem(d)||"{}")}catch{}if(l&&(U=Object.keys(U).reduce(function(W,I){return U[I].maxAge-Date.now()>=0&&(W[I]=U[I]),W},{}),U[G])){L({loading:!1,status:"OK",data:U[G].data});return}(q=A.current)==null||q.getPlacePredictions(Ng({},R.current,{input:G}),function(W,I){if(L({loading:!1,status:I,data:W||[]}),l&&I==="OK"){U[G]={data:W,maxAge:Date.now()+l*1e3};try{sessionStorage.setItem(d,JSON.stringify(U))}catch{}}})},i),[l,d,B,R]),J=w.useCallback(function(G,q){q===void 0&&(q=!0),N(G),A.current&&q&&V(G)},[V]);return w.useEffect(function(){if(!b)return function(){return null};var G=window,q=G.google;return!M.current&&!(q!=null&&q.maps)&&p?window[p]=D:D(),function(){window[p]&&delete window[p]}},[p,M,D,b]),{ready:j,value:E,suggestions:O,setValue:J,clearSuggestions:B,clearCache:F,init:D}},Ise="💡 use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions.",$se=function(e){var r=new window.google.maps.Geocoder;return new Promise(function(n,s){r.geocode(e,function(i,a){a!=="OK"&&s(a),!e.address&&e.componentRestrictions&&(console.error(Ise),n(i)),n(i)})})},Fse=function(e){var r=e.geometry.location,n=r.lat,s=r.lng;return{lat:n(),lng:s()}};const Mc=({value:t,onChange:e,placeholder:r="Entrez une adresse...",className:n})=>{const{ready:s,suggestions:{status:i,data:a},setValue:l,clearSuggestions:c}=Dse({requestOptions:{componentRestrictions:{country:"fr"}},debounce:300,defaultValue:t}),d=async f=>{l(f.description,!1),e(f.description,{placeId:f.place_id}),c();try{const p=await $se({address:f.description}),m=await Fse(p[0]);e(f.description,{latLng:m,placeId:p[0].place_id})}catch(p){console.error("Error getting geocode:",p)}};return o.jsxs("div",{className:"relative",children:[o.jsx(Qe,{value:t,onChange:f=>{l(f.target.value),e(f.target.value,{})},disabled:!s,placeholder:r,leftIcon:o.jsx(it,{className:"h-4 w-4"}),className:n}),i==="OK"&&o.jsx("ul",{className:"absolute z-10 w-full bg-white mt-1 rounded-lg shadow-lg border border-gray-200 max-h-60 overflow-auto",children:a.map(f=>{const{place_id:p,structured_formatting:{main_text:m,secondary_text:g}}=f;return o.jsxs("li",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>d(f),children:[o.jsx("strong",{className:"block text-gray-900",children:m}),o.jsx("span",{className:"text-sm text-gray-500",children:g})]},p)})})]})},Bse=()=>{const{depot:t,isLoading:e,error:r,fetchDepot:n,createDepot:s,updateDepot:i,addDepotPhoto:a,deleteDepotPhoto:l,updatePhotoDescription:c}=kse(),[d,f]=w.useState(""),[p,m]=w.useState(""),[g,y]=w.useState(""),[b,x]=w.useState(!1),[j,S]=w.useState(!1),[C,E]=w.useState(0),[N,P]=w.useState(""),[O,L]=w.useState({}),[A,R]=w.useState(""),[M,D]=w.useState(null);w.useEffect(()=>{n()},[n]),w.useEffect(()=>{t&&(f(t.name),t.location&&(m(t.location.formatted_address||""),y(t.location.delivery_instructions||"")))},[t]);const B=async()=>{if(x(!0),P(""),!O.latLng||!O.placeId){alert("Veuillez sélectionner une adresse valide dans la liste déroulante"),x(!1);return}try{let q=t?.location_id;if(q){const{error:W}=await Y.from("locations").update({formatted_address:p,place_id:O.placeId,latitude:O.latLng.lat,longitude:O.latLng.lng,delivery_instructions:g,type:"depot"}).eq("id",q);if(W){console.error("Erreur lors de la mise à jour de l'emplacement:",W),alert("Erreur lors de la mise à jour de l'emplacement"),x(!1);return}}else{const{data:W,error:I}=await Y.from("locations").insert({formatted_address:p,place_id:O.placeId,latitude:O.latLng.lat,longitude:O.latLng.lng,delivery_instructions:g,type:"depot"}).select().single();if(I){console.error("Erreur lors de la création de l'emplacement:",I),alert("Erreur lors de la création de l'emplacement"),x(!1);return}q=W.id}let U=!1;t?U=await i(t.id,{name:d,location_id:q}):U=!!await s(d,q),U&&(P("Dépôt enregistré avec succès !"),setTimeout(()=>P(""),3e3))}catch(q){console.error("Erreur lors de la sauvegarde:",q),alert("Une erreur est survenue lors de la sauvegarde")}finally{x(!1)}},F=(q,U)=>{m(q),U&&U.latLng&&U.placeId&&L({latLng:U.latLng,placeId:U.placeId})},V=async q=>{const U=q.target.files?.[0];if(!(!U||!t)){S(!0),E(0);try{const W=U.name.split(".").pop(),H=`depot-photos/${`${Lse()}.${W}`}`,{error:ne}=await Y.storage.from("locations").upload(H,U,{cacheControl:"3600",upsert:!1});if(ne)throw ne;const{data:{publicUrl:ge}}=Y.storage.from("locations").getPublicUrl(H);await a(t.id,ge,A),R(""),P("Photo ajoutée avec succès !"),setTimeout(()=>P(""),3e3)}catch(W){console.error("Erreur upload photo:",W),alert("Erreur lors de l'upload de la photo")}finally{S(!1),E(0)}}},J=async q=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await l(q),P("Photo supprimée avec succès !"),setTimeout(()=>P(""),3e3)}catch(U){console.error("Erreur suppression photo:",U),alert("Erreur lors de la suppression de la photo")}},G=async(q,U)=>{try{await c(q,U),D(null),P("Description mise à jour !"),setTimeout(()=>P(""),3e3)}catch(W){console.error("Erreur mise à jour description:",W),alert("Erreur lors de la mise à jour")}};return e?o.jsxs("div",{className:"flex justify-center items-center py-12",children:[o.jsx(is,{className:"h-8 w-8 animate-spin text-blue-500"}),o.jsx("span",{className:"ml-2",children:"Chargement des informations du dépôt..."})]}):o.jsxs("div",{children:[r&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:o.jsx("p",{children:r})}),N&&o.jsx(Ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:o.jsx("p",{children:N})}),o.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informations Générales"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-gray-700 mb-2",children:"Nom du Dépôt"}),o.jsx("input",{type:"text",value:d,onChange:q=>f(q.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Dépôt Central Provence Courses"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-gray-700 mb-2",children:"Adresse"}),o.jsx(Mc,{value:p,onChange:F,placeholder:"Entrez l'adresse du dépôt central",className:"w-full"}),O.latLng&&o.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Coordonnées GPS: ",O.latLng.lat.toFixed(6),", ",O.latLng.lng.toFixed(6)]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-gray-700 mb-2",children:"Instructions de livraison"}),o.jsx("textarea",{value:g,onChange:q=>y(q.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Instructions spéciales pour les livreurs",rows:3})]}),o.jsxs("div",{className:"border-t pt-6 mt-6",children:[o.jsx("h4",{className:"text-md font-semibold mb-4",children:"Photos du Dépôt"}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-700 mb-2",children:"Description de la photo (optionnel)"}),o.jsx("input",{type:"text",value:A,onChange:q=>R(q.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Entrée principale, zone de stockage..."})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsxs("label",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded cursor-pointer flex items-center",children:[o.jsx(OE,{className:"h-4 w-4 mr-2"}),j?"Upload...":"Ajouter une photo",o.jsx("input",{type:"file",accept:"image/*",onChange:V,className:"hidden",disabled:j})]}),j&&o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${C}%`}})}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Math.round(C),"%"]})]})]})]}),t?.photos&&t.photos.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:t.photos.map(q=>o.jsxs("div",{className:"relative group bg-gray-50 rounded-lg overflow-hidden shadow",children:[o.jsx("img",{src:q.photo_url,alt:q.description||"Photo du dépôt",className:"w-full h-48 object-cover"}),o.jsx("div",{className:"p-3",children:M===q.id?o.jsxs("div",{className:"flex flex-col",children:[o.jsx("textarea",{value:A,onChange:U=>R(U.target.value),className:"w-full px-2 py-1 border rounded text-sm mb-2",rows:2,placeholder:"Description de la photo"}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx("button",{onClick:()=>D(null),className:"text-xs text-gray-600 mr-2",children:"Annuler"}),o.jsx("button",{onClick:()=>G(q.id,A),className:"text-xs text-blue-600",children:"Enregistrer"})]})]}):o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("p",{className:"text-sm text-gray-700 font-medium line-clamp-2",children:q.description||"Photo du dépôt"}),o.jsx("button",{onClick:()=>{R(q.description||""),D(q.id)},className:"text-blue-600 p-1 rounded hover:bg-blue-50",title:"Modifier la description",children:o.jsx(RQ,{className:"h-4 w-4"})})]})}),o.jsx("button",{onClick:()=>J(q.id),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Supprimer la photo",children:o.jsx(tr,{className:"h-5 w-5"})})]},q.id))}):o.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-100 rounded-lg p-6 mb-6",children:[o.jsx(ho,{className:"h-8 w-8 text-gray-400 mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune photo ajoutée"})]})]}),o.jsx("button",{onClick:B,disabled:b,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50 flex items-center",children:b?o.jsxs(o.Fragment,{children:[o.jsx(is,{className:"h-4 w-4 animate-spin mr-2"}),"Sauvegarde..."]}):o.jsxs(o.Fragment,{children:[o.jsx(FQ,{className:"h-4 w-4 mr-2"}),"Sauvegarder"]})})]})]})},zse=async()=>{try{const{data:t,error:e}=await Y.from("driver_routes").select(`
        id,
        driver_id,
        date,
        status,
        driver:drivers!driver_routes_driver_id_fkey (
          id,
          full_name,
          email
        )
      `).in("status",["validated","in_progress"]).order("date",{ascending:!1}).limit(50);if(e)throw e;return await Promise.all((t||[]).map(async n=>{const{data:s,error:i}=await Y.from("driver_route_stops").select("id").eq("route_id",n.id),{data:a,error:l}=await Y.from("driver_route_shipments").select("id").eq("route_id",n.id).eq("status","completed");return{...n,driver:Array.isArray(n.driver)?n.driver[0]:n.driver,stops_count:s?.length||0,completed_stops_count:a?.length||0}}))}catch(t){throw console.error("Erreur lors de la récupération des routes:",t),t}},Use=async t=>{try{const{data:e,error:r}=await Y.from("driver_route_stops").select(`
        id,
        route_id,
        location_id,
        stop_order,
        stop_type,
        location:locations!driver_route_stops_location_id_fkey (
          formatted_address
        )
      `).eq("route_id",t).order("stop_order",{ascending:!0});if(r)throw r;return await Promise.all((e||[]).map(async s=>{const{data:i,error:a}=await Y.from("driver_route_shipments").select(`
            id,
            type,
            status,
            laboratory_name,
            client_name
          `).eq("stop_id",s.id),l=i?.every(c=>c.status==="completed")||!1;return{...s,location:Array.isArray(s.location)?s.location[0]:s.location,completed:l,shipments:i||[]}}))}catch(e){throw console.error("Erreur lors de la récupération des stops:",e),e}},qse=async t=>{try{const{error:e}=await Y.from("driver_route_shipments").update({status:"completed",updated_at:new Date().toISOString()}).eq("route_id",t).neq("status","completed");if(e)throw e;const{error:r}=await Y.from("driver_routes").update({status:"completed",updated_at:new Date().toISOString()}).eq("id",t);if(r)throw r;return!0}catch(e){throw console.error("Erreur lors de la finalisation de la route:",e),e}},Vse=async t=>{try{const{error:e}=await Y.from("driver_route_shipments").update({status:"completed",updated_at:new Date().toISOString()}).eq("stop_id",t).neq("status","completed");if(e)throw e;return!0}catch(e){throw console.error("Erreur lors de la finalisation du stop:",e),e}},NB=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(null),[s,i]=w.useState([]),[a,l]=w.useState(!1),[c,d]=w.useState(null),[f,p]=w.useState(!1),m=w.useCallback(async()=>{l(!0),d(null);try{const E=await zse();e(E)}catch(E){d("Erreur lors du chargement des tournées"),console.error(E)}finally{l(!1)}},[]),g=w.useCallback(async E=>{l(!0),d(null);try{const N=await Use(E);i(N)}catch(N){d("Erreur lors du chargement des arrêts"),console.error(N)}finally{l(!1)}},[]),y=w.useCallback(async E=>{if(!confirm("Êtes-vous sûr de vouloir marquer cette tournée comme terminée ?"))return!1;l(!0),d(null);try{return await qse(E),await m(),r?.id===E&&(n(null),i([])),!0}catch(N){return d("Erreur lors de la finalisation de la tournée"),console.error(N),!1}finally{l(!1)}},[m,r]),b=w.useCallback(async E=>{if(!confirm("Êtes-vous sûr de vouloir marquer cet arrêt comme terminé ?"))return!1;l(!0),d(null);try{return await Vse(E),r&&await g(r.id),await m(),!0}catch(N){return d("Erreur lors de la finalisation de l'arrêt"),console.error(N),!1}finally{l(!1)}},[g,r,m]),x=w.useCallback(()=>{p(!0),m()},[m]),j=w.useCallback(()=>{p(!1),n(null),i([]),d(null)},[]),S=w.useCallback(E=>{n(E),E?g(E.id):i([])},[g]),C=w.useCallback(()=>{d(null)},[]);return{routes:t,selectedRoute:r,routeStops:s,isLoading:a,error:c,showModal:f,openModal:x,closeModal:j,selectRoute:S,handleCompleteRoute:y,handleCompleteStop:b,clearError:C}},Wse=({isOpen:t,onClose:e})=>{const{routes:r,selectedRoute:n,routeStops:s,isLoading:i,error:a,selectRoute:l,handleCompleteRoute:c,handleCompleteStop:d,clearError:f}=NB(),p=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),m=y=>{switch(y){case"pending":return"text-gray-600 bg-gray-100";case"optimized":return"text-blue-600 bg-blue-100";case"validated":return"text-green-600 bg-green-100";case"in_progress":return"text-orange-600 bg-orange-100";case"completed":return"text-emerald-600 bg-emerald-100";default:return"text-gray-600 bg-gray-100"}},g=y=>{switch(y){case"pending":return"En attente";case"optimized":return"Optimisée";case"validated":return"Validée";case"in_progress":return"En cours";case"completed":return"Terminée";default:return y}};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(gt,{className:"h-6 w-6 text-blue-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?`Tournée - ${n.driver.full_name}`:"Gestion des Tournées"}),o.jsx("p",{className:"text-sm text-gray-600",children:n?`${p(n.date)} - ${g(n.status)}`:"Marquer des tournées ou arrêts comme terminés"})]})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(tr,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[a&&o.jsxs("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{className:"h-4 w-4"}),o.jsx("span",{children:a})]}),o.jsx("button",{onClick:f,className:"text-red-500 hover:text-red-700",children:o.jsx(tr,{className:"h-4 w-4"})})]}),n?o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("button",{onClick:()=>l(null),className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium",children:[o.jsx(NQ,{className:"h-4 w-4"}),"Retour aux tournées"]}),o.jsxs("button",{onClick:()=>c(n.id),disabled:i,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded font-medium disabled:opacity-50 flex items-center gap-2",children:[o.jsx(er,{className:"h-4 w-4"}),"Terminer la tournée"]})]}),o.jsxs("div",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Informations de la tournée"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Conducteur:"}),o.jsx("span",{className:"ml-2 font-medium",children:n.driver.full_name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Date:"}),o.jsx("span",{className:"ml-2 font-medium",children:p(n.date)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Statut:"}),o.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${m(n.status)}`,children:g(n.status)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Progression:"}),o.jsxs("span",{className:"ml-2 font-medium",children:[n.completed_stops_count," / ",n.stops_count," arrêts"]})]})]})]}),o.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Arrêts de la tournée"}),i?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx(bt,{className:"h-6 w-6 animate-spin text-blue-500 mr-2"}),o.jsx("span",{children:"Chargement des arrêts..."})]}):s.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(it,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"Aucun arrêt trouvé pour cette tournée"})]}):o.jsx("div",{className:"space-y-3",children:s.map((y,b)=>o.jsx("div",{className:`border rounded-lg p-4 ${y.completed?"border-green-200 bg-green-50":"border-gray-200 bg-white"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${y.completed?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:b+1}),o.jsx(it,{className:"h-4 w-4 text-gray-500"}),o.jsx("span",{className:"font-medium text-gray-900 flex-1",children:y.location.formatted_address}),y.completed&&o.jsx(er,{className:"h-5 w-5 text-green-500"})]}),y.shipments&&y.shipments.length>0&&o.jsxs("div",{className:"ml-9 mt-2",children:[o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-1",children:[o.jsx(ut,{className:"h-3 w-3"}),o.jsx("span",{children:"Expéditions:"})]}),o.jsx("div",{className:"space-y-1",children:y.shipments.map(x=>o.jsxs("div",{className:"text-xs bg-white rounded px-2 py-1",children:[o.jsx("span",{className:"font-medium",children:x.type==="pickup"?"📦 Collecte":"🚚 Livraison"}),x.laboratory_name&&o.jsx("span",{className:"ml-2 text-gray-600",children:x.laboratory_name}),x.client_name&&o.jsxs("span",{className:"ml-2 text-gray-600",children:["→ ",x.client_name]}),o.jsx("span",{className:`ml-2 px-1 py-0.5 rounded text-xs ${x.status==="completed"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:x.status==="completed"?"Terminé":"En cours"})]},x.id))})]})]}),!y.completed&&o.jsxs("button",{onClick:()=>d(y.id),disabled:i,className:"px-3 py-1 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded font-medium disabled:opacity-50 flex items-center gap-1",children:[o.jsx(er,{className:"h-3 w-3"}),"Terminer"]})]})},y.id))})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tournées actives"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[r.length," tournée",r.length>1?"s":""," trouvée",r.length>1?"s":""]})]}),i?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx(bt,{className:"h-6 w-6 animate-spin text-blue-500 mr-2"}),o.jsx("span",{children:"Chargement..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(gt,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"Aucune tournée active trouvée"})]}):o.jsx("div",{className:"space-y-3",children:r.map(y=>o.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Kr,{className:"h-4 w-4 text-gray-500"}),o.jsx("span",{className:"font-medium text-gray-900",children:y.driver.full_name}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(y.status)}`,children:g(y.status)})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[o.jsxs("span",{children:["📅 ",p(y.date)]}),o.jsxs("span",{children:["📍 ",y.stops_count," arrêt",y.stops_count>1?"s":""]}),o.jsxs("span",{children:["✅ ",y.completed_stops_count," terminé",y.completed_stops_count>1?"s":""]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>l(y),className:"px-3 py-1 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Détails"}),o.jsx("button",{onClick:()=>c(y.id),disabled:i,className:"px-3 py-1 text-sm bg-green-500 hover:bg-green-600 text-white rounded font-medium disabled:opacity-50",children:"Terminer"})]})]})},y.id))})]})]})]})}):null},Hse=({isOpen:t,onClose:e,analysisResult:r,error:n,onClearError:s})=>{const[i,a]=w.useState("photos");if(!t)return null;const l=c=>o.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Ln,{className:"h-4 w-4 text-blue-500"}),o.jsx("span",{className:"font-medium text-gray-900",children:c.name}),o.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:c.laboratory.name})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[o.jsx(it,{className:"h-3 w-3"}),o.jsx("span",{children:c.location.formatted_address})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[o.jsxs("span",{className:`flex items-center gap-1 ${c.missing_photos?"text-red-600":"text-green-600"}`,children:[o.jsx(Qn,{className:"h-3 w-3"}),c.photos_count," photo",c.photos_count>1?"s":""]}),o.jsxs("span",{className:`flex items-center gap-1 ${c.missing_instructions?"text-red-600":"text-green-600"}`,children:[o.jsx(ji,{className:"h-3 w-3"}),c.missing_instructions?"Pas d'instructions":"Instructions OK"]})]})]}),o.jsxs("a",{href:`/admin/laboratories?labId=${c.laboratory_id}&clientId=${c.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md text-sm font-medium transition-colors no-underline",children:[o.jsx(qQ,{className:"h-3 w-3"}),"Modifier"]})]})},c.id);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ln,{className:"h-6 w-6 text-blue-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Analyse des Données Clients"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Clients sans photos ou instructions de livraison"})]})]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(tr,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"overflow-y-auto max-h-[60vh]",children:[n&&o.jsxs("div",{className:"m-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"h-4 w-4"}),o.jsx("span",{children:n})]}),o.jsx("button",{onClick:s,className:"text-red-500 hover:text-red-700",children:o.jsx(tr,{className:"h-4 w-4"})})]}),r&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Résumé de l'analyse"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.total_clients}),o.jsx("div",{className:"text-sm text-blue-800",children:"Total clients"})]}),o.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.summary.missing_photos_count}),o.jsx("div",{className:"text-sm text-orange-800",children:"Sans photos"})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.summary.missing_instructions_count}),o.jsx("div",{className:"text-sm text-purple-800",children:"Sans instructions"})]}),o.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.summary.missing_both_count}),o.jsx("div",{className:"text-sm text-red-800",children:"Sans les deux"})]})]})]}),o.jsx("div",{className:"px-6 pt-6",children:o.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>a("photos"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${i==="photos"?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(Qn,{className:"h-4 w-4"}),"Sans photos (",r.summary.missing_photos_count,")"]}),o.jsxs("button",{onClick:()=>a("instructions"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${i==="instructions"?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(ji,{className:"h-4 w-4"}),"Sans instructions (",r.summary.missing_instructions_count,")"]}),o.jsxs("button",{onClick:()=>a("both"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${i==="both"?"bg-white text-red-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[o.jsx(sr,{className:"h-4 w-4"}),"Sans les deux (",r.summary.missing_both_count,")"]})]})}),o.jsxs("div",{className:"p-6",children:[i==="photos"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Clients sans photos (",r.clients_missing_photos.length,")"]}),r.clients_missing_photos.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Qn,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"Tous les clients ont des photos !"})]}):r.clients_missing_photos.map(l)]}),i==="instructions"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Clients sans instructions (",r.clients_missing_instructions.length,")"]}),r.clients_missing_instructions.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(ji,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"Tous les clients ont des instructions !"})]}):r.clients_missing_instructions.map(l)]}),i==="both"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Clients sans photos ni instructions (",r.clients_missing_both.length,")"]}),r.clients_missing_both.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(sr,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"Aucun client ne manque des deux !"})]}):r.clients_missing_both.map(l)]})]})]})]})]})})},Gse=async t=>{try{const{data:e,error:r}=await Y.from("locations").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("Erreur lors de la création de l'emplacement:",e),e}},Kse=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState(null),[s,i]=w.useState(!1);return{isCreating:t,error:r,success:s,createStartLocation:async d=>{e(!0),n(null),i(!1);try{const f={formatted_address:d.address,place_id:d.placeId,latitude:d.latitude,longitude:d.longitude,type:"start_location",delivery_instructions:"Point de rendez-vous pour les livreurs"};await Gse(f),i(!0),setTimeout(()=>{i(!1)},3e3)}catch(f){console.error("Erreur lors de la création du point de rendez-vous:",f),n(f instanceof Error?f.message:"Erreur lors de la création du point de rendez-vous")}finally{e(!1)}},clearError:()=>{n(null)},clearSuccess:()=>{i(!1)}}};let Rd=null;function EB(){if(window.google?.maps)return Promise.resolve();if(document.querySelector('script[src*="maps.googleapis.com"]'))return Rd||new Promise(e=>{const r=setInterval(()=>{window.google?.maps&&(clearInterval(r),e(window.google.maps))},100)});const t=document.createElement("script");return t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCu30a3EW9XpAmlucgPlh2D9hVLg3lUHd0&libraries=places",t.async=!0,t.defer=!0,Rd=new Promise((e,r)=>{t.addEventListener("load",()=>{console.log("Google Maps API loaded via initGoogleMaps"),e(window.google?.maps)}),t.addEventListener("error",n=>{console.error("Error loading Google Maps API:",n),Rd=null,r(n)})}),document.head.appendChild(t),Rd}const Zse=()=>{const[t,e]=w.useState(""),[r,n]=w.useState(null),[s,i]=w.useState(""),[a,l]=w.useState(!1),[c,d]=w.useState(null),[f,p]=w.useState(null),{isCreating:m,error:g,success:y,createStartLocation:b,clearError:x,clearSuccess:j}=Kse();w.useEffect(()=>{(async()=>{try{await EB(),l(!0)}catch(N){console.error("Erreur lors du chargement de Google Maps:",N)}})()},[]),w.useEffect(()=>{if(a&&!c){const E=document.getElementById("start-location-map");if(E&&window.google?.maps){const N=new google.maps.Map(E,{center:{lat:43.2965,lng:5.3698},zoom:10,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});d(N)}}},[a,c]),w.useEffect(()=>{if(c&&r&&window.google?.maps){const E={lat:r.lat,lng:r.lng};f&&f.setMap(null);const N=new google.maps.Marker({position:E,map:c,title:"Point de rendez-vous livreurs",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#10b981" stroke="white" stroke-width="2" width="32" height="32">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
          `),scaledSize:new google.maps.Size(32,32),anchor:new google.maps.Point(16,32)}});p(N),c.setCenter(E),c.setZoom(15)}},[c,r,f]);const S=(E,N)=>{e(E),N?.latLng&&n(N.latLng),N?.placeId&&i(N.placeId)},C=async()=>{!t||!r||!s||(await b({address:t,placeId:s,latitude:r.lat,longitude:r.lng}),g||(e(""),n(null),i(""),f&&(f.setMap(null),p(null))))};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(it,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-green-900 mb-1",children:"Point de Rendez-vous Livreurs"}),o.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Créez un point de rendez-vous central où les livreurs peuvent se retrouver avant de commencer leurs tournées."}),o.jsxs("div",{className:"text-xs text-green-600 space-y-1",children:[o.jsxs("div",{children:["• ",o.jsx("strong",{children:"Adresse :"})," Recherchez et sélectionnez une adresse précise"]}),o.jsxs("div",{children:["• ",o.jsx("strong",{children:"Géolocalisation :"})," Les coordonnées GPS seront automatiquement récupérées"]}),o.jsxs("div",{children:["• ",o.jsx("strong",{children:"Type :"}),' Location marquée comme "start_location" dans la base']})]})]})]})}),g&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(sr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"text-red-700",children:g})}),o.jsx("button",{onClick:x,className:"text-red-400 hover:text-red-600 transition-colors",children:"×"})]})}),y&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(er,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"text-green-700",children:"Point de rendez-vous créé avec succès !"})}),o.jsx("button",{onClick:j,className:"text-green-400 hover:text-green-600 transition-colors",children:"×"})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse du point de rendez-vous"}),o.jsx(Mc,{value:t,onChange:S,placeholder:"Recherchez une adresse...",className:"w-full"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Localisation sur la carte"}),o.jsx("div",{id:"start-location-map",className:"w-full h-64 bg-gray-100 rounded-lg border border-gray-300",children:!a&&o.jsxs("div",{className:"flex items-center justify-center h-full text-gray-500",children:[o.jsx(is,{className:"h-6 w-6 animate-spin mr-2"}),"Chargement de la carte..."]})})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:C,disabled:!t||!r||!s||m,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?o.jsxs(o.Fragment,{children:[o.jsx(is,{className:"h-4 w-4 animate-spin"}),"Création en cours..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ho,{className:"h-4 w-4"}),"Créer le point de rendez-vous"]})})})]})]})},Xse=t=>t.includes("lab")?"laboratory":t.includes("client")?"dentist":t.includes("depot")?"depot":"dentist",Yse=(t,e)=>{if(t==="client_pickup")return"pickup";if(t==="client_delivery")return"delivery";if(t==="client"&&e){if(e==="pickup")return"pickup";if(e==="delivery")return"delivery";if(e==="both")return"both"}return t.includes("pickup")?"pickup":(t.includes("dropoff")||t.includes("delivery"),"delivery")},Jse=(t,e)=>{const r=[t[e]],n=t[e].location_id;for(let s=e+1;s<t.length&&t[s].location_id===n;s++)r.push(t[s]);return r},Qse=t=>t==="client_pickup"||t==="client_delivery"||t==="client",CB=t=>{const e=[];let r=0;for(;r<t.length;){const n=t[r],s=Jse(t,r);if(s.length===1){e.push(n),r++;continue}if(s.every(a=>Qse(a.stop_type))){console.log(`🔄 Fusion de ${s.length} stops clients à la même location:`,s.map(p=>`${p.stop_type}(${p.client_actions})`));const a=s.some(p=>p.stop_type==="client_pickup"||p.client_actions==="pickup"||p.client_actions==="both"),l=s.some(p=>p.stop_type==="client_delivery"||p.client_actions==="delivery"||p.client_actions==="both");let c;a&&l?c="both":a?c="pickup":l?c="delivery":c=n.client_actions||"delivery";const f={...s[0],stop_type:"client",client_actions:c,fused:!0,fusedWithIds:s.slice(1).map(p=>p.id),fusedStopsCount:s.length,original_stops:s};console.log(`✅ Stop fusionné créé: action=${c}, fusedCount=${s.length}`),e.push(f)}else{console.log("⚠️  Stops consécutifs à la même location mais non fusionnables:",s.map(a=>a.stop_type));for(const a of s)e.push(a)}r+=s.length}return console.log(`🏁 Consolidation terminée: ${t.length} stops → ${e.length} stops`),e},eie=t=>{let e,r;Array.isArray(t.location)?(e=t.location[0]?.latitude,r=t.location[0]?.longitude):(e=t.location?.latitude,r=t.location?.longitude);const n=parseFloat(String(e||0)),s=parseFloat(String(r||0)),i=isNaN(n)||!n?48.8566:n,a=isNaN(s)||!s?2.3522:s;return{lat:i,lng:a}},tie=t=>t.address?t.address:t.location?Array.isArray(t.location)?t.location[0]?.formatted_address||"Adresse inconnue":t.location.formatted_address||"Adresse inconnue":"Adresse inconnue",rie=t=>t.displayName||t.locationName||t.name||"Sans nom",nie=()=>{const t=[{id:"1",location_id:"loc1",stop_type:"lab_pickup",client_actions:null,estimated_arrival_time:"09:00"},{id:"2",location_id:"loc2",stop_type:"client_pickup",client_actions:"both",estimated_arrival_time:"10:00"},{id:"3",location_id:"loc2",stop_type:"client_delivery",client_actions:"both",estimated_arrival_time:"10:00"},{id:"4",location_id:"loc3",stop_type:"client_pickup",client_actions:"pickup",estimated_arrival_time:"11:00"},{id:"5",location_id:"loc3",stop_type:"client_pickup",client_actions:"pickup",estimated_arrival_time:"11:00"},{id:"6",location_id:"loc4",stop_type:"lab_dropoff",client_actions:null,estimated_arrival_time:"12:00"}];console.log("🧪 Test de consolidation des stops:"),console.log("Stops d'entrée:",t.length);const e=CB(t);return console.log("Stops de sortie:",e.length),console.log("Détails:",e.map(r=>({id:r.id,stop_type:r.stop_type,client_actions:r.client_actions,fused:r.fused,fusedStopsCount:r.fusedStopsCount}))),e},sie=t=>{console.log(`📍 Conversion route ${t.id} - Stops originaux: ${t.stops.length}`);const e=CB(t.stops);console.log(`📍 Route ${t.id} - Stops après consolidation: ${e.length}`);const r=e.map(i=>{const a=eie(i),l=tie(i),c=rie(i);return i.fused&&console.log(`🔗 Stop fusionné: ${c} - Action: ${i.client_actions} - Fusion de ${i.fusedStopsCount} stops`),{id:i.id,type:Xse(i.stop_type),name:c,address:l,time:i.estimated_arrival_time||i.stop_time||"--:--",action:Yse(i.stop_type,i.client_actions),lat:a.lat,lng:a.lng}});let n=t.totalDistance||"-- km",s=t.totalDuration||"-- min";if((!t.totalDistance||t.totalDistance==="-- km")&&t.total_distance_km&&(n=`${Math.round(t.total_distance_km)} km`),(!t.totalDuration||t.totalDuration==="-- min")&&t.estimated_duration){const i=t.estimated_duration,a=Math.floor(i/60),l=Math.floor(i%60);a>0?s=`${a}h ${l.toString().padStart(2,"0")}min`:s=`${l} min`}return{id:t.id,driverName:t.driver.full_name,status:t.status,totalDistance:n,totalDuration:s,stops:r,polyline:t.polyline}},iie=t=>t.map(sie),aie=(t,e)=>e.trim()?t.filter(r=>r.driver.full_name.toLowerCase().includes(e.toLowerCase())):t,oie=["places"],lie=()=>{const[t,e]=w.useState(null),[r,n]=w.useState(""),[s,i]=w.useState("all"),[a,l]=w.useState(!1),{isLoaded:c}=Zv({googleMapsApiKey:"AIzaSyCu30a3EW9XpAmlucgPlh2D9hVLg3lUHd0",libraries:oie}),d=HG(),f=K3(),p=GG(),m=Z3(),g=X3(),{fetchRoutes:y,setSelectedRoute:b}=Fh();w.useEffect(()=>{y(),console.log("🧪 Test de consolidation lancé..."),nie()},[]);const x=aie(d,r),j=w.useMemo(()=>s==="all"?x:x.filter(M=>M.status===s),[x,s]),S=iie(j),C=w.useMemo(()=>{const M=S.length,D=S.filter(J=>J.status==="pending").length,B=S.filter(J=>J.status==="optimized").length,F=S.filter(J=>J.status==="validated").length,V=S.reduce((J,G)=>J+G.stops.length,0);return{totalRoutes:M,pendingRoutes:D,optimizedRoutes:B,validatedRoutes:F,totalStops:V}},[S]),E=M=>{t===M?(e(null),b(null)):(e(M),b(M))},N=M=>{i(M),l(!1)},P=()=>{n(""),i("all"),l(!1)},O=()=>{y()};w.useEffect(()=>{const M=setInterval(()=>{y(void 0,{silent:!0})},18e4);return()=>clearInterval(M)},[y]);const L={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},A={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},R=[{key:"all",label:"Toutes",icon:Ln,count:d.length},{key:"pending",label:"En attente",icon:bt,count:d.filter(M=>M.status==="pending").length},{key:"optimized",label:"Optimisées",icon:Qs,count:d.filter(M=>M.status==="optimized").length},{key:"validated",label:"Validées",icon:er,count:d.filter(M=>M.status==="validated").length}];return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Validation des tournées"}),o.jsx("p",{className:"text-gray-600",children:"Validez et optimisez les tournées des livreurs pour aujourd'hui"})]}),o.jsx("div",{className:"w-full lg:w-auto",children:o.jsx(gse,{})})]}),o.jsxs("div",{className:"flex flex-wrap gap-4 mt-6",children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/80 backdrop-blur-sm border-0 shadow-sm rounded-lg",children:[o.jsx("div",{className:"p-1 bg-blue-100 rounded",children:o.jsx(Ln,{className:"h-4 w-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Total"}),o.jsx("span",{className:"text-lg font-bold text-gray-900 ml-2",children:C.totalRoutes})]})]}),o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/80 backdrop-blur-sm border-0 shadow-sm rounded-lg",children:[o.jsx("div",{className:"p-1 bg-yellow-100 rounded",children:o.jsx(bt,{className:"h-4 w-4 text-yellow-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"En attente"}),o.jsx("span",{className:"text-lg font-bold text-gray-900 ml-2",children:C.pendingRoutes})]})]}),o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/80 backdrop-blur-sm border-0 shadow-sm rounded-lg",children:[o.jsx("div",{className:"p-1 bg-purple-100 rounded",children:o.jsx(Qs,{className:"h-4 w-4 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Optimisées"}),o.jsx("span",{className:"text-lg font-bold text-gray-900 ml-2",children:C.optimizedRoutes})]})]}),o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/80 backdrop-blur-sm border-0 shadow-sm rounded-lg",children:[o.jsx("div",{className:"p-1 bg-green-100 rounded",children:o.jsx(er,{className:"h-4 w-4 text-green-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Validées"}),o.jsx("span",{className:"text-lg font-bold text-gray-900 ml-2",children:C.validatedRoutes})]})]}),o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/80 backdrop-blur-sm border-0 shadow-sm rounded-lg",children:[o.jsx("div",{className:"p-1 bg-orange-100 rounded",children:o.jsx(it,{className:"h-4 w-4 text-orange-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Arrêts"}),o.jsx("span",{className:"text-lg font-bold text-gray-900 ml-2",children:C.totalStops})]})]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Qe,{placeholder:"Rechercher un livreur...",value:r,onChange:M=>n(M.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"}),className:"h-12 bg-white/80 backdrop-blur-sm border-0 shadow-sm"})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ve,{variant:"outline",className:"h-12 bg-white/80 backdrop-blur-sm border-0 shadow-sm",onClick:O,disabled:f,children:[o.jsx(Qs,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Actualiser"]}),o.jsxs(ve,{variant:"outline",className:"h-12 bg-white/80 backdrop-blur-sm border-0 shadow-sm",onClick:()=>l(!a),children:[o.jsx(zQ,{className:"h-4 w-4 mr-2"}),"Filtres",(s!=="all"||r)&&o.jsx("div",{className:"ml-2 w-2 h-2 bg-blue-500 rounded-full"})]}),(s!=="all"||r)&&o.jsxs(ve,{variant:"outline",className:"h-12 bg-white/80 backdrop-blur-sm border-0 shadow-sm",onClick:P,children:[o.jsx(tr,{className:"h-4 w-4 mr-2"}),"Réinitialiser"]})]})]}),o.jsx(Rt,{children:a&&o.jsx(Ae.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:o.jsxs(_e,{className:"p-4 bg-white/80 backdrop-blur-sm border-0 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(TF,{className:"h-4 w-4 text-gray-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtrer par statut"})]}),o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:R.map(M=>{const D=M.icon;return o.jsxs(ve,{variant:s===M.key?"primary":"outline",className:`h-12 justify-start ${s===M.key?"bg-blue-600 text-white":"bg-white/80 hover:bg-gray-50"}`,onClick:()=>N(M.key),children:[o.jsx(D,{className:"h-4 w-4 mr-2"}),M.label,o.jsx("span",{className:"ml-auto bg-gray-200 text-gray-700 px-2 py-1 rounded-full text-xs",children:M.count})]},M.key)})})]})})})]}),o.jsx(vse,{}),o.jsx(xse,{}),o.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[p&&o.jsx(_e,{className:"bg-red-50 border-red-200 shadow-sm",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ss,{className:"h-5 w-5 text-red-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-red-800",children:"Une erreur est survenue"}),o.jsx("p",{className:"text-sm text-red-600 mt-1",children:p})]})]})})}),f&&o.jsx(_e,{className:"bg-blue-50 border-blue-200 shadow-sm",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Qs,{className:"h-5 w-5 text-blue-600 animate-spin"}),o.jsx("p",{className:"text-blue-800",children:"Chargement des tournées..."})]})})}),!f&&!p&&o.jsx(o.Fragment,{children:S.length===0?o.jsx(_e,{className:"bg-gray-50 border-gray-200 shadow-sm",children:o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(gt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 text-lg",children:r||s!=="all"?"Aucune tournée ne correspond aux critères":"Aucune tournée trouvée"}),o.jsx("p",{className:"text-gray-500 text-sm mt-2",children:r||s!=="all"?"Essayez d'ajuster vos filtres ou de rechercher autre chose":"Générez des tournées pour commencer"})]})}):o.jsx(Ae.div,{variants:L,initial:"hidden",animate:"show",className:"space-y-4",children:S.map(M=>o.jsx(Ae.div,{variants:A,children:o.jsx(wse,{route:M,isSelected:t===M.id,onClick:()=>E(M.id),isOptimizing:m&&g===M.id})},M.id))})})]}),!f&&!p&&S.length>0&&c&&o.jsx("div",{className:"mt-8",children:o.jsx(Ese,{routes:S})})]})})},cie=(t,e)=>{let r=null;return(...n)=>{r&&clearTimeout(r),r=setTimeout(()=>t(...n),e)}},$L={status:"all",searchTerm:void 0},uie=t=>{if(!t||t.length===0)return[];const e=[];let r=0;for(;r<t.length;){const n=t[r],s=[n];let i=r+1;for(;i<t.length&&t[i].location_id===n.location_id;)s.push(t[i]),i++;if(s.length>1&&n.stop_type==="client"){const a=s.some(g=>g.client_actions==="pickup"||g.client_actions==="both"),l=s.some(g=>g.client_actions==="delivery"||g.client_actions==="both");let c;a&&l?c="both":a?c="pickup":c="delivery";const d=s.every(g=>g.completed),f=s.filter(g=>g.arrival_time).sort((g,y)=>new Date(y.arrival_time).getTime()-new Date(g.arrival_time).getTime())[0]?.arrival_time,p=s.reduce((g,y)=>(y.shipments&&y.shipments.length>0&&g.push(...y.shipments),g),[]),m={...n,client_actions:c,action:c,completed:d,arrival_time:f||n.arrival_time,shipments:p,isMerged:!0,mergedStopsIds:s.slice(1).map(g=>g.id),mergedStopsCount:s.length};e.push(m)}else for(const a of s)e.push({...a,isMerged:!1});r=i}return e},die=t=>t.includes("lab")?"laboratory":t.includes("client")?"dentist":t.includes("depot")?"depot":"dentist",fie=(t,e)=>{if(e){if(e==="pickup")return"pickup";if(e==="delivery")return"delivery";if(e==="both")return"both"}return t.includes("pickup")?"pickup":(t.includes("dropoff")||t.includes("delivery"),"delivery")},hie=async t=>{if(t.stop_type.includes("lab")){const{data:e}=await Y.from("laboratories").select("name").eq("location_id",t.location_id).single();return e?.name||"Laboratoire"}else if(t.stop_type.includes("depot")){const{data:e}=await Y.from("depot").select("name").eq("location_id",t.location_id).single();return e?.name||"Dépôt"}else if(t.stop_type.includes("client")){const{data:e}=await Y.from("driver_route_shipments").select("laboratory_client_id").or(`pickup_stop_id.eq.${t.id},delivery_stop_id.eq.${t.id}`).limit(1).single();if(e?.laboratory_client_id){const{data:r}=await Y.from("laboratory_clients").select("name").eq("id",e.laboratory_client_id).single();return r?.name||"Client"}return"Client"}return"Arrêt inconnu"},pie=t=>{const e=[...t].sort((n,s)=>n.stop_order-s.stop_order);let r=null;return e.map((n,s)=>{if(n.completed&&n.arrival_time)return r=new Date(n.arrival_time),{...n,calculated_arrival_time:r};if(s===0&&n.estimated_arrival_time){const[i,a]=n.estimated_arrival_time.split(":").map(Number),l=new Date;return l.setHours(i,a,0,0),r=l,{...n,calculated_arrival_time:l}}if(r&&n.duration_from_previous!==null){const i=new Date(r.getTime()+n.duration_from_previous*1e3);return r=i,{...n,calculated_arrival_time:i}}if(n.estimated_arrival_time){const[i,a]=n.estimated_arrival_time.split(":").map(Number),l=new Date;return l.setHours(i,a,0,0),{...n,calculated_arrival_time:l}}return{...n,calculated_arrival_time:null}})},mie=as((t,e)=>{const r=async()=>{const s=Date.now(),i=e();if(s-i.lastFetchTime<5e3){console.log("Refetch ignoré - trop récent");return}t({isLoading:!0,error:null,lastFetchTime:s});try{const a=new Date,l=new Date(a);l.setDate(l.getDate()-1);const c=a.toISOString().split("T")[0],d=l.toISOString().split("T")[0];console.log("Récupération des routes de monitoring:"),console.log(`- Tournées d'aujourd'hui (${c}) à partir de 17h`),console.log(`- Tournées d'hier (${d}) jusqu'à midi aujourd'hui`);const{data:f,error:p}=await Y.from("driver_routes").select(`
          id,
          driver_id,
          date,
          status,
          created_at,
          updated_at,
          polyline,
          estimated_duration,
          total_distance_km
        `).in("date",[c,d]).in("status",["validated","in_progress","completed"]).order("created_at",{ascending:!1});if(p)throw new Error(`Erreur lors de la récupération des routes: ${p.message}`);if(!f||f.length===0){console.log("Aucune route de monitoring trouvée pour les tournées de nuit"),t({routes:[],isLoading:!1});return}console.log(`${f.length} routes trouvées pour le monitoring`);const m=f.filter(x=>{const j=x.date,S=a.getHours();return j===c?S>=17:j===d?S<12&&["validated","in_progress"].includes(x.status):!1});console.log(`${m.length} routes valides après filtrage horaire`);const g=m.filter(x=>x.date===c),y=m.filter(x=>x.date===d);console.log(`- Tournées d'aujourd'hui: ${g.length}`),console.log(`- Tournées d'hier encore actives: ${y.length}`);const b=await Promise.all(m.map(async x=>{const{data:j}=await Y.from("drivers").select("id, full_name, email").eq("id",x.driver_id).single(),{data:S}=await Y.from("driver_route_stops").select(`
              id, 
              route_id, 
              location_id, 
              stop_order, 
              stop_type, 
              client_actions, 
              completed,
              arrival_time,
              estimated_arrival_time,
              duration_from_previous,
              created_at,
              location:locations!driver_route_stops_location_id_fkey (*)
            `).eq("route_id",x.id).order("stop_order"),C=await Promise.all((S||[]).map(async M=>{const D=M.location||{},B={id:D.id||"",formatted_address:D.formatted_address||"Adresse inconnue",latitude:parseFloat(D.latitude)||48.8566,longitude:parseFloat(D.longitude)||2.3522,delivery_instructions:D.delivery_instructions,type:D.type},F=await hie(M),{data:V}=await Y.from("driver_route_shipments").select(`
                  id,
                  route_id,
                  pickup_stop_id,
                  delivery_stop_id,
                  shipment_type,
                  pickup_status,
                  delivery_status,
                  laboratory:laboratories!driver_route_shipments_laboratory_id_fkey (name),
                  laboratory_client:laboratory_clients!driver_route_shipments_laboratory_client_id_fkey (name)
                `).or(`pickup_stop_id.eq.${M.id},delivery_stop_id.eq.${M.id}`),J=(V||[]).map(G=>{const q=G.pickup_stop_id===M.id,U=G.delivery_stop_id===M.id;let W="delivery",I="pending";return q&&U?(W="both",I=G.pickup_status==="completed"&&G.delivery_status==="completed"?"completed":"pending"):q?(W="pickup",I=G.pickup_status):U&&(W="delivery",I=G.delivery_status),{id:G.id||"",type:W,status:I,laboratory_name:G.laboratory?.name||"Laboratoire inconnu",client_name:G.laboratory_client?.name||"Client inconnu",photos:[],items_count:1}});return{...M,location:B,name:F,type:die(M.stop_type),action:fie(M.stop_type,M.client_actions),shipments:J}})),N=pie(C).sort((M,D)=>M.stop_order-D.stop_order),P=uie(N),O=P.filter(M=>M.completed),L=P.filter(M=>!M.completed),A=L.length>0?L[0]:void 0,R=L.slice(1,6);return console.log(`Route ${x.id}: ${O.length} stops completed, ${L.length} stops pending`),{id:x.id,driver_id:x.driver_id,date:x.date,status:x.status,created_at:x.created_at,updated_at:x.updated_at,polyline:x.polyline,estimated_duration:x.estimated_duration,total_distance_km:x.total_distance_km,driver:{id:j?.id||x.driver_id,full_name:j?.full_name||"Chauffeur inconnu",email:j?.email,phone:"06 XX XX XX XX"},stops:P,currentStop:A,nextStops:R,completedStops:O,progress:{completed:O.length,total:P.length}}}));console.log(`${b.length} routes traitées pour le monitoring`),t({routes:b,isLoading:!1})}catch(a){console.error("Erreur lors de la récupération des routes de monitoring:",a),t({error:`Erreur: ${a instanceof Error?a.message:String(a)}`,isLoading:!1,routes:[]})}},n=cie(r,2e3);return{routes:[],isLoading:!1,error:null,filters:{...$L},realtimeSubscriptions:null,lastFetchTime:0,debouncedFetch:n,fetchMonitoringRoutes:r,setFilters:s=>{t(i=>({filters:{...i.filters,...s}}))},resetFilters:()=>{t({filters:{...$L}})},setupRealtimeListeners:()=>{const s=e().realtimeSubscriptions;s&&s.forEach(l=>{Y.removeChannel(l)});const i=Y.channel("monitoring-stops-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"driver_route_stops"},l=>{console.log("Changement détecté sur un arrêt (monitoring):",l),e().debouncedFetch?.()}).subscribe(),a=Y.channel("monitoring-routes-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"driver_routes"},l=>{console.log("Changement détecté sur une route (monitoring):",l),e().debouncedFetch?.()}).subscribe();t({realtimeSubscriptions:[i,a]})},cleanupRealtimeListeners:()=>{const s=e().realtimeSubscriptions;s&&(s.forEach(i=>{Y.removeChannel(i)}),t({realtimeSubscriptions:null}))}}}),gie=({currentLocation:t,routeSegments:e,isActive:r,className:n="h-[300px]"})=>{const i={styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#6B7280"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#E0F2FE"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#F9FAFB"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#E5E7EB"}]}],disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0,gestureHandling:"cooperative",clickableIcons:!1},a=()=>({path:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z",fillColor:r?"#22c55e":"#6b7280",fillOpacity:1,strokeWeight:2,strokeColor:"#ffffff",scale:r?1.5:1.2,anchor:new window.google.maps.Point(12,24)});return o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-900 mb-3",children:[o.jsx(Hv,{className:"h-5 w-5 text-primary-500"}),o.jsx("span",{className:"font-medium",children:"Itinéraire"}),o.jsxs("div",{className:"flex items-center gap-4 ml-auto text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-3 h-0.5 bg-green-500 rounded"}),o.jsxs("span",{className:"text-gray-500",children:["Parcouru (",e.find(l=>l.type==="completed")?.path.length||0,")"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-3 h-0.5 bg-red-500 rounded"}),o.jsxs("span",{className:"text-gray-500",children:["À venir (",e.find(l=>l.type==="upcoming")?.path.length||0,")"]})]})]})]}),o.jsx("div",{className:`${n} rounded-xl overflow-hidden border shadow-sm`,children:o.jsxs(IE,{zoom:11,center:t,mapContainerClassName:"w-full h-full",options:i,children:[o.jsx(rS,{position:t,icon:a(),zIndex:1e3}),r&&o.jsx(rS,{position:t,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#22c55e",fillOpacity:.3,scale:20,strokeWeight:0},zIndex:999}),e.map((l,c)=>o.jsx(Bne,{path:l.path,options:{strokeColor:l.color,strokeOpacity:l.opacity,strokeWeight:l.weight,geodesic:!0,zIndex:l.type==="completed"?100:50}},`${l.type}-${c}`))]})})]})},aS=({shipments:t,stopType:e,maxDisplay:r=3})=>{if(!t||t.length===0)return null;const n=(l,c)=>c.includes("lab_pickup")?{text:`Livraison de ${l.client_name}`,icon:"📦"}:c.includes("lab_dropoff")?{text:`Retour de ${l.client_name}`,icon:"↩️"}:c.includes("depot_dropoff")?{text:`Retour de ${l.client_name}`,icon:"🏢"}:c.includes("client")?l.type==="pickup"?{text:`Récupération pour ${l.laboratory_name}`,icon:"📥"}:{text:`Livraison de ${l.laboratory_name}`,icon:"📦"}:{text:l.type==="pickup"?`Récupération pour ${l.laboratory_name||l.client_name}`:`Livraison de ${l.laboratory_name||l.client_name}`,icon:"📦"},s=l=>{switch(l){case"completed":return"border-emerald-400 bg-white text-gray-900";case"failed":return"border-rose-400 bg-white text-gray-900";case"in_progress":return"border-blue-400 bg-white text-gray-900";default:return"border-gray-200 bg-white text-gray-900"}},i=t.slice(0,r),a=t.length-r;return o.jsxs("div",{className:"mt-3 space-y-2",children:[o.jsxs("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider flex items-center gap-1",children:[o.jsx("span",{children:"Expéditions"}),o.jsx("span",{className:"bg-gray-200 text-gray-700 px-1.5 py-0.5 rounded-full text-xs font-bold",children:t.length})]}),o.jsxs("div",{className:"space-y-2",children:[i.map(l=>o.jsx("div",{className:`rounded-xl p-3 border-2 shadow-sm hover:shadow-md transition-shadow ${s(l.status)}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary-50 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-lg",children:n(l,e).icon})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("div",{className:"font-medium text-gray-900 truncate",children:n(l,e).text})})]})},l.id)),a>0&&o.jsxs("div",{className:"text-xs text-gray-500 text-center py-2 bg-gray-50 rounded-xl border border-gray-100",children:["+",a," autre",a>1?"s":""]})]})]})},vie=({route:t,showCompletedStops:e,setShowCompletedStops:r,getStopIcon:n,getStopColor:s,formatTime:i})=>{if(t.completedStops.length===0)return null;const a=l=>l.calculated_arrival_time?l.calculated_arrival_time.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",hour12:!1}):l.arrival_time?i(l.arrival_time):l.estimated_arrival_time?i(l.estimated_arrival_time):"--:--";return o.jsxs("div",{className:"mb-6",children:[o.jsxs("button",{onClick:()=>r(!e),className:"w-full p-4 bg-success-50 hover:bg-success-100 border border-success-200 rounded-xl transition-colors flex items-center justify-between group",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Er,{className:"h-6 w-6 text-success-500"}),o.jsxs("div",{className:"text-left",children:[o.jsxs("div",{className:"font-semibold text-success-700",children:["Arrêts effectués (",t.completedStops.length,")"]}),o.jsx("div",{className:"text-sm text-success-600",children:"Cliquez pour voir le détail des arrêts réalisés"})]})]}),o.jsx(Ae.div,{animate:{rotate:e?180:0},transition:{duration:.2},className:"text-success-500 group-hover:text-success-600",children:o.jsx(Rn,{className:"h-5 w-5"})})]}),o.jsx(Rt,{children:e&&o.jsx(Ae.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden mt-4",children:o.jsx("div",{className:"space-y-3",children:t.completedStops.reverse().map(l=>o.jsx("div",{className:`p-4 rounded-lg ${s(l.type)} border border-${l.type==="laboratory"?"primary":l.type==="dentist"?"success":"accent"}-200 opacity-90`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[n(l.type),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"font-medium flex items-center gap-2",children:[l.name,o.jsx(Er,{className:"h-4 w-4 text-success-500"}),l.isMerged&&o.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full",children:[l.mergedStopsCount," arrêts mergés"]})]}),o.jsx("div",{className:"text-sm text-gray-500",children:l.name}),o.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Effectué à : ",a(l)]}),o.jsx(aS,{shipments:l.shipments||[],stopType:l.stop_type||"",maxDisplay:10})]})]})},l.id))})})})]})},yie=({route:t,animationProgress:e})=>o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx(_e,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 shadow-sm p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center text-blue-600 mb-1",children:[o.jsx(ut,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"text-sm font-medium",children:"Livraisons"})]}),o.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[t.completedStops.filter(r=>(r.action==="delivery"||r.action==="both")&&r.type==="dentist").length,"/",t.stops.filter(r=>(r.action==="delivery"||r.action==="both")&&r.type==="dentist").length]})]}),o.jsx("div",{className:"w-10 h-10 bg-blue-200 rounded-lg flex items-center justify-center",children:o.jsx(ut,{className:"h-5 w-5 text-blue-600"})})]})}),o.jsx(_e,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200 shadow-sm p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center text-green-600 mb-1",children:[o.jsx(Rn,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"text-sm font-medium",children:"Récupérations"})]}),o.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[t.completedStops.filter(r=>(r.action==="pickup"||r.action==="both")&&r.type==="dentist").length,"/",t.stops.filter(r=>(r.action==="pickup"||r.action==="both")&&r.type==="dentist").length]})]}),o.jsx("div",{className:"w-10 h-10 bg-green-200 rounded-lg flex items-center justify-center",children:o.jsx(Rn,{className:"h-5 w-5 text-green-600"})})]})}),o.jsxs(_e,{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200 shadow-sm p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center text-gray-600 mb-1",children:[o.jsx(it,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"text-sm font-medium",children:"Progression"})]}),o.jsxs("div",{className:"text-2xl font-bold text-gray-700",children:[t.progress.completed,"/",t.progress.total]})]}),o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center",children:o.jsx(it,{className:"h-5 w-5 text-gray-600"})})]}),t.status==="in_progress"&&o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[o.jsx("span",{children:"Avancement"}),o.jsxs("span",{children:[(t.progress.total>0?t.progress.completed/t.progress.total*100:0).toFixed(0),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-1000 ease-out",style:{width:`${e||(t.progress.total>0?t.progress.completed/t.progress.total*100:0)}%`}})})]})]})]}),xie=({route:t,animationProgress:e,isLoaded:r})=>{const[n,s]=w.useState(!1),i=(g,y)=>{if(y)return y.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",hour12:!1});if(!g)return"--:--";try{return new Date(g).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return"--:--"}},a=g=>{switch(g){case"in_progress":return"text-success-500 bg-success-50";case"validated":return"text-gray-500 bg-gray-50";case"completed":return"text-primary-500 bg-primary-50"}},l=g=>{switch(g){case"in_progress":return o.jsx(bt,{className:"h-4 w-4 animate-spin"});case"validated":return o.jsx(bt,{className:"h-4 w-4"});case"completed":return o.jsx(Er,{className:"h-4 w-4"})}},c=g=>{switch(g){case"in_progress":return"En tournée";case"validated":return"Pas démarré";case"completed":return"Terminé"}},d=g=>{switch(g){case"laboratory":return o.jsx(Dt,{className:"h-5 w-5 text-primary-500"});case"dentist":return o.jsx(it,{className:"h-5 w-5 text-success-500"});case"depot":return o.jsx(gt,{className:"h-5 w-5 text-accent-500"})}},f=g=>{switch(g){case"laboratory":return"bg-primary-50";case"dentist":return"bg-success-50";case"depot":return"bg-accent-50"}},m=(()=>{const g=t.completedStops.slice(-25),y=t.currentStop?{lat:t.currentStop.location.latitude,lng:t.currentStop.location.longitude}:g.length>0?{lat:g[g.length-1].location.latitude,lng:g[g.length-1].location.longitude}:{lat:43.2965,lng:5.3698},b=[],x=g.map(S=>({lat:S.location.latitude,lng:S.location.longitude}));x.length>1&&b.push({path:x,color:"#22c55e",opacity:.8,weight:4,type:"completed"});const j=t.nextStops.slice(0,25).map(S=>({lat:S.location.latitude,lng:S.location.longitude}));if(j.length>0){const S=[y,...j];b.push({path:S,color:"#ef4444",opacity:.6,weight:3,type:"upcoming"})}return{currentLocation:y,routeSegments:b,isActive:t.status==="in_progress"}})();return o.jsx(_e,{className:"overflow-hidden shadow-sm border border-gray-200 hover:shadow-md transition-shadow bg-white",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"h-14 w-14 rounded-xl bg-gradient-to-br from-primary-100 to-primary-200 flex items-center justify-center shadow-sm",children:o.jsx(Kr,{className:"h-7 w-7 text-primary-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t.driver.full_name}),o.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 mt-1",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(DQ,{className:"h-4 w-4"}),o.jsx("span",{children:t.driver.phone||"06 XX XX XX XX"})]}),t.date!==new Date().toISOString().split("T")[0]&&o.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded-lg text-xs font-medium",children:"Tournée d'hier"})]})]})]}),o.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium ${a(t.status)} shadow-sm`,children:[l(t.status),o.jsx("span",{children:c(t.status)})]})]}),t.status!=="validated"&&o.jsxs(o.Fragment,{children:[o.jsx(yie,{route:t,animationProgress:e}),o.jsx(vie,{route:t,showCompletedStops:n,setShowCompletedStops:s,getStopIcon:d,getStopColor:f,formatTime:i}),t.currentStop&&t.completedStops.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-900 mb-3",children:[o.jsx(ki,{className:"h-5 w-5 text-primary-500"}),o.jsx("span",{className:"font-semibold",children:"En route vers"})]}),o.jsx("div",{className:`p-4 rounded-xl ${f(t.currentStop.type)} border border-${t.currentStop.type==="laboratory"?"primary":t.currentStop.type==="dentist"?"success":"accent"}-200 shadow-sm`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0",children:d(t.currentStop.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-gray-900 truncate",children:t.currentStop.name}),o.jsxs("div",{className:"text-sm text-gray-600 mt-1 flex items-center gap-2",children:[o.jsx(bt,{className:"h-4 w-4 flex-shrink-0"}),o.jsxs("span",{children:["Arrivée prévue : ",t.currentStop?.calculated_arrival_time?i(void 0,t.currentStop.calculated_arrival_time):i(t.currentStop?.arrival_time||t.currentStop?.estimated_arrival_time)]})]}),o.jsx("div",{className:"mt-3",children:o.jsx(aS,{shipments:t.currentStop?.shipments||[],stopType:t.currentStop?.stop_type||"",maxDisplay:3})})]})]})})]}),t.status==="in_progress"&&t.completedStops.length===0&&o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"p-4 rounded-xl bg-amber-50 border border-amber-200",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(bt,{className:"h-5 w-5 text-amber-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-amber-800",children:"Tournée démarrée"}),o.jsx("div",{className:"text-sm text-amber-600",children:"Le chauffeur n'a pas encore effectué son premier arrêt."})]})]})})}),r&&m.routeSegments.length>0&&o.jsx(gie,{currentLocation:m.currentLocation,routeSegments:m.routeSegments,isActive:m.isActive}),t.nextStops&&t.nextStops.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-900 mb-4",children:[o.jsx(bt,{className:"h-5 w-5 text-primary-500"}),o.jsxs("span",{className:"font-semibold",children:["Prochains arrêts (",t.nextStops.length,")"]})]}),o.jsxs("div",{className:"space-y-3",children:[t.nextStops.slice(0,5).map((g,y)=>o.jsx("div",{className:`p-4 rounded-xl ${f(g.type)} border border-${g.type==="laboratory"?"primary":g.type==="dentist"?"success":"accent"}-200 shadow-sm hover:shadow-md transition-shadow`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex-shrink-0 relative",children:[d(g.type),o.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gray-200 text-gray-600 text-xs rounded-full flex items-center justify-center font-medium",children:y+1})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-gray-900 truncate",children:g.name}),o.jsxs("div",{className:"text-sm text-gray-600 mt-1 flex items-center gap-2",children:[o.jsx(bt,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{children:g?.calculated_arrival_time?i(void 0,g.calculated_arrival_time):i(g?.arrival_time||g?.estimated_arrival_time)})]}),o.jsx("div",{className:"mt-3",children:o.jsx(aS,{shipments:g?.shipments||[],stopType:g?.stop_type||"",maxDisplay:2})})]})]})},g.id)),t.nextStops.length>5&&o.jsx("div",{className:"text-center py-3",children:o.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:["+",t.nextStops.length-5," arrêts supplémentaires"]})})]})]})]})]})})},bie=({isOpen:t,onClose:e,onTaskCreate:r})=>{const[n,s]=w.useState("laboratory"),[i,a]=w.useState(null),[l,c]=w.useState(null),[d,f]=w.useState(null),[p,m]=w.useState(!1),[g,y]=w.useState(""),[b,x]=w.useState(""),[j,S]=w.useState([]),[C,E]=w.useState([]),[N,P]=w.useState(!1),[O,L]=w.useState(!1);w.useEffect(()=>{t&&A()},[t]),w.useEffect(()=>{i&&R(i.id)},[i]),w.useEffect(()=>{if(t){const U=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=U}}},[t]),w.useEffect(()=>{t||(s("laboratory"),a(null),c(null),f(null),y(""),x(""),S([]),E([]))},[t]);const A=async()=>{P(!0);try{const{data:U,error:W}=await Y.from("laboratories").select(`
          id,
          name,
          location:locations!laboratories_location_id_fkey (
            formatted_address
          ),
          email,
          laboratory_clients:laboratory_clients (count)
        `).order("name");if(W)throw W;const I=(U||[]).map(H=>({id:H.id,name:H.name,address:H.location?.formatted_address||"Adresse non renseignée",email:H.email||"",clientCount:H.laboratory_clients?.[0]?.count||0}));S(I)}catch(U){console.error("Erreur lors du chargement des laboratoires:",U)}finally{P(!1)}},R=async U=>{L(!0);try{const{data:W,error:I}=await Y.from("laboratory_clients").select(`
          id,
          name,
          client_type,
          location:locations!laboratory_clients_location_id_fkey (
            formatted_address,
            delivery_instructions
          )
        `).eq("laboratory_id",U).order("name");if(I)throw I;const H=(W||[]).map(ne=>({id:ne.id,name:ne.name,address:ne.location?.formatted_address||"Adresse non renseignée",type:ne.client_type==="laboratory"?"laboratory":"dentist",delivery_instructions:ne.location?.delivery_instructions}));E(H)}catch(W){console.error("Erreur lors du chargement des clients:",W)}finally{L(!1)}},M=w.useMemo(()=>{if(!g)return j;const U=g.toLowerCase();return j.filter(W=>W.name.toLowerCase().includes(U)||W.address.toLowerCase().includes(U)||W.email?.toLowerCase().includes(U))},[j,g]),D=w.useMemo(()=>{if(!b)return C;const U=b.toLowerCase();return C.filter(W=>W.name.toLowerCase().includes(U)||W.address.toLowerCase().includes(U))},[C,b]),B=U=>{a(U),s("client")},F=U=>{c(U),s("action")},V=U=>{f(U),s("confirm")},J=async()=>{if(!(!i||!l||!d)){m(!0);try{await r({laboratoryId:i.id,clientId:l.id,action:d,laboratoryName:i.name,clientName:l.name}),e()}catch(U){console.error("Erreur lors de la création de la tâche:",U)}finally{m(!1)}}},G=()=>{switch(n){case"client":s("laboratory"),a(null);break;case"action":s("client"),c(null);break;case"confirm":s("action"),f(null);break}},q=()=>{p||e()};return t?o.jsx(Rt,{children:o.jsx(Ae.div,{className:"fixed inset-0 bg-black/60 z-[9999] flex items-center justify-center p-4",onClick:q,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] shadow-2xl flex flex-col overflow-hidden",onClick:U=>U.stopPropagation(),initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},children:[o.jsxs("div",{className:"p-6 border-b flex items-center justify-between flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:o.jsx(ut,{className:"h-5 w-5 text-primary-600"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Ajouter une tâche"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[n==="laboratory"&&"Sélectionnez un laboratoire",n==="client"&&"Sélectionnez un client",n==="action"&&"Type d'intervention",n==="confirm"&&"Confirmation"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[n!=="laboratory"&&o.jsxs(ve,{variant:"ghost",size:"sm",onClick:G,disabled:p,children:[o.jsx(CQ,{className:"h-4 w-4"}),"Retour"]}),o.jsx("button",{onClick:q,disabled:p,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50",children:o.jsx(tr,{className:"h-5 w-5 text-gray-500"})})]})]}),o.jsx("div",{className:"px-6 py-3 border-b bg-gray-50",children:o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("div",{className:`flex items-center gap-2 ${n==="laboratory"?"text-primary-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${n==="laboratory"?"bg-primary-500 text-white":i?"bg-green-500 text-white":"bg-gray-200"}`,children:i?o.jsx(Er,{className:"h-3 w-3"}):"1"}),"Laboratoire"]}),o.jsx(Zn,{className:"h-4 w-4 text-gray-300"}),o.jsxs("div",{className:`flex items-center gap-2 ${n==="client"?"text-primary-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${n==="client"?"bg-primary-500 text-white":l?"bg-green-500 text-white":"bg-gray-200"}`,children:l?o.jsx(Er,{className:"h-3 w-3"}):"2"}),"Client"]}),o.jsx(Zn,{className:"h-4 w-4 text-gray-300"}),o.jsxs("div",{className:`flex items-center gap-2 ${n==="action"?"text-primary-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${n==="action"?"bg-primary-500 text-white":d?"bg-green-500 text-white":"bg-gray-200"}`,children:d?o.jsx(Er,{className:"h-3 w-3"}):"3"}),"Action"]}),o.jsx(Zn,{className:"h-4 w-4 text-gray-300"}),o.jsxs("div",{className:`flex items-center gap-2 ${n==="confirm"?"text-primary-600 font-medium":"text-gray-400"}`,children:[o.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${n==="confirm"?"bg-primary-500 text-white":"bg-gray-200"}`,children:"4"}),"Confirmer"]})]})}),o.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[n==="laboratory"&&o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("div",{className:"mb-4 flex-shrink-0",children:o.jsx(Qe,{placeholder:"Rechercher un laboratoire...",value:g,onChange:U=>y(U.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"})})}),o.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",style:{maxHeight:"400px"},onScroll:U=>console.log("Scroll laboratoires:",U.currentTarget.scrollTop),children:N?o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):M.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Dt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Aucun laboratoire trouvé"})]}):o.jsx("div",{className:"space-y-3",children:M.map(U=>o.jsx(_e,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary-200",onClick:()=>B(U),children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0",children:o.jsx(Dt,{className:"h-5 w-5 text-primary-600"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium text-gray-900 truncate",children:U.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:U.address}),U.email&&o.jsx("p",{className:"text-sm text-gray-400 mt-1",children:U.email})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-lg font-bold text-primary-600",children:U.clientCount}),o.jsx("div",{className:"text-xs text-gray-500",children:"clients"})]}),o.jsx(Zn,{className:"h-5 w-5 text-gray-400"})]})]})},U.id))})})]}),n==="client"&&o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsxs("div",{className:"mb-4 flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 p-3 bg-primary-50 rounded-lg",children:[o.jsx(Dt,{className:"h-4 w-4 text-primary-600"}),o.jsx("span",{className:"text-sm font-medium text-primary-700",children:i?.name})]}),o.jsx(Qe,{placeholder:"Rechercher un client...",value:b,onChange:U=>x(U.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",style:{maxHeight:"400px"},onScroll:U=>console.log("Scroll clients:",U.currentTarget.scrollTop),children:O?o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):D.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ln,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Aucun client trouvé"})]}):o.jsx("div",{className:"space-y-3",children:D.map(U=>o.jsx(_e,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary-200",onClick:()=>F(U),children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${U.type==="dentist"?"bg-green-100":"bg-blue-100"}`,children:o.jsx(Ln,{className:`h-5 w-5 ${U.type==="dentist"?"text-green-600":"text-blue-600"}`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-medium text-gray-900 truncate",children:U.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:U.address}),U.delivery_instructions&&o.jsxs("p",{className:"text-sm text-amber-600 mt-1",children:["📝 ",U.delivery_instructions]}),o.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-2 ${U.type==="dentist"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:U.type==="dentist"?"Dentiste":"Laboratoire"})]})]}),o.jsx(Zn,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]})},U.id))})})]}),n==="action"&&o.jsxs("div",{className:"p-6 flex flex-col justify-center",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2 p-3 bg-primary-50 rounded-lg",children:[o.jsx(Ln,{className:"h-4 w-4 text-primary-600"}),o.jsx("span",{className:"text-sm font-medium text-primary-700",children:l?.name})]}),o.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Quel type d'intervention souhaitez-vous ajouter ?"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(_e,{className:"p-6 cursor-pointer hover:shadow-lg transition-all border-2 hover:border-green-300 group",onClick:()=>V("pickup"),children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-green-200 transition-colors",children:o.jsx(ut,{className:"h-8 w-8 text-green-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Récupération"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Récupérer des éléments chez ce client"})]})}),o.jsx(_e,{className:"p-6 cursor-pointer hover:shadow-lg transition-all border-2 hover:border-blue-300 group",onClick:()=>V("delivery"),children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-200 transition-colors",children:o.jsx(gt,{className:"h-8 w-8 text-blue-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Livraison"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Livrer des éléments à ce client"})]})})]})]}),n==="confirm"&&o.jsxs("div",{className:"p-6 flex flex-col justify-center",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Er,{className:"h-8 w-8 text-green-600"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Confirmer l'ajout"}),o.jsx("p",{className:"text-gray-600",children:"Vérifiez les informations avant de créer la tâche"})]}),o.jsx(_e,{className:"p-6 mb-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Dt,{className:"h-5 w-5 text-primary-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:i?.name}),o.jsx("div",{className:"text-sm text-gray-500",children:"Laboratoire"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ln,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:l?.name}),o.jsx("div",{className:"text-sm text-gray-500",children:"Client"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[d==="pickup"?o.jsx(ut,{className:"h-5 w-5 text-green-600"}):o.jsx(gt,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:d==="pickup"?"Récupération":"Livraison"}),o.jsx("div",{className:"text-sm text-gray-500",children:"Type d'intervention"})]})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(ve,{variant:"outline",className:"flex-1",onClick:G,disabled:p,children:"Modifier"}),o.jsx(ve,{className:"flex-1",onClick:J,disabled:p,children:p?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Création..."]}):"Créer la tâche"})]})]})]})]})})}):null},wie=["places"],_ie=()=>{const[t,e]=w.useState(""),[r,n]=w.useState(!1),[s,i]=w.useState({}),{routes:a,isLoading:l,error:c,fetchMonitoringRoutes:d,setupRealtimeListeners:f,cleanupRealtimeListeners:p}=mie(),m=w.useCallback(()=>{d()},[d]),g=w.useCallback(()=>{f()},[f]),y=w.useCallback(()=>{p()},[p]),b=w.useCallback(async P=>{try{console.log("Création d'un late stop:",P);const{data:O,error:L}=await Y.from("lab_tours").insert({laboratory_id:P.laboratoryId,date:new Date().toISOString().split("T")[0],status:"draft",submission_time:new Date().toISOString()}).select().single();if(L)throw L;const{error:A}=await Y.from("lab_tour_stops").insert({tour_id:O.id,client_id:P.clientId,has_delivery:P.action==="delivery",has_pickup:P.action==="pickup"});if(A)throw A;console.log("✅ Late stop créé avec succès"),m();const R=a.filter(M=>M.status==="in_progress");if(R.length>0){const M=R[0];try{console.log(`🔄 Intégration du late stop dans la tournée ${M.id}...`);const D={late_stop_id:O.id,target_route_id:M.id,current_route_stops:M.stops.map(B=>({id:B.id,location_id:B.location_id,stop_order:B.stop_order,completed:B.completed})),late_stop_details:{client_id:P.clientId,client_name:P.clientName,laboratory_name:P.laboratoryName,action:P.action,location:"Adresse à récupérer depuis la base de données"},driver_start_location:{lat:M.currentStop?.location.latitude||43.2965,lng:M.currentStop?.location.longitude||5.3698}};console.log("📡 Données préparées pour l'API Late Stops:",D),console.log("⚠️ API Late Stops désactivée en développement")}catch(D){console.warn("Erreur lors de l'appel à l'API Late Stops:",D)}}console.log(`🎯 Tâche créée: ${P.action} pour ${P.clientName} (${P.laboratoryName})`)}catch(O){throw console.error("Erreur lors de la création du late stop:",O),O}},[m]),{isLoaded:x}=Zv({googleMapsApiKey:"AIzaSyCu30a3EW9XpAmlucgPlh2D9hVLg3lUHd0",libraries:wie});w.useEffect(()=>(m(),g(),()=>{y()}),[m,g,y]),w.useEffect(()=>{const P=setInterval(()=>{m()},3e4);return()=>clearInterval(P)},[m]);const j=w.useMemo(()=>a.filter(P=>P.status==="in_progress"),[a]);w.useEffect(()=>{if(j.length===0)return;const P=setInterval(()=>{i(O=>{const L={...O};return j.forEach(A=>{const R=L[A.id]||0,M=A.progress.total>0?A.progress.completed/A.progress.total*100:0;R<M?L[A.id]=Math.min(R+.5,M):L[A.id]=M}),L})},2e3);return()=>clearInterval(P)},[j]);const S=w.useMemo(()=>a.filter(P=>P.driver.full_name.toLowerCase().includes(t.toLowerCase())),[a,t]),C={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},E={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},N=w.useMemo(()=>{const P=a.length,O=a.filter(D=>D.status==="in_progress").length,L=a.filter(D=>D.status==="completed").length,A=a.reduce((D,B)=>D+B.progress.total,0),R=a.reduce((D,B)=>D+B.progress.completed,0),M=A>0?R/A*100:0;return{totalRoutes:P,activeRoutes:O,completedRoutes:L,totalStops:A,completedStops:R,overallProgress:M}},[a]);return c?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Suivi en temps réel"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Surveillance des tournées PROVENCE COURSES"})]}),o.jsx(_e,{className:"border-red-200 shadow-lg",children:o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(ss,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Erreur de chargement"}),o.jsx("p",{className:"text-gray-600 mb-6",children:c}),o.jsxs(ve,{onClick:m,className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl shadow-lg",children:[o.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Réessayer"]})]})})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 lg:py-8",children:[o.jsxs("div",{className:"mb-6 md:mb-8",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4 md:mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"Suivi en temps réel"}),o.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Surveillance des tournées PROVENCE COURSES"}),o.jsx("div",{className:"mt-2 text-sm",children:(()=>{const P=new Date().getHours();return P>=17||P<12?o.jsxs("div",{className:"flex items-center gap-2 text-primary-600",children:[o.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-pulse"}),o.jsx("span",{children:P>=17?"Tournées de nuit actives (17h-00h)":"Tournées de nuit en cours (00h-12h)"})]}):o.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[o.jsx(bt,{className:"w-4 h-4"}),o.jsx("span",{children:"Aucune tournée de nuit (12h-17h)"})]})})()})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsx(Qe,{placeholder:"Rechercher un livreur...",value:t,onChange:P=>e(P.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"}),className:"w-full lg:w-80"})})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 md:gap-4 mb-8",children:[o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-3 sm:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Tournées"}),o.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:N.totalRoutes})]}),o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:o.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600"})})]})})}),o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-3 sm:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Actives"}),o.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:N.activeRoutes})]}),o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(OF,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"})})]})})}),o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-3 sm:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Terminées"}),o.jsx("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:N.completedRoutes})]}),o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(ut,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600"})})]})})}),o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-3 sm:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Arrêts"}),o.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:[N.completedStops,"/",N.totalStops]})]}),o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:o.jsx(it,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600"})})]})})}),o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow col-span-2 sm:col-span-3 md:col-span-2",children:o.jsxs("div",{className:"p-3 sm:p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Progression globale"}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[N.overallProgress.toFixed(1),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-1000",style:{width:`${N.overallProgress}%`}})})]})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:o.jsx(gt,{className:"w-5 h-5 text-primary-600"})}),o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Tournées actives (",S.length,")"]}),l&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx(Qs,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:"Mise à jour..."})]})]})}),l&&S.length===0?o.jsx(_e,{className:"shadow-sm border border-gray-200",children:o.jsxs("div",{className:"p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Chargement des tournées..."}),o.jsx("p",{className:"text-gray-600",children:"Récupération des données en temps réel"})]})}):S.length===0?o.jsx(_e,{className:"shadow-sm border border-gray-200",children:o.jsxs("div",{className:"p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(it,{className:"h-8 w-8 text-gray-400"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune tournée trouvée"}),o.jsx("p",{className:"text-gray-600",children:t?`Aucune tournée ne correspond à "${t}"`:"Aucune tournée active pour le moment"}),t&&o.jsx(ve,{onClick:()=>e(""),variant:"ghost",className:"mt-4",children:"Effacer la recherche"})]})}):o.jsx(Ae.div,{variants:C,initial:"hidden",animate:"show",className:"grid gap-6",children:S.map(P=>o.jsx(Ae.div,{variants:E,children:o.jsx(xie,{route:P,animationProgress:s[P.id]||0,isLoaded:x})},P.id))})]}),o.jsx("div",{className:"fixed bottom-6 right-6 z-40",children:o.jsx(ve,{onClick:()=>n(!0),className:"bg-primary-500 hover:bg-primary-600 text-white shadow-xl hover:shadow-2xl transition-all duration-200 rounded-full w-14 h-14 p-0",children:o.jsx(ho,{className:"h-6 w-6"})})}),o.jsx(bie,{isOpen:r,onClose:()=>n(!1),onTaskCreate:b})]})})},FL=({onAddTask:t})=>o.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-accent-50 border-b border-gray-100",children:o.jsx("div",{className:"max-w-6xl mx-auto px-3 md:px-4 py-6 md:py-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-primary-500 rounded-xl flex items-center justify-center",children:o.jsx(OF,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),o.jsx("h1",{className:"text-xl md:text-3xl font-bold text-gray-900",children:"Suivi en temps réel"})]}),o.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Suivez la progression de vos livreurs en temps réel"})]}),o.jsxs(ve,{onClick:t,variant:"primary",size:"md",leftIcon:o.jsx(ho,{className:"w-4 h-4"}),className:"flex-shrink-0 ml-4 shadow-lg",children:[o.jsx("span",{className:"hidden sm:inline",children:"Ajouter une tâche"}),o.jsx("span",{className:"sm:hidden",children:"Ajouter"})]})]})})}),jie=({totalRoutes:t,activeRoutes:e,completedRoutes:r,totalDistance:n,totalDuration:s,totalStops:i,completedStops:a,totalDeliveries:l,completedDeliveries:c,totalPickups:d,completedPickups:f,overallProgress:p})=>{const m=g=>{const y=Math.floor(g/60),b=g%60;return`${y}h${b>0?` ${b}m`:""}`};return o.jsxs("div",{className:"mb-6 md:mb-8",children:[o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-4 md:mb-6",children:[o.jsx(_e,{className:"relative overflow-hidden",children:o.jsx(Hr,{className:"p-4 md:p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:o.jsx(gt,{className:"w-6 h-6 text-primary-600"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:e}),o.jsx("div",{className:"text-sm text-gray-600",children:"Routes actives"})]})]})})}),o.jsx(_e,{className:"relative overflow-hidden",children:o.jsx(Hr,{className:"p-4 md:p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"w-12 h-12 bg-accent-100 rounded-xl flex items-center justify-center",children:o.jsx(it,{className:"w-6 h-6 text-accent-600"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:n}),o.jsx("div",{className:"text-sm text-gray-600",children:"km total"})]})]})})}),o.jsx(_e,{className:"relative overflow-hidden",children:o.jsx(Hr,{className:"p-4 md:p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-xl flex items-center justify-center",children:o.jsx(bt,{className:"w-6 h-6 text-secondary-600"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-lg md:text-2xl font-bold text-gray-900",children:m(s)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Durée"})]})]})})}),o.jsx(_e,{className:"relative overflow-hidden",children:o.jsx(Hr,{className:"p-4 md:p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:o.jsx(ut,{className:"w-6 h-6 text-orange-600"})}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:l+d}),o.jsx("div",{className:"text-sm text-gray-600",children:"Actions"})]})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[o.jsx(_e,{children:o.jsxs(Hr,{className:"p-4 md:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Arrêts"}),o.jsx(it,{className:"w-5 h-5 text-gray-400"})]}),o.jsxs("div",{className:"text-3xl font-bold text-gray-900 mb-3",children:[a,"/",i]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"h-2 bg-gradient-to-r from-accent-400 to-accent-500 rounded-full transition-all duration-500",style:{width:`${i>0?a/i*100:0}%`}})}),o.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[i>0?Math.round(a/i*100):0,"% complétés"]})]})}),o.jsx(_e,{children:o.jsxs(Hr,{className:"p-4 md:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Livraisons"}),o.jsx(ut,{className:"w-5 h-5 text-primary-400"})]}),o.jsxs("div",{className:"text-3xl font-bold text-gray-900 mb-3",children:[c,"/",l]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"h-2 bg-gradient-to-r from-primary-400 to-primary-500 rounded-full transition-all duration-500",style:{width:`${l>0?c/l*100:0}%`}})}),o.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[l>0?Math.round(c/l*100):0,"% complétées"]})]})}),o.jsx(_e,{children:o.jsxs(Hr,{className:"p-4 md:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Récupérations"}),o.jsx(G1,{className:"w-5 h-5 text-secondary-400"})]}),o.jsxs("div",{className:"text-3xl font-bold text-gray-900 mb-3",children:[f,"/",d]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"h-2 bg-gradient-to-r from-secondary-400 to-secondary-500 rounded-full transition-all duration-500",style:{width:`${d>0?f/d*100:0}%`}})}),o.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[d>0?Math.round(f/d*100):0,"% complétées"]})]})})]})]})},Sie=({driver:t,isExpanded:e,onToggle:r})=>{w.useEffect(()=>{e&&(console.log("Driver expanded:",t.name),console.log("CurrentStop:",t.currentStop),console.log("NextStops:",t.nextStops))},[e,t.name,t.currentStop,t.nextStops]);const s=(()=>{switch(t.status){case"completed":return{statusColor:"text-emerald-700",statusText:"Terminé",avatarColor:"bg-emerald-500",borderColor:"border-emerald-200",bgGradient:"bg-gradient-to-br from-emerald-50 to-green-50"};case"in_progress":return{statusColor:"text-primary-700",statusText:"En cours",avatarColor:"bg-primary-500",borderColor:"border-primary-200",bgGradient:"bg-gradient-to-br from-primary-50 to-blue-50"};case"pending":return{statusColor:"text-orange-700",statusText:"En attente",avatarColor:"bg-orange-500",borderColor:"border-orange-200",bgGradient:"bg-gradient-to-br from-orange-50 to-amber-50"};default:return{statusColor:"text-gray-700",statusText:"Inconnu",avatarColor:"bg-gray-500",borderColor:"border-gray-200",bgGradient:"bg-gradient-to-br from-gray-50 to-slate-50"}}})(),i=t.totalStops>0?Math.round(t.completedStops/t.totalStops*100):0,a=c=>c.split(" ").map(d=>d[0]).join("").toUpperCase(),l=c=>{c.preventDefault(),c.stopPropagation(),console.log("Card clicked for driver:",t.name),console.log("Current isExpanded:",e),console.log("onToggle type:",typeof r),console.log("onToggle value:",r),typeof r=="function"?r():console.error("onToggle is not a function!",r)};return o.jsx(_e,{className:`
        relative cursor-pointer transition-all duration-300 hover:shadow-card-hover
        ${e?"ring-2 ring-primary-300 shadow-card-hover":"shadow-card"}
        ${s.borderColor} border-2
      `,onClick:l,children:o.jsxs(Hr,{className:`p-4 md:p-6 ${s.bgGradient}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4 flex-1 min-w-0",children:[o.jsxs("div",{className:`
              relative w-12 h-12 md:w-14 md:h-14 rounded-xl ${s.avatarColor} 
              flex items-center justify-center text-white font-bold text-sm md:text-lg 
              flex-shrink-0 shadow-lg
            `,children:[a(t.name),t.status==="completed"&&o.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:o.jsx(er,{className:"w-3 h-3 text-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 truncate mb-1",children:t.name}),o.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${t.status==="completed"?"bg-emerald-500":t.status==="in_progress"?"bg-primary-500":"bg-orange-500"}`}),o.jsx("span",{className:`text-sm font-medium ${s.statusColor}`,children:s.statusText})]}),o.jsx("div",{className:"h-4 w-px bg-gray-300"}),o.jsxs("span",{className:"text-sm text-gray-600 font-medium",children:[t.totalStops," arrêts"]}),t.isYesterday&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full",children:"Tournée d'hier"})]})]})]}),o.jsx("div",{className:`
            text-gray-400 transition-all duration-300 flex-shrink-0 ml-2
            ${e?"rotate-90 text-primary-500":"hover:text-gray-600"}
          `,children:o.jsx(Zn,{className:"w-5 h-5 md:w-6 md:h-6"})})]}),t.currentStop&&t.status==="in_progress"&&o.jsxs("div",{className:"mb-4 flex items-center justify-between text-sm bg-gradient-to-r from-primary-500 to-accent-500 text-white rounded-xl px-4 py-3 shadow-lg",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(ki,{className:"w-4 h-4 mr-2 flex-shrink-0"}),o.jsxs("span",{className:"truncate font-medium",children:["En route vers ",o.jsx("strong",{children:t.currentStop.location_name})]})]}),o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse ml-2"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center shadow-sm border border-gray-100",children:[o.jsxs("div",{className:"text-lg md:text-xl font-bold text-gray-900",children:[t.completedStops,o.jsxs("span",{className:"text-gray-500",children:["/",t.totalStops]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Arrêts"})]}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center shadow-sm border border-gray-100",children:[o.jsx("div",{className:"text-lg md:text-xl font-bold text-primary-600",children:t.deliveries}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Livraisons"})]}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center shadow-sm border border-gray-100",children:[o.jsx("div",{className:"text-lg md:text-xl font-bold text-secondary-600",children:t.pickups}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Récupérations"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[o.jsx("span",{className:"font-medium",children:"Progression"}),o.jsxs("span",{className:"font-bold text-lg",children:[i,"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 shadow-inner",children:o.jsx("div",{className:`h-3 rounded-full transition-all duration-700 shadow-sm ${t.status==="completed"?"bg-gradient-to-r from-emerald-400 to-emerald-500":t.status==="in_progress"?"bg-gradient-to-r from-primary-400 to-primary-500":"bg-gradient-to-r from-orange-400 to-orange-500"}`,style:{width:`${i}%`}})})]})]})})},Nie=({currentStop:t})=>{if(!t)return o.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 text-center shadow-sm",children:o.jsxs("div",{className:"text-gray-500",children:[o.jsx(it,{className:"w-8 h-8 mx-auto mb-3 text-gray-400"}),o.jsx("p",{className:"text-lg font-medium",children:"Aucun arrêt en cours"}),o.jsx("p",{className:"text-sm",children:"Le livreur n'a pas d'arrêt actuel"})]})});const e=()=>{switch(t.location_type){case"laboratory":return o.jsx(Dt,{className:"w-5 h-5 text-blue-600"});case"dentist":return o.jsx(Kr,{className:"w-5 h-5 text-green-600"});case"depot":return o.jsx(ut,{className:"w-5 h-5 text-orange-600"});default:return o.jsx(it,{className:"w-5 h-5 text-gray-600"})}},r=s=>s==="pickup"?"Récupération":"Livraison",n=s=>s==="pickup"?"bg-orange-100 text-orange-800 border-orange-200":"bg-blue-100 text-blue-800 border-blue-200";return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[o.jsx("span",{className:"mr-2",children:"🎯"}),"Prochain arrêt"]}),o.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 shadow-sm border border-gray-100",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md",children:t.stop_order})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[e(),o.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.location_name})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[o.jsx(bt,{className:"w-4 h-4"}),o.jsx("span",{className:"font-medium",children:t.estimated_arrival_time})]})]}),o.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:t.location_address}),o.jsx("div",{className:"space-y-2",children:t.shipments.map(s=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50/80 rounded-lg border",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded border ${n(s.shipment_type)}`,children:r(s.shipment_type)}),o.jsx("span",{className:"text-sm text-gray-700",children:s.laboratory_name})]}),o.jsx("div",{className:"flex items-center space-x-2",children:s.status==="completed"&&s.photo_proof_url?o.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[o.jsx(Qn,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-medium",children:"Photo OK"})]}):o.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[o.jsx(Qn,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs",children:"En attente"})]})})]},s.id))})]})]})})]})},Eie=({nextStops:t})=>{if(!t||t.length===0)return o.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 text-center shadow-sm",children:o.jsxs("div",{className:"text-gray-500",children:[o.jsx(it,{className:"w-8 h-8 mx-auto mb-3 text-gray-400"}),o.jsx("p",{className:"text-lg font-medium",children:"Aucun prochain arrêt"}),o.jsx("p",{className:"text-sm",children:"Tous les arrêts ont été effectués"})]})});const e=s=>{switch(s){case"laboratory":return o.jsx(Dt,{className:"w-5 h-5 text-blue-600"});case"dentist":return o.jsx(Kr,{className:"w-5 h-5 text-green-600"});case"depot":return o.jsx(ut,{className:"w-5 h-5 text-orange-600"});default:return o.jsx(it,{className:"w-5 h-5 text-gray-600"})}},r=s=>s==="pickup"?"Récupération":"Livraison",n=s=>s==="pickup"?"bg-orange-100 text-orange-800 border-orange-200":"bg-blue-100 text-blue-800 border-blue-200";return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"mr-2",children:"📋"}),"Prochains arrêts"]}),o.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",t.length,")"]})]}),o.jsxs("div",{className:"space-y-3",children:[t.slice(0,4).map((s,i)=>o.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-5 shadow-sm border border-gray-100",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center text-white font-bold shadow-md",children:s.stop_order})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[e(s.location_type),o.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.location_name})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-full",children:[o.jsx(bt,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:s.estimated_arrival_time})]})]}),o.jsx("p",{className:"text-gray-600 mb-3 text-sm",children:s.location_address}),o.jsx("div",{className:"flex flex-wrap gap-2",children:s.shipments.map(a=>o.jsxs("div",{className:`flex items-center space-x-2 px-2 py-1 rounded border text-xs ${n(a.shipment_type)}`,children:[o.jsx("span",{children:r(a.shipment_type)}),o.jsx("span",{className:"font-medium",children:a.laboratory_name})]},a.id))})]})]})},s.id)),t.length>4&&o.jsx("div",{className:"bg-gray-100/80 backdrop-blur-sm rounded-xl p-4 text-center border border-gray-200",children:o.jsxs("p",{className:"text-gray-600 font-medium",children:["+ ",t.length-4," autres arrêts"]})})]})]})},Cie=({driver:t})=>{const e=()=>Math.round(Math.random()*50+100),r=()=>Math.round(Math.random()*60+180),n=()=>{const p=e(),m=(t.totalStops-t.completedStops)/t.totalStops*100;return Math.round(p*m/100)},s=()=>{const p=r(),m=(t.totalStops-t.completedStops)/t.totalStops*100;return Math.round(p*m/100)},i=()=>Math.max(0,t.deliveries-Math.floor(t.deliveries*((t.totalStops-t.completedStops)/t.totalStops))),a=()=>Math.max(0,t.pickups-Math.floor(t.pickups*((t.totalStops-t.completedStops)/t.totalStops))),l=()=>t.deliveries-i(),c=()=>t.pickups-a(),d=p=>{const m=Math.floor(p/60),g=p%60;return`${m}h${g>0?` ${g}min`:""}`},f=t.totalStops>0?Math.round(t.completedStops/t.totalStops*100):0;return o.jsxs("div",{className:"mt-6 bg-gradient-to-br from-white/95 to-gray-50/95 backdrop-blur-lg rounded-2xl border border-white/20 shadow-2xl overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:o.jsx("span",{className:"text-2xl font-bold",children:t.name.split(" ").map(p=>p[0]).join("").toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold",children:t.name}),o.jsx("p",{className:"text-blue-100 opacity-90",children:"📊 Détails de la tournée"})]})]})}),o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200/50 p-6 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(ki,{className:"w-8 h-8 text-purple-600"}),o.jsx("div",{className:"text-3xl font-black text-purple-900",children:e()})]}),o.jsx("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"km totaux"}),o.jsx("div",{className:"text-xs text-purple-600 opacity-75",children:"Distance complète"})]})]}),o.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-red-50 to-red-100 border border-red-200/50 p-6 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(ki,{className:"w-8 h-8 text-red-600"}),o.jsx("div",{className:"text-3xl font-black text-red-900",children:n()})]}),o.jsx("div",{className:"text-sm font-medium text-red-700 mb-1",children:"km restants"}),o.jsx("div",{className:"text-xs text-red-600 opacity-75",children:"À parcourir"})]})]}),o.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200/50 p-6 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(bt,{className:"w-8 h-8 text-orange-600"}),o.jsx("div",{className:"text-2xl font-black text-orange-900",children:d(r())})]}),o.jsx("div",{className:"text-sm font-medium text-orange-700 mb-1",children:"durée totale"}),o.jsx("div",{className:"text-xs text-orange-600 opacity-75",children:"Temps estimé"})]})]}),o.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 to-amber-100 border border-amber-200/50 p-6 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(bt,{className:"w-8 h-8 text-amber-600"}),o.jsx("div",{className:"text-2xl font-black text-amber-900",children:d(s())})]}),o.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"temps restant"}),o.jsx("div",{className:"text-xs text-amber-600 opacity-75",children:"À effectuer"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200/50 p-6 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(ut,{className:"w-8 h-8 text-blue-600"}),o.jsx("div",{className:"text-3xl font-black text-blue-900",children:i()})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"livraisons faites"}),o.jsx("div",{className:"text-xs text-blue-600 opacity-75",children:"Terminées"})]})]}),o.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-50 to-rose-100 border border-rose-200/50 p-6 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(ut,{className:"w-8 h-8 text-rose-600"}),o.jsx("div",{className:"text-3xl font-black text-rose-900",children:l()})]}),o.jsx("div",{className:"text-sm font-medium text-rose-700 mb-1",children:"livraisons restantes"}),o.jsx("div",{className:"text-xs text-rose-600 opacity-75",children:"À effectuer"})]})]}),o.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-green-50 to-green-100 border border-green-200/50 p-6 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(it,{className:"w-8 h-8 text-green-600"}),o.jsx("div",{className:"text-3xl font-black text-green-900",children:a()})]}),o.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"récup. faites"}),o.jsx("div",{className:"text-xs text-green-600 opacity-75",children:"Terminées"})]})]}),o.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-gradient-to-br from-teal-50 to-teal-100 border border-teal-200/50 p-6 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-teal-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx(it,{className:"w-8 h-8 text-teal-600"}),o.jsx("div",{className:"text-3xl font-black text-teal-900",children:c()})]}),o.jsx("div",{className:"text-sm font-medium text-teal-700 mb-1",children:"récup. restantes"}),o.jsx("div",{className:"text-xs text-teal-600 opacity-75",children:"À effectuer"})]})]})]}),o.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 border border-indigo-200/50 p-6 shadow-lg",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-bold text-gray-900",children:"Progression générale"}),o.jsxs("p",{className:"text-sm text-gray-600",children:[t.completedStops,"/",t.totalStops," arrêts complétés"]})]}),o.jsxs("div",{className:"text-3xl font-black bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:[f,"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200/60 rounded-full h-4 overflow-hidden shadow-inner",children:o.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ease-out ${t.status==="completed"?"bg-gradient-to-r from-green-400 via-green-500 to-green-600 shadow-lg shadow-green-500/25":t.status==="in_progress"?"bg-gradient-to-r from-blue-400 via-blue-500 to-blue-600 shadow-lg shadow-blue-500/25":"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 shadow-lg shadow-yellow-500/25"}`,style:{width:`${f}%`}})})]})]}),t.currentStop?o.jsx(Nie,{currentStop:t.currentStop}):o.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-xl",children:[o.jsx(ut,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{className:"font-medium",children:"Aucun arrêt en cours"})]}),t.nextStops&&t.nextStops.length>0?o.jsx(Eie,{nextStops:t.nextStops}):o.jsxs("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-xl",children:[o.jsx(it,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),o.jsx("p",{className:"font-medium",children:"Aucun prochain arrêt"})]})]})]})},kie=({searchQuery:t,onSearchChange:e,resultsCount:r,totalCount:n})=>o.jsx(_e,{className:"bg-gradient-to-r from-gray-50 to-slate-50",children:o.jsxs(Hr,{className:"p-4 md:p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsx("div",{className:"flex-1 max-w-md",children:o.jsx(Qe,{placeholder:"Rechercher un livreur...",value:t,onChange:s=>e(s.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4 text-gray-400"}),className:"bg-white shadow-sm border-gray-200 focus:ring-primary-500 focus:border-primary-500"})}),o.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:o.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg shadow-sm border border-gray-100",children:[o.jsx(Ln,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"font-medium",children:t?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-primary-600",children:r}),o.jsx("span",{className:"text-gray-400",children:" sur "}),o.jsx("span",{children:n}),o.jsx("span",{className:"text-gray-400",children:" livreurs"})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-gray-900",children:n}),o.jsx("span",{className:"text-gray-400",children:" livreurs"})]})})]})})]}),t&&r===0&&o.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:o.jsxs("p",{className:"text-sm text-amber-800",children:['Aucun livreur trouvé pour "',o.jsx("strong",{children:t}),'"']})})]})}),Pie=()=>{const[t,e]=w.useState(null),[r,n]=w.useState(""),s=UG(),{fetchMonitoringRoutes:i,setFilters:a,updateStopStatus:l,updateShipmentStatus:c,setupRealtimeMonitoring:d,cleanupRealtimeMonitoring:f}=qG(),p=QG(),m=eK(),g=tK();w.useEffect(()=>(console.log("🔄 Initialisation de la page monitoring optimisée"),i(),d(),()=>{f()}),[]),w.useEffect(()=>{a({searchQuery:r})},[r,a]);const y=A=>{const R=new Date(A),M=new Date;return M.setDate(M.getDate()-1),R.toDateString()===M.toDateString()},b=A=>{const R=A.stops.reduce((D,B)=>D+B.shipments.filter(F=>F.shipment_type==="delivery").length,0),M=A.stops.reduce((D,B)=>D+B.shipments.filter(F=>F.shipment_type==="pickup").length,0);return{deliveries:R,pickups:M}},x=A=>A.stops.find(R=>R.status==="in_progress")||A.stops.find(R=>R.status==="pending"),j=A=>{const R=A.stops.findIndex(M=>M.status==="in_progress");return R>=0?A.stops.slice(R+1):A.stops.filter(M=>M.status==="pending")},S=A=>A.stops.filter(R=>R.completed).length,C=()=>s.routes?s.routes.map(A=>{const R=b(A),M=x(A),D=j(A),B=F=>{switch(F){case"in_progress":return"in_progress";case"completed":return"completed";case"pending":case"optimized":case"validated":default:return"pending"}};return{id:A.driver_id,name:A.driver_name,status:B(A.status),currentStop:M?{id:M.id,location_name:M.location_name,location_address:M.location_address,stop_order:M.stop_order,estimated_arrival_time:M.estimated_arrival_time,actual_arrival_time:M.actual_arrival_time,status:M.status,location_type:M.location_type,shipments:M.shipments.map(F=>({id:F.id,laboratory_name:F.laboratory_name,shipment_type:F.shipment_type,status:F.shipment_type==="pickup"?F.pickup_status:F.delivery_status,photo_proof_url:F.photo_proof_url}))}:void 0,nextStops:D.map(F=>({id:F.id,location_name:F.location_name,location_address:F.location_address,stop_order:F.stop_order,estimated_arrival_time:F.estimated_arrival_time,actual_arrival_time:F.actual_arrival_time,status:F.status,location_type:F.location_type,shipments:F.shipments.map(V=>({id:V.id,laboratory_name:V.laboratory_name,shipment_type:V.shipment_type,status:V.shipment_type==="pickup"?V.pickup_status:V.delivery_status,photo_proof_url:V.photo_proof_url}))})),totalStops:A.stops.length,completedStops:S(A),deliveries:R.deliveries,pickups:R.pickups,isYesterday:y(A.created_at)}}):[],E=()=>{console.log("Ajouter une tâche - Fonctionnalité à développer")},N=A=>{console.log("handleDriverSelect called with:",A),e(t===A?null:A)},P=A=>{n(A),A&&e(null)},O=C(),L=O;return m?o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100",children:[o.jsx(FL,{onAddTask:E}),o.jsx("div",{className:"max-w-6xl mx-auto px-3 md:px-4 py-6 md:py-8",children:o.jsx(_e,{className:"border-red-200",children:o.jsxs(Hr,{className:"p-6 md:p-8 text-center",children:[o.jsx(ss,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-gray-900 mb-2",children:"Erreur de chargement"}),o.jsx("p",{className:"text-gray-600 mb-6",children:m}),o.jsx("button",{onClick:()=>i(),className:"px-6 py-3 bg-primary-500 text-white rounded-xl hover:bg-primary-600 font-medium transition-colors shadow-lg",children:"Réessayer"})]})})})]}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100",children:[o.jsx(FL,{onAddTask:E}),o.jsxs("div",{className:"max-w-6xl mx-auto px-3 md:px-4 py-6 md:py-8 space-y-6 md:space-y-8",children:[o.jsx(jie,{totalRoutes:g.totalRoutes,activeRoutes:g.activeRoutes,completedRoutes:g.completedRoutes,totalDistance:g.totalDistance,totalDuration:g.totalDuration,totalStops:g.totalStops,completedStops:g.completedStops,totalDeliveries:g.totalDeliveries,completedDeliveries:g.completedDeliveries,totalPickups:g.totalPickups,completedPickups:g.completedPickups,overallProgress:g.overallProgress}),o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:o.jsx(gt,{className:"w-5 h-5 text-primary-600"})}),o.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:["Livreurs (",L.length,")"]}),p&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),o.jsx("span",{children:"Mise à jour..."})]})]})}),o.jsx(kie,{searchQuery:r,onSearchChange:P,resultsCount:L.length,totalCount:O.length}),p&&L.length===0?o.jsx(_e,{children:o.jsxs(Hr,{className:"p-8 md:p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Chargement des données..."}),o.jsx("p",{className:"text-gray-600",children:"Récupération des informations de monitoring en temps réel"})]})}):L.length===0?o.jsx(_e,{children:o.jsxs(Hr,{className:"p-8 md:p-12 text-center",children:[o.jsx(gt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r?"Aucun livreur trouvé":"Aucun livreur disponible"}),o.jsx("p",{className:"text-gray-600",children:r?`Aucun livreur ne correspond à "${r}"`:"Aucun livreur disponible pour aujourd'hui"})]})}):o.jsx("div",{className:"space-y-3 md:space-y-4",children:L.map(A=>{const R=()=>{console.log("handleToggle called for:",A.id),N(A.id)};return o.jsx(Sie,{driver:A,isExpanded:t===A.id,onToggle:R},A.id)})})]}),t&&o.jsx("div",{className:"space-y-4",children:(()=>{const A=L.find(R=>R.id===t);return A?o.jsx(Cie,{driver:A}):null})()})]})]})},kB=async t=>{try{console.log("🔍 Récupération de l'historique des tournées terminées");let e=Y.from("driver_routes").select(`
        id,
        driver_id,
        date,
        status,
        estimated_duration,
        total_distance_km,
        created_at,
        updated_at,
        polyline,
        drivers (
          id,
          full_name,
          email,
          start_address,
          sector,
          vehicle_type
        )
      `).eq("status","completed").order("date",{ascending:!1});t?.startDate&&(e=e.gte("date",t.startDate)),t?.endDate&&(e=e.lte("date",t.endDate)),t?.limit&&(e=e.limit(t.limit));const{data:r,error:n}=await e;if(n)throw new Error(`Erreur lors de la récupération des routes: ${n.message}`);if(!r||r.length===0)return console.log("📭 Aucune tournée terminée trouvée"),[];let s=r;if(t?.driverName){const a=t.driverName.toLowerCase();s=r.filter(l=>l.drivers?.full_name?.toLowerCase().includes(a))}return console.log(`✅ ${s.length} tournées terminées trouvées`),await Promise.all(s.map(async a=>{const l=await Oie(a.id);return{...a,...l}}))}catch(e){throw console.error("❌ Erreur lors de la récupération de l'historique:",e),e}},Oie=async t=>{try{const{data:e,error:r}=await Y.from("driver_route_stops").select(`
        id,
        route_id,
        location_id,
        stop_order,
        stop_type,
        client_actions,
        estimated_arrival_time,
        estimated_departure_time,
        distance_from_previous,
        duration_from_previous,
        completed,
        arrival_time,
        is_late_stop,
        created_at,
        locations (
          id,
          formatted_address,
          latitude,
          longitude,
          delivery_instructions,
          location_photos (
            id,
            photo_url,
            description
          )
        )
      `).eq("route_id",t).order("stop_order");if(r)throw new Error(`Erreur lors de la récupération des arrêts: ${r.message}`);const{data:n,error:s}=await Y.from("driver_route_shipments").select(`
        id,
        route_id,
        shipment_ref,
        laboratory_id,
        pickup_stop_id,
        delivery_stop_id,
        pickup_time,
        delivery_time,
        pickup_status,
        delivery_status,
        issue_type,
        issue_description,
        proof_photo_url,
        shipment_type,
        unexpected,
        is_late_shipment,
        created_at,
        updated_at,
        laboratories (
          id,
          name
        ),
        laboratory_clients (
          id,
          name,
          client_type,
          locations (
            formatted_address
          )
        )
      `).eq("route_id",t);if(s)throw new Error(`Erreur lors de la récupération des shipments: ${s.message}`);return{stops:e||[],shipments:n||[]}}catch(e){throw console.error(`❌ Erreur lors de la récupération des détails de la route ${t}:`,e),e}},BL=t=>{const e=t.stops||[],r=t.shipments||[],n=e.length>0?e[0]?.arrival_time||e[0]?.estimated_arrival_time:null,s=e.length>0?e[e.length-1]?.arrival_time||e[e.length-1]?.estimated_departure_time:null;let i="Non calculé";if(n&&s){const y=new Date(n),x=new Date(s).getTime()-y.getTime(),j=Math.floor(x/(1e3*60*60)),S=Math.floor(x%(1e3*60*60)/(1e3*60));i=`${j}h ${S}min`}const a=r.filter(y=>y.shipment_type==="client_delivery"||y.shipment_type==="lab_dropoff"||y.shipment_type==="depot_dropoff"),l=r.filter(y=>y.shipment_type==="client_pickup"||y.shipment_type==="lab_pickup"||y.shipment_type==="depot_pickup"),c=a.filter(y=>y.delivery_status==="completed").length,d=a.filter(y=>y.delivery_status==="failed").length,f=l.filter(y=>y.pickup_status==="completed").length,p=l.filter(y=>y.pickup_status==="failed").length,m=e.filter(y=>y.completed===!0).length,g=e.length;return{startTime:n,endTime:s,totalDuration:i,deliveriesCount:c,pickupsCount:f,completedCount:c+f,failedCount:d+p,completedStops:m,totalStops:g,totalDistance:t.total_distance_km||0}},Aie=async(t=1,e=10,r)=>{const n=(t-1)*e,s=await kB({...r,limit:void 0});return{routes:s.slice(n,n+e),totalCount:s.length,currentPage:t,totalPages:Math.ceil(s.length/e),hasNextPage:t<Math.ceil(s.length/e),hasPreviousPage:t>1}},zL={driverName:"",selectedDate:"",startDate:void 0,endDate:void 0},Tie=as((t,e)=>({routes:[],isLoading:!1,error:null,filters:zL,currentPage:1,totalPages:1,totalCount:0,pageSize:10,hasNextPage:!1,hasPreviousPage:!1,fetchHistory:async r=>{t({isLoading:!0,error:null});try{const s={...e().filters,...r};console.log("🔍 Récupération de l'historique avec filtres:",s);const i={};s.driverName&&(i.driverName=s.driverName),s.selectedDate&&(i.startDate=s.selectedDate,i.endDate=s.selectedDate),s.startDate&&(i.startDate=s.startDate),s.endDate&&(i.endDate=s.endDate);const l=(await kB(i)).map(c=>{const d=BL(c),f=c.drivers;return{id:c.id,driverName:f?.full_name||"Livreur inconnu",driverPhone:f?.phone||"",driverEmail:f?.email||"",date:c.date,startTime:d.startTime?new Date(d.startTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"08:00",endTime:d.endTime?new Date(d.endTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"17:00",totalDuration:d.totalDuration,deliveriesCount:d.deliveriesCount,pickupsCount:d.pickupsCount,completedCount:d.completedCount,failedCount:d.failedCount,totalDistance:d.totalDistance,stops:UL(c),rawData:c}});t({routes:l,filters:s,isLoading:!1,totalCount:l.length,totalPages:Math.ceil(l.length/e().pageSize)}),console.log(`✅ ${l.length} tournées historiques chargées`)}catch(n){console.error("❌ Erreur lors du chargement de l'historique:",n),t({error:"Erreur lors du chargement de l'historique des tournées",isLoading:!1})}},fetchHistoryPaginated:async(r,n)=>{t({isLoading:!0,error:null});try{const i={...e().filters,...n},a=e().pageSize,l={};i.driverName&&(l.driverName=i.driverName),i.selectedDate&&(l.startDate=i.selectedDate,l.endDate=i.selectedDate),i.startDate&&(l.startDate=i.startDate),i.endDate&&(l.endDate=i.endDate);const c=await Aie(r,a,l),d=c.routes.map(f=>{const p=BL(f),m=f.drivers;return{id:f.id,driverName:m?.full_name||"Livreur inconnu",driverPhone:m?.phone||"",driverEmail:m?.email||"",date:f.date,startTime:p.startTime?new Date(p.startTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"08:00",endTime:p.endTime?new Date(p.endTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"17:00",totalDuration:p.totalDuration,deliveriesCount:p.deliveriesCount,pickupsCount:p.pickupsCount,completedCount:p.completedCount,failedCount:p.failedCount,totalDistance:p.totalDistance,stops:UL(f),rawData:f}});t({routes:d,filters:i,currentPage:c.currentPage,totalPages:c.totalPages,totalCount:c.totalCount,hasNextPage:c.hasNextPage,hasPreviousPage:c.hasPreviousPage,isLoading:!1})}catch(s){console.error("❌ Erreur lors du chargement paginé:",s),t({error:"Erreur lors du chargement de l'historique des tournées",isLoading:!1})}},setFilters:r=>{const s={...e().filters,...r};t({filters:s})},clearFilters:()=>{t({filters:zL})},setPage:r=>{const n=e().filters;e().fetchHistoryPaginated(r,n)},getRouteById:r=>e().routes.find(n=>n.id===r),getFilteredRoutes:()=>{const{routes:r,filters:n}=e();let s=r;if(n.driverName){const i=n.driverName.toLowerCase();s=s.filter(a=>a.driverName.toLowerCase().includes(i))}return n.selectedDate&&(s=s.filter(i=>i.date===n.selectedDate)),s},getTotalStatistics:()=>{const r=e().routes;return{totalRoutes:r.length,totalDeliveries:r.reduce((n,s)=>n+s.deliveriesCount,0),totalPickups:r.reduce((n,s)=>n+s.pickupsCount,0),successRate:r.length>0?Math.round(r.reduce((n,s)=>n+s.completedCount,0)/r.reduce((n,s)=>n+(s.completedCount+s.failedCount),0)*100):0}}}));function UL(t){const e=t.stops||[],r=t.shipments||[];return e.map(n=>{const s=r.filter(p=>p.pickup_stop_id===n.id||p.delivery_stop_id===n.id),i=s.some(p=>p.pickup_stop_id===n.id),a=s.some(p=>p.delivery_stop_id===n.id);let l="delivery";i&&a?l="both":i&&(l="pickup");const d=s.some(p=>p.pickup_status==="failed"||p.delivery_status==="failed")?"failed":"completed";let f="Arrêt inconnu";return n.stop_type?.includes("lab")?f=s.find(m=>m.laboratories?.name)?.laboratories?.name||n.locations?.formatted_address?.split(",")[0]||"Laboratoire":n.stop_type?.includes("depot")?f="Dépôt":n.stop_type==="client"?f=s.find(m=>m.laboratory_clients?.name)?.laboratory_clients?.name||n.locations?.formatted_address?.split(",")[0]||"Client":f=n.locations?.formatted_address?.split(",")[0]||"Arrêt inconnu",{id:n.id,name:f,address:n.locations?.formatted_address||"",type:n.stop_type?.includes("lab")?"laboratory":n.stop_type?.includes("depot")?"depot":"dentist",scheduledTime:n.estimated_arrival_time||"08:00",actualTime:n.arrival_time?new Date(n.arrival_time).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):null,action:l,status:d,deliveryPhoto:s.find(p=>p.delivery_stop_id===n.id&&p.proof_photo_url)?.proof_photo_url,pickupPhoto:s.find(p=>p.pickup_stop_id===n.id&&p.proof_photo_url)?.proof_photo_url,deliveryNotes:n.locations?.delivery_instructions,packages:{pickup:s.filter(p=>p.pickup_stop_id===n.id).map(p=>{let m="Destination inconnue";return n.stop_type==="client"?m=p.laboratories?.name||"Laboratoire":m=p.laboratory_clients?.name||"Client",{id:p.id,type:p.shipment_type||"Colis",destination:m,status:p.pickup_status==="completed"?"completed":"failed",unexpected:p.unexpected||!1}}),delivery:s.filter(p=>p.delivery_stop_id===n.id).map(p=>{let m="Origine inconnue";return n.stop_type==="client"?m=p.laboratories?.name||"Laboratoire":m=p.laboratory_clients?.name||"Client",{id:p.id,type:p.shipment_type||"Colis",origin:m,status:p.delivery_status==="completed"?"completed":"failed",unexpected:p.unexpected||!1}})}}})}const Lie=()=>{const{routes:t,isLoading:e,error:r,filters:n,fetchHistory:s,setFilters:i,getTotalStatistics:a}=Tie(),[l,c]=w.useState([]),[d,f]=w.useState(null);w.useEffect(()=>{s()},[s]);const p=S=>{c(C=>C.includes(S)?C.filter(E=>E!==S):[...C,S])},m=S=>{i({driverName:S}),s({driverName:S})},g=S=>{i({selectedDate:S}),s({selectedDate:S})},y=t,b={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},x={hidden:{y:20,opacity:0},show:{y:0,opacity:1}},j=a();return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsx(_e,{children:o.jsxs(eS,{children:[o.jsxs(Yd,{className:"flex items-center gap-3",children:[o.jsx(PE,{className:"h-6 w-6 text-primary-600"}),"Historique des livreurs"]}),o.jsx(Jd,{children:"Consultez l'historique détaillé des tournées effectuées par vos livreurs"}),!e&&j.totalRoutes>0&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-100",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:j.totalRoutes}),o.jsx("div",{className:"text-sm text-gray-500",children:"Tournées"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600",children:j.totalDeliveries}),o.jsx("div",{className:"text-sm text-gray-500",children:"Livraisons"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-accent-600",children:j.totalPickups}),o.jsx("div",{className:"text-sm text-gray-500",children:"Récupérations"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-success-600",children:[j.successRate,"%"]}),o.jsx("div",{className:"text-sm text-gray-500",children:"Réussite"})]})]})]})}),o.jsx(_e,{children:o.jsx(Hr,{className:"p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(Qe,{placeholder:"Rechercher un livreur...",value:n.driverName,onChange:S=>m(S.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"}),className:"flex-1"}),o.jsx(Qe,{type:"date",value:n.selectedDate,onChange:S=>g(S.target.value),leftIcon:o.jsx(fo,{className:"h-4 w-4"}),className:"sm:w-48"})]})})}),e&&o.jsx(_e,{children:o.jsx(Hr,{className:"py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),o.jsx(Yd,{className:"text-lg mb-2",children:"Chargement en cours"}),o.jsx(Jd,{children:"Récupération de l'historique des tournées..."})]})})}),r&&o.jsx(_e,{className:"border-red-200 bg-red-50",children:o.jsx(Hr,{className:"py-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ss,{className:"h-6 w-6 text-red-600 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx(Yd,{className:"text-red-900 text-lg mb-1",children:"Erreur de chargement"}),o.jsx(Jd,{className:"text-red-700",children:r})]})]})})}),!e&&!r&&y.length===0&&o.jsx(_e,{children:o.jsx(Hr,{className:"py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx(gt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx(Yd,{className:"text-lg mb-2",children:"Aucune tournée trouvée"}),o.jsx(Jd,{children:n.driverName||n.selectedDate?"Aucune tournée ne correspond à vos critères de recherche":"Aucune tournée terminée disponible"})]})})}),o.jsx(Ae.div,{variants:b,initial:"hidden",animate:"show",className:"space-y-6",children:y.map(S=>o.jsx(Ae.div,{variants:x,children:o.jsxs(_e,{className:"overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-200",children:[o.jsxs(eS,{className:"bg-gradient-to-r from-gray-50 to-white border-b border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center",children:o.jsx(Kr,{className:"h-6 w-6 text-gray-600"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:S.driverName}),o.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2 mt-1",children:[o.jsx(fo,{className:"h-4 w-4 flex-shrink-0 text-primary-500"}),o.jsx("span",{className:"font-medium",children:new Date(S.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),o.jsx("span",{className:"hidden sm:inline-block text-gray-400",children:"•"}),o.jsx(MF,{className:"h-4 w-4 flex-shrink-0 hidden sm:block text-primary-500"}),o.jsxs("span",{className:"hidden sm:block font-medium",children:[S.startTime," - ",S.endTime]})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Durée totale"}),o.jsx("div",{className:"text-2xl font-bold text-primary-700",children:S.totalDuration})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-xl p-4 border border-primary-200",children:[o.jsxs("div",{className:"flex items-center text-primary-700 mb-2",children:[o.jsx(ut,{className:"h-5 w-5 mr-2"}),o.jsx("span",{className:"font-medium text-sm",children:"Livraisons"})]}),o.jsx("div",{className:"text-2xl font-bold text-primary-800",children:S.deliveriesCount})]}),o.jsxs("div",{className:"bg-gradient-to-br from-accent-50 to-accent-100 rounded-xl p-4 border border-accent-200",children:[o.jsxs("div",{className:"flex items-center text-accent-700 mb-2",children:[o.jsx(Rn,{className:"h-5 w-5 mr-2"}),o.jsx("span",{className:"font-medium text-sm",children:"Récupérations"})]}),o.jsx("div",{className:"text-2xl font-bold text-accent-800",children:S.pickupsCount})]}),o.jsxs("div",{className:"bg-gradient-to-br from-success-50 to-success-100 rounded-xl p-4 border border-success-200",children:[o.jsxs("div",{className:"flex items-center text-success-700 mb-2",children:[o.jsx(er,{className:"h-5 w-5 mr-2"}),o.jsx("span",{className:"font-medium text-sm",children:"Réussis"})]}),o.jsx("div",{className:"text-2xl font-bold text-success-800",children:S.completedCount})]}),o.jsxs("div",{className:"bg-gradient-to-br from-error-50 to-error-100 rounded-xl p-4 border border-error-200",children:[o.jsxs("div",{className:"flex items-center text-error-700 mb-2",children:[o.jsx(es,{className:"h-5 w-5 mr-2"}),o.jsx("span",{className:"font-medium text-sm",children:"Échoués"})]}),o.jsx("div",{className:"text-2xl font-bold text-error-800",children:S.failedCount})]})]}),o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:o.jsx(ve,{variant:"ghost",onClick:()=>p(S.id),className:"w-full flex items-center justify-center gap-2 hover:bg-gray-50 text-gray-600 hover:text-gray-900 transition-colors",children:l.includes(S.id)?o.jsxs(o.Fragment,{children:["Masquer les détails des arrêts",o.jsx(CE,{className:"h-4 w-4"})]}):o.jsxs(o.Fragment,{children:["Afficher les détails des arrêts",o.jsx(Es,{className:"h-4 w-4"})]})})})]}),o.jsx(Hr,{className:"p-0",children:o.jsx(Rt,{children:l.includes(S.id)&&o.jsx(Ae.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:o.jsx("div",{className:"p-6 space-y-4 bg-gray-50/50",children:S.stops.map(C=>o.jsx("div",{className:`p-4 rounded-2xl border-2 shadow-md hover:shadow-lg transition-all duration-200 ${C.type==="laboratory"?"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-300":C.type==="dentist"?"bg-gradient-to-br from-green-50 to-green-100 border-green-300":"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-300"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[C.type==="laboratory"?o.jsx(Dt,{className:"h-6 w-6 text-blue-600"}):C.type==="dentist"?o.jsx(Kr,{className:"h-6 w-6 text-green-600"}):o.jsx(gt,{className:"h-6 w-6 text-orange-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:C.name}),o.jsx("div",{className:"flex items-center gap-3",children:C.status==="completed"?o.jsxs("span",{className:"flex items-center gap-1 text-sm text-success-700 bg-success-100 px-3 py-1 rounded-full font-medium",children:[o.jsx(er,{className:"h-4 w-4"}),"Réussi"]}):o.jsxs("span",{className:"flex items-center gap-1 text-sm text-error-700 bg-error-100 px-3 py-1 rounded-full font-medium",children:[o.jsx(ss,{className:"h-4 w-4"}),"Échoué"]})})]}),o.jsxs("div",{className:"flex items-center gap-6 mb-3",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Prévu :"}),o.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:C.scheduledTime})]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium text-gray-700",children:"Réel :"}),o.jsx("span",{className:"ml-1 font-semibold text-gray-900",children:C.actualTime||"Non renseigné"})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[o.jsx(it,{className:"h-4 w-4 text-gray-500"}),o.jsx("span",{children:C.address})]}),o.jsxs("div",{className:"mt-4 space-y-4",children:[(C.action==="delivery"||C.action==="both")&&o.jsxs("div",{className:`p-4 rounded-xl border-2 ${C.type==="laboratory"?"bg-gradient-to-br from-blue-100 to-blue-150 border-blue-300":C.type==="dentist"?"bg-gradient-to-br from-green-100 to-green-150 border-green-300":"bg-gradient-to-br from-orange-100 to-orange-150 border-orange-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:`flex items-center gap-3 ${C.type==="laboratory"?"text-blue-800":C.type==="dentist"?"text-green-800":"text-orange-800"}`,children:[o.jsx(ut,{className:"h-5 w-5"}),o.jsx("span",{className:"font-semibold text-lg",children:"📦 Livraison"})]}),C.deliveryPhoto&&(C.action==="delivery"||C.action==="both")&&C.type==="dentist"&&o.jsxs(ve,{variant:"outline",size:"sm",className:"h-9 px-4 text-xs font-semibold text-green-700 border-green-300 bg-green-50 hover:bg-green-100 hover:border-green-400 transition-all",onClick:()=>f({stopId:C.id,type:"delivery"}),children:[o.jsx(Qn,{className:"h-4 w-4 mr-2"}),"📸 Voir la preuve"]})]}),C.packages?.delivery&&o.jsx("div",{className:"space-y-3 mb-4",children:C.packages.delivery.map(E=>o.jsx("div",{className:`p-4 rounded-xl border-2 shadow-sm hover:shadow-md transition-shadow ${E.unexpected?"bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-300":"bg-white/80 border-gray-200 hover:bg-white"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:E.origin}),E.unexpected&&o.jsx("span",{className:"text-xs font-bold text-yellow-800 bg-yellow-200 px-3 py-1 rounded-full border border-yellow-300",children:"⚠️ Retour inattendu"})]}),E.status==="completed"?o.jsx("span",{className:"text-xs font-semibold text-success-700 bg-success-100 px-3 py-1 rounded-full border border-success-200",children:"✅ Réussi"}):o.jsx("span",{className:"text-xs font-semibold text-error-700 bg-error-100 px-3 py-1 rounded-full border border-error-200",children:"❌ Échoué"})]})},E.id))}),C.deliveryNotes&&o.jsx("div",{className:`mt-3 p-3 rounded-lg border ${C.type==="laboratory"?"bg-blue-50 border-blue-200 text-blue-800":C.type==="dentist"?"bg-green-50 border-green-200 text-green-800":"bg-orange-50 border-orange-200 text-orange-800"}`,children:o.jsxs("p",{className:"text-sm font-medium",children:["💭 Note : ",C.deliveryNotes]})}),C.deliveryReason&&o.jsx("div",{className:"mt-3 p-3 rounded-lg border bg-error-50 border-error-200",children:o.jsxs("p",{className:"text-sm font-medium text-error-700",children:["⚠️ Raison d'échec : ",C.deliveryReason]})})]}),(C.action==="pickup"||C.action==="both")&&o.jsxs("div",{className:`p-4 rounded-xl border-2 ${C.type==="laboratory"?"bg-gradient-to-br from-blue-100 to-blue-150 border-blue-300":C.type==="dentist"?"bg-gradient-to-br from-green-100 to-green-150 border-green-300":"bg-gradient-to-br from-orange-100 to-orange-150 border-orange-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:`flex items-center gap-3 ${C.type==="laboratory"?"text-blue-800":C.type==="dentist"?"text-green-800":"text-orange-800"}`,children:[o.jsx(Rn,{className:"h-5 w-5"}),o.jsx("span",{className:"font-semibold text-lg",children:"📋 Récupération"})]}),C.pickupPhoto&&(C.action==="pickup"||C.action==="both")&&C.type==="dentist"&&o.jsxs(ve,{variant:"outline",size:"sm",className:"h-9 px-4 text-xs font-semibold text-green-700 border-green-300 bg-green-50 hover:bg-green-100 hover:border-green-400 transition-all",onClick:()=>f({stopId:C.id,type:"pickup"}),children:[o.jsx(Qn,{className:"h-4 w-4 mr-2"}),"📸 Voir la preuve"]})]}),C.packages?.pickup&&o.jsx("div",{className:"space-y-3 mb-4",children:C.packages.pickup.map(E=>o.jsx("div",{className:`p-4 rounded-xl border-2 shadow-sm hover:shadow-md transition-shadow ${E.unexpected?"bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-300":"bg-white/80 border-gray-200 hover:bg-white"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:E.destination}),E.unexpected&&o.jsx("span",{className:"text-xs font-bold text-yellow-800 bg-yellow-200 px-3 py-1 rounded-full border border-yellow-300",children:"⚠️ Retour inattendu"})]}),E.status==="completed"?o.jsx("span",{className:"text-xs font-semibold text-success-700 bg-success-100 px-3 py-1 rounded-full border border-success-200",children:"✅ Réussi"}):o.jsx("span",{className:"text-xs font-semibold text-error-700 bg-error-100 px-3 py-1 rounded-full border border-error-200",children:"❌ Échoué"})]})},E.id))}),C.pickupNotes&&o.jsx("div",{className:`mt-3 p-3 rounded-lg border ${C.type==="laboratory"?"bg-blue-50 border-blue-200 text-blue-800":C.type==="dentist"?"bg-green-50 border-green-200 text-green-800":"bg-orange-50 border-orange-200 text-orange-800"}`,children:o.jsxs("p",{className:"text-sm font-medium",children:["💭 Note : ",C.pickupNotes]})}),C.pickupReason&&o.jsx("div",{className:"mt-3 p-3 rounded-lg border bg-error-50 border-error-200",children:o.jsxs("p",{className:"text-sm font-medium text-error-700",children:["⚠️ Raison d'échec : ",C.pickupReason]})})]})]})]}),o.jsx(Rt,{children:d?.stopId===C.id&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>f(null),children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:E=>E.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:d?.type==="delivery"?"Photo de livraison":"Photo de récupération"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[C.name," - ",new Date(S.date).toLocaleDateString("fr-FR")]})]}),o.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(tr,{className:"h-5 w-5"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto",children:o.jsxs("div",{className:"relative aspect-[4/3] rounded-xl overflow-hidden",children:[o.jsx("img",{src:d?.type==="delivery"?C.deliveryPhoto:C.pickupPhoto,alt:`Photo de ${d?.type==="delivery"?"livraison":"récupération"}`,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-opacity flex items-center justify-center opacity-0 hover:opacity-100",children:o.jsx("div",{className:"bg-white/90 hover:bg-white rounded-lg p-2 cursor-pointer",onClick:()=>window.open(d?.type==="delivery"?C.deliveryPhoto:C.pickupPhoto,"_blank"),children:o.jsx(LF,{className:"h-5 w-5"})})})]})})]})})})]})},C.id))})})})})]})},S.id))})]})},PB=async t=>{try{const{data:e,error:r}=await Y.functions.invoke("delete-user",{body:{userId:t}});return r?(console.error("Erreur lors de l'appel à la fonction Edge:",r),!1):e.success?!0:(console.error("La fonction Edge a échoué:",e.error),!1)}catch(e){return console.error("Exception lors de l'appel à la fonction Edge:",e),!1}},OB=async(t,e)=>{try{const r=`${qN}/functions/v1/update-password`,s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${VN}`},body:JSON.stringify({userId:t,newPassword:e})}),i=await s.json();return s.ok?i.success?(console.log("Réponse de la fonction Edge:",i),!0):(console.error("La fonction Edge a échoué:",i.error),!1):(console.error("La fonction Edge a retourné une erreur:",i),!1)}catch(r){return console.error("Exception lors de l'appel à la fonction Edge pour la mise à jour du mot de passe:",r),!1}},Mie=async({name:t,email:e,password:r,sector:n,vehicle:s,startAddress:i,startTime:a,placeId:l,latitude:c,longitude:d})=>{try{const{data:f,error:p}=await Y.auth.signUp({email:e,password:r,options:{data:{type:"driver",name:t}}});if(p)throw p;if(!f.user)throw new Error("Erreur lors de la création de l'utilisateur");const{data:m,error:g}=await Y.from("drivers").insert({user_id:f.user.id,full_name:t,email:e,start_address:i,sector:n,vehicle_type:s||null,start_time:a||null,place_id:l||null,latitude:c||null,longitude:d||null}).select().single();if(g)throw console.error("Erreur lors de la création du chauffeur:",g),g;return{id:m.id,user_id:f.user.id,name:m.full_name,email:e,sector:m.sector,vehicle:m.vehicle_type,startAddress:m.start_address,startTime:m.start_time,placeId:m.place_id||"",latitude:m.latitude||null,longitude:m.longitude||null,isActive:!0}}catch(f){throw console.error("Erreur lors de la création du compte chauffeur:",f),f}},Rie=async({id:t,name:e,sector:r,vehicle:n,startAddress:s,startTime:i,placeId:a,latitude:l,longitude:c})=>{try{const{data:d,error:f}=await Y.from("drivers").select("*").eq("id",t).single();if(f)throw f;const p={};if(e&&(p.full_name=e),r&&(p.sector=r),n!==void 0&&(p.vehicle_type=n),s&&(p.start_address=s),i!==void 0&&(p.start_time=i),a!==void 0&&(p.place_id=a),l!==void 0&&(p.latitude=l),c!==void 0&&(p.longitude=c),Object.keys(p).length>0){const{data:m,error:g}=await Y.from("drivers").update(p).eq("id",t).select("*").single();if(g)throw g;return{id:m.id,name:m.full_name,email:m.email||"",sector:m.sector||"",vehicle:m.vehicle_type||"",startAddress:m.start_address,startTime:m.start_time||"",placeId:m.place_id||"",latitude:m.latitude||null,longitude:m.longitude||null,isActive:!0,user_id:m.user_id||""}}return{id:d.id,name:d.full_name,email:d.email||"",sector:d.sector||"",vehicle:d.vehicle_type||"",startAddress:d.start_address,startTime:d.start_time||"",placeId:d.place_id||"",latitude:d.latitude||null,longitude:d.longitude||null,isActive:!0,user_id:d.user_id||""}}catch(d){throw console.error("Erreur lors de la mise à jour du compte chauffeur:",d),d}},Die=async t=>{try{const{data:e,error:r}=await Y.from("drivers").select("user_id").eq("id",t).single();if(r)throw r;if(!e?.user_id)throw new Error("Impossible de récupérer l'utilisateur associé au chauffeur");const{error:n}=await Y.from("drivers").delete().eq("id",t);if(n)throw n;try{await PB(e.user_id)||console.warn("Échec de la suppression de l'utilisateur Auth:",e.user_id)}catch(s){console.error("Erreur lors de la suppression de l'utilisateur Auth:",s)}return{success:!0}}catch(e){throw console.error("Erreur lors de la suppression du compte chauffeur:",e),e}},Iie=async()=>{try{const{data:t,error:e}=await Y.from("drivers").select("*");if(e)throw e;return t.map(r=>({id:r.id,name:r.full_name,email:r.email||"",sector:r.sector||"",vehicle:r.vehicle_type||"",startAddress:r.start_address,startTime:r.start_time||"",placeId:r.place_id||"",latitude:r.latitude||null,longitude:r.longitude||null,isActive:!0,user_id:r.user_id||""}))}catch(t){throw console.error("Erreur lors de la récupération des chauffeurs:",t),t}},AB=as(t=>({drivers:[],isLoading:!1,error:null,fetchDrivers:async()=>{t({isLoading:!0,error:null});try{const e=await Iie();t({drivers:e.map(r=>({...r,user_id:r.user_id||"",latitude:r.latitude||void 0,longitude:r.longitude||void 0,isActive:!0})),isLoading:!1})}catch(e){console.error("Erreur lors du chargement des chauffeurs:",e),t({error:"Erreur lors du chargement des chauffeurs",isLoading:!1})}},addDriver:async e=>{t({isLoading:!0,error:null});try{const r=await Mie({name:e.name,email:e.email,password:e.password,sector:e.sector,vehicle:e.vehicle,startAddress:e.startAddress,startTime:e.startTime,placeId:e.placeId,latitude:e.latitude,longitude:e.longitude});t(n=>({drivers:[...n.drivers,{...r,user_id:r.user_id||"",isActive:!0}],isLoading:!1}))}catch(r){console.error("Erreur lors de l'ajout du chauffeur:",r),t({error:"Erreur lors de l'ajout du chauffeur",isLoading:!1})}},updateDriver:async(e,r)=>{t({isLoading:!0,error:null});try{const n=await Rie({id:e,name:r.name,sector:r.sector,vehicle:r.vehicle,startAddress:r.startAddress,startTime:r.startTime,placeId:r.placeId,latitude:r.latitude,longitude:r.longitude});t(s=>({drivers:s.drivers.map(i=>i.id===e?{...n,user_id:n.user_id||i.user_id||"",isActive:i.isActive}:i),isLoading:!1}))}catch(n){console.error("Erreur lors de la mise à jour du chauffeur:",n),t({error:"Erreur lors de la mise à jour du chauffeur",isLoading:!1})}},deleteDriver:async e=>{t({isLoading:!0,error:null});try{await Die(e),t(r=>({drivers:r.drivers.filter(n=>n.id!==e),isLoading:!1}))}catch(r){console.error("Erreur lors de la suppression du chauffeur:",r),t({error:"Erreur lors de la suppression du chauffeur",isLoading:!1})}}}));async function TB(t,e,r){try{return r&&r.lat&&r.lng?r:(e&&console.log(`Utilisation du placeId ${e} pour obtenir des coordonnées`),t&&console.log(`Utilisation de l'adresse "${t}" pour obtenir des coordonnées`),{lat:43.2965+(Math.random()*.1-.05),lng:5.3698+(Math.random()*.1-.05)})}catch(n){return console.error("Erreur lors de la récupération des coordonnées GPS:",n),null}}const $ie=async t=>{try{const{data:e,error:r}=await Y.auth.signUp({email:t.email,password:t.password,options:{data:{type:"laboratory",name:t.name}}});if(r)throw r;if(!e.user)throw new Error("Erreur lors de la création de l'utilisateur");const n=await TB(t.address,t.placeId,t.latitude&&t.longitude?{lat:t.latitude,lng:t.longitude}:void 0),{data:s,error:i}=await Y.from("locations").insert({place_id:t.placeId||"",formatted_address:t.address,latitude:n?.lat||0,longitude:n?.lng||0,delivery_instructions:t.instructions||"",type:"laboratory"}).select().single();if(i)throw i;const{data:a,error:l}=await Y.from("laboratories").insert({user_id:e.user.id,name:t.name,location_id:s.id,email:t.email}).select().single();if(l)throw l;if(t.photos&&t.photos.length>0){const c=t.photos.map(f=>({location_id:s.id,photo_url:f.url,description:f.description||""})),{error:d}=await Y.from("location_photos").insert(c);d&&console.error("Erreur lors de l'ajout des photos:",d)}return LB(a.id)}catch(e){throw console.error("Erreur lors de la création du compte laboratoire:",e),e}},Fie=async(t,e)=>{try{const{data:r,error:n}=await Y.from("laboratories").select("*, locations(*)").eq("id",t).single();if(n)throw n;if(e.address||e.placeId||e.instructions!==void 0||e.latitude||e.longitude){const s={};if(e.address&&(s.formatted_address=e.address),e.placeId&&(s.place_id=e.placeId),e.instructions!==void 0&&(s.delivery_instructions=e.instructions),e.latitude!==void 0&&(s.latitude=e.latitude),e.longitude!==void 0)s.longitude=e.longitude;else if(e.address||e.placeId){const a=await TB(e.address||r.locations.formatted_address,e.placeId||r.locations.place_id);a&&(s.latitude=a.lat,s.longitude=a.lng)}s.type="laboratory";const{error:i}=await Y.from("locations").update(s).eq("id",r.location_id);if(i)throw i}if(e.name){const{error:s}=await Y.from("laboratories").update({name:e.name}).eq("id",t);if(s)throw s}if(e.password&&r.user_id)try{await OB(r.user_id,e.password)?console.log("Mot de passe mis à jour avec succès via fonction Edge"):console.warn("Échec de la mise à jour du mot de passe via fonction Edge")}catch(s){console.warn("Erreur lors de la mise à jour du mot de passe:",s)}if(e.photos){const{data:s,error:i}=await Y.from("location_photos").select("*").eq("location_id",r.location_id);if(i)throw i;if(s&&s.length>0){const{error:a}=await Y.from("location_photos").delete().eq("location_id",r.location_id);if(a)throw a}if(e.photos.length>0){const a=e.photos.map(c=>({location_id:r.location_id,photo_url:c.url,description:c.description||""})),{error:l}=await Y.from("location_photos").insert(a);if(l)throw l}}return LB(t)}catch(r){throw console.error("Erreur lors de la mise à jour du compte laboratoire:",r),r}},LB=async t=>{try{const{data:e,error:r}=await Y.from("laboratories").select(`
        *,
        locations (
          *,
          location_photos (*)
        )
      `).eq("id",t).single();if(r)throw r;return{id:e.id,name:e.name,email:e.email||"",address:e.locations.formatted_address,placeId:e.locations.place_id,instructions:e.locations.delivery_instructions,photos:e.locations.location_photos.map(n=>({id:n.id,url:n.photo_url,description:n.description})),user_id:e.user_id||"",depot_is_lab:e.depot_is_lab||!1,shared_pickup:e.shared_pickup||!1}}catch(e){throw console.error(`Erreur lors de la récupération du laboratoire avec détails ID ${t}:`,e),e}},MB=async()=>{try{const{data:t,error:e}=await Y.from("laboratories").select(`
        *,
        locations (
          *,
          location_photos (*)
        )
      `).order("name");if(e)throw e;return t.map(r=>({id:r.id,name:r.name,email:r.email||"",address:r.locations.formatted_address,placeId:r.locations.place_id,instructions:r.locations.delivery_instructions,photos:r.locations.location_photos.map(n=>({id:n.id,url:n.photo_url,description:n.description})),user_id:r.user_id||"",depot_is_lab:r.depot_is_lab||!1,shared_pickup:r.shared_pickup||!1}))}catch(t){throw console.error("Erreur lors de la récupération des laboratoires avec détails:",t),t}},Bie=async(t,e)=>{try{const r={shared_pickup:e};e&&(r.depot_is_lab=!1);const{data:n,error:s}=await Y.from("laboratories").update(r).eq("id",t).select().single();if(s)throw s;return console.log(`✅ Laboratoire ${t} - shared_pickup mis à jour: ${e}`),n}catch(r){throw console.error("Erreur lors de la mise à jour du shared_pickup:",r),r}},RB=async(t,e)=>{try{const r={depot_is_lab:e};e&&(r.shared_pickup=!1);const{data:n,error:s}=await Y.from("laboratories").update(r).eq("id",t).select().single();if(s)throw s;const{error:i}=await Y.from("laboratory_clients").update({depot_is_lab:e}).eq("laboratory_id",t);if(i)throw console.error("Erreur lors de la mise à jour des clients:",i),i;const{count:a}=await Y.from("laboratory_clients").select("*",{count:"exact",head:!0}).eq("laboratory_id",t);return console.log(`✅ Laboratoire ${t} - depot_is_lab mis à jour: ${e}`),console.log(`✅ ${a||0} clients mis à jour avec depot_is_lab: ${e}`),n}catch(r){throw console.error("Erreur lors de la mise à jour du depot_is_lab:",r),r}},zie=async t=>{try{const{data:e,error:r}=await Y.from("laboratories").select("user_id, location_id").eq("id",t).single();if(r)throw r;if(!e)throw new Error(`Laboratoire avec l'ID ${t} non trouvé`);const{data:n,error:s}=await Y.from("location_photos").select("photo_url").eq("location_id",e.location_id);if(s)console.error("Erreur lors de la récupération des photos:",s);else if(n&&n.length>0){const{deleteImage:c}=await Ci(async()=>{const{deleteImage:d}=await Promise.resolve().then(()=>qie);return{deleteImage:d}},void 0);for(const d of n)try{await c(d.photo_url)}catch(f){console.error(`Erreur lors de la suppression de l'image ${d.photo_url}:`,f)}}const{error:i}=await Y.from("location_photos").delete().eq("location_id",e.location_id);i&&console.error("Erreur lors de la suppression des photos:",i);const{error:a}=await Y.from("laboratories").delete().eq("id",t);if(a)throw a;const{error:l}=await Y.from("locations").delete().eq("id",e.location_id);if(l)throw l;if(e.user_id)try{await PB(e.user_id)?console.log(`Utilisateur Auth supprimé avec succès via Edge Function. ID: ${e.user_id}`):console.warn(`La suppression de l'utilisateur Auth via Edge Function a échoué. ID: ${e.user_id}`)}catch(c){console.error("Erreur lors de l'appel à la fonction Edge pour supprimer l'utilisateur:",c)}return!0}catch(e){throw console.error(`Erreur lors de la suppression du compte laboratoire ID ${t}:`,e),e}},DB=as(t=>({laboratories:[],isLoading:!1,error:null,fetchLaboratories:async()=>{t({isLoading:!0,error:null});try{const e=await MB();t({laboratories:e.map(r=>({...r,user_id:r.user_id||"",isActive:!0})),isLoading:!1})}catch(e){console.error("Erreur lors de la récupération des laboratoires:",e),t({error:"Erreur de chargement des laboratoires",isLoading:!1})}},addLaboratory:async e=>{t({isLoading:!0,error:null});try{const r=await $ie({name:e.name,email:e.email,password:e.password,address:e.address,placeId:e.placeId,instructions:e.instructions,photos:e.photos,latitude:e.latitude,longitude:e.longitude});t(n=>({laboratories:[...n.laboratories,{...r,address:r.address,user_id:r.user_id||"",isActive:!0}],isLoading:!1}))}catch(r){console.error("Erreur lors de l'ajout du laboratoire:",r),t({error:"Erreur lors de l'ajout du laboratoire",isLoading:!1})}},updateLaboratory:async(e,r)=>{t({isLoading:!0,error:null});try{const n=await Fie(e,{name:r.name,address:r.address,placeId:r.placeId,instructions:r.instructions,photos:r.photos,latitude:r.latitude,longitude:r.longitude});t(s=>({laboratories:s.laboratories.map(i=>i.id===e?{...n,user_id:n.user_id||i.user_id||"",isActive:i.isActive}:i),isLoading:!1}))}catch(n){console.error("Erreur lors de la mise à jour du laboratoire:",n),t({error:"Erreur lors de la mise à jour du laboratoire",isLoading:!1})}},deleteLaboratory:async e=>{t({isLoading:!0,error:null});try{await zie(e),t(r=>({laboratories:r.laboratories.filter(n=>n.id!==e),isLoading:!1}))}catch(r){console.error("Erreur lors de la suppression du laboratoire:",r),t({error:"Erreur lors de la suppression du laboratoire",isLoading:!1})}}})),zE=async t=>{try{const e=t.name.split(".").pop()||"jpg",r=Math.random().toString(36).substring(2,15),n=Date.now(),s=`${r}_${n}.${e}`;console.log(`Tentative d'upload du fichier ${s} vers le bucket locations`);const{error:i}=await Y.storage.from("locations").upload(s,t,{cacheControl:"3600",upsert:!0});if(i)throw console.error("Erreur détaillée lors de l'upload:",JSON.stringify(i)),i;console.log("Upload réussi, récupération de l'URL publique");const{data:a}=Y.storage.from("locations").getPublicUrl(s);if(!a||!a.publicUrl)throw new Error("Impossible de récupérer l'URL publique");return console.log(`URL publique générée: ${a.publicUrl}`),a.publicUrl}catch(e){console.error("Erreur lors de l'upload de l'image:",e);const r=500+Math.floor(Math.random()*500),n=300+Math.floor(Math.random()*300),i=`https://picsum.photos/id/${Math.floor(Math.random()*1e3)}/${r}/${n}`;return console.warn(`Utilisation d'une image placeholder à la place: ${i}`),i}},Uie=async t=>{try{if(t.includes("picsum.photos")){console.log("URL de placeholder détectée, aucune suppression nécessaire");return}const e=t.split("/"),r=e[e.length-1];if(!r)throw new Error("URL invalide, impossible d'extraire le nom du fichier");console.log(`Tentative de suppression du fichier: ${r}`);const{error:n}=await Y.storage.from("locations").remove([r]);if(n)throw console.error("Erreur lors de la suppression:",n),n;console.log(`Fichier ${r} supprimé avec succès`)}catch(e){console.error("Erreur lors de la suppression de l'image:",e)}},qie=Object.freeze(Object.defineProperty({__proto__:null,deleteImage:Uie,uploadImage:zE},Symbol.toStringTag,{value:"Module"})),Vie=()=>{const{laboratories:t,isLoading:e,error:r,fetchLaboratories:n,addLaboratory:s,updateLaboratory:i,deleteLaboratory:a}=DB(),{drivers:l,isLoading:c,error:d,fetchDrivers:f,addDriver:p,updateDriver:m,deleteDriver:g}=AB(),[y,b]=w.useState("laboratories"),[x,j]=w.useState(!1),[S,C]=w.useState(!1),[E,N]=w.useState(""),[P,O]=w.useState(null),[L,A]=w.useState(null),[R,M]=w.useState(""),[D,B]=w.useState(!1),F=w.useRef(null),[V,J]=w.useState(null),[G,q]=w.useState(null),[U,W]=w.useState(null),[I,H]=w.useState(null),[ne,ge]=w.useState(!1),[K,de]=w.useState({name:"",email:"",address:"",placeId:"",instructions:"",photos:[],password:"",latitude:void 0,longitude:void 0}),[ue,he]=w.useState({name:"",email:"",sector:"",placeId:"",vehicle:"",startAddress:"",startTime:"",password:"",user_id:"",latitude:void 0,longitude:void 0}),[ce,te]=w.useState(!1),[pe,ae]=w.useState(null),[Oe,Ee]=w.useState(""),[ke,We]=w.useState(""),[St,fr]=w.useState(!1),ir=async Z=>{Z.preventDefault();try{V?i(V.id,{name:K.name,address:K.address,placeId:K.placeId,instructions:K.instructions,photos:K.photos,latitude:K.latitude,longitude:K.longitude}):s({name:K.name,email:K.email,password:K.password,address:K.address,placeId:K.placeId,instructions:K.instructions,photos:K.photos,latitude:K.latitude,longitude:K.longitude}),j(!1),J(null),de({name:"",email:"",address:"",placeId:"",instructions:"",photos:[],password:"",latitude:void 0,longitude:void 0})}catch(ye){console.error("Error saving laboratory:",ye),alert("Une erreur est survenue lors de l'enregistrement du laboratoire")}},Bt=async Z=>{Z.preventDefault();try{G?m(G.id,{name:ue.name,sector:ue.sector,vehicle:ue.vehicle,startAddress:ue.startAddress,startTime:ue.startTime,placeId:ue.placeId,latitude:ue.latitude,longitude:ue.longitude}):p({name:ue.name,email:ue.email,password:ue.password,sector:ue.sector,vehicle:ue.vehicle,startAddress:ue.startAddress,startTime:ue.startTime,placeId:ue.placeId,latitude:ue.latitude,longitude:ue.longitude,user_id:""}),C(!1),q(null),he({name:"",email:"",sector:"",placeId:"",vehicle:"",startAddress:"",startTime:"",password:"",user_id:"",latitude:void 0,longitude:void 0})}catch(ye){console.error("Error saving driver:",ye),alert("Une erreur est survenue lors de l'enregistrement du livreur")}},Tt=async Z=>{if(Z.preventDefault(),!(!pe||!Oe||Oe!==ke)){fr(!0);try{await OB(pe.user_id,Oe)?(Ur.success("Mot de passe mis à jour avec succès"),te(!1),Ee(""),We(""),ae(null)):Ur.error("Échec de la mise à jour du mot de passe")}catch(ye){console.error("Erreur lors de la mise à jour du mot de passe:",ye),Ur.error("Erreur lors de la mise à jour du mot de passe")}finally{fr(!1)}}},Q=t.filter(Z=>Z.name.toLowerCase().includes(E.toLowerCase())||Z.email.toLowerCase().includes(E.toLowerCase())),ie=l.filter(Z=>Z.name.toLowerCase().includes(E.toLowerCase())||Z.email.toLowerCase().includes(E.toLowerCase()));return w.useEffect(()=>{f(),n()},[f,n]),w.useEffect(()=>{c&&console.log("Chargement des chauffeurs...")},[c]),w.useEffect(()=>{e&&console.log("Chargement des laboratoires...")},[e]),w.useEffect(()=>{d&&(console.error("Erreur de chargement des chauffeurs:",d),alert(`Erreur lors du chargement des chauffeurs: ${d}`))},[d]),w.useEffect(()=>{r&&(console.error("Erreur de chargement des laboratoires:",r),alert(`Erreur lors du chargement des laboratoires: ${r}`))},[r]),o.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des comptes"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Gérez les comptes des laboratoires et des livreurs"})]}),y==="laboratories"?o.jsxs(ve,{onClick:()=>{de({name:"",email:"",address:"",placeId:"",instructions:"",photos:[],password:"",latitude:void 0,longitude:void 0}),j(!0)},className:"flex items-center gap-2",children:[o.jsx(ho,{className:"h-4 w-4"}),"Nouveau laboratoire"]}):o.jsxs(ve,{onClick:()=>{he({name:"",email:"",sector:"",placeId:"",vehicle:"",startAddress:"",startTime:"",password:"",user_id:"",latitude:void 0,longitude:void 0}),q(null),C(!0)},className:"flex items-center gap-2",children:[o.jsx(ho,{className:"h-4 w-4"}),"Nouveau livreur"]}),o.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg",children:[o.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y==="laboratories"?"bg-white text-primary-600 shadow":"text-gray-600 hover:text-gray-900"}`,onClick:()=>b("laboratories"),children:"Laboratoires"}),o.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y==="drivers"?"bg-white text-primary-600 shadow":"text-gray-600 hover:text-gray-900"}`,onClick:()=>b("drivers"),children:"Livreurs"})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(Qe,{type:"text",placeholder:`Rechercher un ${y==="laboratories"?"laboratoire":"livreur"}...`,value:E,onChange:Z=>N(Z.target.value),className:"pl-10"}),o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]})})]}),y==="laboratories"&&o.jsx(_e,{children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Nom"}),o.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Email"}),o.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Adresse"}),o.jsx("th",{className:"text-right p-4 font-medium text-gray-500",children:"Actions"})]})}),o.jsx("tbody",{children:Q.map(Z=>o.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Dt,{className:"h-5 w-5 text-primary-500"}),o.jsx("span",{className:"font-medium",children:Z.name}),Z.photos&&Z.photos.length>0&&o.jsx(ve,{variant:"ghost",size:"sm",className:"ml-2",onClick:ye=>{ye.stopPropagation(),O(Z.id)},children:o.jsx(Qn,{className:"h-4 w-4"})})]})}),o.jsx("td",{className:"p-4 text-gray-600",children:Z.email}),o.jsx("td",{className:"p-4 text-gray-600",children:Z.address}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsxs(ve,{variant:"outline",size:"sm",className:"h-8 px-3",onClick:()=>{de({name:Z.name,email:Z.email,address:Z.address,placeId:Z.placeId||"",instructions:Z.instructions||"",photos:Z.photos||[],password:"",latitude:Z.latitude,longitude:Z.longitude}),J(Z),j(!0)},children:[o.jsx(ig,{className:"h-4 w-4 mr-2"}),"Modifier"]}),o.jsxs(ve,{variant:"outline",size:"sm",className:"h-8 px-3 text-error-600 hover:text-error-700",onClick:()=>{H(Z.id),W("laboratory")},children:[o.jsx(Oc,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})})]},Z.id))})]})})}),y==="drivers"&&o.jsx(_e,{children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Nom"}),o.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Email"}),o.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Secteur"}),o.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Véhicule"}),o.jsx("th",{className:"text-left p-4 font-medium text-gray-500",children:"Départ"}),o.jsx("th",{className:"text-right p-4 font-medium text-gray-500",children:"Actions"})]})}),o.jsx("tbody",{children:ie.map(Z=>o.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(gt,{className:"h-5 w-5 text-accent-500"}),o.jsx("span",{className:"font-medium",children:Z.name})]})}),o.jsx("td",{className:"p-4 text-gray-600",children:Z.email}),o.jsx("td",{className:"p-4 text-gray-600",children:Z.sector}),o.jsx("td",{className:"p-4 text-gray-600",children:Z.vehicle}),o.jsx("td",{className:"p-4 text-gray-600",children:Z.startTime}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsxs(ve,{variant:"outline",size:"sm",className:"h-8 px-3",onClick:()=>{he({name:Z.name,email:Z.email,sector:Z.sector,vehicle:Z.vehicle,startAddress:Z.startAddress,startTime:Z.startTime,placeId:Z.placeId,password:"",user_id:Z.user_id,latitude:Z.latitude,longitude:Z.longitude}),q(Z),C(!0)},children:[o.jsx(ig,{className:"h-4 w-4 mr-2"}),"Modifier"]}),o.jsxs(ve,{variant:"outline",size:"sm",className:"h-8 px-3 text-error-600 hover:text-error-700",onClick:()=>{H(Z.id),W("driver")},children:[o.jsx(Oc,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})})]},Z.id))})]})})}),U&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Confirmation de suppression"}),o.jsx("p",{className:"mb-6 text-gray-600",children:"Cette action est irréversible. Êtes-vous sûr de vouloir supprimer cet élément ? Toutes les données associées seront définitivement effacées."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(ve,{variant:"outline",onClick:()=>{W(null),H(null)},disabled:ne,children:"Annuler"}),o.jsx(ve,{variant:"primary",className:"bg-error-600 hover:bg-error-700 text-white",disabled:ne,onClick:async()=>{if(I){ge(!0);try{U==="laboratory"?(console.log("Suppression du laboratoire avec ID:",I),await a(I),await n(),console.log("Laboratoire supprimé avec succès")):U==="driver"&&(await g(I),await f()),W(null),H(null)}catch(Z){console.error("Erreur lors de la suppression:",Z),alert(`Erreur lors de la suppression: ${Z instanceof Error?Z.message:"Erreur inconnue"}`)}finally{ge(!1)}}},children:ne?"Suppression...":"Supprimer définitivement"})]})]})}),o.jsx(Rt,{children:x&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 overflow-y-auto",onClick:()=>j(!1),children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-lg my-8",onClick:Z=>Z.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dt,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-semibold",children:V?"Modifier le laboratoire":"Nouveau laboratoire"})]})}),o.jsxs("form",{onSubmit:ir,className:"p-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du laboratoire"}),o.jsx(Qe,{value:K.name,onChange:Z=>de({...K,name:Z.target.value}),leftIcon:o.jsx(Dt,{className:"h-4 w-4"}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx(Qe,{type:"email",value:K.email,onChange:Z=>de({...K,email:Z.target.value}),leftIcon:o.jsx(df,{className:"h-4 w-4"}),required:!0,disabled:!!V}),V&&o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"L'email ne peut pas être modifié"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),o.jsx(Mc,{value:K.address,onChange:(Z,ye)=>de({...K,address:Z,placeId:ye?.placeId||"",latitude:ye?.latLng?.lat,longitude:ye?.latLng?.lng}),placeholder:"Entrez l'adresse du laboratoire"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions de livraison"}),o.jsx(Qe,{value:K.instructions,onChange:Z=>de({...K,instructions:Z.target.value}),leftIcon:o.jsx(yl,{className:"h-4 w-4"}),placeholder:"ex: Sonner à l'interphone"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-sm font-medium",children:"Photos du lieu"}),K.photos.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-xs text-gray-500",children:"Photos ajoutées"}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:K.photos.map((Z,ye)=>o.jsxs("div",{className:"relative rounded-md overflow-hidden bg-gray-100 border border-gray-200",children:[o.jsx("div",{className:"h-32",children:o.jsx("img",{src:Z.url,alt:`Photo ${ye+1}`,className:"w-full h-full object-cover"})}),o.jsx("div",{className:"p-2 bg-white",children:o.jsx("p",{className:"text-xs text-gray-700 line-clamp-2",children:Z.description||"Aucune description"})}),o.jsx("button",{type:"button",className:"absolute top-2 right-2 p-1.5 bg-white/80 hover:bg-white rounded-full text-error-600 shadow-sm",onClick:()=>{de({...K,photos:K.photos.filter((Pe,xe)=>xe!==ye)})},children:o.jsx(Oc,{className:"h-4 w-4"})})]},ye))})]}),o.jsxs("div",{className:"mt-4 border border-dashed border-gray-300 rounded-md p-4",children:[o.jsx("h4",{className:"text-xs text-gray-500 mb-3",children:"Ajouter une nouvelle photo"}),L?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"h-40 rounded-md overflow-hidden bg-gray-100",children:o.jsx("img",{src:URL.createObjectURL(L),alt:"Aperçu de la photo",className:"w-full h-full object-cover"})}),o.jsx(Qe,{value:R,onChange:Z=>M(Z.target.value),placeholder:"Description de la photo",leftIcon:o.jsx(yl,{className:"h-4 w-4"})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ve,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{A(null),M("")},children:"Annuler"}),o.jsx(ve,{type:"button",className:"flex-1",disabled:D,onClick:async()=>{try{if(L){B(!0);const Z=await zE(L);de({...K,photos:[...K.photos,{url:Z,description:R}]}),A(null),M("")}}catch(Z){console.error("Erreur lors de l'upload de l'image:",Z),alert("Erreur lors de l'upload de l'image")}finally{B(!1)}},children:D?"Téléchargement...":"Ajouter cette photo"})]})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{ref:F,type:"file",accept:"image/*",className:"hidden",onChange:Z=>{const ye=Z.target.files?.[0];ye&&A(ye)}}),o.jsxs(ve,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 h-32 border-dashed",onClick:()=>F.current?.click(),children:[o.jsx(OE,{className:"h-5 w-5"}),o.jsx("span",{children:"Sélectionner une photo"})]})]})]}),K.photos.length>0&&o.jsxs("div",{className:"text-xs text-gray-500 italic",children:[K.photos.length," photo",K.photos.length>1?"s":""," ajoutée",K.photos.length>1?"s":""]})]}),o.jsx("div",{children:V?o.jsxs(ve,{type:"button",variant:"outline",className:"w-full",onClick:()=>{ae({id:V.id,user_id:V.user_id,name:V.name}),te(!0)},children:[o.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Modifier le mot de passe"]}):o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),o.jsx(Qe,{type:"password",value:K.password,onChange:Z=>de({...K,password:Z.target.value}),leftIcon:o.jsx(Wa,{className:"h-4 w-4"}),required:!0})]})})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx(ve,{type:"button",variant:"outline",className:"flex-1",onClick:()=>j(!1),children:"Annuler"}),o.jsx(ve,{type:"submit",className:"flex-1",disabled:!K.name||!K.email||!K.address||!V&&!K.password,children:V?"Enregistrer":"Créer"})]})]})]})})}),o.jsx(Rt,{children:S&&!G&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 overflow-y-auto",onClick:()=>C(!1),children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-lg my-8",onClick:Z=>Z.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(gt,{className:"h-5 w-5 text-accent-500"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Nouveau livreur"})]})}),o.jsxs("form",{onSubmit:Bt,className:"p-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),o.jsx(Qe,{value:ue.name,onChange:Z=>he({...ue,name:Z.target.value}),leftIcon:o.jsx(Kr,{className:"h-4 w-4"}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx(Qe,{type:"email",value:ue.email,onChange:Z=>he({...ue,email:Z.target.value}),leftIcon:o.jsx(df,{className:"h-4 w-4"}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secteur"}),o.jsx(Qe,{value:ue.sector,onChange:Z=>he({...ue,sector:Z.target.value}),leftIcon:o.jsx(it,{className:"h-4 w-4"}),placeholder:"ex: Marseille et périphérie"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),o.jsx(Qe,{value:ue.vehicle,onChange:Z=>he({...ue,vehicle:Z.target.value}),leftIcon:o.jsx(Q2,{className:"h-4 w-4"}),placeholder:"ex: Renault Clio 4"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse de départ"}),o.jsx(Mc,{value:ue.startAddress,onChange:(Z,ye)=>he({...ue,startAddress:Z,placeId:ye?.placeId||"",latitude:ye?.latLng?.lat,longitude:ye?.latLng?.lng}),placeholder:"Entrez l'adresse de départ"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure de départ"}),o.jsx(Qe,{type:"time",value:ue.startTime,onChange:Z=>he({...ue,startTime:Z.target.value}),leftIcon:o.jsx(bt,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),o.jsx(Qe,{type:"password",value:ue.password,onChange:Z=>he({...ue,password:Z.target.value}),leftIcon:o.jsx(Wa,{className:"h-4 w-4"}),required:!0})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx(ve,{type:"button",variant:"outline",className:"flex-1",onClick:()=>C(!1),children:"Annuler"}),o.jsx(ve,{type:"submit",className:"flex-1",disabled:!ue.name||!ue.email||!ue.password,children:"Créer"})]})]})]})})}),o.jsx(Rt,{children:S&&G&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 overflow-y-auto",onClick:()=>C(!1),children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-lg my-8",onClick:Z=>Z.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(gt,{className:"h-5 w-5 text-accent-500"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Modifier le livreur"})]})}),o.jsxs("form",{onSubmit:Bt,className:"p-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),o.jsx(Qe,{value:ue.name,onChange:Z=>he({...ue,name:Z.target.value}),leftIcon:o.jsx(Kr,{className:"h-4 w-4"}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx(Qe,{type:"email",value:ue.email,onChange:Z=>he({...ue,email:Z.target.value}),leftIcon:o.jsx(df,{className:"h-4 w-4"}),required:!0,disabled:!0}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"L'email ne peut pas être modifié"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secteur"}),o.jsx(Qe,{value:ue.sector,onChange:Z=>he({...ue,sector:Z.target.value}),leftIcon:o.jsx(it,{className:"h-4 w-4"}),placeholder:"ex: Marseille et périphérie"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Véhicule"}),o.jsx(Qe,{value:ue.vehicle,onChange:Z=>he({...ue,vehicle:Z.target.value}),leftIcon:o.jsx(Q2,{className:"h-4 w-4"}),placeholder:"ex: Renault Clio 4"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse de départ"}),o.jsx(Mc,{value:ue.startAddress,onChange:(Z,ye)=>he({...ue,startAddress:Z,placeId:ye?.placeId||"",latitude:ye?.latLng?.lat,longitude:ye?.latLng?.lng}),placeholder:"Entrez l'adresse de départ"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure de départ"}),o.jsx(Qe,{type:"time",value:ue.startTime,onChange:Z=>he({...ue,startTime:Z.target.value}),leftIcon:o.jsx(bt,{className:"h-4 w-4"})})]}),o.jsx("div",{children:o.jsxs(ve,{type:"button",variant:"outline",className:"w-full",onClick:()=>{ae({id:G.id,user_id:G.user_id,name:G.name}),te(!0)},children:[o.jsx(Wa,{className:"h-4 w-4 mr-2"}),"Modifier le mot de passe"]})})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx(ve,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{C(!1),q(null)},children:"Annuler"}),o.jsx(ve,{type:"submit",className:"flex-1",children:"Enregistrer"})]})]})]})})}),o.jsx(Rt,{children:P&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>O(null),children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-2xl",onClick:Z=>Z.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Photos du lieu"})]}),o.jsx("button",{onClick:()=>O(null),className:"p-2 hover:bg-gray-100 rounded-full text-error-600 opacity-0 group-hover:opacity-100 transition-opacity shadow-sm",children:o.jsx(tr,{className:"h-5 w-5"})})]})}),o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.find(Z=>Z.id===P)?.photos?.map((Z,ye)=>o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden",children:o.jsx("img",{src:Z.url,alt:Z.description,className:"w-full h-full object-cover"})}),o.jsx("p",{className:"text-sm text-gray-600",children:Z.description})]},ye))})})]})})}),o.jsx(Rt,{children:ce&&pe&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>te(!1),children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-md",onClick:Z=>Z.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wa,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Modifier le mot de passe"})]}),o.jsx("button",{type:"button",onClick:()=>te(!1),className:"text-gray-400 hover:text-gray-600",children:o.jsx(tr,{className:"h-5 w-5"})})]})}),o.jsxs("form",{onSubmit:Tt,className:"p-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-600",children:["Modification du mot de passe pour ",o.jsx("span",{className:"font-medium",children:pe.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe"}),o.jsx(Qe,{type:"password",value:Oe,onChange:Z=>Ee(Z.target.value),leftIcon:o.jsx(Wa,{className:"h-4 w-4"}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le mot de passe"}),o.jsx(Qe,{type:"password",value:ke,onChange:Z=>We(Z.target.value),leftIcon:o.jsx(Wa,{className:"h-4 w-4"}),required:!0}),Oe&&ke&&Oe!==ke&&o.jsx("p",{className:"mt-1 text-xs text-error-600",children:"Les mots de passe ne correspondent pas"})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx(ve,{type:"button",variant:"outline",className:"flex-1",onClick:()=>te(!1),children:"Annuler"}),o.jsx(ve,{type:"submit",className:"flex-1",disabled:!Oe||Oe!==ke||St,children:St?"Mise à jour...":"Mettre à jour"})]})]})]})})})]})};var ob,qL;function Dn(){if(qL)return ob;qL=1;var t=Array.isArray;return ob=t,ob}var lb,VL;function IB(){if(VL)return lb;VL=1;var t=typeof cm=="object"&&cm&&cm.Object===Object&&cm;return lb=t,lb}var cb,WL;function Li(){if(WL)return cb;WL=1;var t=IB(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return cb=r,cb}var ub,HL;function Gh(){if(HL)return ub;HL=1;var t=Li(),e=t.Symbol;return ub=e,ub}var db,GL;function Wie(){if(GL)return db;GL=1;var t=Gh(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,s=t?t.toStringTag:void 0;function i(a){var l=r.call(a,s),c=a[s];try{a[s]=void 0;var d=!0}catch{}var f=n.call(a);return d&&(l?a[s]=c:delete a[s]),f}return db=i,db}var fb,KL;function Hie(){if(KL)return fb;KL=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return fb=r,fb}var hb,ZL;function ma(){if(ZL)return hb;ZL=1;var t=Gh(),e=Wie(),r=Hie(),n="[object Null]",s="[object Undefined]",i=t?t.toStringTag:void 0;function a(l){return l==null?l===void 0?s:n:i&&i in Object(l)?e(l):r(l)}return hb=a,hb}var pb,XL;function ga(){if(XL)return pb;XL=1;function t(e){return e!=null&&typeof e=="object"}return pb=t,pb}var mb,YL;function Tu(){if(YL)return mb;YL=1;var t=ma(),e=ga(),r="[object Symbol]";function n(s){return typeof s=="symbol"||e(s)&&t(s)==r}return mb=n,mb}var gb,JL;function UE(){if(JL)return gb;JL=1;var t=Dn(),e=Tu(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,a){if(t(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||a!=null&&i in Object(a)}return gb=s,gb}var vb,QL;function Eo(){if(QL)return vb;QL=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return vb=t,vb}var yb,eM;function qE(){if(eM)return yb;eM=1;var t=ma(),e=Eo(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function a(l){if(!e(l))return!1;var c=t(l);return c==n||c==s||c==r||c==i}return yb=a,yb}var xb,tM;function Gie(){if(tM)return xb;tM=1;var t=Li(),e=t["__core-js_shared__"];return xb=e,xb}var bb,rM;function Kie(){if(rM)return bb;rM=1;var t=Gie(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return bb=r,bb}var wb,nM;function $B(){if(nM)return wb;nM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return wb=r,wb}var _b,sM;function Zie(){if(sM)return _b;sM=1;var t=qE(),e=Kie(),r=Eo(),n=$B(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,a=Function.prototype,l=Object.prototype,c=a.toString,d=l.hasOwnProperty,f=RegExp("^"+c.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!r(m)||e(m))return!1;var g=t(m)?f:i;return g.test(n(m))}return _b=p,_b}var jb,iM;function Xie(){if(iM)return jb;iM=1;function t(e,r){return e?.[r]}return jb=t,jb}var Sb,aM;function Ol(){if(aM)return Sb;aM=1;var t=Zie(),e=Xie();function r(n,s){var i=e(n,s);return t(i)?i:void 0}return Sb=r,Sb}var Nb,oM;function Xv(){if(oM)return Nb;oM=1;var t=Ol(),e=t(Object,"create");return Nb=e,Nb}var Eb,lM;function Yie(){if(lM)return Eb;lM=1;var t=Xv();function e(){this.__data__=t?t(null):{},this.size=0}return Eb=e,Eb}var Cb,cM;function Jie(){if(cM)return Cb;cM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Cb=t,Cb}var kb,uM;function Qie(){if(uM)return kb;uM=1;var t=Xv(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var a=this.__data__;if(t){var l=a[i];return l===e?void 0:l}return n.call(a,i)?a[i]:void 0}return kb=s,kb}var Pb,dM;function eae(){if(dM)return Pb;dM=1;var t=Xv(),e=Object.prototype,r=e.hasOwnProperty;function n(s){var i=this.__data__;return t?i[s]!==void 0:r.call(i,s)}return Pb=n,Pb}var Ob,fM;function tae(){if(fM)return Ob;fM=1;var t=Xv(),e="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&s===void 0?e:s,this}return Ob=r,Ob}var Ab,hM;function rae(){if(hM)return Ab;hM=1;var t=Yie(),e=Jie(),r=Qie(),n=eae(),s=tae();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var d=a[l];this.set(d[0],d[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Ab=i,Ab}var Tb,pM;function nae(){if(pM)return Tb;pM=1;function t(){this.__data__=[],this.size=0}return Tb=t,Tb}var Lb,mM;function VE(){if(mM)return Lb;mM=1;function t(e,r){return e===r||e!==e&&r!==r}return Lb=t,Lb}var Mb,gM;function Yv(){if(gM)return Mb;gM=1;var t=VE();function e(r,n){for(var s=r.length;s--;)if(t(r[s][0],n))return s;return-1}return Mb=e,Mb}var Rb,vM;function sae(){if(vM)return Rb;vM=1;var t=Yv(),e=Array.prototype,r=e.splice;function n(s){var i=this.__data__,a=t(i,s);if(a<0)return!1;var l=i.length-1;return a==l?i.pop():r.call(i,a,1),--this.size,!0}return Rb=n,Rb}var Db,yM;function iae(){if(yM)return Db;yM=1;var t=Yv();function e(r){var n=this.__data__,s=t(n,r);return s<0?void 0:n[s][1]}return Db=e,Db}var Ib,xM;function aae(){if(xM)return Ib;xM=1;var t=Yv();function e(r){return t(this.__data__,r)>-1}return Ib=e,Ib}var $b,bM;function oae(){if(bM)return $b;bM=1;var t=Yv();function e(r,n){var s=this.__data__,i=t(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return $b=e,$b}var Fb,wM;function Jv(){if(wM)return Fb;wM=1;var t=nae(),e=sae(),r=iae(),n=aae(),s=oae();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var d=a[l];this.set(d[0],d[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Fb=i,Fb}var Bb,_M;function WE(){if(_M)return Bb;_M=1;var t=Ol(),e=Li(),r=t(e,"Map");return Bb=r,Bb}var zb,jM;function lae(){if(jM)return zb;jM=1;var t=rae(),e=Jv(),r=WE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return zb=n,zb}var Ub,SM;function cae(){if(SM)return Ub;SM=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Ub=t,Ub}var qb,NM;function Qv(){if(NM)return qb;NM=1;var t=cae();function e(r,n){var s=r.__data__;return t(n)?s[typeof n=="string"?"string":"hash"]:s.map}return qb=e,qb}var Vb,EM;function uae(){if(EM)return Vb;EM=1;var t=Qv();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Vb=e,Vb}var Wb,CM;function dae(){if(CM)return Wb;CM=1;var t=Qv();function e(r){return t(this,r).get(r)}return Wb=e,Wb}var Hb,kM;function fae(){if(kM)return Hb;kM=1;var t=Qv();function e(r){return t(this,r).has(r)}return Hb=e,Hb}var Gb,PM;function hae(){if(PM)return Gb;PM=1;var t=Qv();function e(r,n){var s=t(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return Gb=e,Gb}var Kb,OM;function HE(){if(OM)return Kb;OM=1;var t=lae(),e=uae(),r=dae(),n=fae(),s=hae();function i(a){var l=-1,c=a==null?0:a.length;for(this.clear();++l<c;){var d=a[l];this.set(d[0],d[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Kb=i,Kb}var Zb,AM;function FB(){if(AM)return Zb;AM=1;var t=HE(),e="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var i=function(){var a=arguments,l=s?s.apply(this,a):a[0],c=i.cache;if(c.has(l))return c.get(l);var d=n.apply(this,a);return i.cache=c.set(l,d)||c,d};return i.cache=new(r.Cache||t),i}return r.Cache=t,Zb=r,Zb}var Xb,TM;function pae(){if(TM)return Xb;TM=1;var t=FB(),e=500;function r(n){var s=t(n,function(a){return i.size===e&&i.clear(),a}),i=s.cache;return s}return Xb=r,Xb}var Yb,LM;function mae(){if(LM)return Yb;LM=1;var t=pae(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(e,function(a,l,c,d){i.push(c?d.replace(r,"$1"):l||a)}),i});return Yb=n,Yb}var Jb,MM;function GE(){if(MM)return Jb;MM=1;function t(e,r){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=r(e[n],n,e);return i}return Jb=t,Jb}var Qb,RM;function gae(){if(RM)return Qb;RM=1;var t=Gh(),e=GE(),r=Dn(),n=Tu(),s=t?t.prototype:void 0,i=s?s.toString:void 0;function a(l){if(typeof l=="string")return l;if(r(l))return e(l,a)+"";if(n(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return Qb=a,Qb}var ew,DM;function BB(){if(DM)return ew;DM=1;var t=gae();function e(r){return r==null?"":t(r)}return ew=e,ew}var tw,IM;function zB(){if(IM)return tw;IM=1;var t=Dn(),e=UE(),r=mae(),n=BB();function s(i,a){return t(i)?i:e(i,a)?[i]:r(n(i))}return tw=s,tw}var rw,$M;function ey(){if($M)return rw;$M=1;var t=Tu();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return rw=e,rw}var nw,FM;function KE(){if(FM)return nw;FM=1;var t=zB(),e=ey();function r(n,s){s=t(s,n);for(var i=0,a=s.length;n!=null&&i<a;)n=n[e(s[i++])];return i&&i==a?n:void 0}return nw=r,nw}var sw,BM;function UB(){if(BM)return sw;BM=1;var t=KE();function e(r,n,s){var i=r==null?void 0:t(r,n);return i===void 0?s:i}return sw=e,sw}var vae=UB();const rs=Pt(vae);var iw,zM;function yae(){if(zM)return iw;zM=1;function t(e){return e==null}return iw=t,iw}var xae=yae();const Xe=Pt(xae);var aw,UM;function bae(){if(UM)return aw;UM=1;var t=ma(),e=Dn(),r=ga(),n="[object String]";function s(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return aw=s,aw}var wae=bae();const _l=Pt(wae);var _ae=qE();const Ze=Pt(_ae);var jae=Eo();const Lu=Pt(jae);var ow={exports:{}},Ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM;function Sae(){if(qM)return Ot;qM=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function b(x){if(typeof x=="object"&&x!==null){var j=x.$$typeof;switch(j){case t:switch(x=x.type,x){case r:case s:case n:case d:case f:return x;default:switch(x=x&&x.$$typeof,x){case l:case a:case c:case m:case p:case i:return x;default:return j}}case e:return j}}}return Ot.ContextConsumer=a,Ot.ContextProvider=i,Ot.Element=t,Ot.ForwardRef=c,Ot.Fragment=r,Ot.Lazy=m,Ot.Memo=p,Ot.Portal=e,Ot.Profiler=s,Ot.StrictMode=n,Ot.Suspense=d,Ot.SuspenseList=f,Ot.isAsyncMode=function(){return!1},Ot.isConcurrentMode=function(){return!1},Ot.isContextConsumer=function(x){return b(x)===a},Ot.isContextProvider=function(x){return b(x)===i},Ot.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Ot.isForwardRef=function(x){return b(x)===c},Ot.isFragment=function(x){return b(x)===r},Ot.isLazy=function(x){return b(x)===m},Ot.isMemo=function(x){return b(x)===p},Ot.isPortal=function(x){return b(x)===e},Ot.isProfiler=function(x){return b(x)===s},Ot.isStrictMode=function(x){return b(x)===n},Ot.isSuspense=function(x){return b(x)===d},Ot.isSuspenseList=function(x){return b(x)===f},Ot.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===r||x===s||x===n||x===d||x===f||x===g||typeof x=="object"&&x!==null&&(x.$$typeof===m||x.$$typeof===p||x.$$typeof===i||x.$$typeof===a||x.$$typeof===c||x.$$typeof===y||x.getModuleId!==void 0)},Ot.typeOf=b,Ot}var VM;function Nae(){return VM||(VM=1,ow.exports=Sae()),ow.exports}var Eae=Nae(),lw,WM;function qB(){if(WM)return lw;WM=1;var t=ma(),e=ga(),r="[object Number]";function n(s){return typeof s=="number"||e(s)&&t(s)==r}return lw=n,lw}var cw,HM;function Cae(){if(HM)return cw;HM=1;var t=qB();function e(r){return t(r)&&r!=+r}return cw=e,cw}var kae=Cae();const Mu=Pt(kae);var Pae=qB();const Oae=Pt(Pae);var wn=function(e){return e===0?0:e>0?1:-1},ol=function(e){return _l(e)&&e.indexOf("%")===e.length-1},Ne=function(e){return Oae(e)&&!Mu(e)},Mr=function(e){return Ne(e)||_l(e)},Aae=0,Co=function(e){var r=++Aae;return"".concat(e||"").concat(r)},_n=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(e)&&!_l(e))return n;var i;if(ol(e)){var a=e.indexOf("%");i=r*parseFloat(e.slice(0,a))/100}else i=+e;return Mu(i)&&(i=n),s&&i>r&&(i=r),i},to=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Tae=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},s=0;s<r;s++)if(!n[e[s]])n[e[s]]=!0;else return!0;return!1},cr=function(e,r){return Ne(e)&&Ne(r)?function(n){return e+n*(r-e)}:function(){return r}};function Eg(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):rs(n,e))===r})}var Lae=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,s=0,i=0,a=0,l=1/0,c=-1/0,d=0,f=0,p=0;p<r;p++)d=e[p].cx||0,f=e[p].cy||0,n+=d,s+=f,i+=d*f,a+=d*d,l=Math.min(l,d),c=Math.max(c,d);var m=r*a!==n*n?(r*i-n*s)/(r*a-n*n):0;return{xmin:l,xmax:c,a:m,b:(s-m*n)/r}},Mae=function(e,r){return Ne(e)&&Ne(r)?e-r:_l(e)&&_l(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Rc(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function oS(t){"@babel/helpers - typeof";return oS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oS(t)}var Rae=["viewBox","children"],Dae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],GM=["points","pathLength"],uw={svg:Rae,polygon:GM,polyline:GM},ZE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Cg=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(w.isValidElement(e)&&(n=e.props),!Lu(n))return null;var s={};return Object.keys(n).forEach(function(i){ZE.includes(i)&&(s[i]=r||function(a){return n[i](n,a)})}),s},Iae=function(e,r,n){return function(s){return e(r,n,s),null}},yo=function(e,r,n){if(!Lu(e)||oS(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var a=e[i];ZE.includes(i)&&typeof a=="function"&&(s||(s={}),s[i]=Iae(a,r,n))}),s},$ae=["children"],Fae=["children"];function KM(t,e){if(t==null)return{};var r=Bae(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function lS(t){"@babel/helpers - typeof";return lS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lS(t)}var ZM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},sa=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},XM=null,dw=null,XE=function t(e){if(e===XM&&Array.isArray(dw))return dw;var r=[];return w.Children.forEach(e,function(n){Xe(n)||(Eae.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),dw=r,XM=e,r};function Sn(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(s){return sa(s)}):n=[sa(e)],XE(t).forEach(function(s){var i=rs(s,"type.displayName")||rs(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function Gn(t,e){var r=Sn(t,e);return r&&r[0]}var YM=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,s=r.height;return!(!Ne(n)||n<=0||!Ne(s)||s<=0)},zae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Uae=function(e){return e&&e.type&&_l(e.type)&&zae.indexOf(e.type)>=0},VB=function(e){return e&&lS(e)==="object"&&"clipDot"in e},qae=function(e,r,n,s){var i,a=(i=uw?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Ze(e)&&(s&&a.includes(r)||Dae.includes(r))||n&&ZE.includes(r)},Ue=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(w.isValidElement(e)&&(s=e.props),!Lu(s))return null;var i={};return Object.keys(s).forEach(function(a){var l;qae((l=s)===null||l===void 0?void 0:l[a],a,r,n)&&(i[a]=s[a])}),i},cS=function t(e,r){if(e===r)return!0;var n=w.Children.count(e);if(n!==w.Children.count(r))return!1;if(n===0)return!0;if(n===1)return JM(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=e[s],a=r[s];if(Array.isArray(i)||Array.isArray(a)){if(!t(i,a))return!1}else if(!JM(i,a))return!1}return!0},JM=function(e,r){if(Xe(e)&&Xe(r))return!0;if(!Xe(e)&&!Xe(r)){var n=e.props||{},s=n.children,i=KM(n,$ae),a=r.props||{},l=a.children,c=KM(a,Fae);return s&&l?Rc(i,c)&&cS(s,l):!s&&!l?Rc(i,c):!1}return!1},QM=function(e,r){var n=[],s={};return XE(e).forEach(function(i,a){if(Uae(i))n.push(i);else if(i){var l=sa(i.type),c=r[l]||{},d=c.handler,f=c.once;if(d&&(!f||!s[l])){var p=d(i,l,a);n.push(p),s[l]=!0}}}),n},Vae=function(e){var r=e&&e.type;return r&&ZM[r]?ZM[r]:null},Wae=function(e,r){return XE(r).indexOf(e)},Hae=["children","width","height","viewBox","className","style","title","desc"];function uS(){return uS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uS.apply(this,arguments)}function Gae(t,e){if(t==null)return{};var r=Kae(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Kae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dS(t){var e=t.children,r=t.width,n=t.height,s=t.viewBox,i=t.className,a=t.style,l=t.title,c=t.desc,d=Gae(t,Hae),f=s||{width:r,height:n,x:0,y:0},p=st("recharts-surface",i);return z.createElement("svg",uS({},Ue(d,!0,"svg"),{className:p,width:r,height:n,style:a,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),z.createElement("title",null,l),z.createElement("desc",null,c),e)}var Zae=["children","className"];function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fS.apply(this,arguments)}function Xae(t,e){if(t==null)return{};var r=Yae(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var at=z.forwardRef(function(t,e){var r=t.children,n=t.className,s=Xae(t,Zae),i=st("recharts-layer",n);return z.createElement("g",fS({className:i},Ue(s,!0),{ref:e}),r)}),ri=function(e,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},fw,eR;function Jae(){if(eR)return fw;eR=1;function t(e,r,n){var s=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var a=Array(i);++s<i;)a[s]=e[s+r];return a}return fw=t,fw}var hw,tR;function Qae(){if(tR)return hw;tR=1;var t=Jae();function e(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:t(r,n,s)}return hw=e,hw}var pw,rR;function WB(){if(rR)return pw;rR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=e+r+n,i="\\ufe0e\\ufe0f",a="\\u200d",l=RegExp("["+a+t+s+i+"]");function c(d){return l.test(d)}return pw=c,pw}var mw,nR;function eoe(){if(nR)return mw;nR=1;function t(e){return e.split("")}return mw=t,mw}var gw,sR;function toe(){if(sR)return gw;sR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=e+r+n,i="\\ufe0e\\ufe0f",a="["+t+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",y=d+"?",b="["+i+"]?",x="(?:"+g+"(?:"+[f,p,m].join("|")+")"+b+y+")*",j=b+y+x,S="(?:"+[f+l+"?",l,p,m,a].join("|")+")",C=RegExp(c+"(?="+c+")|"+S+j,"g");function E(N){return N.match(C)||[]}return gw=E,gw}var vw,iR;function roe(){if(iR)return vw;iR=1;var t=eoe(),e=WB(),r=toe();function n(s){return e(s)?r(s):t(s)}return vw=n,vw}var yw,aR;function noe(){if(aR)return yw;aR=1;var t=Qae(),e=WB(),r=roe(),n=BB();function s(i){return function(a){a=n(a);var l=e(a)?r(a):void 0,c=l?l[0]:a.charAt(0),d=l?t(l,1).join(""):a.slice(1);return c[i]()+d}}return yw=s,yw}var xw,oR;function soe(){if(oR)return xw;oR=1;var t=noe(),e=t("toUpperCase");return xw=e,xw}var ioe=soe();const ty=Pt(ioe);function Wt(t){return function(){return t}}const HB=Math.cos,kg=Math.sin,oi=Math.sqrt,Pg=Math.PI,ry=2*Pg,hS=Math.PI,pS=2*hS,Qo=1e-6,aoe=pS-Qo;function GB(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function ooe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return GB;const r=10**e;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class loe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?GB:ooe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,s){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,r,n,s,i,a){this._append`C${+e},${+r},${+n},${+s},${this._x1=+i},${this._y1=+a}`}arcTo(e,r,n,s,i){if(e=+e,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,l=this._y1,c=n-e,d=s-r,f=a-e,p=l-r,m=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(m>Qo)if(!(Math.abs(p*c-d*f)>Qo)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let g=n-a,y=s-l,b=c*c+d*d,x=g*g+y*y,j=Math.sqrt(b),S=Math.sqrt(m),C=i*Math.tan((hS-Math.acos((b+m-x)/(2*j*S)))/2),E=C/S,N=C/j;Math.abs(E-1)>Qo&&this._append`L${e+E*f},${r+E*p}`,this._append`A${i},${i},0,0,${+(p*g>f*y)},${this._x1=e+N*c},${this._y1=r+N*d}`}}arc(e,r,n,s,i,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),d=e+l,f=r+c,p=1^a,m=a?s-i:i-s;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Qo||Math.abs(this._y1-f)>Qo)&&this._append`L${d},${f}`,n&&(m<0&&(m=m%pS+pS),m>aoe?this._append`A${n},${n},0,1,${p},${e-l},${r-c}A${n},${n},0,1,${p},${this._x1=d},${this._y1=f}`:m>Qo&&this._append`A${n},${n},0,${+(m>=hS)},${p},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function YE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new loe(e)}function JE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function KB(t){this._context=t}KB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ny(t){return new KB(t)}function ZB(t){return t[0]}function XB(t){return t[1]}function YB(t,e){var r=Wt(!0),n=null,s=ny,i=null,a=YE(l);t=typeof t=="function"?t:t===void 0?ZB:Wt(t),e=typeof e=="function"?e:e===void 0?XB:Wt(e);function l(c){var d,f=(c=JE(c)).length,p,m=!1,g;for(n==null&&(i=s(g=a())),d=0;d<=f;++d)!(d<f&&r(p=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+t(p,d,c),+e(p,d,c));if(g)return i=null,g+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Wt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Wt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Wt(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Nm(t,e,r){var n=null,s=Wt(!0),i=null,a=ny,l=null,c=YE(d);t=typeof t=="function"?t:t===void 0?ZB:Wt(+t),e=typeof e=="function"?e:Wt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?XB:Wt(+r);function d(p){var m,g,y,b=(p=JE(p)).length,x,j=!1,S,C=new Array(b),E=new Array(b);for(i==null&&(l=a(S=c())),m=0;m<=b;++m){if(!(m<b&&s(x=p[m],m,p))===j)if(j=!j)g=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=g;--y)l.point(C[y],E[y]);l.lineEnd(),l.areaEnd()}j&&(C[m]=+t(x,m,p),E[m]=+e(x,m,p),l.point(n?+n(x,m,p):C[m],r?+r(x,m,p):E[m]))}if(S)return l=null,S+""||null}function f(){return YB().defined(s).curve(a).context(i)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Wt(+p),n=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Wt(+p),d):t},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Wt(+p),d):n},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Wt(+p),r=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Wt(+p),d):e},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Wt(+p),d):r},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(r)},d.lineX1=function(){return f().x(n).y(e)},d.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Wt(!!p),d):s},d.curve=function(p){return arguments.length?(a=p,i!=null&&(l=a(i)),d):a},d.context=function(p){return arguments.length?(p==null?i=l=null:l=a(i=p),d):i},d}class JB{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function coe(t){return new JB(t,!0)}function uoe(t){return new JB(t,!1)}const QE={draw(t,e){const r=oi(e/Pg);t.moveTo(r,0),t.arc(0,0,r,0,ry)}},doe={draw(t,e){const r=oi(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},QB=oi(1/3),foe=QB*2,hoe={draw(t,e){const r=oi(e/foe),n=r*QB;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},poe={draw(t,e){const r=oi(e),n=-r/2;t.rect(n,n,r,r)}},moe=.8908130915292852,ez=kg(Pg/10)/kg(7*Pg/10),goe=kg(ry/10)*ez,voe=-HB(ry/10)*ez,yoe={draw(t,e){const r=oi(e*moe),n=goe*r,s=voe*r;t.moveTo(0,-r),t.lineTo(n,s);for(let i=1;i<5;++i){const a=ry*i/5,l=HB(a),c=kg(a);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*s,c*n+l*s)}t.closePath()}},bw=oi(3),xoe={draw(t,e){const r=-oi(e/(bw*3));t.moveTo(0,r*2),t.lineTo(-bw*r,-r),t.lineTo(bw*r,-r),t.closePath()}},ys=-.5,xs=oi(3)/2,mS=1/oi(12),boe=(mS/2+1)*3,woe={draw(t,e){const r=oi(e/boe),n=r/2,s=r*mS,i=n,a=r*mS+r,l=-i,c=a;t.moveTo(n,s),t.lineTo(i,a),t.lineTo(l,c),t.lineTo(ys*n-xs*s,xs*n+ys*s),t.lineTo(ys*i-xs*a,xs*i+ys*a),t.lineTo(ys*l-xs*c,xs*l+ys*c),t.lineTo(ys*n+xs*s,ys*s-xs*n),t.lineTo(ys*i+xs*a,ys*a-xs*i),t.lineTo(ys*l+xs*c,ys*c-xs*l),t.closePath()}};function _oe(t,e){let r=null,n=YE(s);t=typeof t=="function"?t:Wt(t||QE),e=typeof e=="function"?e:Wt(e===void 0?64:+e);function s(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Wt(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Wt(+i),s):e},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Og(){}function Ag(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function tz(t){this._context=t}tz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ag(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ag(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function joe(t){return new tz(t)}function rz(t){this._context=t}rz.prototype={areaStart:Og,areaEnd:Og,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ag(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Soe(t){return new rz(t)}function nz(t){this._context=t}nz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ag(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Noe(t){return new nz(t)}function sz(t){this._context=t}sz.prototype={areaStart:Og,areaEnd:Og,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Eoe(t){return new sz(t)}function lR(t){return t<0?-1:1}function cR(t,e,r){var n=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(n||s<0&&-0),a=(r-t._y1)/(s||n<0&&-0),l=(i*s+a*n)/(n+s);return(lR(i)+lR(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(l))||0}function uR(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function ww(t,e,r){var n=t._x0,s=t._y0,i=t._x1,a=t._y1,l=(i-n)/3;t._context.bezierCurveTo(n+l,s+l*e,i-l,a-l*r,i,a)}function Tg(t){this._context=t}Tg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ww(this,this._t0,uR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ww(this,uR(this,r=cR(this,t,e)),r);break;default:ww(this,this._t0,r=cR(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function iz(t){this._context=new az(t)}(iz.prototype=Object.create(Tg.prototype)).point=function(t,e){Tg.prototype.point.call(this,e,t)};function az(t){this._context=t}az.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,s,i){this._context.bezierCurveTo(e,t,n,r,i,s)}};function Coe(t){return new Tg(t)}function koe(t){return new iz(t)}function oz(t){this._context=t}oz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=dR(t),s=dR(e),i=0,a=1;a<r;++i,++a)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],t[a],e[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function dR(t){var e,r=t.length-1,n,s=new Array(r),i=new Array(r),a=new Array(r);for(s[0]=0,i[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)s[e]=1,i[e]=4,a[e]=4*t[e]+2*t[e+1];for(s[r-1]=2,i[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=s[e]/i[e-1],i[e]-=n,a[e]-=n*a[e-1];for(s[r-1]=a[r-1]/i[r-1],e=r-2;e>=0;--e)s[e]=(a[e]-s[e+1])/i[e];for(i[r-1]=(t[r]+s[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function Poe(t){return new oz(t)}function sy(t,e){this._context=t,this._t=e}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Ooe(t){return new sy(t,.5)}function Aoe(t){return new sy(t,0)}function Toe(t){return new sy(t,1)}function Zc(t,e){if((a=t.length)>1)for(var r=1,n,s,i=t[e[0]],a,l=i.length;r<a;++r)for(s=i,i=t[e[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function gS(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Loe(t,e){return t[e]}function Moe(t){const e=[];return e.key=t,e}function Roe(){var t=Wt([]),e=gS,r=Zc,n=Loe;function s(i){var a=Array.from(t.apply(this,arguments),Moe),l,c=a.length,d=-1,f;for(const p of i)for(l=0,++d;l<c;++l)(a[l][d]=[0,+n(p,a[l].key,d,i)]).data=p;for(l=0,f=JE(e(a));l<c;++l)a[f[l]].index=l;return r(a,f),a}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Wt(Array.from(i)),s):t},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Wt(+i),s):n},s.order=function(i){return arguments.length?(e=i==null?gS:typeof i=="function"?i:Wt(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(r=i??Zc,s):r},s}function Doe(t,e){if((n=t.length)>0){for(var r,n,s=0,i=t[0].length,a;s<i;++s){for(a=r=0;r<n;++r)a+=t[r][s][1]||0;if(a)for(r=0;r<n;++r)t[r][s][1]/=a}Zc(t,e)}}function Ioe(t,e){if((s=t.length)>0){for(var r=0,n=t[e[0]],s,i=n.length;r<i;++r){for(var a=0,l=0;a<s;++a)l+=t[a][r][1]||0;n[r][1]+=n[r][0]=-l/2}Zc(t,e)}}function $oe(t,e){if(!(!((a=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var r=0,n=1,s,i,a;n<i;++n){for(var l=0,c=0,d=0;l<a;++l){for(var f=t[e[l]],p=f[n][1]||0,m=f[n-1][1]||0,g=(p-m)/2,y=0;y<l;++y){var b=t[e[y]],x=b[n][1]||0,j=b[n-1][1]||0;g+=x-j}c+=p,d+=g*p}s[n-1][1]+=s[n-1][0]=r,c&&(r-=d/c)}s[n-1][1]+=s[n-1][0]=r,Zc(t,e)}}function Jf(t){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(t)}var Foe=["type","size","sizeType"];function vS(){return vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vS.apply(this,arguments)}function fR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function hR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(r),!0).forEach(function(n){Boe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Boe(t,e,r){return e=zoe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zoe(t){var e=Uoe(t,"string");return Jf(e)=="symbol"?e:e+""}function Uoe(t,e){if(Jf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qoe(t,e){if(t==null)return{};var r=Voe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Voe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var lz={symbolCircle:QE,symbolCross:doe,symbolDiamond:hoe,symbolSquare:poe,symbolStar:yoe,symbolTriangle:xoe,symbolWye:woe},Woe=Math.PI/180,Hoe=function(e){var r="symbol".concat(ty(e));return lz[r]||QE},Goe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*Woe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Koe=function(e,r){lz["symbol".concat(ty(e))]=r},iy=function(e){var r=e.type,n=r===void 0?"circle":r,s=e.size,i=s===void 0?64:s,a=e.sizeType,l=a===void 0?"area":a,c=qoe(e,Foe),d=hR(hR({},c),{},{type:n,size:i,sizeType:l}),f=function(){var x=Hoe(n),j=_oe().type(x).size(Goe(i,l,n));return j()},p=d.className,m=d.cx,g=d.cy,y=Ue(d,!0);return m===+m&&g===+g&&i===+i?z.createElement("path",vS({},y,{className:st("recharts-symbols",p),transform:"translate(".concat(m,", ").concat(g,")"),d:f()})):null};iy.registerSymbol=Koe;function Xc(t){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(t)}function yS(){return yS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yS.apply(this,arguments)}function pR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Zoe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pR(Object(r),!0).forEach(function(n){Qf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yoe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uz(n.key),n)}}function Joe(t,e,r){return e&&Yoe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qoe(t,e,r){return e=Lg(e),ele(t,cz()?Reflect.construct(e,r||[],Lg(t).constructor):e.apply(t,r))}function ele(t,e){if(e&&(Xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tle(t)}function tle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cz=function(){return!!t})()}function Lg(t){return Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lg(t)}function rle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xS(t,e)}function xS(t,e){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},xS(t,e)}function Qf(t,e,r){return e=uz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uz(t){var e=nle(t,"string");return Xc(e)=="symbol"?e:e+""}function nle(t,e){if(Xc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bs=32,eC=function(t){function e(){return Xoe(this,e),Qoe(this,e,arguments)}return rle(e,t),Joe(e,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=bs/2,a=bs/6,l=bs/3,c=n.inactive?s:n.color;if(n.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:bs,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(bs,"M").concat(2*l,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return z.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(bs/8,"h").concat(bs,"v").concat(bs*3/4,"h").concat(-bs,"z"),className:"recharts-legend-icon"});if(z.isValidElement(n.legendIcon)){var d=Zoe({},n);return delete d.legendIcon,z.cloneElement(n.legendIcon,d)}return z.createElement(iy,{fill:c,cx:i,cy:i,size:bs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,a=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,f={x:0,y:0,width:bs,height:bs},p={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,y){var b=g.formatter||c,x=st(Qf(Qf({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",g.inactive));if(g.type==="none")return null;var j=Ze(g.value)?null:g.value;ri(!Ze(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=g.inactive?d:g.color;return z.createElement("li",yS({className:x,style:p,key:"legend-item-".concat(y)},yo(n.props,g,y)),z.createElement(dS,{width:a,height:a,viewBox:f,style:m},n.renderIcon(g)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},b?b(j,g,y):j))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,a=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?a:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(w.PureComponent);Qf(eC,"displayName","Legend");Qf(eC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var _w,mR;function sle(){if(mR)return _w;mR=1;var t=Jv();function e(){this.__data__=new t,this.size=0}return _w=e,_w}var jw,gR;function ile(){if(gR)return jw;gR=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return jw=t,jw}var Sw,vR;function ale(){if(vR)return Sw;vR=1;function t(e){return this.__data__.get(e)}return Sw=t,Sw}var Nw,yR;function ole(){if(yR)return Nw;yR=1;function t(e){return this.__data__.has(e)}return Nw=t,Nw}var Ew,xR;function lle(){if(xR)return Ew;xR=1;var t=Jv(),e=WE(),r=HE(),n=200;function s(i,a){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<n-1)return c.push([i,a]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,a),this.size=l.size,this}return Ew=s,Ew}var Cw,bR;function dz(){if(bR)return Cw;bR=1;var t=Jv(),e=sle(),r=ile(),n=ale(),s=ole(),i=lle();function a(l){var c=this.__data__=new t(l);this.size=c.size}return a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=s,a.prototype.set=i,Cw=a,Cw}var kw,wR;function cle(){if(wR)return kw;wR=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return kw=e,kw}var Pw,_R;function ule(){if(_R)return Pw;_R=1;function t(e){return this.__data__.has(e)}return Pw=t,Pw}var Ow,jR;function fz(){if(jR)return Ow;jR=1;var t=HE(),e=cle(),r=ule();function n(s){var i=-1,a=s==null?0:s.length;for(this.__data__=new t;++i<a;)this.add(s[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,Ow=n,Ow}var Aw,SR;function hz(){if(SR)return Aw;SR=1;function t(e,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(e[n],n,e))return!0;return!1}return Aw=t,Aw}var Tw,NR;function pz(){if(NR)return Tw;NR=1;function t(e,r){return e.has(r)}return Tw=t,Tw}var Lw,ER;function mz(){if(ER)return Lw;ER=1;var t=fz(),e=hz(),r=pz(),n=1,s=2;function i(a,l,c,d,f,p){var m=c&n,g=a.length,y=l.length;if(g!=y&&!(m&&y>g))return!1;var b=p.get(a),x=p.get(l);if(b&&x)return b==l&&x==a;var j=-1,S=!0,C=c&s?new t:void 0;for(p.set(a,l),p.set(l,a);++j<g;){var E=a[j],N=l[j];if(d)var P=m?d(N,E,j,l,a,p):d(E,N,j,a,l,p);if(P!==void 0){if(P)continue;S=!1;break}if(C){if(!e(l,function(O,L){if(!r(C,L)&&(E===O||f(E,O,c,d,p)))return C.push(L)})){S=!1;break}}else if(!(E===N||f(E,N,c,d,p))){S=!1;break}}return p.delete(a),p.delete(l),S}return Lw=i,Lw}var Mw,CR;function dle(){if(CR)return Mw;CR=1;var t=Li(),e=t.Uint8Array;return Mw=e,Mw}var Rw,kR;function fle(){if(kR)return Rw;kR=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(s,i){n[++r]=[i,s]}),n}return Rw=t,Rw}var Dw,PR;function tC(){if(PR)return Dw;PR=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(s){n[++r]=s}),n}return Dw=t,Dw}var Iw,OR;function hle(){if(OR)return Iw;OR=1;var t=Gh(),e=dle(),r=VE(),n=mz(),s=fle(),i=tC(),a=1,l=2,c="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",m="[object Number]",g="[object RegExp]",y="[object Set]",b="[object String]",x="[object Symbol]",j="[object ArrayBuffer]",S="[object DataView]",C=t?t.prototype:void 0,E=C?C.valueOf:void 0;function N(P,O,L,A,R,M,D){switch(L){case S:if(P.byteLength!=O.byteLength||P.byteOffset!=O.byteOffset)return!1;P=P.buffer,O=O.buffer;case j:return!(P.byteLength!=O.byteLength||!M(new e(P),new e(O)));case c:case d:case m:return r(+P,+O);case f:return P.name==O.name&&P.message==O.message;case g:case b:return P==O+"";case p:var B=s;case y:var F=A&a;if(B||(B=i),P.size!=O.size&&!F)return!1;var V=D.get(P);if(V)return V==O;A|=l,D.set(P,O);var J=n(B(P),B(O),A,R,M,D);return D.delete(P),J;case x:if(E)return E.call(P)==E.call(O)}return!1}return Iw=N,Iw}var $w,AR;function gz(){if(AR)return $w;AR=1;function t(e,r){for(var n=-1,s=r.length,i=e.length;++n<s;)e[i+n]=r[n];return e}return $w=t,$w}var Fw,TR;function ple(){if(TR)return Fw;TR=1;var t=gz(),e=Dn();function r(n,s,i){var a=s(n);return e(n)?a:t(a,i(n))}return Fw=r,Fw}var Bw,LR;function mle(){if(LR)return Bw;LR=1;function t(e,r){for(var n=-1,s=e==null?0:e.length,i=0,a=[];++n<s;){var l=e[n];r(l,n,e)&&(a[i++]=l)}return a}return Bw=t,Bw}var zw,MR;function gle(){if(MR)return zw;MR=1;function t(){return[]}return zw=t,zw}var Uw,RR;function vle(){if(RR)return Uw;RR=1;var t=mle(),e=gle(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(a){return a==null?[]:(a=Object(a),t(s(a),function(l){return n.call(a,l)}))}:e;return Uw=i,Uw}var qw,DR;function yle(){if(DR)return qw;DR=1;function t(e,r){for(var n=-1,s=Array(e);++n<e;)s[n]=r(n);return s}return qw=t,qw}var Vw,IR;function xle(){if(IR)return Vw;IR=1;var t=ma(),e=ga(),r="[object Arguments]";function n(s){return e(s)&&t(s)==r}return Vw=n,Vw}var Ww,$R;function rC(){if($R)return Ww;$R=1;var t=xle(),e=ga(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(a){return e(a)&&n.call(a,"callee")&&!s.call(a,"callee")};return Ww=i,Ww}var Qd={exports:{}},Hw,FR;function ble(){if(FR)return Hw;FR=1;function t(){return!1}return Hw=t,Hw}Qd.exports;var BR;function vz(){return BR||(BR=1,function(t,e){var r=Li(),n=ble(),s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===s,l=a?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;t.exports=d}(Qd,Qd.exports)),Qd.exports}var Gw,zR;function nC(){if(zR)return Gw;zR=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??t,!!s&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<s}return Gw=r,Gw}var Kw,UR;function sC(){if(UR)return Kw;UR=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return Kw=e,Kw}var Zw,qR;function wle(){if(qR)return Zw;qR=1;var t=ma(),e=sC(),r=ga(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",a="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object WeakMap]",x="[object ArrayBuffer]",j="[object DataView]",S="[object Float32Array]",C="[object Float64Array]",E="[object Int8Array]",N="[object Int16Array]",P="[object Int32Array]",O="[object Uint8Array]",L="[object Uint8ClampedArray]",A="[object Uint16Array]",R="[object Uint32Array]",M={};M[S]=M[C]=M[E]=M[N]=M[P]=M[O]=M[L]=M[A]=M[R]=!0,M[n]=M[s]=M[x]=M[i]=M[j]=M[a]=M[l]=M[c]=M[d]=M[f]=M[p]=M[m]=M[g]=M[y]=M[b]=!1;function D(B){return r(B)&&e(B.length)&&!!M[t(B)]}return Zw=D,Zw}var Xw,VR;function yz(){if(VR)return Xw;VR=1;function t(e){return function(r){return e(r)}}return Xw=t,Xw}var ef={exports:{}};ef.exports;var WR;function _le(){return WR||(WR=1,function(t,e){var r=IB(),n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===n,a=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=l}(ef,ef.exports)),ef.exports}var Yw,HR;function xz(){if(HR)return Yw;HR=1;var t=wle(),e=yz(),r=_le(),n=r&&r.isTypedArray,s=n?e(n):t;return Yw=s,Yw}var Jw,GR;function jle(){if(GR)return Jw;GR=1;var t=yle(),e=rC(),r=Dn(),n=vz(),s=nC(),i=xz(),a=Object.prototype,l=a.hasOwnProperty;function c(d,f){var p=r(d),m=!p&&e(d),g=!p&&!m&&n(d),y=!p&&!m&&!g&&i(d),b=p||m||g||y,x=b?t(d.length,String):[],j=x.length;for(var S in d)(f||l.call(d,S))&&!(b&&(S=="length"||g&&(S=="offset"||S=="parent")||y&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||s(S,j)))&&x.push(S);return x}return Jw=c,Jw}var Qw,KR;function Sle(){if(KR)return Qw;KR=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||t;return r===s}return Qw=e,Qw}var e_,ZR;function bz(){if(ZR)return e_;ZR=1;function t(e,r){return function(n){return e(r(n))}}return e_=t,e_}var t_,XR;function Nle(){if(XR)return t_;XR=1;var t=bz(),e=t(Object.keys,Object);return t_=e,t_}var r_,YR;function Ele(){if(YR)return r_;YR=1;var t=Sle(),e=Nle(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!t(i))return e(i);var a=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&a.push(l);return a}return r_=s,r_}var n_,JR;function Kh(){if(JR)return n_;JR=1;var t=qE(),e=sC();function r(n){return n!=null&&e(n.length)&&!t(n)}return n_=r,n_}var s_,QR;function ay(){if(QR)return s_;QR=1;var t=jle(),e=Ele(),r=Kh();function n(s){return r(s)?t(s):e(s)}return s_=n,s_}var i_,eD;function Cle(){if(eD)return i_;eD=1;var t=ple(),e=vle(),r=ay();function n(s){return t(s,r,e)}return i_=n,i_}var a_,tD;function kle(){if(tD)return a_;tD=1;var t=Cle(),e=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,a,l,c,d,f){var p=l&e,m=t(i),g=m.length,y=t(a),b=y.length;if(g!=b&&!p)return!1;for(var x=g;x--;){var j=m[x];if(!(p?j in a:n.call(a,j)))return!1}var S=f.get(i),C=f.get(a);if(S&&C)return S==a&&C==i;var E=!0;f.set(i,a),f.set(a,i);for(var N=p;++x<g;){j=m[x];var P=i[j],O=a[j];if(c)var L=p?c(O,P,j,a,i,f):c(P,O,j,i,a,f);if(!(L===void 0?P===O||d(P,O,l,c,f):L)){E=!1;break}N||(N=j=="constructor")}if(E&&!N){var A=i.constructor,R=a.constructor;A!=R&&"constructor"in i&&"constructor"in a&&!(typeof A=="function"&&A instanceof A&&typeof R=="function"&&R instanceof R)&&(E=!1)}return f.delete(i),f.delete(a),E}return a_=s,a_}var o_,rD;function Ple(){if(rD)return o_;rD=1;var t=Ol(),e=Li(),r=t(e,"DataView");return o_=r,o_}var l_,nD;function Ole(){if(nD)return l_;nD=1;var t=Ol(),e=Li(),r=t(e,"Promise");return l_=r,l_}var c_,sD;function wz(){if(sD)return c_;sD=1;var t=Ol(),e=Li(),r=t(e,"Set");return c_=r,c_}var u_,iD;function Ale(){if(iD)return u_;iD=1;var t=Ol(),e=Li(),r=t(e,"WeakMap");return u_=r,u_}var d_,aD;function Tle(){if(aD)return d_;aD=1;var t=Ple(),e=WE(),r=Ole(),n=wz(),s=Ale(),i=ma(),a=$B(),l="[object Map]",c="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",m="[object DataView]",g=a(t),y=a(e),b=a(r),x=a(n),j=a(s),S=i;return(t&&S(new t(new ArrayBuffer(1)))!=m||e&&S(new e)!=l||r&&S(r.resolve())!=d||n&&S(new n)!=f||s&&S(new s)!=p)&&(S=function(C){var E=i(C),N=E==c?C.constructor:void 0,P=N?a(N):"";if(P)switch(P){case g:return m;case y:return l;case b:return d;case x:return f;case j:return p}return E}),d_=S,d_}var f_,oD;function Lle(){if(oD)return f_;oD=1;var t=dz(),e=mz(),r=hle(),n=kle(),s=Tle(),i=Dn(),a=vz(),l=xz(),c=1,d="[object Arguments]",f="[object Array]",p="[object Object]",m=Object.prototype,g=m.hasOwnProperty;function y(b,x,j,S,C,E){var N=i(b),P=i(x),O=N?f:s(b),L=P?f:s(x);O=O==d?p:O,L=L==d?p:L;var A=O==p,R=L==p,M=O==L;if(M&&a(b)){if(!a(x))return!1;N=!0,A=!1}if(M&&!A)return E||(E=new t),N||l(b)?e(b,x,j,S,C,E):r(b,x,O,j,S,C,E);if(!(j&c)){var D=A&&g.call(b,"__wrapped__"),B=R&&g.call(x,"__wrapped__");if(D||B){var F=D?b.value():b,V=B?x.value():x;return E||(E=new t),C(F,V,j,S,E)}}return M?(E||(E=new t),n(b,x,j,S,C,E)):!1}return f_=y,f_}var h_,lD;function iC(){if(lD)return h_;lD=1;var t=Lle(),e=ga();function r(n,s,i,a,l){return n===s?!0:n==null||s==null||!e(n)&&!e(s)?n!==n&&s!==s:t(n,s,i,a,r,l)}return h_=r,h_}var p_,cD;function Mle(){if(cD)return p_;cD=1;var t=dz(),e=iC(),r=1,n=2;function s(i,a,l,c){var d=l.length,f=d,p=!c;if(i==null)return!f;for(i=Object(i);d--;){var m=l[d];if(p&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++d<f;){m=l[d];var g=m[0],y=i[g],b=m[1];if(p&&m[2]){if(y===void 0&&!(g in i))return!1}else{var x=new t;if(c)var j=c(y,b,g,i,a,x);if(!(j===void 0?e(b,y,r|n,c,x):j))return!1}}return!0}return p_=s,p_}var m_,uD;function _z(){if(uD)return m_;uD=1;var t=Eo();function e(r){return r===r&&!t(r)}return m_=e,m_}var g_,dD;function Rle(){if(dD)return g_;dD=1;var t=_z(),e=ay();function r(n){for(var s=e(n),i=s.length;i--;){var a=s[i],l=n[a];s[i]=[a,l,t(l)]}return s}return g_=r,g_}var v_,fD;function jz(){if(fD)return v_;fD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return v_=t,v_}var y_,hD;function Dle(){if(hD)return y_;hD=1;var t=Mle(),e=Rle(),r=jz();function n(s){var i=e(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(a){return a===s||t(a,s,i)}}return y_=n,y_}var x_,pD;function Ile(){if(pD)return x_;pD=1;function t(e,r){return e!=null&&r in Object(e)}return x_=t,x_}var b_,mD;function $le(){if(mD)return b_;mD=1;var t=zB(),e=rC(),r=Dn(),n=nC(),s=sC(),i=ey();function a(l,c,d){c=t(c,l);for(var f=-1,p=c.length,m=!1;++f<p;){var g=i(c[f]);if(!(m=l!=null&&d(l,g)))break;l=l[g]}return m||++f!=p?m:(p=l==null?0:l.length,!!p&&s(p)&&n(g,p)&&(r(l)||e(l)))}return b_=a,b_}var w_,gD;function Fle(){if(gD)return w_;gD=1;var t=Ile(),e=$le();function r(n,s){return n!=null&&e(n,s,t)}return w_=r,w_}var __,vD;function Ble(){if(vD)return __;vD=1;var t=iC(),e=UB(),r=Fle(),n=UE(),s=_z(),i=jz(),a=ey(),l=1,c=2;function d(f,p){return n(f)&&s(p)?i(a(f),p):function(m){var g=e(m,f);return g===void 0&&g===p?r(m,f):t(p,g,l|c)}}return __=d,__}var j_,yD;function Ru(){if(yD)return j_;yD=1;function t(e){return e}return j_=t,j_}var S_,xD;function zle(){if(xD)return S_;xD=1;function t(e){return function(r){return r?.[e]}}return S_=t,S_}var N_,bD;function Ule(){if(bD)return N_;bD=1;var t=KE();function e(r){return function(n){return t(n,r)}}return N_=e,N_}var E_,wD;function qle(){if(wD)return E_;wD=1;var t=zle(),e=Ule(),r=UE(),n=ey();function s(i){return r(i)?t(n(i)):e(i)}return E_=s,E_}var C_,_D;function Mi(){if(_D)return C_;_D=1;var t=Dle(),e=Ble(),r=Ru(),n=Dn(),s=qle();function i(a){return typeof a=="function"?a:a==null?r:typeof a=="object"?n(a)?e(a[0],a[1]):t(a):s(a)}return C_=i,C_}var k_,jD;function Sz(){if(jD)return k_;jD=1;function t(e,r,n,s){for(var i=e.length,a=n+(s?1:-1);s?a--:++a<i;)if(r(e[a],a,e))return a;return-1}return k_=t,k_}var P_,SD;function Vle(){if(SD)return P_;SD=1;function t(e){return e!==e}return P_=t,P_}var O_,ND;function Wle(){if(ND)return O_;ND=1;function t(e,r,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===r)return s;return-1}return O_=t,O_}var A_,ED;function Hle(){if(ED)return A_;ED=1;var t=Sz(),e=Vle(),r=Wle();function n(s,i,a){return i===i?r(s,i,a):t(s,e,a)}return A_=n,A_}var T_,CD;function Gle(){if(CD)return T_;CD=1;var t=Hle();function e(r,n){var s=r==null?0:r.length;return!!s&&t(r,n,0)>-1}return T_=e,T_}var L_,kD;function Kle(){if(kD)return L_;kD=1;function t(e,r,n){for(var s=-1,i=e==null?0:e.length;++s<i;)if(n(r,e[s]))return!0;return!1}return L_=t,L_}var M_,PD;function Zle(){if(PD)return M_;PD=1;function t(){}return M_=t,M_}var R_,OD;function Xle(){if(OD)return R_;OD=1;var t=wz(),e=Zle(),r=tC(),n=1/0,s=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return R_=s,R_}var D_,AD;function Yle(){if(AD)return D_;AD=1;var t=fz(),e=Gle(),r=Kle(),n=pz(),s=Xle(),i=tC(),a=200;function l(c,d,f){var p=-1,m=e,g=c.length,y=!0,b=[],x=b;if(f)y=!1,m=r;else if(g>=a){var j=d?null:s(c);if(j)return i(j);y=!1,m=n,x=new t}else x=d?[]:b;e:for(;++p<g;){var S=c[p],C=d?d(S):S;if(S=f||S!==0?S:0,y&&C===C){for(var E=x.length;E--;)if(x[E]===C)continue e;d&&x.push(C),b.push(S)}else m(x,C,f)||(x!==b&&x.push(C),b.push(S))}return b}return D_=l,D_}var I_,TD;function Jle(){if(TD)return I_;TD=1;var t=Mi(),e=Yle();function r(n,s){return n&&n.length?e(n,t(s,2)):[]}return I_=r,I_}var Qle=Jle();const LD=Pt(Qle);function Nz(t,e,r){return e===!0?LD(t,r):Ze(e)?LD(t,e):t}function Yc(t){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}var ece=["ref"];function MD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ki(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(r),!0).forEach(function(n){oy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cz(n.key),n)}}function rce(t,e,r){return e&&RD(t.prototype,e),r&&RD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nce(t,e,r){return e=Mg(e),sce(t,Ez()?Reflect.construct(e,r||[],Mg(t).constructor):e.apply(t,r))}function sce(t,e){if(e&&(Yc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ice(t)}function ice(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ez(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ez=function(){return!!t})()}function Mg(t){return Mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mg(t)}function ace(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bS(t,e)}function bS(t,e){return bS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},bS(t,e)}function oy(t,e,r){return e=Cz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cz(t){var e=oce(t,"string");return Yc(e)=="symbol"?e:e+""}function oce(t,e){if(Yc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function lce(t,e){if(t==null)return{};var r=cce(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function uce(t){return t.value}function dce(t,e){if(z.isValidElement(t))return z.cloneElement(t,e);if(typeof t=="function")return z.createElement(t,e);e.ref;var r=lce(e,ece);return z.createElement(eC,r)}var DD=1,Dc=function(t){function e(){var r;tce(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=nce(this,e,[].concat(s)),oy(r,"lastBoundingBox",{width:-1,height:-1}),r}return ace(e,t),rce(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>DD||Math.abs(s.height-this.lastBoundingBox.height)>DD)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ki({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,a=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,f=s.chartHeight,p,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();p={left:((d||0)-g.width)/2}}else p=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();m={top:((f||0)-y.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ki(Ki({},p),m)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,a=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,f=s.payload,p=Ki(Ki({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return z.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(g){n.wrapperNode=g}},dce(i,Ki(Ki({},this.props),{},{payload:Nz(f,d,uce)})))}}],[{key:"getWithHeight",value:function(n,s){var i=Ki(Ki({},this.defaultProps),n.props),a=i.layout;return a==="vertical"&&Ne(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||s}:null}}])}(w.PureComponent);oy(Dc,"displayName","Legend");oy(Dc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var $_,ID;function fce(){if(ID)return $_;ID=1;var t=Gh(),e=rC(),r=Dn(),n=t?t.isConcatSpreadable:void 0;function s(i){return r(i)||e(i)||!!(n&&i&&i[n])}return $_=s,$_}var F_,$D;function kz(){if($D)return F_;$D=1;var t=gz(),e=fce();function r(n,s,i,a,l){var c=-1,d=n.length;for(i||(i=e),l||(l=[]);++c<d;){var f=n[c];s>0&&i(f)?s>1?r(f,s-1,i,a,l):t(l,f):a||(l[l.length]=f)}return l}return F_=r,F_}var B_,FD;function hce(){if(FD)return B_;FD=1;function t(e){return function(r,n,s){for(var i=-1,a=Object(r),l=s(r),c=l.length;c--;){var d=l[e?c:++i];if(n(a[d],d,a)===!1)break}return r}}return B_=t,B_}var z_,BD;function pce(){if(BD)return z_;BD=1;var t=hce(),e=t();return z_=e,z_}var U_,zD;function Pz(){if(zD)return U_;zD=1;var t=pce(),e=ay();function r(n,s){return n&&t(n,s,e)}return U_=r,U_}var q_,UD;function mce(){if(UD)return q_;UD=1;var t=Kh();function e(r,n){return function(s,i){if(s==null)return s;if(!t(s))return r(s,i);for(var a=s.length,l=n?a:-1,c=Object(s);(n?l--:++l<a)&&i(c[l],l,c)!==!1;);return s}}return q_=e,q_}var V_,qD;function aC(){if(qD)return V_;qD=1;var t=Pz(),e=mce(),r=e(t);return V_=r,V_}var W_,VD;function Oz(){if(VD)return W_;VD=1;var t=aC(),e=Kh();function r(n,s){var i=-1,a=e(n)?Array(n.length):[];return t(n,function(l,c,d){a[++i]=s(l,c,d)}),a}return W_=r,W_}var H_,WD;function gce(){if(WD)return H_;WD=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return H_=t,H_}var G_,HD;function vce(){if(HD)return G_;HD=1;var t=Tu();function e(r,n){if(r!==n){var s=r!==void 0,i=r===null,a=r===r,l=t(r),c=n!==void 0,d=n===null,f=n===n,p=t(n);if(!d&&!p&&!l&&r>n||l&&c&&f&&!d&&!p||i&&c&&f||!s&&f||!a)return 1;if(!i&&!l&&!p&&r<n||p&&s&&a&&!i&&!l||d&&s&&a||!c&&a||!f)return-1}return 0}return G_=e,G_}var K_,GD;function yce(){if(GD)return K_;GD=1;var t=vce();function e(r,n,s){for(var i=-1,a=r.criteria,l=n.criteria,c=a.length,d=s.length;++i<c;){var f=t(a[i],l[i]);if(f){if(i>=d)return f;var p=s[i];return f*(p=="desc"?-1:1)}}return r.index-n.index}return K_=e,K_}var Z_,KD;function xce(){if(KD)return Z_;KD=1;var t=GE(),e=KE(),r=Mi(),n=Oz(),s=gce(),i=yz(),a=yce(),l=Ru(),c=Dn();function d(f,p,m){p.length?p=t(p,function(b){return c(b)?function(x){return e(x,b.length===1?b[0]:b)}:b}):p=[l];var g=-1;p=t(p,i(r));var y=n(f,function(b,x,j){var S=t(p,function(C){return C(b)});return{criteria:S,index:++g,value:b}});return s(y,function(b,x){return a(b,x,m)})}return Z_=d,Z_}var X_,ZD;function bce(){if(ZD)return X_;ZD=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return X_=t,X_}var Y_,XD;function wce(){if(XD)return Y_;XD=1;var t=bce(),e=Math.max;function r(n,s,i){return s=e(s===void 0?n.length-1:s,0),function(){for(var a=arguments,l=-1,c=e(a.length-s,0),d=Array(c);++l<c;)d[l]=a[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=a[l];return f[s]=i(d),t(n,this,f)}}return Y_=r,Y_}var J_,YD;function _ce(){if(YD)return J_;YD=1;function t(e){return function(){return e}}return J_=t,J_}var Q_,JD;function Az(){if(JD)return Q_;JD=1;var t=Ol(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Q_=e,Q_}var ej,QD;function jce(){if(QD)return ej;QD=1;var t=_ce(),e=Az(),r=Ru(),n=e?function(s,i){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return ej=n,ej}var tj,eI;function Sce(){if(eI)return tj;eI=1;var t=800,e=16,r=Date.now;function n(s){var i=0,a=0;return function(){var l=r(),c=e-(l-a);if(a=l,c>0){if(++i>=t)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return tj=n,tj}var rj,tI;function Nce(){if(tI)return rj;tI=1;var t=jce(),e=Sce(),r=e(t);return rj=r,rj}var nj,rI;function Ece(){if(rI)return nj;rI=1;var t=Ru(),e=wce(),r=Nce();function n(s,i){return r(e(s,i,t),s+"")}return nj=n,nj}var sj,nI;function ly(){if(nI)return sj;nI=1;var t=VE(),e=Kh(),r=nC(),n=Eo();function s(i,a,l){if(!n(l))return!1;var c=typeof a;return(c=="number"?e(l)&&r(a,l.length):c=="string"&&a in l)?t(l[a],i):!1}return sj=s,sj}var ij,sI;function Cce(){if(sI)return ij;sI=1;var t=kz(),e=xce(),r=Ece(),n=ly(),s=r(function(i,a){if(i==null)return[];var l=a.length;return l>1&&n(i,a[0],a[1])?a=[]:l>2&&n(a[0],a[1],a[2])&&(a=[a[0]]),e(i,t(a,1),[])});return ij=s,ij}var kce=Cce();const oC=Pt(kce);function eh(t){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eh(t)}function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wS.apply(this,arguments)}function Pce(t,e){return Lce(t)||Tce(t,e)||Ace(t,e)||Oce()}function Oce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ace(t,e){if(t){if(typeof t=="string")return iI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iI(t,e)}}function iI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tce(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Lce(t){if(Array.isArray(t))return t}function aI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function aj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aI(Object(r),!0).forEach(function(n){Mce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mce(t,e,r){return e=Rce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rce(t){var e=Dce(t,"string");return eh(e)=="symbol"?e:e+""}function Dce(t,e){if(eh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ice(t){return Array.isArray(t)&&Mr(t[0])&&Mr(t[1])?t.join(" ~ "):t}var $ce=function(e){var r=e.separator,n=r===void 0?" : ":r,s=e.contentStyle,i=s===void 0?{}:s,a=e.itemStyle,l=a===void 0?{}:a,c=e.labelStyle,d=c===void 0?{}:c,f=e.payload,p=e.formatter,m=e.itemSorter,g=e.wrapperClassName,y=e.labelClassName,b=e.label,x=e.labelFormatter,j=e.accessibilityLayer,S=j===void 0?!1:j,C=function(){if(f&&f.length){var D={padding:0,margin:0},B=(m?oC(f,m):f).map(function(F,V){if(F.type==="none")return null;var J=aj({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},l),G=F.formatter||p||Ice,q=F.value,U=F.name,W=q,I=U;if(G&&W!=null&&I!=null){var H=G(q,U,F,V,f);if(Array.isArray(H)){var ne=Pce(H,2);W=ne[0],I=ne[1]}else W=H}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:J},Mr(I)?z.createElement("span",{className:"recharts-tooltip-item-name"},I):null,Mr(I)?z.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,z.createElement("span",{className:"recharts-tooltip-item-value"},W),z.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:D},B)}return null},E=aj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=aj({margin:0},d),P=!Xe(b),O=P?b:"",L=st("recharts-default-tooltip",g),A=st("recharts-tooltip-label",y);P&&x&&f!==void 0&&f!==null&&(O=x(b,f));var R=S?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",wS({className:L,style:E},R),z.createElement("p",{className:A,style:N},z.isValidElement(O)?O:"".concat(O)),C())};function th(t){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(t)}function Em(t,e,r){return e=Fce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fce(t){var e=Bce(t,"string");return th(e)=="symbol"?e:e+""}function Bce(t,e){if(th(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dd="recharts-tooltip-wrapper",zce={visibility:"hidden"};function Uce(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return st(Dd,Em(Em(Em(Em({},"".concat(Dd,"-right"),Ne(r)&&e&&Ne(e.x)&&r>=e.x),"".concat(Dd,"-left"),Ne(r)&&e&&Ne(e.x)&&r<e.x),"".concat(Dd,"-bottom"),Ne(n)&&e&&Ne(e.y)&&n>=e.y),"".concat(Dd,"-top"),Ne(n)&&e&&Ne(e.y)&&n<e.y))}function oI(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,s=t.offsetTopLeft,i=t.position,a=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(i&&Ne(i[n]))return i[n];var f=r[n]-l-s,p=r[n]+s;if(e[n])return a[n]?f:p;if(a[n]){var m=f,g=c[n];return m<g?Math.max(p,c[n]):Math.max(f,c[n])}var y=p+l,b=c[n]+d;return y>b?Math.max(f,c[n]):Math.max(p,c[n])}function qce(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Vce(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,s=t.position,i=t.reverseDirection,a=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,f,p;return a.height>0&&a.width>0&&r?(f=oI({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),p=oI({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),d=qce({translateX:f,translateY:p,useTranslate3d:l})):d=zce,{cssProperties:d,cssClasses:Uce({translateX:f,translateY:p,coordinate:r})}}function Jc(t){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(t)}function lI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function cI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lI(Object(r),!0).forEach(function(n){jS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lz(n.key),n)}}function Gce(t,e,r){return e&&Hce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kce(t,e,r){return e=Rg(e),Zce(t,Tz()?Reflect.construct(e,r||[],Rg(t).constructor):e.apply(t,r))}function Zce(t,e){if(e&&(Jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xce(t)}function Xce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tz=function(){return!!t})()}function Rg(t){return Rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rg(t)}function Yce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_S(t,e)}function jS(t,e,r){return e=Lz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lz(t){var e=Jce(t,"string");return Jc(e)=="symbol"?e:e+""}function Jce(t,e){if(Jc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uI=1,Qce=function(t){function e(){var r;Wce(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Kce(this,e,[].concat(s)),jS(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),jS(r,"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,d,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),r}return Yce(e,t),Gce(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>uI||Math.abs(n.height-this.state.lastBoundingBox.height)>uI)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,a=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,f=s.coordinate,p=s.hasPayload,m=s.isAnimationActive,g=s.offset,y=s.position,b=s.reverseDirection,x=s.useTranslate3d,j=s.viewBox,S=s.wrapperStyle,C=Vce({allowEscapeViewBox:a,coordinate:f,offsetTopLeft:g,position:y,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:j}),E=C.cssClasses,N=C.cssProperties,P=cI(cI({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&p?"visible":"hidden",position:"absolute",top:0,left:0},S);return z.createElement("div",{tabIndex:-1,className:E,style:P,ref:function(L){n.wrapperNode=L}},d)}}])}(w.PureComponent),eue=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},va={isSsr:eue()};function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(t)}function dI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function fI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dI(Object(r),!0).forEach(function(n){lC(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rz(n.key),n)}}function nue(t,e,r){return e&&rue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sue(t,e,r){return e=Dg(e),iue(t,Mz()?Reflect.construct(e,r||[],Dg(t).constructor):e.apply(t,r))}function iue(t,e){if(e&&(Qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aue(t)}function aue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mz=function(){return!!t})()}function Dg(t){return Dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dg(t)}function oue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SS(t,e)}function SS(t,e){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},SS(t,e)}function lC(t,e,r){return e=Rz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rz(t){var e=lue(t,"string");return Qc(e)=="symbol"?e:e+""}function lue(t,e){if(Qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function cue(t){return t.dataKey}function uue(t,e){return z.isValidElement(t)?z.cloneElement(t,e):typeof t=="function"?z.createElement(t,e):z.createElement($ce,e)}var Kn=function(t){function e(){return tue(this,e),sue(this,e,arguments)}return oue(e,t),nue(e,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,a=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,f=s.coordinate,p=s.filterNull,m=s.isAnimationActive,g=s.offset,y=s.payload,b=s.payloadUniqBy,x=s.position,j=s.reverseDirection,S=s.useTranslate3d,C=s.viewBox,E=s.wrapperStyle,N=y??[];p&&N.length&&(N=Nz(y.filter(function(O){return O.value!=null&&(O.hide!==!0||n.props.includeHidden)}),b,cue));var P=N.length>0;return z.createElement(Qce,{allowEscapeViewBox:a,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:f,hasPayload:P,offset:g,position:x,reverseDirection:j,useTranslate3d:S,viewBox:C,wrapperStyle:E},uue(d,fI(fI({},this.props),{},{payload:N})))}}])}(w.PureComponent);lC(Kn,"displayName","Tooltip");lC(Kn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!va.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var oj,hI;function due(){if(hI)return oj;hI=1;var t=Li(),e=function(){return t.Date.now()};return oj=e,oj}var lj,pI;function fue(){if(pI)return lj;pI=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return lj=e,lj}var cj,mI;function hue(){if(mI)return cj;mI=1;var t=fue(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return cj=r,cj}var uj,gI;function Dz(){if(gI)return uj;gI=1;var t=hue(),e=Eo(),r=Tu(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(r(d))return n;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=t(d);var p=i.test(d);return p||a.test(d)?l(d.slice(2),p?2:8):s.test(d)?n:+d}return uj=c,uj}var dj,vI;function pue(){if(vI)return dj;vI=1;var t=Eo(),e=due(),r=Dz(),n="Expected a function",s=Math.max,i=Math.min;function a(l,c,d){var f,p,m,g,y,b,x=0,j=!1,S=!1,C=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,t(d)&&(j=!!d.leading,S="maxWait"in d,m=S?s(r(d.maxWait)||0,c):m,C="trailing"in d?!!d.trailing:C);function E(B){var F=f,V=p;return f=p=void 0,x=B,g=l.apply(V,F),g}function N(B){return x=B,y=setTimeout(L,c),j?E(B):g}function P(B){var F=B-b,V=B-x,J=c-F;return S?i(J,m-V):J}function O(B){var F=B-b,V=B-x;return b===void 0||F>=c||F<0||S&&V>=m}function L(){var B=e();if(O(B))return A(B);y=setTimeout(L,P(B))}function A(B){return y=void 0,C&&f?E(B):(f=p=void 0,g)}function R(){y!==void 0&&clearTimeout(y),x=0,f=b=p=y=void 0}function M(){return y===void 0?g:A(e())}function D(){var B=e(),F=O(B);if(f=arguments,p=this,b=B,F){if(y===void 0)return N(b);if(S)return clearTimeout(y),y=setTimeout(L,c),E(b)}return y===void 0&&(y=setTimeout(L,c)),g}return D.cancel=R,D.flush=M,D}return dj=a,dj}var fj,yI;function mue(){if(yI)return fj;yI=1;var t=pue(),e=Eo(),r="Expected a function";function n(s,i,a){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return e(a)&&(l="leading"in a?!!a.leading:l,c="trailing"in a?!!a.trailing:c),t(s,i,{leading:l,maxWait:i,trailing:c})}return fj=n,fj}var gue=mue();const Iz=Pt(gue);function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function xI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Cm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xI(Object(r),!0).forEach(function(n){vue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vue(t,e,r){return e=yue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yue(t){var e=xue(t,"string");return rh(e)=="symbol"?e:e+""}function xue(t,e){if(rh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bue(t,e){return Sue(t)||jue(t,e)||_ue(t,e)||wue()}function wue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ue(t,e){if(t){if(typeof t=="string")return bI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bI(t,e)}}function bI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jue(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Sue(t){if(Array.isArray(t))return t}var Ig=w.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=t.width,a=i===void 0?"100%":i,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,f=d===void 0?0:d,p=t.minHeight,m=t.maxHeight,g=t.children,y=t.debounce,b=y===void 0?0:y,x=t.id,j=t.className,S=t.onResize,C=t.style,E=C===void 0?{}:C,N=w.useRef(null),P=w.useRef();P.current=S,w.useImperativeHandle(e,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var O=w.useState({containerWidth:s.width,containerHeight:s.height}),L=bue(O,2),A=L[0],R=L[1],M=w.useCallback(function(B,F){R(function(V){var J=Math.round(B),G=Math.round(F);return V.containerWidth===J&&V.containerHeight===G?V:{containerWidth:J,containerHeight:G}})},[]);w.useEffect(function(){var B=function(U){var W,I=U[0].contentRect,H=I.width,ne=I.height;M(H,ne),(W=P.current)===null||W===void 0||W.call(P,H,ne)};b>0&&(B=Iz(B,b,{trailing:!0,leading:!1}));var F=new ResizeObserver(B),V=N.current.getBoundingClientRect(),J=V.width,G=V.height;return M(J,G),F.observe(N.current),function(){F.disconnect()}},[M,b]);var D=w.useMemo(function(){var B=A.containerWidth,F=A.containerHeight;if(B<0||F<0)return null;ri(ol(a)||ol(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),ri(!r||r>0,"The aspect(%s) must be greater than zero.",r);var V=ol(a)?B:a,J=ol(c)?F:c;r&&r>0&&(V?J=V/r:J&&(V=J*r),m&&J>m&&(J=m)),ri(V>0||J>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,J,a,c,f,p,r);var G=!Array.isArray(g)&&sa(g.type).endsWith("Chart");return z.Children.map(g,function(q){return z.isValidElement(q)?w.cloneElement(q,Cm({width:V,height:J},G?{style:Cm({height:"100%",width:"100%",maxHeight:J,maxWidth:V},q.props.style)}:{})):q})},[r,g,c,m,p,f,A,a]);return z.createElement("div",{id:x?"".concat(x):void 0,className:st("recharts-responsive-container",j),style:Cm(Cm({},E),{},{width:a,height:c,minWidth:f,minHeight:p,maxHeight:m}),ref:N},D)}),Zh=function(e){return null};Zh.displayName="Cell";function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}function wI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function NS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wI(Object(r),!0).forEach(function(n){Nue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nue(t,e,r){return e=Eue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Eue(t){var e=Cue(t,"string");return nh(e)=="symbol"?e:e+""}function Cue(t,e){if(nh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fc={widthCache:{},cacheCount:0},kue=2e3,Pue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_I="recharts_measurement_span";function Oue(t){var e=NS({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var gf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||va.isSsr)return{width:0,height:0};var n=Oue(r),s=JSON.stringify({text:e,copyStyle:n});if(fc.widthCache[s])return fc.widthCache[s];try{var i=document.getElementById(_I);i||(i=document.createElement("span"),i.setAttribute("id",_I),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var a=NS(NS({},Pue),n);Object.assign(i.style,a),i.textContent="".concat(e);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return fc.widthCache[s]=c,++fc.cacheCount>kue&&(fc.cacheCount=0,fc.widthCache={}),c}catch{return{width:0,height:0}}},Aue=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function sh(t){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(t)}function $g(t,e){return Rue(t)||Mue(t,e)||Lue(t,e)||Tue()}function Tue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lue(t,e){if(t){if(typeof t=="string")return jI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jI(t,e)}}function jI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mue(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Rue(t){if(Array.isArray(t))return t}function Due(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$ue(n.key),n)}}function Iue(t,e,r){return e&&SI(t.prototype,e),r&&SI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ue(t){var e=Fue(t,"string");return sh(e)=="symbol"?e:e+""}function Fue(t,e){if(sh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var NI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,EI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$z={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Uue=Object.keys($z),Sc="NaN";function que(t,e){return t*$z[e]}var km=function(){function t(e,r){Due(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Bue.test(r)&&(this.num=NaN,this.unit=""),Uue.includes(r)&&(this.num=que(e,r),this.unit="px")}return Iue(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=zue.exec(r))!==null&&n!==void 0?n:[],i=$g(s,3),a=i[1],l=i[2];return new t(parseFloat(a),l??"")}}])}();function Fz(t){if(t.includes(Sc))return Sc;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=NI.exec(e))!==null&&r!==void 0?r:[],s=$g(n,4),i=s[1],a=s[2],l=s[3],c=km.parse(i??""),d=km.parse(l??""),f=a==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return Sc;e=e.replace(NI,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,m=(p=EI.exec(e))!==null&&p!==void 0?p:[],g=$g(m,4),y=g[1],b=g[2],x=g[3],j=km.parse(y??""),S=km.parse(x??""),C=b==="+"?j.add(S):j.subtract(S);if(C.isNaN())return Sc;e=e.replace(EI,C.toString())}return e}var CI=/\(([^()]*)\)/;function Vue(t){for(var e=t;e.includes("(");){var r=CI.exec(e),n=$g(r,2),s=n[1];e=e.replace(CI,Fz(s))}return e}function Wue(t){var e=t.replace(/\s+/g,"");return e=Vue(e),e=Fz(e),e}function Hue(t){try{return Wue(t)}catch{return Sc}}function hj(t){var e=Hue(t.slice(5,-1));return e===Sc?"":e}var Gue=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Kue=["dx","dy","angle","className","breakAll"];function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ES.apply(this,arguments)}function kI(t,e){if(t==null)return{};var r=Zue(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function PI(t,e){return Que(t)||Jue(t,e)||Yue(t,e)||Xue()}function Xue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yue(t,e){if(t){if(typeof t=="string")return OI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OI(t,e)}}function OI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jue(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Que(t){if(Array.isArray(t))return t}var Bz=/[ \f\n\r\t\v\u2028\u2029]+/,zz=function(e){var r=e.children,n=e.breakAll,s=e.style;try{var i=[];Xe(r)||(n?i=r.toString().split(""):i=r.toString().split(Bz));var a=i.map(function(c){return{word:c,width:gf(c,s).width}}),l=n?0:gf(" ",s).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}},ede=function(e,r,n,s,i){var a=e.maxLines,l=e.children,c=e.style,d=e.breakAll,f=Ne(a),p=l,m=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(J,G){var q=G.word,U=G.width,W=J[J.length-1];if(W&&(s==null||i||W.width+U+n<Number(s)))W.words.push(q),W.width+=U+n;else{var I={words:[q],width:U};J.push(I)}return J},[])},g=m(r),y=function(V){return V.reduce(function(J,G){return J.width>G.width?J:G})};if(!f)return g;for(var b="…",x=function(V){var J=p.slice(0,V),G=zz({breakAll:d,style:c,children:J+b}).wordsWithComputedWidth,q=m(G),U=q.length>a||y(q).width>Number(s);return[U,q]},j=0,S=p.length-1,C=0,E;j<=S&&C<=p.length-1;){var N=Math.floor((j+S)/2),P=N-1,O=x(P),L=PI(O,2),A=L[0],R=L[1],M=x(N),D=PI(M,1),B=D[0];if(!A&&!B&&(j=N+1),A&&B&&(S=N-1),!A&&B){E=R;break}C++}return E||g},AI=function(e){var r=Xe(e)?[]:e.toString().split(Bz);return[{words:r}]},tde=function(e){var r=e.width,n=e.scaleToFit,s=e.children,i=e.style,a=e.breakAll,l=e.maxLines;if((r||n)&&!va.isSsr){var c,d,f=zz({breakAll:a,children:s,style:i});if(f){var p=f.wordsWithComputedWidth,m=f.spaceWidth;c=p,d=m}else return AI(s);return ede({breakAll:a,children:s,maxLines:l,style:i},c,d,r,n)}return AI(s)},TI="#808080",jl=function(e){var r=e.x,n=r===void 0?0:r,s=e.y,i=s===void 0?0:s,a=e.lineHeight,l=a===void 0?"1em":a,c=e.capHeight,d=c===void 0?"0.71em":c,f=e.scaleToFit,p=f===void 0?!1:f,m=e.textAnchor,g=m===void 0?"start":m,y=e.verticalAnchor,b=y===void 0?"end":y,x=e.fill,j=x===void 0?TI:x,S=kI(e,Gue),C=w.useMemo(function(){return tde({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:p,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,p,S.style,S.width]),E=S.dx,N=S.dy,P=S.angle,O=S.className,L=S.breakAll,A=kI(S,Kue);if(!Mr(n)||!Mr(i))return null;var R=n+(Ne(E)?E:0),M=i+(Ne(N)?N:0),D;switch(b){case"start":D=hj("calc(".concat(d,")"));break;case"middle":D=hj("calc(".concat((C.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:D=hj("calc(".concat(C.length-1," * -").concat(l,")"));break}var B=[];if(p){var F=C[0].width,V=S.width;B.push("scale(".concat((Ne(V)?V/F:1)/F,")"))}return P&&B.push("rotate(".concat(P,", ").concat(R,", ").concat(M,")")),B.length&&(A.transform=B.join(" ")),z.createElement("text",ES({},Ue(A,!0),{x:R,y:M,className:st("recharts-text",O),textAnchor:g,fill:j.includes("url")?TI:j}),C.map(function(J,G){var q=J.words.join(L?"":" ");return z.createElement("tspan",{x:R,dy:G===0?D:l,key:"".concat(q,"-").concat(G)},q)}))};function oo(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rde(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cC(t){let e,r,n;t.length!==2?(e=oo,r=(l,c)=>oo(t(l),c),n=(l,c)=>t(l)-c):(e=t===oo||t===rde?t:nde,r=t,n=t);function s(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;r(l[p],c)<0?d=p+1:f=p}while(d<f)}return d}function i(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;r(l[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function a(l,c,d=0,f=l.length){const p=s(l,c,d,f-1);return p>d&&n(l[p-1],c)>-n(l[p],c)?p-1:p}return{left:s,center:a,right:i}}function nde(){return 0}function Uz(t){return t===null?NaN:+t}function*sde(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const ide=cC(oo),Xh=ide.right;cC(Uz).center;class LI extends Map{constructor(e,r=lde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(MI(this,e))}has(e){return super.has(MI(this,e))}set(e,r){return super.set(ade(this,e),r)}delete(e){return super.delete(ode(this,e))}}function MI({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function ade({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function ode({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function lde(t){return t!==null&&typeof t=="object"?t.valueOf():t}function cde(t=oo){if(t===oo)return qz;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function qz(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ude=Math.sqrt(50),dde=Math.sqrt(10),fde=Math.sqrt(2);function Fg(t,e,r){const n=(e-t)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),a=i>=ude?10:i>=dde?5:i>=fde?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/a,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,s)*a,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=r&&r<2?Fg(t,e,r*2):[l,c,d]}function CS(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[s,i,a]=n?Fg(e,t,r):Fg(t,e,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(a<0)for(let d=0;d<l;++d)c[d]=(i-d)/-a;else for(let d=0;d<l;++d)c[d]=(i-d)*a;else if(a<0)for(let d=0;d<l;++d)c[d]=(s+d)/-a;else for(let d=0;d<l;++d)c[d]=(s+d)*a;return c}function kS(t,e,r){return e=+e,t=+t,r=+r,Fg(t,e,r)[2]}function PS(t,e,r){e=+e,t=+t,r=+r;const n=e<t,s=n?kS(e,t,r):kS(t,e,r);return(n?-1:1)*(s<0?1/-s:s)}function RI(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function DI(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Vz(t,e,r=0,n=1/0,s){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(s=s===void 0?qz:cde(s);n>r;){if(n-r>600){const c=n-r+1,d=e-r+1,f=Math.log(c),p=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),g=Math.max(r,Math.floor(e-d*p/c+m)),y=Math.min(n,Math.floor(e+(c-d)*p/c+m));Vz(t,e,g,y,s)}const i=t[e];let a=r,l=n;for(Id(t,r,e),s(t[n],i)>0&&Id(t,r,n);a<l;){for(Id(t,a,l),++a,--l;s(t[a],i)<0;)++a;for(;s(t[l],i)>0;)--l}s(t[r],i)===0?Id(t,r,l):(++l,Id(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Id(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function hde(t,e,r){if(t=Float64Array.from(sde(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return DI(t);if(e>=1)return RI(t);var n,s=(n-1)*e,i=Math.floor(s),a=RI(Vz(t,i).subarray(0,i+1)),l=DI(t.subarray(i+1));return a+(l-a)*(s-i)}}function pde(t,e,r=Uz){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,s=(n-1)*e,i=Math.floor(s),a=+r(t[i],i,t),l=+r(t[i+1],i+1,t);return a+(l-a)*(s-i)}}function mde(t,e,r){t=+t,e=+e,r=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(s);++n<s;)i[n]=t+n*r;return i}function As(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ya(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const OS=Symbol("implicit");function uC(){var t=new LI,e=[],r=[],n=OS;function s(i){let a=t.get(i);if(a===void 0){if(n!==OS)return n;t.set(i,a=e.push(i)-1)}return r[a%r.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new LI;for(const a of i)t.has(a)||t.set(a,e.push(a)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return uC(e,r).unknown(n)},As.apply(s,arguments),s}function ih(){var t=uC().unknown(void 0),e=t.domain,r=t.range,n=0,s=1,i,a,l=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var m=e().length,g=s<n,y=g?s:n,b=g?n:s;i=(b-y)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),y+=(b-y-i*(m-c))*f,a=i*(1-c),l&&(y=Math.round(y),a=Math.round(a));var x=mde(m).map(function(j){return y+i*j});return r(g?x.reverse():x)}return t.domain=function(m){return arguments.length?(e(m),p()):e()},t.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,p()):[n,s]},t.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,p()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(m){return arguments.length?(l=!!m,p()):l},t.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),p()):c},t.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),p()):c},t.paddingOuter=function(m){return arguments.length?(d=+m,p()):d},t.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),p()):f},t.copy=function(){return ih(e(),[n,s]).round(l).paddingInner(c).paddingOuter(d).align(f)},As.apply(p(),arguments)}function Wz(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Wz(e())},t}function vf(){return Wz(ih.apply(null,arguments).paddingInner(1))}function dC(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Hz(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Yh(){}var ah=.7,Bg=1/ah,Ic="\\s*([+-]?\\d+)\\s*",oh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gde=/^#([0-9a-f]{3,8})$/,vde=new RegExp(`^rgb\\(${Ic},${Ic},${Ic}\\)$`),yde=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),xde=new RegExp(`^rgba\\(${Ic},${Ic},${Ic},${oh}\\)$`),bde=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${oh}\\)$`),wde=new RegExp(`^hsl\\(${oh},${Ni},${Ni}\\)$`),_de=new RegExp(`^hsla\\(${oh},${Ni},${Ni},${oh}\\)$`),II={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dC(Yh,lh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$I,formatHex:$I,formatHex8:jde,formatHsl:Sde,formatRgb:FI,toString:FI});function $I(){return this.rgb().formatHex()}function jde(){return this.rgb().formatHex8()}function Sde(){return Gz(this).formatHsl()}function FI(){return this.rgb().formatRgb()}function lh(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=gde.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?BI(e):r===3?new Mn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Pm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Pm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vde.exec(t))?new Mn(e[1],e[2],e[3],1):(e=yde.exec(t))?new Mn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xde.exec(t))?Pm(e[1],e[2],e[3],e[4]):(e=bde.exec(t))?Pm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wde.exec(t))?qI(e[1],e[2]/100,e[3]/100,1):(e=_de.exec(t))?qI(e[1],e[2]/100,e[3]/100,e[4]):II.hasOwnProperty(t)?BI(II[t]):t==="transparent"?new Mn(NaN,NaN,NaN,0):null}function BI(t){return new Mn(t>>16&255,t>>8&255,t&255,1)}function Pm(t,e,r,n){return n<=0&&(t=e=r=NaN),new Mn(t,e,r,n)}function Nde(t){return t instanceof Yh||(t=lh(t)),t?(t=t.rgb(),new Mn(t.r,t.g,t.b,t.opacity)):new Mn}function AS(t,e,r,n){return arguments.length===1?Nde(t):new Mn(t,e,r,n??1)}function Mn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}dC(Mn,AS,Hz(Yh,{brighter(t){return t=t==null?Bg:Math.pow(Bg,t),new Mn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ah:Math.pow(ah,t),new Mn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mn(gl(this.r),gl(this.g),gl(this.b),zg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zI,formatHex:zI,formatHex8:Ede,formatRgb:UI,toString:UI}));function zI(){return`#${ll(this.r)}${ll(this.g)}${ll(this.b)}`}function Ede(){return`#${ll(this.r)}${ll(this.g)}${ll(this.b)}${ll((isNaN(this.opacity)?1:this.opacity)*255)}`}function UI(){const t=zg(this.opacity);return`${t===1?"rgb(":"rgba("}${gl(this.r)}, ${gl(this.g)}, ${gl(this.b)}${t===1?")":`, ${t})`}`}function zg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function gl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ll(t){return t=gl(t),(t<16?"0":"")+t.toString(16)}function qI(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ys(t,e,r,n)}function Gz(t){if(t instanceof Ys)return new Ys(t.h,t.s,t.l,t.opacity);if(t instanceof Yh||(t=lh(t)),!t)return new Ys;if(t instanceof Ys)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),i=Math.max(e,r,n),a=NaN,l=i-s,c=(i+s)/2;return l?(e===i?a=(r-n)/l+(r<n)*6:r===i?a=(n-e)/l+2:a=(e-r)/l+4,l/=c<.5?i+s:2-i-s,a*=60):l=c>0&&c<1?0:a,new Ys(a,l,c,t.opacity)}function Cde(t,e,r,n){return arguments.length===1?Gz(t):new Ys(t,e,r,n??1)}function Ys(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}dC(Ys,Cde,Hz(Yh,{brighter(t){return t=t==null?Bg:Math.pow(Bg,t),new Ys(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ah:Math.pow(ah,t),new Ys(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new Mn(pj(t>=240?t-240:t+120,s,n),pj(t,s,n),pj(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Ys(VI(this.h),Om(this.s),Om(this.l),zg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zg(this.opacity);return`${t===1?"hsl(":"hsla("}${VI(this.h)}, ${Om(this.s)*100}%, ${Om(this.l)*100}%${t===1?")":`, ${t})`}`}}));function VI(t){return t=(t||0)%360,t<0?t+360:t}function Om(t){return Math.max(0,Math.min(1,t||0))}function pj(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const fC=t=>()=>t;function kde(t,e){return function(r){return t+r*e}}function Pde(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Ode(t){return(t=+t)==1?Kz:function(e,r){return r-e?Pde(e,r,t):fC(isNaN(e)?r:e)}}function Kz(t,e){var r=e-t;return r?kde(t,r):fC(isNaN(t)?e:t)}const WI=function t(e){var r=Ode(e);function n(s,i){var a=r((s=AS(s)).r,(i=AS(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=Kz(s.opacity,i.opacity);return function(f){return s.r=a(f),s.g=l(f),s.b=c(f),s.opacity=d(f),s+""}}return n.gamma=t,n}(1);function Ade(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=t[s]*(1-i)+e[s]*i;return n}}function Tde(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lde(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,s=new Array(n),i=new Array(r),a;for(a=0;a<n;++a)s[a]=Du(t[a],e[a]);for(;a<r;++a)i[a]=e[a];return function(l){for(a=0;a<n;++a)i[a]=s[a](l);return i}}function Mde(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Ug(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Rde(t,e){var r={},n={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?r[s]=Du(t[s],e[s]):n[s]=e[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var TS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mj=new RegExp(TS.source,"g");function Dde(t){return function(){return t}}function Ide(t){return function(e){return t(e)+""}}function $de(t,e){var r=TS.lastIndex=mj.lastIndex=0,n,s,i,a=-1,l=[],c=[];for(t=t+"",e=e+"";(n=TS.exec(t))&&(s=mj.exec(e));)(i=s.index)>r&&(i=e.slice(r,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,c.push({i:a,x:Ug(n,s)})),r=mj.lastIndex;return r<e.length&&(i=e.slice(r),l[a]?l[a]+=i:l[++a]=i),l.length<2?c[0]?Ide(c[0].x):Dde(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(d);return l.join("")})}function Du(t,e){var r=typeof e,n;return e==null||r==="boolean"?fC(e):(r==="number"?Ug:r==="string"?(n=lh(e))?(e=n,WI):$de:e instanceof lh?WI:e instanceof Date?Mde:Tde(e)?Ade:Array.isArray(e)?Lde:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Rde:Ug)(t,e)}function hC(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Fde(t,e){e===void 0&&(e=t,t=Du);for(var r=0,n=e.length-1,s=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(s,s=e[++r]);return function(a){var l=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return i[l](a-l)}}function Bde(t){return function(){return t}}function qg(t){return+t}var HI=[0,1];function jn(t){return t}function LS(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Bde(isNaN(e)?NaN:.5)}function zde(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Ude(t,e,r){var n=t[0],s=t[1],i=e[0],a=e[1];return s<n?(n=LS(s,n),i=r(a,i)):(n=LS(n,s),i=r(i,a)),function(l){return i(n(l))}}function qde(t,e,r){var n=Math.min(t.length,e.length)-1,s=new Array(n),i=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)s[a]=LS(t[a],t[a+1]),i[a]=r(e[a],e[a+1]);return function(l){var c=Xh(t,l,1,n)-1;return i[c](s[c](l))}}function Jh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cy(){var t=HI,e=HI,r=Du,n,s,i,a=jn,l,c,d;function f(){var m=Math.min(t.length,e.length);return a!==jn&&(a=zde(t[0],t[m-1])),l=m>2?qde:Ude,c=d=null,p}function p(m){return m==null||isNaN(m=+m)?i:(c||(c=l(t.map(n),e,r)))(n(a(m)))}return p.invert=function(m){return a(s((d||(d=l(e,t.map(n),Ug)))(m)))},p.domain=function(m){return arguments.length?(t=Array.from(m,qg),f()):t.slice()},p.range=function(m){return arguments.length?(e=Array.from(m),f()):e.slice()},p.rangeRound=function(m){return e=Array.from(m),r=hC,f()},p.clamp=function(m){return arguments.length?(a=m?!0:jn,f()):a!==jn},p.interpolate=function(m){return arguments.length?(r=m,f()):r},p.unknown=function(m){return arguments.length?(i=m,p):i},function(m,g){return n=m,s=g,f()}}function pC(){return cy()(jn,jn)}function Vde(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vg(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function eu(t){return t=Vg(Math.abs(t)),t?t[1]:NaN}function Wde(t,e){return function(r,n){for(var s=r.length,i=[],a=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=t[a=(a+1)%t.length];return i.reverse().join(e)}}function Hde(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Gde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ch(t){if(!(e=Gde.exec(t)))throw new Error("invalid format: "+t);var e;return new mC({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ch.prototype=mC.prototype;function mC(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kde(t){e:for(var e=t.length,r=1,n=-1,s;r<e;++r)switch(t[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(s+1):t}var Zz;function Zde(t,e){var r=Vg(t,e);if(!r)return t+"";var n=r[0],s=r[1],i=s-(Zz=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=n.length;return i===a?n:i>a?n+new Array(i-a+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Vg(t,Math.max(0,e+i-1))[0]}function GI(t,e){var r=Vg(t,e);if(!r)return t+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const KI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Vde,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>GI(t*100,e),r:GI,s:Zde,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ZI(t){return t}var XI=Array.prototype.map,YI=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Xde(t){var e=t.grouping===void 0||t.thousands===void 0?ZI:Wde(XI.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?ZI:Hde(XI.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=ch(p);var m=p.fill,g=p.align,y=p.sign,b=p.symbol,x=p.zero,j=p.width,S=p.comma,C=p.precision,E=p.trim,N=p.type;N==="n"?(S=!0,N="g"):KI[N]||(C===void 0&&(C=12),E=!0,N="g"),(x||m==="0"&&g==="=")&&(x=!0,m="0",g="=");var P=b==="$"?r:b==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",O=b==="$"?n:/[%p]/.test(N)?a:"",L=KI[N],A=/[defgprs%]/.test(N);C=C===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function R(M){var D=P,B=O,F,V,J;if(N==="c")B=L(M)+B,M="";else{M=+M;var G=M<0||1/M<0;if(M=isNaN(M)?c:L(Math.abs(M),C),E&&(M=Kde(M)),G&&+M==0&&y!=="+"&&(G=!1),D=(G?y==="("?y:l:y==="-"||y==="("?"":y)+D,B=(N==="s"?YI[8+Zz/3]:"")+B+(G&&y==="("?")":""),A){for(F=-1,V=M.length;++F<V;)if(J=M.charCodeAt(F),48>J||J>57){B=(J===46?s+M.slice(F+1):M.slice(F))+B,M=M.slice(0,F);break}}}S&&!x&&(M=e(M,1/0));var q=D.length+M.length+B.length,U=q<j?new Array(j-q+1).join(m):"";switch(S&&x&&(M=e(U+M,U.length?j-B.length:1/0),U=""),g){case"<":M=D+M+B+U;break;case"=":M=D+U+M+B;break;case"^":M=U.slice(0,q=U.length>>1)+D+M+B+U.slice(q);break;default:M=U+D+M+B;break}return i(M)}return R.toString=function(){return p+""},R}function f(p,m){var g=d((p=ch(p),p.type="f",p)),y=Math.max(-8,Math.min(8,Math.floor(eu(m)/3)))*3,b=Math.pow(10,-y),x=YI[8+y/3];return function(j){return g(b*j)+x}}return{format:d,formatPrefix:f}}var Am,gC,Xz;Yde({thousands:",",grouping:[3],currency:["$",""]});function Yde(t){return Am=Xde(t),gC=Am.format,Xz=Am.formatPrefix,Am}function Jde(t){return Math.max(0,-eu(Math.abs(t)))}function Qde(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(eu(e)/3)))*3-eu(Math.abs(t)))}function efe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,eu(e)-eu(t))+1}function Yz(t,e,r,n){var s=PS(t,e,r),i;switch(n=ch(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=Qde(s,a))&&(n.precision=i),Xz(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=efe(s,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Jde(s))&&(n.precision=i-(n.type==="%")*2);break}}return gC(n)}function ko(t){var e=t.domain;return t.ticks=function(r){var n=e();return CS(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var s=e();return Yz(s[0],s[s.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),s=0,i=n.length-1,a=n[s],l=n[i],c,d,f=10;for(l<a&&(d=a,a=l,l=d,d=s,s=i,i=d);f-- >0;){if(d=kS(a,l,r),d===c)return n[s]=a,n[i]=l,e(n);if(d>0)a=Math.floor(a/d)*d,l=Math.ceil(l/d)*d;else if(d<0)a=Math.ceil(a*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Wg(){var t=pC();return t.copy=function(){return Jh(t,Wg())},As.apply(t,arguments),ko(t)}function Jz(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,qg),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Jz(t).unknown(e)},t=arguments.length?Array.from(t,qg):[0,1],ko(r)}function Qz(t,e){t=t.slice();var r=0,n=t.length-1,s=t[r],i=t[n],a;return i<s&&(a=r,r=n,n=a,a=s,s=i,i=a),t[r]=e.floor(s),t[n]=e.ceil(i),t}function JI(t){return Math.log(t)}function QI(t){return Math.exp(t)}function tfe(t){return-Math.log(-t)}function rfe(t){return-Math.exp(-t)}function nfe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function sfe(t){return t===10?nfe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ife(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function e$(t){return(e,r)=>-t(-e,r)}function vC(t){const e=t(JI,QI),r=e.domain;let n=10,s,i;function a(){return s=ife(n),i=sfe(n),r()[0]<0?(s=e$(s),i=e$(i),t(tfe,rfe)):t(JI,QI),e}return e.base=function(l){return arguments.length?(n=+l,a()):n},e.domain=function(l){return arguments.length?(r(l),a()):r()},e.ticks=l=>{const c=r();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let m=s(d),g=s(f),y,b;const x=l==null?10:+l;let j=[];if(!(n%1)&&g-m<x){if(m=Math.floor(m),g=Math.ceil(g),d>0){for(;m<=g;++m)for(y=1;y<n;++y)if(b=m<0?y/i(-m):y*i(m),!(b<d)){if(b>f)break;j.push(b)}}else for(;m<=g;++m)for(y=n-1;y>=1;--y)if(b=m>0?y/i(-m):y*i(m),!(b<d)){if(b>f)break;j.push(b)}j.length*2<x&&(j=CS(d,f,x))}else j=CS(m,g,Math.min(g-m,x)).map(i);return p?j.reverse():j},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=ch(c)).precision==null&&(c.trim=!0),c=gC(c)),l===1/0)return c;const d=Math.max(1,n*l/e.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=d?c(f):""}},e.nice=()=>r(Qz(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),e}function eU(){const t=vC(cy()).domain([1,10]);return t.copy=()=>Jh(t,eU()).base(t.base()),As.apply(t,arguments),t}function t$(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function r$(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function yC(t){var e=1,r=t(t$(e),r$(e));return r.constant=function(n){return arguments.length?t(t$(e=+n),r$(e)):e},ko(r)}function tU(){var t=yC(cy());return t.copy=function(){return Jh(t,tU()).constant(t.constant())},As.apply(t,arguments)}function n$(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function afe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ofe(t){return t<0?-t*t:t*t}function xC(t){var e=t(jn,jn),r=1;function n(){return r===1?t(jn,jn):r===.5?t(afe,ofe):t(n$(r),n$(1/r))}return e.exponent=function(s){return arguments.length?(r=+s,n()):r},ko(e)}function bC(){var t=xC(cy());return t.copy=function(){return Jh(t,bC()).exponent(t.exponent())},As.apply(t,arguments),t}function lfe(){return bC.apply(null,arguments).exponent(.5)}function s$(t){return Math.sign(t)*t*t}function cfe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function rU(){var t=pC(),e=[0,1],r=!1,n;function s(i){var a=cfe(t(i));return isNaN(a)?n:r?Math.round(a):a}return s.invert=function(i){return t.invert(s$(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,qg)).map(s$)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return rU(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},As.apply(s,arguments),ko(s)}function nU(){var t=[],e=[],r=[],n;function s(){var a=0,l=Math.max(1,e.length);for(r=new Array(l-1);++a<l;)r[a-1]=pde(t,a/l);return i}function i(a){return a==null||isNaN(a=+a)?n:e[Xh(r,a)]}return i.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},i.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(oo),s()},i.range=function(a){return arguments.length?(e=Array.from(a),s()):e.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return nU().domain(t).range(e).unknown(n)},As.apply(i,arguments)}function sU(){var t=0,e=1,r=1,n=[.5],s=[0,1],i;function a(c){return c!=null&&c<=c?s[Xh(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},a.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},a.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=r?[n[r-1],e]:[n[d-1],n[d]]},a.unknown=function(c){return arguments.length&&(i=c),a},a.thresholds=function(){return n.slice()},a.copy=function(){return sU().domain([t,e]).range(s).unknown(i)},As.apply(ko(a),arguments)}function iU(){var t=[.5],e=[0,1],r,n=1;function s(i){return i!=null&&i<=i?e[Xh(t,i,0,n)]:r}return s.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var a=e.indexOf(i);return[t[a-1],t[a]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return iU().domain(t).range(e).unknown(r)},As.apply(s,arguments)}const gj=new Date,vj=new Date;function Dr(t,e,r,n){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const a=s(i),l=s.ceil(i);return i-a<l-i?a:l},s.offset=(i,a)=>(e(i=new Date(+i),a==null?1:Math.floor(a)),i),s.range=(i,a,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<a)||!(l>0))return c;let d;do c.push(d=new Date(+i)),e(i,l),t(i);while(d<i&&i<a);return c},s.filter=i=>Dr(a=>{if(a>=a)for(;t(a),!i(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!i(a););else for(;--l>=0;)for(;e(a,1),!i(a););}),r&&(s.count=(i,a)=>(gj.setTime(+i),vj.setTime(+a),t(gj),t(vj),Math.floor(r(gj,vj))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?a=>n(a)%i===0:a=>s.count(0,a)%i===0):s)),s}const Hg=Dr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Hg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Dr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Hg);Hg.range;const Qi=1e3,ks=Qi*60,ea=ks*60,ca=ea*24,wC=ca*7,i$=ca*30,yj=ca*365,cl=Dr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Qi)},(t,e)=>(e-t)/Qi,t=>t.getUTCSeconds());cl.range;const _C=Dr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Qi)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getMinutes());_C.range;const jC=Dr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getUTCMinutes());jC.range;const SC=Dr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Qi-t.getMinutes()*ks)},(t,e)=>{t.setTime(+t+e*ea)},(t,e)=>(e-t)/ea,t=>t.getHours());SC.range;const NC=Dr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ea)},(t,e)=>(e-t)/ea,t=>t.getUTCHours());NC.range;const Qh=Dr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ks)/ca,t=>t.getDate()-1);Qh.range;const uy=Dr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ca,t=>t.getUTCDate()-1);uy.range;const aU=Dr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ca,t=>Math.floor(t/ca));aU.range;function Al(t){return Dr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ks)/wC)}const dy=Al(0),Gg=Al(1),ufe=Al(2),dfe=Al(3),tu=Al(4),ffe=Al(5),hfe=Al(6);dy.range;Gg.range;ufe.range;dfe.range;tu.range;ffe.range;hfe.range;function Tl(t){return Dr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/wC)}const fy=Tl(0),Kg=Tl(1),pfe=Tl(2),mfe=Tl(3),ru=Tl(4),gfe=Tl(5),vfe=Tl(6);fy.range;Kg.range;pfe.range;mfe.range;ru.range;gfe.range;vfe.range;const EC=Dr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());EC.range;const CC=Dr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());CC.range;const ua=Dr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ua.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ua.range;const da=Dr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());da.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});da.range;function oU(t,e,r,n,s,i){const a=[[cl,1,Qi],[cl,5,5*Qi],[cl,15,15*Qi],[cl,30,30*Qi],[i,1,ks],[i,5,5*ks],[i,15,15*ks],[i,30,30*ks],[s,1,ea],[s,3,3*ea],[s,6,6*ea],[s,12,12*ea],[n,1,ca],[n,2,2*ca],[r,1,wC],[e,1,i$],[e,3,3*i$],[t,1,yj]];function l(d,f,p){const m=f<d;m&&([d,f]=[f,d]);const g=p&&typeof p.range=="function"?p:c(d,f,p),y=g?g.range(d,+f+1):[];return m?y.reverse():y}function c(d,f,p){const m=Math.abs(f-d)/p,g=cC(([,,x])=>x).right(a,m);if(g===a.length)return t.every(PS(d/yj,f/yj,p));if(g===0)return Hg.every(Math.max(PS(d,f,p),1));const[y,b]=a[m/a[g-1][2]<a[g][2]/m?g-1:g];return y.every(b)}return[l,c]}const[yfe,xfe]=oU(da,CC,fy,aU,NC,jC),[bfe,wfe]=oU(ua,EC,dy,Qh,SC,_C);function xj(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bj(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $d(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function _fe(t){var e=t.dateTime,r=t.date,n=t.time,s=t.periods,i=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,d=Fd(s),f=Bd(s),p=Fd(i),m=Bd(i),g=Fd(a),y=Bd(a),b=Fd(l),x=Bd(l),j=Fd(c),S=Bd(c),C={a:G,A:q,b:U,B:W,c:null,d:d$,e:d$,f:Wfe,g:the,G:nhe,H:Ufe,I:qfe,j:Vfe,L:lU,m:Hfe,M:Gfe,p:I,q:H,Q:p$,s:m$,S:Kfe,u:Zfe,U:Xfe,V:Yfe,w:Jfe,W:Qfe,x:null,X:null,y:ehe,Y:rhe,Z:she,"%":h$},E={a:ne,A:ge,b:K,B:de,c:null,d:f$,e:f$,f:lhe,g:yhe,G:bhe,H:ihe,I:ahe,j:ohe,L:uU,m:che,M:uhe,p:ue,q:he,Q:p$,s:m$,S:dhe,u:fhe,U:hhe,V:phe,w:mhe,W:ghe,x:null,X:null,y:vhe,Y:xhe,Z:whe,"%":h$},N={a:R,A:M,b:D,B,c:F,d:c$,e:c$,f:$fe,g:l$,G:o$,H:u$,I:u$,j:Mfe,L:Ife,m:Lfe,M:Rfe,p:A,q:Tfe,Q:Bfe,s:zfe,S:Dfe,u:Cfe,U:kfe,V:Pfe,w:Efe,W:Ofe,x:V,X:J,y:l$,Y:o$,Z:Afe,"%":Ffe};C.x=P(r,C),C.X=P(n,C),C.c=P(e,C),E.x=P(r,E),E.X=P(n,E),E.c=P(e,E);function P(ce,te){return function(pe){var ae=[],Oe=-1,Ee=0,ke=ce.length,We,St,fr;for(pe instanceof Date||(pe=new Date(+pe));++Oe<ke;)ce.charCodeAt(Oe)===37&&(ae.push(ce.slice(Ee,Oe)),(St=a$[We=ce.charAt(++Oe)])!=null?We=ce.charAt(++Oe):St=We==="e"?" ":"0",(fr=te[We])&&(We=fr(pe,St)),ae.push(We),Ee=Oe+1);return ae.push(ce.slice(Ee,Oe)),ae.join("")}}function O(ce,te){return function(pe){var ae=$d(1900,void 0,1),Oe=L(ae,ce,pe+="",0),Ee,ke;if(Oe!=pe.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(te&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(Ee=bj($d(ae.y,0,1)),ke=Ee.getUTCDay(),Ee=ke>4||ke===0?Kg.ceil(Ee):Kg(Ee),Ee=uy.offset(Ee,(ae.V-1)*7),ae.y=Ee.getUTCFullYear(),ae.m=Ee.getUTCMonth(),ae.d=Ee.getUTCDate()+(ae.w+6)%7):(Ee=xj($d(ae.y,0,1)),ke=Ee.getDay(),Ee=ke>4||ke===0?Gg.ceil(Ee):Gg(Ee),Ee=Qh.offset(Ee,(ae.V-1)*7),ae.y=Ee.getFullYear(),ae.m=Ee.getMonth(),ae.d=Ee.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),ke="Z"in ae?bj($d(ae.y,0,1)).getUTCDay():xj($d(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(ke+5)%7:ae.w+ae.U*7-(ke+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,bj(ae)):xj(ae)}}function L(ce,te,pe,ae){for(var Oe=0,Ee=te.length,ke=pe.length,We,St;Oe<Ee;){if(ae>=ke)return-1;if(We=te.charCodeAt(Oe++),We===37){if(We=te.charAt(Oe++),St=N[We in a$?te.charAt(Oe++):We],!St||(ae=St(ce,pe,ae))<0)return-1}else if(We!=pe.charCodeAt(ae++))return-1}return ae}function A(ce,te,pe){var ae=d.exec(te.slice(pe));return ae?(ce.p=f.get(ae[0].toLowerCase()),pe+ae[0].length):-1}function R(ce,te,pe){var ae=g.exec(te.slice(pe));return ae?(ce.w=y.get(ae[0].toLowerCase()),pe+ae[0].length):-1}function M(ce,te,pe){var ae=p.exec(te.slice(pe));return ae?(ce.w=m.get(ae[0].toLowerCase()),pe+ae[0].length):-1}function D(ce,te,pe){var ae=j.exec(te.slice(pe));return ae?(ce.m=S.get(ae[0].toLowerCase()),pe+ae[0].length):-1}function B(ce,te,pe){var ae=b.exec(te.slice(pe));return ae?(ce.m=x.get(ae[0].toLowerCase()),pe+ae[0].length):-1}function F(ce,te,pe){return L(ce,e,te,pe)}function V(ce,te,pe){return L(ce,r,te,pe)}function J(ce,te,pe){return L(ce,n,te,pe)}function G(ce){return a[ce.getDay()]}function q(ce){return i[ce.getDay()]}function U(ce){return c[ce.getMonth()]}function W(ce){return l[ce.getMonth()]}function I(ce){return s[+(ce.getHours()>=12)]}function H(ce){return 1+~~(ce.getMonth()/3)}function ne(ce){return a[ce.getUTCDay()]}function ge(ce){return i[ce.getUTCDay()]}function K(ce){return c[ce.getUTCMonth()]}function de(ce){return l[ce.getUTCMonth()]}function ue(ce){return s[+(ce.getUTCHours()>=12)]}function he(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var te=P(ce+="",C);return te.toString=function(){return ce},te},parse:function(ce){var te=O(ce+="",!1);return te.toString=function(){return ce},te},utcFormat:function(ce){var te=P(ce+="",E);return te.toString=function(){return ce},te},utcParse:function(ce){var te=O(ce+="",!0);return te.toString=function(){return ce},te}}}var a$={"-":"",_:" ",0:"0"},Zr=/^\s*\d+/,jfe=/^%/,Sfe=/[\\^$*+?|[\]().{}]/g;function kt(t,e,r){var n=t<0?"-":"",s=(n?-t:t)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(e)+s:s)}function Nfe(t){return t.replace(Sfe,"\\$&")}function Fd(t){return new RegExp("^(?:"+t.map(Nfe).join("|")+")","i")}function Bd(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Efe(t,e,r){var n=Zr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Cfe(t,e,r){var n=Zr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function kfe(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Pfe(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Ofe(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function o$(t,e,r){var n=Zr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function l$(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Afe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Tfe(t,e,r){var n=Zr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Lfe(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function c$(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Mfe(t,e,r){var n=Zr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function u$(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Rfe(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Dfe(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Ife(t,e,r){var n=Zr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function $fe(t,e,r){var n=Zr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Ffe(t,e,r){var n=jfe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Bfe(t,e,r){var n=Zr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function zfe(t,e,r){var n=Zr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function d$(t,e){return kt(t.getDate(),e,2)}function Ufe(t,e){return kt(t.getHours(),e,2)}function qfe(t,e){return kt(t.getHours()%12||12,e,2)}function Vfe(t,e){return kt(1+Qh.count(ua(t),t),e,3)}function lU(t,e){return kt(t.getMilliseconds(),e,3)}function Wfe(t,e){return lU(t,e)+"000"}function Hfe(t,e){return kt(t.getMonth()+1,e,2)}function Gfe(t,e){return kt(t.getMinutes(),e,2)}function Kfe(t,e){return kt(t.getSeconds(),e,2)}function Zfe(t){var e=t.getDay();return e===0?7:e}function Xfe(t,e){return kt(dy.count(ua(t)-1,t),e,2)}function cU(t){var e=t.getDay();return e>=4||e===0?tu(t):tu.ceil(t)}function Yfe(t,e){return t=cU(t),kt(tu.count(ua(t),t)+(ua(t).getDay()===4),e,2)}function Jfe(t){return t.getDay()}function Qfe(t,e){return kt(Gg.count(ua(t)-1,t),e,2)}function ehe(t,e){return kt(t.getFullYear()%100,e,2)}function the(t,e){return t=cU(t),kt(t.getFullYear()%100,e,2)}function rhe(t,e){return kt(t.getFullYear()%1e4,e,4)}function nhe(t,e){var r=t.getDay();return t=r>=4||r===0?tu(t):tu.ceil(t),kt(t.getFullYear()%1e4,e,4)}function she(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+kt(e/60|0,"0",2)+kt(e%60,"0",2)}function f$(t,e){return kt(t.getUTCDate(),e,2)}function ihe(t,e){return kt(t.getUTCHours(),e,2)}function ahe(t,e){return kt(t.getUTCHours()%12||12,e,2)}function ohe(t,e){return kt(1+uy.count(da(t),t),e,3)}function uU(t,e){return kt(t.getUTCMilliseconds(),e,3)}function lhe(t,e){return uU(t,e)+"000"}function che(t,e){return kt(t.getUTCMonth()+1,e,2)}function uhe(t,e){return kt(t.getUTCMinutes(),e,2)}function dhe(t,e){return kt(t.getUTCSeconds(),e,2)}function fhe(t){var e=t.getUTCDay();return e===0?7:e}function hhe(t,e){return kt(fy.count(da(t)-1,t),e,2)}function dU(t){var e=t.getUTCDay();return e>=4||e===0?ru(t):ru.ceil(t)}function phe(t,e){return t=dU(t),kt(ru.count(da(t),t)+(da(t).getUTCDay()===4),e,2)}function mhe(t){return t.getUTCDay()}function ghe(t,e){return kt(Kg.count(da(t)-1,t),e,2)}function vhe(t,e){return kt(t.getUTCFullYear()%100,e,2)}function yhe(t,e){return t=dU(t),kt(t.getUTCFullYear()%100,e,2)}function xhe(t,e){return kt(t.getUTCFullYear()%1e4,e,4)}function bhe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ru(t):ru.ceil(t),kt(t.getUTCFullYear()%1e4,e,4)}function whe(){return"+0000"}function h$(){return"%"}function p$(t){return+t}function m$(t){return Math.floor(+t/1e3)}var hc,fU,hU;_he({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _he(t){return hc=_fe(t),fU=hc.format,hc.parse,hU=hc.utcFormat,hc.utcParse,hc}function jhe(t){return new Date(t)}function She(t){return t instanceof Date?+t:+new Date(+t)}function kC(t,e,r,n,s,i,a,l,c,d){var f=pC(),p=f.invert,m=f.domain,g=d(".%L"),y=d(":%S"),b=d("%I:%M"),x=d("%I %p"),j=d("%a %d"),S=d("%b %d"),C=d("%B"),E=d("%Y");function N(P){return(c(P)<P?g:l(P)<P?y:a(P)<P?b:i(P)<P?x:n(P)<P?s(P)<P?j:S:r(P)<P?C:E)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?m(Array.from(P,She)):m().map(jhe)},f.ticks=function(P){var O=m();return t(O[0],O[O.length-1],P??10)},f.tickFormat=function(P,O){return O==null?N:d(O)},f.nice=function(P){var O=m();return(!P||typeof P.range!="function")&&(P=e(O[0],O[O.length-1],P??10)),P?m(Qz(O,P)):f},f.copy=function(){return Jh(f,kC(t,e,r,n,s,i,a,l,c,d))},f}function Nhe(){return As.apply(kC(bfe,wfe,ua,EC,dy,Qh,SC,_C,cl,fU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ehe(){return As.apply(kC(yfe,xfe,da,CC,fy,uy,NC,jC,cl,hU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hy(){var t=0,e=1,r,n,s,i,a=jn,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:a(s===0?.5:(p=(i(p)-r)*s,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,r=i(t=+t),n=i(e=+e),s=r===n?0:1/(n-r),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(a=p,d):a};function f(p){return function(m){var g,y;return arguments.length?([g,y]=m,a=p(g,y),d):[a(0),a(1)]}}return d.range=f(Du),d.rangeRound=f(hC),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return i=p,r=p(t),n=p(e),s=r===n?0:1/(n-r),d}}function Po(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function pU(){var t=ko(hy()(jn));return t.copy=function(){return Po(t,pU())},ya.apply(t,arguments)}function mU(){var t=vC(hy()).domain([1,10]);return t.copy=function(){return Po(t,mU()).base(t.base())},ya.apply(t,arguments)}function gU(){var t=yC(hy());return t.copy=function(){return Po(t,gU()).constant(t.constant())},ya.apply(t,arguments)}function PC(){var t=xC(hy());return t.copy=function(){return Po(t,PC()).exponent(t.exponent())},ya.apply(t,arguments)}function Che(){return PC.apply(null,arguments).exponent(.5)}function vU(){var t=[],e=jn;function r(n){if(n!=null&&!isNaN(n=+n))return e((Xh(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let s of n)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(oo),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,s)=>e(s/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>hde(t,i/n))},r.copy=function(){return vU(e).domain(t)},ya.apply(r,arguments)}function py(){var t=0,e=.5,r=1,n=1,s,i,a,l,c,d=jn,f,p=!1,m;function g(b){return isNaN(b=+b)?m:(b=.5+((b=+f(b))-i)*(n*b<n*i?l:c),d(p?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([t,e,r]=b,s=f(t=+t),i=f(e=+e),a=f(r=+r),l=s===i?0:.5/(i-s),c=i===a?0:.5/(a-i),n=i<s?-1:1,g):[t,e,r]},g.clamp=function(b){return arguments.length?(p=!!b,g):p},g.interpolator=function(b){return arguments.length?(d=b,g):d};function y(b){return function(x){var j,S,C;return arguments.length?([j,S,C]=x,d=Fde(b,[j,S,C]),g):[d(0),d(.5),d(1)]}}return g.range=y(Du),g.rangeRound=y(hC),g.unknown=function(b){return arguments.length?(m=b,g):m},function(b){return f=b,s=b(t),i=b(e),a=b(r),l=s===i?0:.5/(i-s),c=i===a?0:.5/(a-i),n=i<s?-1:1,g}}function yU(){var t=ko(py()(jn));return t.copy=function(){return Po(t,yU())},ya.apply(t,arguments)}function xU(){var t=vC(py()).domain([.1,1,10]);return t.copy=function(){return Po(t,xU()).base(t.base())},ya.apply(t,arguments)}function bU(){var t=yC(py());return t.copy=function(){return Po(t,bU()).constant(t.constant())},ya.apply(t,arguments)}function OC(){var t=xC(py());return t.copy=function(){return Po(t,OC()).exponent(t.exponent())},ya.apply(t,arguments)}function khe(){return OC.apply(null,arguments).exponent(.5)}const g$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ih,scaleDiverging:yU,scaleDivergingLog:xU,scaleDivergingPow:OC,scaleDivergingSqrt:khe,scaleDivergingSymlog:bU,scaleIdentity:Jz,scaleImplicit:OS,scaleLinear:Wg,scaleLog:eU,scaleOrdinal:uC,scalePoint:vf,scalePow:bC,scaleQuantile:nU,scaleQuantize:sU,scaleRadial:rU,scaleSequential:pU,scaleSequentialLog:mU,scaleSequentialPow:PC,scaleSequentialQuantile:vU,scaleSequentialSqrt:Che,scaleSequentialSymlog:gU,scaleSqrt:lfe,scaleSymlog:tU,scaleThreshold:iU,scaleTime:Nhe,scaleUtc:Ehe,tickFormat:Yz},Symbol.toStringTag,{value:"Module"}));var wj,v$;function my(){if(v$)return wj;v$=1;var t=Tu();function e(r,n,s){for(var i=-1,a=r.length;++i<a;){var l=r[i],c=n(l);if(c!=null&&(d===void 0?c===c&&!t(c):s(c,d)))var d=c,f=l}return f}return wj=e,wj}var _j,y$;function wU(){if(y$)return _j;y$=1;function t(e,r){return e>r}return _j=t,_j}var jj,x$;function Phe(){if(x$)return jj;x$=1;var t=my(),e=wU(),r=Ru();function n(s){return s&&s.length?t(s,r,e):void 0}return jj=n,jj}var Ohe=Phe();const no=Pt(Ohe);var Sj,b$;function _U(){if(b$)return Sj;b$=1;function t(e,r){return e<r}return Sj=t,Sj}var Nj,w$;function Ahe(){if(w$)return Nj;w$=1;var t=my(),e=_U(),r=Ru();function n(s){return s&&s.length?t(s,r,e):void 0}return Nj=n,Nj}var The=Ahe();const gy=Pt(The);var Ej,_$;function Lhe(){if(_$)return Ej;_$=1;var t=GE(),e=Mi(),r=Oz(),n=Dn();function s(i,a){var l=n(i)?t:r;return l(i,e(a,3))}return Ej=s,Ej}var Cj,j$;function Mhe(){if(j$)return Cj;j$=1;var t=kz(),e=Lhe();function r(n,s){return t(e(n,s),1)}return Cj=r,Cj}var Rhe=Mhe();const Dhe=Pt(Rhe);var kj,S$;function Ihe(){if(S$)return kj;S$=1;var t=iC();function e(r,n){return t(r,n)}return kj=e,kj}var $he=Ihe();const xo=Pt($he);var Iu=1e9,Fhe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},TC,nr=!0,Ps="[DecimalError] ",vl=Ps+"Invalid argument: ",AC=Ps+"Exponent out of range: ",$u=Math.floor,el=Math.pow,Bhe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yn,Vr=1e7,Yt=7,jU=9007199254740991,Zg=$u(jU/Yt),$e={};$e.absoluteValue=$e.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};$e.comparedTo=$e.cmp=function(t){var e,r,n,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,s=t.d.length,e=0,r=n<s?n:s;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};$e.decimalPlaces=$e.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Yt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};$e.dividedBy=$e.div=function(t){return ia(this,new this.constructor(t))};$e.dividedToIntegerBy=$e.idiv=function(t){var e=this,r=e.constructor;return Ft(ia(e,new r(t),0,1),r.precision)};$e.equals=$e.eq=function(t){return!this.cmp(t)};$e.exponent=function(){return Cr(this)};$e.greaterThan=$e.gt=function(t){return this.cmp(t)>0};$e.greaterThanOrEqualTo=$e.gte=function(t){return this.cmp(t)>=0};$e.isInteger=$e.isint=function(){return this.e>this.d.length-2};$e.isNegative=$e.isneg=function(){return this.s<0};$e.isPositive=$e.ispos=function(){return this.s>0};$e.isZero=function(){return this.s===0};$e.lessThan=$e.lt=function(t){return this.cmp(t)<0};$e.lessThanOrEqualTo=$e.lte=function(t){return this.cmp(t)<1};$e.logarithm=$e.log=function(t){var e,r=this,n=r.constructor,s=n.precision,i=s+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Yn))throw Error(Ps+"NaN");if(r.s<1)throw Error(Ps+(r.s?"NaN":"-Infinity"));return r.eq(Yn)?new n(0):(nr=!1,e=ia(uh(r,i),uh(t,i),i),nr=!0,Ft(e,s))};$e.minus=$e.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?EU(e,t):SU(e,(t.s=-t.s,t))};$e.modulo=$e.mod=function(t){var e,r=this,n=r.constructor,s=n.precision;if(t=new n(t),!t.s)throw Error(Ps+"NaN");return r.s?(nr=!1,e=ia(r,t,0,1).times(t),nr=!0,r.minus(e)):Ft(new n(r),s)};$e.naturalExponential=$e.exp=function(){return NU(this)};$e.naturalLogarithm=$e.ln=function(){return uh(this)};$e.negated=$e.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};$e.plus=$e.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?SU(e,t):EU(e,(t.s=-t.s,t))};$e.precision=$e.sd=function(t){var e,r,n,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(vl+t);if(e=Cr(s)+1,n=s.d.length-1,r=n*Yt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};$e.squareRoot=$e.sqrt=function(){var t,e,r,n,s,i,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ps+"NaN")}for(t=Cr(l),nr=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=xi(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=$u((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(s.toString()),r=c.precision,s=a=r+3;;)if(i=n,n=i.plus(ia(l,i,a+2)).times(.5),xi(i.d).slice(0,a)===(e=xi(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),s==a&&e=="4999"){if(Ft(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(e!="9999")break;a+=4}return nr=!0,Ft(n,r)};$e.times=$e.mul=function(t){var e,r,n,s,i,a,l,c,d,f=this,p=f.constructor,m=f.d,g=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,r=f.e+t.e,c=m.length,d=g.length,c<d&&(i=m,m=g,g=i,a=c,c=d,d=a),i=[],a=c+d,n=a;n--;)i.push(0);for(n=d;--n>=0;){for(e=0,s=c+n;s>n;)l=i[s]+g[n]*m[s-n-1]+e,i[s--]=l%Vr|0,e=l/Vr|0;i[s]=(i[s]+e)%Vr|0}for(;!i[--a];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,nr?Ft(t,p.precision):t};$e.toDecimalPlaces=$e.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Ai(t,0,Iu),e===void 0?e=n.rounding:Ai(e,0,8),Ft(r,t+Cr(r)+1,e))};$e.toExponential=function(t,e){var r,n=this,s=n.constructor;return t===void 0?r=Sl(n,!0):(Ai(t,0,Iu),e===void 0?e=s.rounding:Ai(e,0,8),n=Ft(new s(n),t+1,e),r=Sl(n,!0,t+1)),r};$e.toFixed=function(t,e){var r,n,s=this,i=s.constructor;return t===void 0?Sl(s):(Ai(t,0,Iu),e===void 0?e=i.rounding:Ai(e,0,8),n=Ft(new i(s),t+Cr(s)+1,e),r=Sl(n.abs(),!1,t+Cr(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};$e.toInteger=$e.toint=function(){var t=this,e=t.constructor;return Ft(new e(t),Cr(t)+1,e.rounding)};$e.toNumber=function(){return+this};$e.toPower=$e.pow=function(t){var e,r,n,s,i,a,l=this,c=l.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(Yn);if(l=new c(l),!l.s){if(t.s<1)throw Error(Ps+"Infinity");return l}if(l.eq(Yn))return l;if(n=c.precision,t.eq(Yn))return Ft(l,n);if(e=t.e,r=t.d.length-1,a=e>=r,i=l.s,a){if((r=f<0?-f:f)<=jU){for(s=new c(Yn),e=Math.ceil(n/Yt+4),nr=!1;r%2&&(s=s.times(l),E$(s.d,e)),r=$u(r/2),r!==0;)l=l.times(l),E$(l.d,e);return nr=!0,t.s<0?new c(Yn).div(s):Ft(s,n)}}else if(i<0)throw Error(Ps+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,nr=!1,s=t.times(uh(l,n+d)),nr=!0,s=NU(s),s.s=i,s};$e.toPrecision=function(t,e){var r,n,s=this,i=s.constructor;return t===void 0?(r=Cr(s),n=Sl(s,r<=i.toExpNeg||r>=i.toExpPos)):(Ai(t,1,Iu),e===void 0?e=i.rounding:Ai(e,0,8),s=Ft(new i(s),t,e),r=Cr(s),n=Sl(s,t<=r||r<=i.toExpNeg,t)),n};$e.toSignificantDigits=$e.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Ai(t,1,Iu),e===void 0?e=n.rounding:Ai(e,0,8)),Ft(new n(r),t,e)};$e.toString=$e.valueOf=$e.val=$e.toJSON=$e[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Cr(t),r=t.constructor;return Sl(t,e<=r.toExpNeg||e>=r.toExpPos)};function SU(t,e){var r,n,s,i,a,l,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),nr?Ft(e,p):e;if(c=t.d,d=e.d,a=t.e,s=e.e,c=c.slice(),i=a-s,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,s=a,l=c.length),a=Math.ceil(p/Yt),l=a>l?a+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/Vr|0,c[i]%=Vr;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,nr?Ft(e,p):e}function Ai(t,e,r){if(t!==~~t||t<e||t>r)throw Error(vl+t)}function xi(t){var e,r,n,s=t.length-1,i="",a=t[0];if(s>0){for(i+=a,e=1;e<s;e++)n=t[e]+"",r=Yt-n.length,r&&(i+=Xa(r)),i+=n;a=t[e],n=a+"",r=Yt-n.length,r&&(i+=Xa(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}var ia=function(){function t(n,s){var i,a=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+a,n[l]=i%Vr|0,a=i/Vr|0;return a&&n.unshift(a),n}function e(n,s,i,a){var l,c;if(i!=a)c=i>a?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var a=0;i--;)n[i]-=a,a=n[i]<s[i]?1:0,n[i]=a*Vr+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,a){var l,c,d,f,p,m,g,y,b,x,j,S,C,E,N,P,O,L,A=n.constructor,R=n.s==s.s?1:-1,M=n.d,D=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(Ps+"Division by zero");for(c=n.e-s.e,O=D.length,N=M.length,g=new A(R),y=g.d=[],d=0;D[d]==(M[d]||0);)++d;if(D[d]>(M[d]||0)&&--c,i==null?S=i=A.precision:a?S=i+(Cr(n)-Cr(s))+1:S=i,S<0)return new A(0);if(S=S/Yt+2|0,d=0,O==1)for(f=0,D=D[0],S++;(d<N||f)&&S--;d++)C=f*Vr+(M[d]||0),y[d]=C/D|0,f=C%D|0;else{for(f=Vr/(D[0]+1)|0,f>1&&(D=t(D,f),M=t(M,f),O=D.length,N=M.length),E=O,b=M.slice(0,O),x=b.length;x<O;)b[x++]=0;L=D.slice(),L.unshift(0),P=D[0],D[1]>=Vr/2&&++P;do f=0,l=e(D,b,O,x),l<0?(j=b[0],O!=x&&(j=j*Vr+(b[1]||0)),f=j/P|0,f>1?(f>=Vr&&(f=Vr-1),p=t(D,f),m=p.length,x=b.length,l=e(p,b,m,x),l==1&&(f--,r(p,O<m?L:D,m))):(f==0&&(l=f=1),p=D.slice()),m=p.length,m<x&&p.unshift(0),r(b,p,x),l==-1&&(x=b.length,l=e(D,b,O,x),l<1&&(f++,r(b,O<x?L:D,x))),x=b.length):l===0&&(f++,b=[0]),y[d++]=f,l&&b[0]?b[x++]=M[E]||0:(b=[M[E]],x=1);while((E++<N||b[0]!==void 0)&&S--)}return y[0]||y.shift(),g.e=c,Ft(g,a?i+Cr(g)+1:i)}}();function NU(t,e){var r,n,s,i,a,l,c=0,d=0,f=t.constructor,p=f.precision;if(Cr(t)>16)throw Error(AC+Cr(t));if(!t.s)return new f(Yn);for(nr=!1,l=p,a=new f(.03125);t.abs().gte(.1);)t=t.times(a),d+=5;for(n=Math.log(el(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new f(Yn),f.precision=l;;){if(s=Ft(s.times(t),l),r=r.times(++c),a=i.plus(ia(s,r,l)),xi(a.d).slice(0,l)===xi(i.d).slice(0,l)){for(;d--;)i=Ft(i.times(i),l);return f.precision=p,e==null?(nr=!0,Ft(i,p)):i}i=a}}function Cr(t){for(var e=t.e*Yt,r=t.d[0];r>=10;r/=10)e++;return e}function Pj(t,e,r){if(e>t.LN10.sd())throw nr=!0,r&&(t.precision=r),Error(Ps+"LN10 precision limit exceeded");return Ft(new t(t.LN10),e)}function Xa(t){for(var e="";t--;)e+="0";return e}function uh(t,e){var r,n,s,i,a,l,c,d,f,p=1,m=10,g=t,y=g.d,b=g.constructor,x=b.precision;if(g.s<1)throw Error(Ps+(g.s?"NaN":"-Infinity"));if(g.eq(Yn))return new b(0);if(e==null?(nr=!1,d=x):d=e,g.eq(10))return e==null&&(nr=!0),Pj(b,d);if(d+=m,b.precision=d,r=xi(y),n=r.charAt(0),i=Cr(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(t),r=xi(g.d),n=r.charAt(0),p++;i=Cr(g),n>1?(g=new b("0."+r),i++):g=new b(n+"."+r.slice(1))}else return c=Pj(b,d+2,x).times(i+""),g=uh(new b(n+"."+r.slice(1)),d-m).plus(c),b.precision=x,e==null?(nr=!0,Ft(g,x)):g;for(l=a=g=ia(g.minus(Yn),g.plus(Yn),d),f=Ft(g.times(g),d),s=3;;){if(a=Ft(a.times(f),d),c=l.plus(ia(a,new b(s),d)),xi(c.d).slice(0,d)===xi(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Pj(b,d+2,x).times(i+""))),l=ia(l,new b(p),d),b.precision=x,e==null?(nr=!0,Ft(l,x)):l;l=c,s+=2}}function N$(t,e){var r,n,s;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(n,s),e){if(s-=n,r=r-n-1,t.e=$u(r/Yt),t.d=[],n=(r+1)%Yt,r<0&&(n+=Yt),n<s){for(n&&t.d.push(+e.slice(0,n)),s-=Yt;n<s;)t.d.push(+e.slice(n,n+=Yt));e=e.slice(n),n=Yt-e.length}else n-=s;for(;n--;)e+="0";if(t.d.push(+e),nr&&(t.e>Zg||t.e<-Zg))throw Error(AC+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ft(t,e,r){var n,s,i,a,l,c,d,f,p=t.d;for(a=1,i=p[0];i>=10;i/=10)a++;if(n=e-a,n<0)n+=Yt,s=e,d=p[f=0];else{if(f=Math.ceil((n+1)/Yt),i=p.length,f>=i)return t;for(d=i=p[f],a=1;i>=10;i/=10)a++;n%=Yt,s=n-Yt+a}if(r!==void 0&&(i=el(10,a-s-1),l=d/i%10|0,c=e<0||p[f+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?d/el(10,a-s):0:p[f-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return c?(i=Cr(t),p.length=1,e=e-i-1,p[0]=el(10,(Yt-e%Yt)%Yt),t.e=$u(-e/Yt)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=el(10,Yt-n),p[f]=s>0?(d/el(10,a-s)%el(10,s)|0)*i:0),c)for(;;)if(f==0){(p[0]+=i)==Vr&&(p[0]=1,++t.e);break}else{if(p[f]+=i,p[f]!=Vr)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(nr&&(t.e>Zg||t.e<-Zg))throw Error(AC+Cr(t));return t}function EU(t,e){var r,n,s,i,a,l,c,d,f,p,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),nr?Ft(e,g):e;if(c=t.d,p=e.d,n=e.e,d=t.e,c=c.slice(),a=d-n,a){for(f=a<0,f?(r=c,a=-a,l=p.length):(r=p,n=d,l=c.length),s=Math.max(Math.ceil(g/Yt),l)+2,a>s&&(a=s,r.length=1),r.reverse(),s=a;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=p.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(c[s]!=p[s]){f=c[s]<p[s];break}a=0}for(f&&(r=c,c=p,p=r,e.s=-e.s),l=c.length,s=p.length-l;s>0;--s)c[l++]=0;for(s=p.length;s>a;){if(c[--s]<p[s]){for(i=s;i&&c[--i]===0;)c[i]=Vr-1;--c[i],c[s]+=Vr}c[s]-=p[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,nr?Ft(e,g):e):new m(0)}function Sl(t,e,r){var n,s=Cr(t),i=xi(t.d),a=i.length;return e?(r&&(n=r-a)>0?i=i.charAt(0)+"."+i.slice(1)+Xa(n):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Xa(-s-1)+i,r&&(n=r-a)>0&&(i+=Xa(n))):s>=a?(i+=Xa(s+1-a),r&&(n=r-s-1)>0&&(i=i+"."+Xa(n))):((n=s+1)<a&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-a)>0&&(s+1===a&&(i+="."),i+=Xa(n))),t.s<0?"-"+i:i}function E$(t,e){if(t.length>e)return t.length=e,!0}function CU(t){var e,r,n;function s(i){var a=this;if(!(a instanceof s))return new s(i);if(a.constructor=s,i instanceof s){a.s=i.s,a.e=i.e,a.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(vl+i);if(i>0)a.s=1;else if(i<0)i=-i,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(i===~~i&&i<1e7){a.e=0,a.d=[i];return}return N$(a,i.toString())}else if(typeof i!="string")throw Error(vl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),a.s=-1):a.s=1,Bhe.test(i))N$(a,i);else throw Error(vl+i)}if(s.prototype=$e,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=CU,s.config=s.set=zhe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return s.config(t),s}function zhe(t){if(!t||typeof t!="object")throw Error(Ps+"Object expected");var e,r,n,s=["precision",1,Iu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((n=t[r=s[e]])!==void 0)if($u(n)===n&&n>=s[e+1]&&n<=s[e+2])this[r]=n;else throw Error(vl+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(vl+r+": "+n);return this}var TC=CU(Fhe);Yn=new TC(1);const $t=TC;function Uhe(t){return Hhe(t)||Whe(t)||Vhe(t)||qhe()}function qhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vhe(t,e){if(t){if(typeof t=="string")return MS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MS(t,e)}}function Whe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Hhe(t){if(Array.isArray(t))return MS(t)}function MS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ghe=function(e){return e},kU={},PU=function(e){return e===kU},C$=function(e){return function r(){return arguments.length===0||arguments.length===1&&PU(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Khe=function t(e,r){return e===1?r:C$(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var a=s.filter(function(l){return l!==kU}).length;return a>=e?r.apply(void 0,s):t(e-a,C$(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=s.map(function(p){return PU(p)?c.shift():p});return r.apply(void 0,Uhe(f).concat(c))}))})},vy=function(e){return Khe(e.length,e)},RS=function(e,r){for(var n=[],s=e;s<r;++s)n[s-e]=s;return n},Zhe=vy(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Xhe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Ghe;var s=r.reverse(),i=s[0],a=s.slice(1);return function(){return a.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},DS=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},OU=function(e){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=e.apply(void 0,i)),n}};function Yhe(t){var e;return t===0?e=1:e=Math.floor(new $t(t).abs().log(10).toNumber())+1,e}function Jhe(t,e,r){for(var n=new $t(t),s=0,i=[];n.lt(e)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var Qhe=vy(function(t,e,r){var n=+t,s=+e;return n+r*(s-n)}),epe=vy(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),tpe=vy(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const yy={rangeStep:Jhe,getDigitCount:Yhe,interpolateNumber:Qhe,uninterpolateNumber:epe,uninterpolateTruncation:tpe};function IS(t){return spe(t)||npe(t)||AU(t)||rpe()}function rpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function npe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function spe(t){if(Array.isArray(t))return $S(t)}function dh(t,e){return ope(t)||ape(t,e)||AU(t,e)||ipe()}function ipe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AU(t,e){if(t){if(typeof t=="string")return $S(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $S(t,e)}}function $S(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ape(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,s=!1,i=void 0;try{for(var a=t[Symbol.iterator](),l;!(n=(l=a.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&a.return!=null&&a.return()}finally{if(s)throw i}}return r}}function ope(t){if(Array.isArray(t))return t}function TU(t){var e=dh(t,2),r=e[0],n=e[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function LU(t,e,r){if(t.lte(0))return new $t(0);var n=yy.getDigitCount(t.toNumber()),s=new $t(10).pow(n),i=t.div(s),a=n!==1?.05:.1,l=new $t(Math.ceil(i.div(a).toNumber())).add(r).mul(a),c=l.mul(s);return e?c:new $t(Math.ceil(c))}function lpe(t,e,r){var n=1,s=new $t(t);if(!s.isint()&&r){var i=Math.abs(t);i<1?(n=new $t(10).pow(yy.getDigitCount(t)-1),s=new $t(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new $t(Math.floor(t)))}else t===0?s=new $t(Math.floor((e-1)/2)):r||(s=new $t(Math.floor(t)));var a=Math.floor((e-1)/2),l=Xhe(Zhe(function(c){return s.add(new $t(c-a).mul(n)).toNumber()}),RS);return l(0,e)}function MU(t,e,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new $t(0),tickMin:new $t(0),tickMax:new $t(0)};var i=LU(new $t(e).sub(t).div(r-1),n,s),a;t<=0&&e>=0?a=new $t(0):(a=new $t(t).add(e).div(2),a=a.sub(new $t(a).mod(i)));var l=Math.ceil(a.sub(t).div(i).toNumber()),c=Math.ceil(new $t(e).sub(a).div(i).toNumber()),d=l+c+1;return d>r?MU(t,e,r,n,s+1):(d<r&&(c=e>0?c+(r-d):c,l=e>0?l:l+(r-d)),{step:i,tickMin:a.sub(new $t(l).mul(i)),tickMax:a.add(new $t(c).mul(i))})}function cpe(t){var e=dh(t,2),r=e[0],n=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(s,2),l=TU([r,n]),c=dh(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(IS(RS(0,s-1).map(function(){return 1/0}))):[].concat(IS(RS(0,s-1).map(function(){return-1/0})),[f]);return r>n?DS(p):p}if(d===f)return lpe(d,s,i);var m=MU(d,f,a,i),g=m.step,y=m.tickMin,b=m.tickMax,x=yy.rangeStep(y,b.add(new $t(.1).mul(g)),g);return r>n?DS(x):x}function upe(t,e){var r=dh(t,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=TU([n,s]),l=dh(a,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[n,s];if(c===d)return[c];var f=Math.max(e,2),p=LU(new $t(d).sub(c).div(f-1),i,0),m=[].concat(IS(yy.rangeStep(new $t(c),new $t(d).sub(new $t(.99).mul(p)),p)),[d]);return n>s?DS(m):m}var dpe=OU(cpe),fpe=OU(upe),hpe="Invariant failed";function Nl(t,e){throw new Error(hpe)}var ppe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function nu(t){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(t)}function Xg(){return Xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xg.apply(this,arguments)}function mpe(t,e){return xpe(t)||ype(t,e)||vpe(t,e)||gpe()}function gpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vpe(t,e){if(t){if(typeof t=="string")return k$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k$(t,e)}}function k$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ype(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function xpe(t){if(Array.isArray(t))return t}function bpe(t,e){if(t==null)return{};var r=wpe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IU(n.key),n)}}function Spe(t,e,r){return e&&jpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Npe(t,e,r){return e=Yg(e),Epe(t,RU()?Reflect.construct(e,r||[],Yg(t).constructor):e.apply(t,r))}function Epe(t,e){if(e&&(nu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cpe(t)}function Cpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RU=function(){return!!t})()}function Yg(t){return Yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yg(t)}function kpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FS(t,e)}function FS(t,e){return FS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},FS(t,e)}function DU(t,e,r){return e=IU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IU(t){var e=Ppe(t,"string");return nu(e)=="symbol"?e:e+""}function Ppe(t,e){if(nu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fu=function(t){function e(){return _pe(this,e),Npe(this,e,arguments)}return kpe(e,t),Spe(e,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,a=n.width,l=n.dataKey,c=n.data,d=n.dataPointFormatter,f=n.xAxis,p=n.yAxis,m=bpe(n,ppe),g=Ue(m,!1);this.props.direction==="x"&&f.type!=="number"&&Nl();var y=c.map(function(b){var x=d(b,l),j=x.x,S=x.y,C=x.value,E=x.errorVal;if(!E)return null;var N=[],P,O;if(Array.isArray(E)){var L=mpe(E,2);P=L[0],O=L[1]}else P=O=E;if(i==="vertical"){var A=f.scale,R=S+s,M=R+a,D=R-a,B=A(C-P),F=A(C+O);N.push({x1:F,y1:M,x2:F,y2:D}),N.push({x1:B,y1:R,x2:F,y2:R}),N.push({x1:B,y1:M,x2:B,y2:D})}else if(i==="horizontal"){var V=p.scale,J=j+s,G=J-a,q=J+a,U=V(C-P),W=V(C+O);N.push({x1:G,y1:W,x2:q,y2:W}),N.push({x1:J,y1:U,x2:J,y2:W}),N.push({x1:G,y1:U,x2:q,y2:U})}return z.createElement(at,Xg({className:"recharts-errorBar",key:"bar-".concat(N.map(function(I){return"".concat(I.x1,"-").concat(I.x2,"-").concat(I.y1,"-").concat(I.y2)}))},g),N.map(function(I){return z.createElement("line",Xg({},I,{key:"line-".concat(I.x1,"-").concat(I.x2,"-").concat(I.y1,"-").concat(I.y2)}))}))});return z.createElement(at,{className:"recharts-errorBars"},y)}}])}(z.Component);DU(Fu,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});DU(Fu,"displayName","ErrorBar");function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Go(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){Ope(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ope(t,e,r){return e=Ape(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ape(t){var e=Tpe(t,"string");return fh(e)=="symbol"?e:e+""}function Tpe(t,e){if(fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $U=function(e){var r=e.children,n=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,a=Gn(r,Dc);if(!a)return null;var l=Dc.defaultProps,c=l!==void 0?Go(Go({},l),a.props):{},d;return a.props&&a.props.payload?d=a.props&&a.props.payload:i==="children"?d=(n||[]).reduce(function(f,p){var m=p.item,g=p.props,y=g.sectors||g.data||[];return f.concat(y.map(function(b){return{type:a.props.iconType||m.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):d=(n||[]).map(function(f){var p=f.item,m=p.type.defaultProps,g=m!==void 0?Go(Go({},m),p.props):{},y=g.dataKey,b=g.name,x=g.legendType,j=g.hide;return{inactive:j,dataKey:y,type:c.iconType||x||"square",color:LC(p),value:b||y,payload:g}}),Go(Go(Go({},c),Dc.getWithHeight(a,s)),{},{payload:d,item:a})};function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function O$(t){return Dpe(t)||Rpe(t)||Mpe(t)||Lpe()}function Lpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mpe(t,e){if(t){if(typeof t=="string")return BS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BS(t,e)}}function Rpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dpe(t){if(Array.isArray(t))return BS(t)}function BS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(r),!0).forEach(function(n){$c(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $c(t,e,r){return e=Ipe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ipe(t){var e=$pe(t,"string");return hh(e)=="symbol"?e:e+""}function $pe(t,e){if(hh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jt(t,e,r){return Xe(t)||Xe(e)?r:Mr(e)?rs(t,e,r):Ze(e)?e(t):r}function yf(t,e,r,n){var s=Dhe(t,function(l){return Jt(l,e)});if(r==="number"){var i=s.filter(function(l){return Ne(l)||parseFloat(l)});return i.length?[gy(i),no(i)]:[1/0,-1/0]}var a=n?s.filter(function(l){return!Xe(l)}):s;return a.map(function(l){return Mr(l)||l instanceof Date?l:""})}var Fpe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var f=d>0?s[d-1].coordinate:s[l-1].coordinate,p=s[d].coordinate,m=d>=l-1?s[0].coordinate:s[d+1].coordinate,g=void 0;if(wn(p-f)!==wn(m-p)){var y=[];if(wn(m-p)===wn(c[1]-c[0])){g=m;var b=p+c[1]-c[0];y[0]=Math.min(b,(b+f)/2),y[1]=Math.max(b,(b+f)/2)}else{g=f;var x=m+c[1]-c[0];y[0]=Math.min(p,(x+p)/2),y[1]=Math.max(p,(x+p)/2)}var j=[Math.min(p,(g+p)/2),Math.max(p,(g+p)/2)];if(e>j[0]&&e<=j[1]||e>=y[0]&&e<=y[1]){a=s[d].index;break}}else{var S=Math.min(f,m),C=Math.max(f,m);if(e>(S+p)/2&&e<=(C+p)/2){a=s[d].index;break}}}else for(var E=0;E<l;E++)if(E===0&&e<=(n[E].coordinate+n[E+1].coordinate)/2||E>0&&E<l-1&&e>(n[E].coordinate+n[E-1].coordinate)/2&&e<=(n[E].coordinate+n[E+1].coordinate)/2||E===l-1&&e>(n[E].coordinate+n[E-1].coordinate)/2){a=n[E].index;break}return a},LC=function(e){var r,n=e,s=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?mr(mr({},e.type.defaultProps),e.props):e.props,a=i.stroke,l=i.fill,c;switch(s){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:l;break;default:c=l;break}return c},Bpe=function(e){var r=e.barSize,n=e.totalSize,s=e.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var a={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var f=i[l[c]].stackGroups,p=Object.keys(f),m=0,g=p.length;m<g;m++){var y=f[p[m]],b=y.items,x=y.cateAxisId,j=b.filter(function(O){return sa(O.type).indexOf("Bar")>=0});if(j&&j.length){var S=j[0].type.defaultProps,C=S!==void 0?mr(mr({},S),j[0].props):j[0].props,E=C.barSize,N=C[x];a[N]||(a[N]=[]);var P=Xe(E)?r:E;a[N].push({item:j[0],stackList:j.slice(1),barSize:Xe(P)?void 0:_n(P,n,0)})}}return a},zpe=function(e){var r=e.barGap,n=e.barCategoryGap,s=e.bandSize,i=e.sizeList,a=i===void 0?[]:i,l=e.maxBarSize,c=a.length;if(c<1)return null;var d=_n(r,s,0,!0),f,p=[];if(a[0].barSize===+a[0].barSize){var m=!1,g=s/c,y=a.reduce(function(E,N){return E+N.barSize||0},0);y+=(c-1)*d,y>=s&&(y-=(c-1)*d,d=0),y>=s&&g>0&&(m=!0,g*=.9,y=c*g);var b=(s-y)/2>>0,x={offset:b-d,size:0};f=a.reduce(function(E,N){var P={item:N.item,position:{offset:x.offset+x.size+d,size:m?g:N.barSize}},O=[].concat(O$(E),[P]);return x=O[O.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(L){O.push({item:L,position:x})}),O},p)}else{var j=_n(n,s,0,!0);s-2*j-(c-1)*d<=0&&(d=0);var S=(s-2*j-(c-1)*d)/c;S>1&&(S>>=0);var C=l===+l?Math.min(S,l):S;f=a.reduce(function(E,N,P){var O=[].concat(O$(E),[{item:N.item,position:{offset:j+(S+d)*P+(S-C)/2,size:C}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(L){O.push({item:L,position:O[O.length-1].position})}),O},p)}return f},Upe=function(e,r,n,s){var i=n.children,a=n.width,l=n.margin,c=a-(l.left||0)-(l.right||0),d=$U({children:i,legendWidth:c});if(d){var f=s||{},p=f.width,m=f.height,g=d.align,y=d.verticalAlign,b=d.layout;if((b==="vertical"||b==="horizontal"&&y==="middle")&&g!=="center"&&Ne(e[g]))return mr(mr({},e),{},$c({},g,e[g]+(p||0)));if((b==="horizontal"||b==="vertical"&&g==="center")&&y!=="middle"&&Ne(e[y]))return mr(mr({},e),{},$c({},y,e[y]+(m||0)))}return e},qpe=function(e,r,n){return Xe(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},FU=function(e,r,n,s,i){var a=r.props.children,l=Sn(a,Fu).filter(function(d){return qpe(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,f){var p=Jt(f,n);if(Xe(p))return d;var m=Array.isArray(p)?[gy(p),no(p)]:[p,p],g=c.reduce(function(y,b){var x=Jt(f,b,0),j=m[0]-Math.abs(Array.isArray(x)?x[0]:x),S=m[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(j,y[0]),Math.max(S,y[1])]},[1/0,-1/0]);return[Math.min(g[0],d[0]),Math.max(g[1],d[1])]},[1/0,-1/0])}return null},Vpe=function(e,r,n,s,i){var a=r.map(function(l){return FU(e,l,n,i,s)}).filter(function(l){return!Xe(l)});return a&&a.length?a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},BU=function(e,r,n,s,i){var a=r.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&FU(e,c,d,s)||yf(e,d,n,i)});if(n==="number")return a.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return a.reduce(function(c,d){for(var f=0,p=d.length;f<p;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},zU=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},UU=function(e,r,n,s){if(s)return e.map(function(c){return c.coordinate});var i,a,l=e.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(a=!0),c.coordinate});return i||l.push(r),a||l.push(n),l},ta=function(e,r,n){if(!e)return null;var s=e.scale,i=e.duplicateDomain,a=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||n)&&a==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&l?.length>=2?wn(l[0]-l[1])*2*d:d,r&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(p){var m=i?i.indexOf(p):p;return{coordinate:s(m)+d,value:p,offset:d}});return f.filter(function(p){return!Mu(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,m){return{coordinate:s(p)+d,value:p,index:m,offset:d}}):s.ticks&&!n?s.ticks(e.tickCount).map(function(p){return{coordinate:s(p)+d,value:p,offset:d}}):s.domain().map(function(p,m){return{coordinate:s(p)+d,value:i?i[p]:p,index:m,offset:d}})},Oj=new WeakMap,Tm=function(e,r){if(typeof r!="function")return e;Oj.has(e)||Oj.set(e,new WeakMap);var n=Oj.get(e);if(n.has(r))return n.get(r);var s=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},qU=function(e,r,n){var s=e.scale,i=e.type,a=e.layout,l=e.axisType;if(s==="auto")return a==="radial"&&l==="radiusAxis"?{scale:ih(),realScaleType:"band"}:a==="radial"&&l==="angleAxis"?{scale:Wg(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:vf(),realScaleType:"point"}:i==="category"?{scale:ih(),realScaleType:"band"}:{scale:Wg(),realScaleType:"linear"};if(_l(s)){var c="scale".concat(ty(s));return{scale:(g$[c]||vf)(),realScaleType:g$[c]?c:"point"}}return Ze(s)?{scale:s}:{scale:vf(),realScaleType:"point"}},T$=1e-4,VU=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,s=e.range(),i=Math.min(s[0],s[1])-T$,a=Math.max(s[0],s[1])+T$,l=e(r[0]),c=e(r[n-1]);(l<i||l>a||c<i||c>a)&&e.domain([r[0],r[n-1]])}},Wpe=function(e,r){if(!e)return null;for(var n=0,s=e.length;n<s;n++)if(e[n].item===r)return e[n].position;return null},Hpe=function(e,r){if(!r||r.length!==2||!Ne(r[0])||!Ne(r[1]))return e;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!Ne(e[0])||e[0]<n)&&(i[0]=n),(!Ne(e[1])||e[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},Gpe=function(e){var r=e.length;if(!(r<=0))for(var n=0,s=e[0].length;n<s;++n)for(var i=0,a=0,l=0;l<r;++l){var c=Mu(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=i,e[l][n][1]=i+c,i=e[l][n][1]):(e[l][n][0]=a,e[l][n][1]=a+c,a=e[l][n][1])}},Kpe=function(e){var r=e.length;if(!(r<=0))for(var n=0,s=e[0].length;n<s;++n)for(var i=0,a=0;a<r;++a){var l=Mu(e[a][n][1])?e[a][n][0]:e[a][n][1];l>=0?(e[a][n][0]=i,e[a][n][1]=i+l,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},Zpe={sign:Gpe,expand:Doe,none:Zc,silhouette:Ioe,wiggle:$oe,positive:Kpe},Xpe=function(e,r,n){var s=r.map(function(l){return l.props.dataKey}),i=Zpe[n],a=Roe().keys(s).value(function(l,c){return+Jt(l,c,0)}).order(gS).offset(i);return a(e)},Ype=function(e,r,n,s,i,a){if(!e)return null;var l=a?r.reverse():r,c={},d=l.reduce(function(p,m){var g,y=(g=m.type)!==null&&g!==void 0&&g.defaultProps?mr(mr({},m.type.defaultProps),m.props):m.props,b=y.stackId,x=y.hide;if(x)return p;var j=y[n],S=p[j]||{hasStack:!1,stackGroups:{}};if(Mr(b)){var C=S.stackGroups[b]||{numericAxisId:n,cateAxisId:s,items:[]};C.items.push(m),S.hasStack=!0,S.stackGroups[b]=C}else S.stackGroups[Co("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return mr(mr({},p),{},$c({},j,S))},c),f={};return Object.keys(d).reduce(function(p,m){var g=d[m];if(g.hasStack){var y={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(b,x){var j=g.stackGroups[x];return mr(mr({},b),{},$c({},x,{numericAxisId:n,cateAxisId:s,items:j.items,stackedData:Xpe(e,j.items,i)}))},y)}return mr(mr({},p),{},$c({},m,g))},f)},WU=function(e,r){var n=r.realScaleType,s=r.type,i=r.tickCount,a=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var d=e.domain();if(!d.length)return null;var f=dpe(d,i,l);return e.domain([gy(f),no(f)]),{niceTicks:f}}if(i&&s==="number"){var p=e.domain(),m=fpe(p,i,l);return{niceTicks:m}}return null};function su(t){var e=t.axis,r=t.ticks,n=t.bandSize,s=t.entry,i=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Xe(s[e.dataKey])){var l=Eg(r,"value",s[e.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Jt(s,Xe(a)?e.dataKey:a);return Xe(c)?null:e.scale(c)}var L$=function(e){var r=e.axis,n=e.ticks,s=e.offset,i=e.bandSize,a=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=Jt(a,r.dataKey,r.domain[l]);return Xe(c)?null:r.scale(c)-i/2+s},Jpe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},Qpe=function(e,r){var n,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?mr(mr({},e.type.defaultProps),e.props):e.props,i=s.stackId;if(Mr(i)){var a=r[i];if(a){var l=a.items.indexOf(e);return l>=0?a.stackedData[l]:null}}return null},eme=function(e){return e.reduce(function(r,n){return[gy(n.concat([r[0]]).filter(Ne)),no(n.concat([r[1]]).filter(Ne))]},[1/0,-1/0])},HU=function(e,r,n){return Object.keys(e).reduce(function(s,i){var a=e[i],l=a.stackedData,c=l.reduce(function(d,f){var p=eme(f.slice(r,n+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},M$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,R$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zS=function(e,r,n){if(Ze(e))return e(r,n);if(!Array.isArray(e))return r;var s=[];if(Ne(e[0]))s[0]=n?e[0]:Math.min(e[0],r[0]);else if(M$.test(e[0])){var i=+M$.exec(e[0])[1];s[0]=r[0]-i}else Ze(e[0])?s[0]=e[0](r[0]):s[0]=r[0];if(Ne(e[1]))s[1]=n?e[1]:Math.max(e[1],r[1]);else if(R$.test(e[1])){var a=+R$.exec(e[1])[1];s[1]=r[1]+a}else Ze(e[1])?s[1]=e[1](r[1]):s[1]=r[1];return s},Jg=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!n||s>0)return s}if(e&&r&&r.length>=2){for(var i=oC(r,function(p){return p.coordinate}),a=1/0,l=1,c=i.length;l<c;l++){var d=i[l],f=i[l-1];a=Math.min((d.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},D$=function(e,r,n){return!e||!e.length||xo(e,rs(n,"type.defaultProps.domain"))?r:e},GU=function(e,r){var n=e.type.defaultProps?mr(mr({},e.type.defaultProps),e.props):e.props,s=n.dataKey,i=n.name,a=n.unit,l=n.formatter,c=n.tooltipType,d=n.chartType,f=n.hide;return mr(mr({},Ue(e,!1)),{},{dataKey:s,unit:a,formatter:l,name:i||s,color:LC(e),value:Jt(r,s),type:c,payload:r,chartType:d,hide:f})};function ph(t){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(t)}function I$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Yi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(r),!0).forEach(function(n){KU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KU(t,e,r){return e=tme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tme(t){var e=rme(t,"string");return ph(e)=="symbol"?e:e+""}function rme(t,e){if(ph(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nme(t,e){return ome(t)||ame(t,e)||ime(t,e)||sme()}function sme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ime(t,e){if(t){if(typeof t=="string")return $$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $$(t,e)}}function $$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ame(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function ome(t){if(Array.isArray(t))return t}var Qg=Math.PI/180,lme=function(e){return e*180/Math.PI},Gt=function(e,r,n,s){return{x:e+Math.cos(-Qg*s)*n,y:r+Math.sin(-Qg*s)*n}},ZU=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},cme=function(e,r,n,s,i){var a=e.width,l=e.height,c=e.startAngle,d=e.endAngle,f=_n(e.cx,a,a/2),p=_n(e.cy,l,l/2),m=ZU(a,l,n),g=_n(e.innerRadius,m,0),y=_n(e.outerRadius,m,m*.8),b=Object.keys(r);return b.reduce(function(x,j){var S=r[j],C=S.domain,E=S.reversed,N;if(Xe(S.range))s==="angleAxis"?N=[c,d]:s==="radiusAxis"&&(N=[g,y]),E&&(N=[N[1],N[0]]);else{N=S.range;var P=N,O=nme(P,2);c=O[0],d=O[1]}var L=qU(S,i),A=L.realScaleType,R=L.scale;R.domain(C).range(N),VU(R);var M=WU(R,Yi(Yi({},S),{},{realScaleType:A})),D=Yi(Yi(Yi({},S),M),{},{range:N,radius:y,realScaleType:A,scale:R,cx:f,cy:p,innerRadius:g,outerRadius:y,startAngle:c,endAngle:d});return Yi(Yi({},x),{},KU({},j,D))},{})},ume=function(e,r){var n=e.x,s=e.y,i=r.x,a=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-a,2))},dme=function(e,r){var n=e.x,s=e.y,i=r.cx,a=r.cy,l=ume({x:n,y:s},{x:i,y:a});if(l<=0)return{radius:l};var c=(n-i)/l,d=Math.acos(c);return s>a&&(d=2*Math.PI-d),{radius:l,angle:lme(d),angleInRadian:d}},fme=function(e){var r=e.startAngle,n=e.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),a=Math.min(s,i);return{startAngle:r-a*360,endAngle:n-a*360}},hme=function(e,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),a=Math.floor(s/360),l=Math.min(i,a);return e+l*360},F$=function(e,r){var n=e.x,s=e.y,i=dme({x:n,y:s},r),a=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(a<c||a>d)return!1;if(a===0)return!0;var f=fme(r),p=f.startAngle,m=f.endAngle,g=l,y;if(p<=m){for(;g>m;)g-=360;for(;g<p;)g+=360;y=g>=p&&g<=m}else{for(;g>p;)g-=360;for(;g<m;)g+=360;y=g>=m&&g<=p}return y?Yi(Yi({},r),{},{radius:a,angle:hme(g,r)}):null},XU=function(e){return!w.isValidElement(e)&&!Ze(e)&&typeof e!="boolean"?e.className:""};function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}var pme=["offset"];function mme(t){return xme(t)||yme(t)||vme(t)||gme()}function gme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vme(t,e){if(t){if(typeof t=="string")return US(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return US(t,e)}}function yme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xme(t){if(Array.isArray(t))return US(t)}function US(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bme(t,e){if(t==null)return{};var r=wme(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ar(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){_me(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _me(t,e,r){return e=jme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jme(t){var e=Sme(t,"string");return mh(e)=="symbol"?e:e+""}function Sme(t,e){if(mh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gh.apply(this,arguments)}var Nme=function(e){var r=e.value,n=e.formatter,s=Xe(e.children)?r:e.children;return Ze(n)?n(s):s},Eme=function(e,r){var n=wn(r-e),s=Math.min(Math.abs(r-e),360);return n*s},Cme=function(e,r,n){var s=e.position,i=e.viewBox,a=e.offset,l=e.className,c=i,d=c.cx,f=c.cy,p=c.innerRadius,m=c.outerRadius,g=c.startAngle,y=c.endAngle,b=c.clockWise,x=(p+m)/2,j=Eme(g,y),S=j>=0?1:-1,C,E;s==="insideStart"?(C=g+S*a,E=b):s==="insideEnd"?(C=y-S*a,E=!b):s==="end"&&(C=y+S*a,E=b),E=j<=0?E:!E;var N=Gt(d,f,x,C),P=Gt(d,f,x,C+(E?1:-1)*359),O="M".concat(N.x,",").concat(N.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(E?0:1,`,
    `).concat(P.x,",").concat(P.y),L=Xe(e.id)?Co("recharts-radial-line-"):e.id;return z.createElement("text",gh({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",l)}),z.createElement("defs",null,z.createElement("path",{id:L,d:O})),z.createElement("textPath",{xlinkHref:"#".concat(L)},r))},kme=function(e){var r=e.viewBox,n=e.offset,s=e.position,i=r,a=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,f=i.startAngle,p=i.endAngle,m=(f+p)/2;if(s==="outside"){var g=Gt(a,l,d+n,m),y=g.x,b=g.y;return{x:y,y:b,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+d)/2,j=Gt(a,l,x,m),S=j.x,C=j.y;return{x:S,y:C,textAnchor:"middle",verticalAnchor:"middle"}},Pme=function(e){var r=e.viewBox,n=e.parentViewBox,s=e.offset,i=e.position,a=r,l=a.x,c=a.y,d=a.width,f=a.height,p=f>=0?1:-1,m=p*s,g=p>0?"end":"start",y=p>0?"start":"end",b=d>=0?1:-1,x=b*s,j=b>0?"end":"start",S=b>0?"start":"end";if(i==="top"){var C={x:l+d/2,y:c-p*s,textAnchor:"middle",verticalAnchor:g};return Ar(Ar({},C),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var E={x:l+d/2,y:c+f+m,textAnchor:"middle",verticalAnchor:y};return Ar(Ar({},E),n?{height:Math.max(n.y+n.height-(c+f),0),width:d}:{})}if(i==="left"){var N={x:l-x,y:c+f/2,textAnchor:j,verticalAnchor:"middle"};return Ar(Ar({},N),n?{width:Math.max(N.x-n.x,0),height:f}:{})}if(i==="right"){var P={x:l+d+x,y:c+f/2,textAnchor:S,verticalAnchor:"middle"};return Ar(Ar({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:f}:{})}var O=n?{width:d,height:f}:{};return i==="insideLeft"?Ar({x:l+x,y:c+f/2,textAnchor:S,verticalAnchor:"middle"},O):i==="insideRight"?Ar({x:l+d-x,y:c+f/2,textAnchor:j,verticalAnchor:"middle"},O):i==="insideTop"?Ar({x:l+d/2,y:c+m,textAnchor:"middle",verticalAnchor:y},O):i==="insideBottom"?Ar({x:l+d/2,y:c+f-m,textAnchor:"middle",verticalAnchor:g},O):i==="insideTopLeft"?Ar({x:l+x,y:c+m,textAnchor:S,verticalAnchor:y},O):i==="insideTopRight"?Ar({x:l+d-x,y:c+m,textAnchor:j,verticalAnchor:y},O):i==="insideBottomLeft"?Ar({x:l+x,y:c+f-m,textAnchor:S,verticalAnchor:g},O):i==="insideBottomRight"?Ar({x:l+d-x,y:c+f-m,textAnchor:j,verticalAnchor:g},O):Lu(i)&&(Ne(i.x)||ol(i.x))&&(Ne(i.y)||ol(i.y))?Ar({x:l+_n(i.x,d),y:c+_n(i.y,f),textAnchor:"end",verticalAnchor:"end"},O):Ar({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},O)},Ome=function(e){return"cx"in e&&Ne(e.cx)};function Gr(t){var e=t.offset,r=e===void 0?5:e,n=bme(t,pme),s=Ar({offset:r},n),i=s.viewBox,a=s.position,l=s.value,c=s.children,d=s.content,f=s.className,p=f===void 0?"":f,m=s.textBreakAll;if(!i||Xe(l)&&Xe(c)&&!w.isValidElement(d)&&!Ze(d))return null;if(w.isValidElement(d))return w.cloneElement(d,s);var g;if(Ze(d)){if(g=w.createElement(d,s),w.isValidElement(g))return g}else g=Nme(s);var y=Ome(i),b=Ue(s,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Cme(s,g,b);var x=y?kme(s):Pme(s);return z.createElement(jl,gh({className:st("recharts-label",p)},b,x,{breakAll:m}),g)}Gr.displayName="Label";var YU=function(e){var r=e.cx,n=e.cy,s=e.angle,i=e.startAngle,a=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,f=e.outerRadius,p=e.x,m=e.y,g=e.top,y=e.left,b=e.width,x=e.height,j=e.clockWise,S=e.labelViewBox;if(S)return S;if(Ne(b)&&Ne(x)){if(Ne(p)&&Ne(m))return{x:p,y:m,width:b,height:x};if(Ne(g)&&Ne(y))return{x:g,y,width:b,height:x}}return Ne(p)&&Ne(m)?{x:p,y:m,width:0,height:0}:Ne(r)&&Ne(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:a||s||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:j}:e.viewBox?e.viewBox:{}},Ame=function(e,r){return e?e===!0?z.createElement(Gr,{key:"label-implicit",viewBox:r}):Mr(e)?z.createElement(Gr,{key:"label-implicit",viewBox:r,value:e}):w.isValidElement(e)?e.type===Gr?w.cloneElement(e,{key:"label-implicit",viewBox:r}):z.createElement(Gr,{key:"label-implicit",content:e,viewBox:r}):Ze(e)?z.createElement(Gr,{key:"label-implicit",content:e,viewBox:r}):Lu(e)?z.createElement(Gr,gh({viewBox:r},e,{key:"label-implicit"})):null:null},Tme=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,i=YU(e),a=Sn(s,Gr).map(function(c,d){return w.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return a;var l=Ame(e.label,r||i);return[l].concat(mme(a))};Gr.parseViewBox=YU;Gr.renderCallByParent=Tme;var Aj,z$;function Lme(){if(z$)return Aj;z$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return Aj=t,Aj}var Mme=Lme();const Rme=Pt(Mme);function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}var Dme=["valueAccessor"],Ime=["data","dataKey","clockWise","id","textBreakAll"];function $me(t){return Ume(t)||zme(t)||Bme(t)||Fme()}function Fme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bme(t,e){if(t){if(typeof t=="string")return qS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qS(t,e)}}function zme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ume(t){if(Array.isArray(t))return qS(t)}function qS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ev(){return ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ev.apply(this,arguments)}function U$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function q$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(r),!0).forEach(function(n){qme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qme(t,e,r){return e=Vme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vme(t){var e=Wme(t,"string");return vh(e)=="symbol"?e:e+""}function Wme(t,e){if(vh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V$(t,e){if(t==null)return{};var r=Hme(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Gme=function(e){return Array.isArray(e.value)?Rme(e.value):e.value};function ni(t){var e=t.valueAccessor,r=e===void 0?Gme:e,n=V$(t,Dme),s=n.data,i=n.dataKey,a=n.clockWise,l=n.id,c=n.textBreakAll,d=V$(n,Ime);return!s||!s.length?null:z.createElement(at,{className:"recharts-label-list"},s.map(function(f,p){var m=Xe(i)?r(f,p):Jt(f&&f.payload,i),g=Xe(l)?{}:{id:"".concat(l,"-").concat(p)};return z.createElement(Gr,ev({},Ue(f,!0),d,g,{parentViewBox:f.parentViewBox,value:m,textBreakAll:c,viewBox:Gr.parseViewBox(Xe(a)?f:q$(q$({},f),{},{clockWise:a})),key:"label-".concat(p),index:p}))}))}ni.displayName="LabelList";function Kme(t,e){return t?t===!0?z.createElement(ni,{key:"labelList-implicit",data:e}):z.isValidElement(t)||Ze(t)?z.createElement(ni,{key:"labelList-implicit",data:e,content:t}):Lu(t)?z.createElement(ni,ev({data:e},t,{key:"labelList-implicit"})):null:null}function Zme(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,s=Sn(n,ni).map(function(a,l){return w.cloneElement(a,{data:e,key:"labelList-".concat(l)})});if(!r)return s;var i=Kme(t.label,e);return[i].concat($me(s))}ni.renderCallByParent=Zme;function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function VS(){return VS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VS.apply(this,arguments)}function W$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function H$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(r),!0).forEach(function(n){Xme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xme(t,e,r){return e=Yme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yme(t){var e=Jme(t,"string");return yh(e)=="symbol"?e:e+""}function Jme(t,e){if(yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qme=function(e,r){var n=wn(r-e),s=Math.min(Math.abs(r-e),359.999);return n*s},Lm=function(e){var r=e.cx,n=e.cy,s=e.radius,i=e.angle,a=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,f=c*(l?1:-1)+s,p=Math.asin(c/f)/Qg,m=d?i:i+a*p,g=Gt(r,n,f,m),y=Gt(r,n,s,m),b=d?i-a*p:i,x=Gt(r,n,f*Math.cos(p*Qg),b);return{center:g,circleTangency:y,lineTangency:x,theta:p}},JU=function(e){var r=e.cx,n=e.cy,s=e.innerRadius,i=e.outerRadius,a=e.startAngle,l=e.endAngle,c=Qme(a,l),d=a+c,f=Gt(r,n,i,a),p=Gt(r,n,i,d),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(s>0){var g=Gt(r,n,s,a),y=Gt(r,n,s,d);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},ege=function(e){var r=e.cx,n=e.cy,s=e.innerRadius,i=e.outerRadius,a=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,f=e.endAngle,p=wn(f-d),m=Lm({cx:r,cy:n,radius:i,angle:d,sign:p,cornerRadius:a,cornerIsExternal:c}),g=m.circleTangency,y=m.lineTangency,b=m.theta,x=Lm({cx:r,cy:n,radius:i,angle:f,sign:-p,cornerRadius:a,cornerIsExternal:c}),j=x.circleTangency,S=x.lineTangency,C=x.theta,E=c?Math.abs(d-f):Math.abs(d-f)-b-C;if(E<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):JU({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:f});var N="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(p<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
  `);if(s>0){var P=Lm({cx:r,cy:n,radius:s,angle:d,sign:p,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),O=P.circleTangency,L=P.lineTangency,A=P.theta,R=Lm({cx:r,cy:n,radius:s,angle:f,sign:-p,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),M=R.circleTangency,D=R.lineTangency,B=R.theta,F=c?Math.abs(d-f):Math.abs(d-f)-A-B;if(F<0&&a===0)return"".concat(N,"L").concat(r,",").concat(n,"Z");N+="L".concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(F>180),",").concat(+(p>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(L.x,",").concat(L.y,"Z")}else N+="L".concat(r,",").concat(n,"Z");return N},tge={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},QU=function(e){var r=H$(H$({},tge),e),n=r.cx,s=r.cy,i=r.innerRadius,a=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,f=r.startAngle,p=r.endAngle,m=r.className;if(a<i||f===p)return null;var g=st("recharts-sector",m),y=a-i,b=_n(l,y,0,!0),x;return b>0&&Math.abs(f-p)<360?x=ege({cx:n,cy:s,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,y/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:p}):x=JU({cx:n,cy:s,innerRadius:i,outerRadius:a,startAngle:f,endAngle:p}),z.createElement("path",VS({},Ue(r,!0),{className:g,d:x,role:"img"}))};function xh(t){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function WS(){return WS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WS.apply(this,arguments)}function G$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function K$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(r),!0).forEach(function(n){rge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rge(t,e,r){return e=nge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nge(t){var e=sge(t,"string");return xh(e)=="symbol"?e:e+""}function sge(t,e){if(xh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z$={curveBasisClosed:Soe,curveBasisOpen:Noe,curveBasis:joe,curveBumpX:coe,curveBumpY:uoe,curveLinearClosed:Eoe,curveLinear:ny,curveMonotoneX:Coe,curveMonotoneY:koe,curveNatural:Poe,curveStep:Ooe,curveStepAfter:Toe,curveStepBefore:Aoe},Mm=function(e){return e.x===+e.x&&e.y===+e.y},zd=function(e){return e.x},Ud=function(e){return e.y},ige=function(e,r){if(Ze(e))return e;var n="curve".concat(ty(e));return(n==="curveMonotone"||n==="curveBump")&&r?Z$["".concat(n).concat(r==="vertical"?"Y":"X")]:Z$[n]||ny},age=function(e){var r=e.type,n=r===void 0?"linear":r,s=e.points,i=s===void 0?[]:s,a=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,f=ige(n,l),p=d?i.filter(function(b){return Mm(b)}):i,m;if(Array.isArray(a)){var g=d?a.filter(function(b){return Mm(b)}):a,y=p.map(function(b,x){return K$(K$({},b),{},{base:g[x]})});return l==="vertical"?m=Nm().y(Ud).x1(zd).x0(function(b){return b.base.x}):m=Nm().x(zd).y1(Ud).y0(function(b){return b.base.y}),m.defined(Mm).curve(f),m(y)}return l==="vertical"&&Ne(a)?m=Nm().y(Ud).x1(zd).x0(a):Ne(a)?m=Nm().x(zd).y1(Ud).y0(a):m=YB().x(zd).y(Ud),m.defined(Mm).curve(f),m(p)},lo=function(e){var r=e.className,n=e.points,s=e.path,i=e.pathRef;if((!n||!n.length)&&!s)return null;var a=n&&n.length?age(e):s;return z.createElement("path",WS({},Ue(e,!1),Cg(e),{className:st("recharts-curve",r),d:a,ref:i}))},Tj={exports:{}},Lj,X$;function oge(){if(X$)return Lj;X$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Lj=t,Lj}var Mj,Y$;function lge(){if(Y$)return Mj;Y$=1;var t=oge();function e(){}function r(){}return r.resetWarningCache=e,Mj=function(){function n(a,l,c,d,f,p){if(p!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},Mj}var J$;function cge(){return J$||(J$=1,Tj.exports=lge()()),Tj.exports}var uge=cge();const At=Pt(uge);var dge=Object.getOwnPropertyNames,fge=Object.getOwnPropertySymbols,hge=Object.prototype.hasOwnProperty;function Q$(t,e){return function(n,s,i){return t(n,s,i)&&e(n,s,i)}}function Rm(t){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,s);var i=s.cache,a=i.get(r),l=i.get(n);if(a&&l)return a===n&&l===r;i.set(r,n),i.set(n,r);var c=t(r,n,s);return i.delete(r),i.delete(n),c}}function e4(t){return dge(t).concat(fge(t))}var pge=Object.hasOwn||function(t,e){return hge.call(t,e)};function Ll(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var mge="__v",gge="__o",vge="_owner",t4=Object.getOwnPropertyDescriptor,r4=Object.keys;function yge(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function xge(t,e){return Ll(t.getTime(),e.getTime())}function bge(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function wge(t,e){return t===e}function n4(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var s=new Array(n),i=t.entries(),a,l,c=0;(a=i.next())&&!a.done;){for(var d=e.entries(),f=!1,p=0;(l=d.next())&&!l.done;){if(s[p]){p++;continue}var m=a.value,g=l.value;if(r.equals(m[0],g[0],c,p,t,e,r)&&r.equals(m[1],g[1],m[0],g[0],t,e,r)){f=s[p]=!0;break}p++}if(!f)return!1;c++}return!0}var _ge=Ll;function jge(t,e,r){var n=r4(t),s=n.length;if(r4(e).length!==s)return!1;for(;s-- >0;)if(!e8(t,e,r,n[s]))return!1;return!0}function qd(t,e,r){var n=e4(t),s=n.length;if(e4(e).length!==s)return!1;for(var i,a,l;s-- >0;)if(i=n[s],!e8(t,e,r,i)||(a=t4(t,i),l=t4(e,i),(a||l)&&(!a||!l||a.configurable!==l.configurable||a.enumerable!==l.enumerable||a.writable!==l.writable)))return!1;return!0}function Sge(t,e){return Ll(t.valueOf(),e.valueOf())}function Nge(t,e){return t.source===e.source&&t.flags===e.flags}function s4(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var s=new Array(n),i=t.values(),a,l;(a=i.next())&&!a.done;){for(var c=e.values(),d=!1,f=0;(l=c.next())&&!l.done;){if(!s[f]&&r.equals(a.value,l.value,a.value,l.value,t,e,r)){d=s[f]=!0;break}f++}if(!d)return!1}return!0}function Ege(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Cge(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function e8(t,e,r,n){return(n===vge||n===gge||n===mge)&&(t.$$typeof||e.$$typeof)?!0:pge(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var kge="[object Arguments]",Pge="[object Boolean]",Oge="[object Date]",Age="[object Error]",Tge="[object Map]",Lge="[object Number]",Mge="[object Object]",Rge="[object RegExp]",Dge="[object Set]",Ige="[object String]",$ge="[object URL]",Fge=Array.isArray,i4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,a4=Object.assign,Bge=Object.prototype.toString.call.bind(Object.prototype.toString);function zge(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,s=t.areFunctionsEqual,i=t.areMapsEqual,a=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,f=t.areSetsEqual,p=t.areTypedArraysEqual,m=t.areUrlsEqual;return function(y,b,x){if(y===b)return!0;if(y==null||b==null)return!1;var j=typeof y;if(j!==typeof b)return!1;if(j!=="object")return j==="number"?a(y,b,x):j==="function"?s(y,b,x):!1;var S=y.constructor;if(S!==b.constructor)return!1;if(S===Object)return l(y,b,x);if(Fge(y))return e(y,b,x);if(i4!=null&&i4(y))return p(y,b,x);if(S===Date)return r(y,b,x);if(S===RegExp)return d(y,b,x);if(S===Map)return i(y,b,x);if(S===Set)return f(y,b,x);var C=Bge(y);return C===Oge?r(y,b,x):C===Rge?d(y,b,x):C===Tge?i(y,b,x):C===Dge?f(y,b,x):C===Mge?typeof y.then!="function"&&typeof b.then!="function"&&l(y,b,x):C===$ge?m(y,b,x):C===Age?n(y,b,x):C===kge?l(y,b,x):C===Pge||C===Lge||C===Ige?c(y,b,x):!1}}function Uge(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,s={areArraysEqual:n?qd:yge,areDatesEqual:xge,areErrorsEqual:bge,areFunctionsEqual:wge,areMapsEqual:n?Q$(n4,qd):n4,areNumbersEqual:_ge,areObjectsEqual:n?qd:jge,arePrimitiveWrappersEqual:Sge,areRegExpsEqual:Nge,areSetsEqual:n?Q$(s4,qd):s4,areTypedArraysEqual:n?qd:Ege,areUrlsEqual:Cge};if(r&&(s=a4({},s,r(s))),e){var i=Rm(s.areArraysEqual),a=Rm(s.areMapsEqual),l=Rm(s.areObjectsEqual),c=Rm(s.areSetsEqual);s=a4({},s,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:l,areSetsEqual:c})}return s}function qge(t){return function(e,r,n,s,i,a,l){return t(e,r,l)}}function Vge(t){var e=t.circular,r=t.comparator,n=t.createState,s=t.equals,i=t.strict;if(n)return function(c,d){var f=n(),p=f.cache,m=p===void 0?e?new WeakMap:void 0:p,g=f.meta;return r(c,d,{cache:m,equals:s,meta:g,strict:i})};if(e)return function(c,d){return r(c,d,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var a={cache:void 0,equals:s,meta:void 0,strict:i};return function(c,d){return r(c,d,a)}}var Wge=Oo();Oo({strict:!0});Oo({circular:!0});Oo({circular:!0,strict:!0});Oo({createInternalComparator:function(){return Ll}});Oo({strict:!0,createInternalComparator:function(){return Ll}});Oo({circular:!0,createInternalComparator:function(){return Ll}});Oo({circular:!0,createInternalComparator:function(){return Ll},strict:!0});function Oo(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,s=t.createState,i=t.strict,a=i===void 0?!1:i,l=Uge(t),c=zge(l),d=n?n(c):qge(c);return Vge({circular:r,comparator:c,createState:s,equals:d,strict:a})}function Hge(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function o4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>e?(t(i),r=-1):Hge(s)};requestAnimationFrame(n)}function HS(t){"@babel/helpers - typeof";return HS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HS(t)}function Gge(t){return Yge(t)||Xge(t)||Zge(t)||Kge()}function Kge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zge(t,e){if(t){if(typeof t=="string")return l4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l4(t,e)}}function l4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yge(t){if(Array.isArray(t))return t}function Jge(){var t={},e=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var a=i,l=Gge(a),c=l[0],d=l.slice(1);if(typeof c=="number"){o4(s.bind(null,d),c);return}s(c),o4(s.bind(null,d));return}HS(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function c4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function u4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(r),!0).forEach(function(n){t8(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t8(t,e,r){return e=Qge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qge(t){var e=eve(t,"string");return bh(e)==="symbol"?e:String(e)}function eve(t,e){if(bh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tve=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},rve=function(e){return e},nve=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},xf=function(e,r){return Object.keys(r).reduce(function(n,s){return u4(u4({},n),{},t8({},s,e(s,r[s])))},{})},d4=function(e,r,n){return e.map(function(s){return"".concat(nve(s)," ").concat(r,"ms ").concat(n)}).join(",")};function sve(t,e){return ove(t)||ave(t,e)||r8(t,e)||ive()}function ive(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ave(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function ove(t){if(Array.isArray(t))return t}function lve(t){return dve(t)||uve(t)||r8(t)||cve()}function cve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r8(t,e){if(t){if(typeof t=="string")return GS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GS(t,e)}}function uve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dve(t){if(Array.isArray(t))return GS(t)}function GS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var tv=1e-4,n8=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},s8=function(e,r){return e.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},f4=function(e,r){return function(n){var s=n8(e,r);return s8(s,n)}},fve=function(e,r){return function(n){var s=n8(e,r),i=[].concat(lve(s.map(function(a,l){return a*l}).slice(1)),[0]);return s8(i,n)}},h4=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r[0],i=r[1],a=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,a=1,l=1;break;case"ease":s=.25,i=.1,a=.25,l=1;break;case"ease-in":s=.42,i=0,a=1,l=1;break;case"ease-out":s=.42,i=0,a=.58,l=1;break;case"ease-in-out":s=0,i=0,a=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=sve(d,4);s=f[0],i=f[1],a=f[2],l=f[3]}}}var p=f4(s,a),m=f4(i,l),g=fve(s,a),y=function(j){return j>1?1:j<0?0:j},b=function(j){for(var S=j>1?1:j,C=S,E=0;E<8;++E){var N=p(C)-S,P=g(C);if(Math.abs(N-S)<tv||P<tv)return m(C);C=y(C-N/P)}return m(C)};return b.isStepper=!1,b},hve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,s=e.damping,i=s===void 0?8:s,a=e.dt,l=a===void 0?17:a,c=function(f,p,m){var g=-(f-p)*n,y=m*i,b=m+(g-y)*l/1e3,x=m*l/1e3+f;return Math.abs(x-p)<tv&&Math.abs(b)<tv?[p,0]:[x,b]};return c.isStepper=!0,c.dt=l,c},pve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return h4(s);case"spring":return hve();default:if(s.split("(")[0]==="cubic-bezier")return h4(s)}return typeof s=="function"?s:null};function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function p4(t){return vve(t)||gve(t)||i8(t)||mve()}function mve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vve(t){if(Array.isArray(t))return ZS(t)}function m4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function en(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m4(Object(r),!0).forEach(function(n){KS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KS(t,e,r){return e=yve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yve(t){var e=xve(t,"string");return wh(e)==="symbol"?e:String(e)}function xve(t,e){if(wh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bve(t,e){return jve(t)||_ve(t,e)||i8(t,e)||wve()}function wve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i8(t,e){if(t){if(typeof t=="string")return ZS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZS(t,e)}}function ZS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _ve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function jve(t){if(Array.isArray(t))return t}var rv=function(e,r,n){return e+(r-e)*n},XS=function(e){var r=e.from,n=e.to;return r!==n},Sve=function t(e,r,n){var s=xf(function(i,a){if(XS(a)){var l=e(a.from,a.to,a.velocity),c=bve(l,2),d=c[0],f=c[1];return en(en({},a),{},{from:d,velocity:f})}return a},r);return n<1?xf(function(i,a){return XS(a)?en(en({},a),{},{velocity:rv(a.velocity,s[i].velocity,n),from:rv(a.from,s[i].from,n)}):a},r):t(e,s,n-1)};const Nve=function(t,e,r,n,s){var i=tve(t,e),a=i.reduce(function(x,j){return en(en({},x),{},KS({},j,[t[j],e[j]]))},{}),l=i.reduce(function(x,j){return en(en({},x),{},KS({},j,{from:t[j],velocity:0,to:e[j]}))},{}),c=-1,d,f,p=function(){return null},m=function(){return xf(function(j,S){return S.from},l)},g=function(){return!Object.values(l).filter(XS).length},y=function(j){d||(d=j);var S=j-d,C=S/r.dt;l=Sve(r,l,C),s(en(en(en({},t),e),m())),d=j,g()||(c=requestAnimationFrame(p))},b=function(j){f||(f=j);var S=(j-f)/n,C=xf(function(N,P){return rv.apply(void 0,p4(P).concat([r(S)]))},a);if(s(en(en(en({},t),e),C)),S<1)c=requestAnimationFrame(p);else{var E=xf(function(N,P){return rv.apply(void 0,p4(P).concat([r(1)]))},a);s(en(en(en({},t),e),E))}};return p=r.isStepper?y:b,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(c)}}};function iu(t){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(t)}var Eve=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Cve(t,e){if(t==null)return{};var r=kve(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kve(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Rj(t){return Tve(t)||Ave(t)||Ove(t)||Pve()}function Pve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ove(t,e){if(t){if(typeof t=="string")return YS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YS(t,e)}}function Ave(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tve(t){if(Array.isArray(t))return YS(t)}function YS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Vs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g4(Object(r),!0).forEach(function(n){tf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tf(t,e,r){return e=a8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a8(n.key),n)}}function Rve(t,e,r){return e&&Mve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a8(t){var e=Dve(t,"string");return iu(e)==="symbol"?e:String(e)}function Dve(t,e){if(iu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(iu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ive(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JS(t,e)}function JS(t,e){return JS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},JS(t,e)}function $ve(t){var e=Fve();return function(){var n=nv(t),s;if(e){var i=nv(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return QS(this,s)}}function QS(t,e){if(e&&(iu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eN(t)}function eN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nv(t){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nv(t)}var Os=function(t){Ive(r,t);var e=$ve(r);function r(n,s){var i;Lve(this,r),i=e.call(this,n,s);var a=i.props,l=a.isActive,c=a.attributeName,d=a.from,f=a.to,p=a.steps,m=a.children,g=a.duration;if(i.handleStyleChange=i.handleStyleChange.bind(eN(i)),i.changeStyle=i.changeStyle.bind(eN(i)),!l||g<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),QS(i);if(p&&p.length)i.state={style:p[0].style};else if(d){if(typeof m=="function")return i.state={style:d},QS(i);i.state={style:c?tf({},c,d):d}}else i.state={style:{}};return i}return Rve(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,a=s.canBegin;this.mounted=!0,!(!i||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,a=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,f=i.to,p=i.from,m=this.state.style;if(l){if(!a){var g={style:c?tf({},c,f):f};this.state&&m&&(c&&m[c]!==f||!c&&m!==f)&&this.setState(g);return}if(!(Wge(s.to,f)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=y||d?p:s.to;if(this.state&&m){var x={style:c?tf({},c,b):b};(c&&m[c]!==b||!c&&m!==b)&&this.setState(x)}this.runAnimation(Vs(Vs({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,a=s.from,l=s.to,c=s.duration,d=s.easing,f=s.begin,p=s.onAnimationEnd,m=s.onAnimationStart,g=Nve(a,l,pve(d),c,this.changeStyle),y=function(){i.stopJSAnimation=g()};this.manager.start([m,f,y,c,p])}},{key:"runStepAnimation",value:function(s){var i=this,a=s.steps,l=s.begin,c=s.onAnimationStart,d=a[0],f=d.style,p=d.duration,m=p===void 0?0:p,g=function(b,x,j){if(j===0)return b;var S=x.duration,C=x.easing,E=C===void 0?"ease":C,N=x.style,P=x.properties,O=x.onAnimationEnd,L=j>0?a[j-1]:x,A=P||Object.keys(N);if(typeof E=="function"||E==="spring")return[].concat(Rj(b),[i.runJSAnimation.bind(i,{from:L.style,to:N,duration:S,easing:E}),S]);var R=d4(A,S,E),M=Vs(Vs(Vs({},L.style),N),{},{transition:R});return[].concat(Rj(b),[M,S,O]).filter(rve)};return this.manager.start([c].concat(Rj(a.reduce(g,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=Jge());var i=s.begin,a=s.duration,l=s.attributeName,c=s.to,d=s.easing,f=s.onAnimationStart,p=s.onAnimationEnd,m=s.steps,g=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof d=="function"||typeof g=="function"||d==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var b=l?tf({},l,c):c,x=d4(Object.keys(b),a,d);y.start([f,i,Vs(Vs({},b),{},{transition:x}),a,p])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var a=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Cve(s,Eve),d=w.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||d===0||a<=0)return i;var p=function(g){var y=g.props,b=y.style,x=b===void 0?{}:b,j=y.className,S=w.cloneElement(g,Vs(Vs({},c),{},{style:Vs(Vs({},x),f),className:j}));return S};return d===1?p(w.Children.only(i)):z.createElement("div",null,w.Children.map(i,function(m){return p(m)}))}}]),r}(w.PureComponent);Os.displayName="Animate";Os.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Os.propTypes={from:At.oneOfType([At.object,At.string]),to:At.oneOfType([At.object,At.string]),attributeName:At.string,duration:At.number,begin:At.number,easing:At.oneOfType([At.string,At.func]),steps:At.arrayOf(At.shape({duration:At.number.isRequired,style:At.object.isRequired,easing:At.oneOfType([At.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),At.func]),properties:At.arrayOf("string"),onAnimationEnd:At.func})),children:At.oneOfType([At.node,At.func]),isActive:At.bool,canBegin:At.bool,onAnimationEnd:At.func,shouldReAnimate:At.bool,onAnimationStart:At.func,onAnimationReStart:At.func};function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sv.apply(this,arguments)}function Bve(t,e){return Vve(t)||qve(t,e)||Uve(t,e)||zve()}function zve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uve(t,e){if(t){if(typeof t=="string")return v4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v4(t,e)}}function v4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Vve(t){if(Array.isArray(t))return t}function y4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function x4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(r),!0).forEach(function(n){Wve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wve(t,e,r){return e=Hve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hve(t){var e=Gve(t,"string");return _h(e)=="symbol"?e:e+""}function Gve(t,e){if(_h(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b4=function(e,r,n,s,i){var a=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,f;if(a>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,g=4;m<g;m++)p[m]=i[m]>a?a:i[m];f="M".concat(e,",").concat(r+l*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+c*p[0],",").concat(r)),f+="L ".concat(e+n-c*p[1],",").concat(r),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(r+l*p[1])),f+="L ".concat(e+n,",").concat(r+s-l*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+n-c*p[2],",").concat(r+s)),f+="L ".concat(e+c*p[3],",").concat(r+s),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(r+s-l*p[3])),f+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);f="M ".concat(e,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+c*y,",").concat(r,`
            L `).concat(e+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+n,",").concat(r+l*y,`
            L `).concat(e+n,",").concat(r+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+n-c*y,",").concat(r+s,`
            L `).concat(e+c*y,",").concat(r+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e,",").concat(r+s-l*y," Z")}else f="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},Kve=function(e,r){if(!e||!r)return!1;var n=e.x,s=e.y,i=r.x,a=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),f=Math.max(i,i+l),p=Math.min(a,a+c),m=Math.max(a,a+c);return n>=d&&n<=f&&s>=p&&s<=m}return!1},Zve={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MC=function(e){var r=x4(x4({},Zve),e),n=w.useRef(),s=w.useState(-1),i=Bve(s,2),a=i[0],l=i[1];w.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&l(E)}catch{}},[]);var c=r.x,d=r.y,f=r.width,p=r.height,m=r.radius,g=r.className,y=r.animationEasing,b=r.animationDuration,x=r.animationBegin,j=r.isAnimationActive,S=r.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var C=st("recharts-rectangle",g);return S?z.createElement(Os,{canBegin:a>0,from:{width:f,height:p,x:c,y:d},to:{width:f,height:p,x:c,y:d},duration:b,animationEasing:y,isActive:S},function(E){var N=E.width,P=E.height,O=E.x,L=E.y;return z.createElement(Os,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:b,isActive:j,easing:y},z.createElement("path",sv({},Ue(r,!0),{className:C,d:b4(O,L,N,P,m),ref:n})))}):z.createElement("path",sv({},Ue(r,!0),{className:C,d:b4(c,d,f,p,m)}))},Xve=["points","className","baseLinePoints","connectNulls"];function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nc.apply(this,arguments)}function Yve(t,e){if(t==null)return{};var r=Jve(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function w4(t){return rye(t)||tye(t)||eye(t)||Qve()}function Qve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eye(t,e){if(t){if(typeof t=="string")return tN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tN(t,e)}}function tye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rye(t){if(Array.isArray(t))return tN(t)}function tN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _4=function(e){return e&&e.x===+e.x&&e.y===+e.y},nye=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){_4(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),_4(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},bf=function(e,r){var n=nye(e);r&&(n=[n.reduce(function(i,a){return[].concat(w4(i),w4(a))},[])]);var s=n.map(function(i){return i.reduce(function(a,l,c){return"".concat(a).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},sye=function(e,r,n){var s=bf(e,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(bf(r.reverse(),n).slice(1))},iye=function(e){var r=e.points,n=e.className,s=e.baseLinePoints,i=e.connectNulls,a=Yve(e,Xve);if(!r||!r.length)return null;var l=st("recharts-polygon",n);if(s&&s.length){var c=a.stroke&&a.stroke!=="none",d=sye(r,s,i);return z.createElement("g",{className:l},z.createElement("path",Nc({},Ue(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",stroke:"none",d})),c?z.createElement("path",Nc({},Ue(a,!0),{fill:"none",d:bf(r,i)})):null,c?z.createElement("path",Nc({},Ue(a,!0),{fill:"none",d:bf(s,i)})):null)}var f=bf(r,i);return z.createElement("path",Nc({},Ue(a,!0),{fill:f.slice(-1)==="Z"?a.fill:"none",className:l,d:f}))};function rN(){return rN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rN.apply(this,arguments)}var ep=function(e){var r=e.cx,n=e.cy,s=e.r,i=e.className,a=st("recharts-dot",i);return r===+r&&n===+n&&s===+s?z.createElement("circle",rN({},Ue(e,!1),Cg(e),{className:a,cx:r,cy:n,r:s})):null};function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}var aye=["x","y","top","left","width","height","className"];function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nN.apply(this,arguments)}function j4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function oye(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j4(Object(r),!0).forEach(function(n){lye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lye(t,e,r){return e=cye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cye(t){var e=uye(t,"string");return jh(e)=="symbol"?e:e+""}function uye(t,e){if(jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dye(t,e){if(t==null)return{};var r=fye(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fye(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var hye=function(e,r,n,s,i,a){return"M".concat(e,",").concat(i,"v").concat(s,"M").concat(a,",").concat(r,"h").concat(n)},pye=function(e){var r=e.x,n=r===void 0?0:r,s=e.y,i=s===void 0?0:s,a=e.top,l=a===void 0?0:a,c=e.left,d=c===void 0?0:c,f=e.width,p=f===void 0?0:f,m=e.height,g=m===void 0?0:m,y=e.className,b=dye(e,aye),x=oye({x:n,y:i,top:l,left:d,width:p,height:g},b);return!Ne(n)||!Ne(i)||!Ne(p)||!Ne(g)||!Ne(l)||!Ne(d)?null:z.createElement("path",nN({},Ue(x,!0),{className:st("recharts-cross",y),d:hye(n,i,p,g,l,d)}))},Dj,S4;function mye(){if(S4)return Dj;S4=1;var t=my(),e=wU(),r=Mi();function n(s,i){return s&&s.length?t(s,r(i,2),e):void 0}return Dj=n,Dj}var gye=mye();const vye=Pt(gye);var Ij,N4;function yye(){if(N4)return Ij;N4=1;var t=my(),e=Mi(),r=_U();function n(s,i){return s&&s.length?t(s,e(i,2),r):void 0}return Ij=n,Ij}var xye=yye();const bye=Pt(xye);var wye=["cx","cy","angle","ticks","axisLine"],_ye=["ticks","tick","angle","tickFormatter","stroke"];function au(t){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},au(t)}function wf(){return wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wf.apply(this,arguments)}function E4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ko(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(r),!0).forEach(function(n){xy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C4(t,e){if(t==null)return{};var r=jye(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jye(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Sye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l8(n.key),n)}}function Nye(t,e,r){return e&&k4(t.prototype,e),r&&k4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Eye(t,e,r){return e=iv(e),Cye(t,o8()?Reflect.construct(e,r||[],iv(t).constructor):e.apply(t,r))}function Cye(t,e){if(e&&(au(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kye(t)}function kye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o8=function(){return!!t})()}function iv(t){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iv(t)}function Pye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sN(t,e)}function sN(t,e){return sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},sN(t,e)}function xy(t,e,r){return e=l8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l8(t){var e=Oye(t,"string");return au(e)=="symbol"?e:e+""}function Oye(t,e){if(au(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var by=function(t){function e(){return Sye(this,e),Eye(this,e,arguments)}return Pye(e,t),Nye(e,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,a=i.angle,l=i.cx,c=i.cy;return Gt(l,c,s,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,a=n.angle,l=n.ticks,c=vye(l,function(f){return f.coordinate||0}),d=bye(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:a,endAngle:a,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,a=n.angle,l=n.ticks,c=n.axisLine,d=C4(n,wye),f=l.reduce(function(y,b){return[Math.min(y[0],b.coordinate),Math.max(y[1],b.coordinate)]},[1/0,-1/0]),p=Gt(s,i,f[0],a),m=Gt(s,i,f[1],a),g=Ko(Ko(Ko({},Ue(d,!1)),{},{fill:"none"},Ue(c,!1)),{},{x1:p.x,y1:p.y,x2:m.x,y2:m.y});return z.createElement("line",wf({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,a=s.tick,l=s.angle,c=s.tickFormatter,d=s.stroke,f=C4(s,_ye),p=this.getTickTextAnchor(),m=Ue(f,!1),g=Ue(a,!1),y=i.map(function(b,x){var j=n.getTickValueCoord(b),S=Ko(Ko(Ko(Ko({textAnchor:p,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},m),{},{stroke:"none",fill:d},g),{},{index:x},j),{},{payload:b});return z.createElement(at,wf({className:st("recharts-polar-radius-axis-tick",XU(a)),key:"tick-".concat(b.coordinate)},yo(n.props,b,x)),e.renderTickItem(a,S,c?c(b.value,x):b.value))});return z.createElement(at,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,a=n.tick;return!s||!s.length?null:z.createElement(at,{className:st("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),a&&this.renderTicks(),Gr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var a;return z.isValidElement(n)?a=z.cloneElement(n,s):Ze(n)?a=n(s):a=z.createElement(jl,wf({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),a}}])}(w.PureComponent);xy(by,"displayName","PolarRadiusAxis");xy(by,"axisType","radiusAxis");xy(by,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ou(t){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(t)}function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rl.apply(this,arguments)}function P4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Zo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P4(Object(r),!0).forEach(function(n){wy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Aye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u8(n.key),n)}}function Tye(t,e,r){return e&&O4(t.prototype,e),r&&O4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lye(t,e,r){return e=av(e),Mye(t,c8()?Reflect.construct(e,r||[],av(t).constructor):e.apply(t,r))}function Mye(t,e){if(e&&(ou(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rye(t)}function Rye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c8=function(){return!!t})()}function av(t){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},av(t)}function Dye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iN(t,e)}function iN(t,e){return iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},iN(t,e)}function wy(t,e,r){return e=u8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u8(t){var e=Iye(t,"string");return ou(e)=="symbol"?e:e+""}function Iye(t,e){if(ou(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $ye=Math.PI/180,A4=1e-5,_y=function(t){function e(){return Aye(this,e),Lye(this,e,arguments)}return Dye(e,t),Tye(e,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,a=s.cy,l=s.radius,c=s.orientation,d=s.tickSize,f=d||8,p=Gt(i,a,l,n.coordinate),m=Gt(i,a,l+(c==="inner"?-1:1)*f,n.coordinate);return{x1:p.x,y1:p.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*$ye),a;return i>A4?a=s==="outer"?"start":"end":i<-A4?a=s==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,a=n.radius,l=n.axisLine,c=n.axisLineType,d=Zo(Zo({},Ue(this.props,!1)),{},{fill:"none"},Ue(l,!1));if(c==="circle")return z.createElement(ep,rl({className:"recharts-polar-angle-axis-line"},d,{cx:s,cy:i,r:a}));var f=this.props.ticks,p=f.map(function(m){return Gt(s,i,a,m.coordinate)});return z.createElement(iye,rl({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,a=s.tick,l=s.tickLine,c=s.tickFormatter,d=s.stroke,f=Ue(this.props,!1),p=Ue(a,!1),m=Zo(Zo({},f),{},{fill:"none"},Ue(l,!1)),g=i.map(function(y,b){var x=n.getTickLineCoord(y),j=n.getTickTextAnchor(y),S=Zo(Zo(Zo({textAnchor:j},f),{},{stroke:"none",fill:d},p),{},{index:b,payload:y,x:x.x2,y:x.y2});return z.createElement(at,rl({className:st("recharts-polar-angle-axis-tick",XU(a)),key:"tick-".concat(y.coordinate)},yo(n.props,y,b)),l&&z.createElement("line",rl({className:"recharts-polar-angle-axis-tick-line"},m,x)),a&&e.renderTickItem(a,S,c?c(y.value,b):y.value))});return z.createElement(at,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,a=n.axisLine;return i<=0||!s||!s.length?null:z.createElement(at,{className:st("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var a;return z.isValidElement(n)?a=z.cloneElement(n,s):Ze(n)?a=n(s):a=z.createElement(jl,rl({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),a}}])}(w.PureComponent);wy(_y,"displayName","PolarAngleAxis");wy(_y,"axisType","angleAxis");wy(_y,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var $j,T4;function Fye(){if(T4)return $j;T4=1;var t=bz(),e=t(Object.getPrototypeOf,Object);return $j=e,$j}var Fj,L4;function Bye(){if(L4)return Fj;L4=1;var t=ma(),e=Fye(),r=ga(),n="[object Object]",s=Function.prototype,i=Object.prototype,a=s.toString,l=i.hasOwnProperty,c=a.call(Object);function d(f){if(!r(f)||t(f)!=n)return!1;var p=e(f);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&a.call(m)==c}return Fj=d,Fj}var zye=Bye();const Uye=Pt(zye);var Bj,M4;function qye(){if(M4)return Bj;M4=1;var t=ma(),e=ga(),r="[object Boolean]";function n(s){return s===!0||s===!1||e(s)&&t(s)==r}return Bj=n,Bj}var Vye=qye();const Wye=Pt(Vye);function Sh(t){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(t)}function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ov.apply(this,arguments)}function Hye(t,e){return Xye(t)||Zye(t,e)||Kye(t,e)||Gye()}function Gye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kye(t,e){if(t){if(typeof t=="string")return R4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R4(t,e)}}function R4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Xye(t){if(Array.isArray(t))return t}function D4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function I4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D4(Object(r),!0).forEach(function(n){Yye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yye(t,e,r){return e=Jye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jye(t){var e=Qye(t,"string");return Sh(e)=="symbol"?e:e+""}function Qye(t,e){if(Sh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $4=function(e,r,n,s,i){var a=n-s,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-a/2,",").concat(r+i),l+="L ".concat(e+n-a/2-s,",").concat(r+i),l+="L ".concat(e,",").concat(r," Z"),l},e0e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},t0e=function(e){var r=I4(I4({},e0e),e),n=w.useRef(),s=w.useState(-1),i=Hye(s,2),a=i[0],l=i[1];w.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&l(C)}catch{}},[]);var c=r.x,d=r.y,f=r.upperWidth,p=r.lowerWidth,m=r.height,g=r.className,y=r.animationEasing,b=r.animationDuration,x=r.animationBegin,j=r.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||p!==+p||m!==+m||f===0&&p===0||m===0)return null;var S=st("recharts-trapezoid",g);return j?z.createElement(Os,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:d},to:{upperWidth:f,lowerWidth:p,height:m,x:c,y:d},duration:b,animationEasing:y,isActive:j},function(C){var E=C.upperWidth,N=C.lowerWidth,P=C.height,O=C.x,L=C.y;return z.createElement(Os,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:b,easing:y},z.createElement("path",ov({},Ue(r,!0),{className:S,d:$4(O,L,E,N,P),ref:n})))}):z.createElement("g",null,z.createElement("path",ov({},Ue(r,!0),{className:S,d:$4(c,d,f,p,m)})))},r0e=["option","shapeType","propTransformer","activeClassName","isActive"];function Nh(t){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(t)}function n0e(t,e){if(t==null)return{};var r=s0e(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function s0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function F4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function lv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F4(Object(r),!0).forEach(function(n){i0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i0e(t,e,r){return e=a0e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a0e(t){var e=o0e(t,"string");return Nh(e)=="symbol"?e:e+""}function o0e(t,e){if(Nh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l0e(t,e){return lv(lv({},e),t)}function c0e(t,e){return t==="symbols"}function B4(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return z.createElement(MC,r);case"trapezoid":return z.createElement(t0e,r);case"sector":return z.createElement(QU,r);case"symbols":if(c0e(e))return z.createElement(iy,r);break;default:return null}}function u0e(t){return w.isValidElement(t)?t.props:t}function cv(t){var e=t.option,r=t.shapeType,n=t.propTransformer,s=n===void 0?l0e:n,i=t.activeClassName,a=i===void 0?"recharts-active-shape":i,l=t.isActive,c=n0e(t,r0e),d;if(w.isValidElement(e))d=w.cloneElement(e,lv(lv({},c),u0e(e)));else if(Ze(e))d=e(c);else if(Uye(e)&&!Wye(e)){var f=s(e,c);d=z.createElement(B4,{shapeType:r,elementProps:f})}else{var p=c;d=z.createElement(B4,{shapeType:r,elementProps:p})}return l?z.createElement(at,{className:a},d):d}function jy(t,e){return e!=null&&"trapezoids"in t.props}function Sy(t,e){return e!=null&&"sectors"in t.props}function Eh(t,e){return e!=null&&"points"in t.props}function d0e(t,e){var r,n,s=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return s&&i}function f0e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function h0e(t,e){var r=t.x===e.x,n=t.y===e.y,s=t.z===e.z;return r&&n&&s}function p0e(t,e){var r;return jy(t,e)?r=d0e:Sy(t,e)?r=f0e:Eh(t,e)&&(r=h0e),r}function m0e(t,e){var r;return jy(t,e)?r="trapezoids":Sy(t,e)?r="sectors":Eh(t,e)&&(r="points"),r}function g0e(t,e){if(jy(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Sy(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Eh(t,e)?e.payload:{}}function v0e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,s=m0e(r,e),i=g0e(r,e),a=n.filter(function(c,d){var f=xo(i,c),p=r.props[s].filter(function(y){var b=p0e(r,e);return b(y,e)}),m=r.props[s].indexOf(p[p.length-1]),g=d===m;return f&&g}),l=n.indexOf(a[a.length-1]);return l}var Wm;function lu(t){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(t)}function Ec(){return Ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ec.apply(this,arguments)}function z4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Vt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z4(Object(r),!0).forEach(function(n){Cs(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f8(n.key),n)}}function x0e(t,e,r){return e&&U4(t.prototype,e),r&&U4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function b0e(t,e,r){return e=uv(e),w0e(t,d8()?Reflect.construct(e,r||[],uv(t).constructor):e.apply(t,r))}function w0e(t,e){if(e&&(lu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _0e(t)}function _0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d8=function(){return!!t})()}function uv(t){return uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uv(t)}function j0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aN(t,e)}function aN(t,e){return aN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},aN(t,e)}function Cs(t,e,r){return e=f8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f8(t){var e=S0e(t,"string");return lu(e)=="symbol"?e:e+""}function S0e(t,e){if(lu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xa=function(t){function e(r){var n;return y0e(this,e),n=b0e(this,e,[r]),Cs(n,"pieRef",null),Cs(n,"sectorRefs",[]),Cs(n,"id",Co("recharts-pie-")),Cs(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ze(s)&&s()}),Cs(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ze(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return j0e(e,t),x0e(e,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,f=Ue(this.props,!1),p=Ue(a,!1),m=Ue(l,!1),g=a&&a.offsetRadius||20,y=n.map(function(b,x){var j=(b.startAngle+b.endAngle)/2,S=Gt(b.cx,b.cy,b.outerRadius+g,j),C=Vt(Vt(Vt(Vt({},f),b),{},{stroke:"none"},p),{},{index:x,textAnchor:e.getTextAnchor(S.x,b.cx)},S),E=Vt(Vt(Vt(Vt({},f),b),{},{fill:"none",stroke:b.fill},m),{},{index:x,points:[Gt(b.cx,b.cy,b.outerRadius,j),S]}),N=c;return Xe(c)&&Xe(d)?N="value":Xe(c)&&(N=d),z.createElement(at,{key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(x)},l&&e.renderLabelLineItem(l,E,"line"),e.renderLabelItem(a,C,Jt(b,N)))});return z.createElement(at,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,a=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(d,f){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var p=s.isActiveIndex(f),m=c&&s.hasActiveIndex()?c:null,g=p?a:m,y=Vt(Vt({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return z.createElement(at,Ec({ref:function(x){x&&!s.sectorRefs.includes(x)&&s.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},yo(s.props,d,f),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(f)}),z.createElement(cv,Ec({option:g,isActive:p,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,a=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,d=s.animationEasing,f=s.animationId,p=this.state,m=p.prevSectors,g=p.prevIsAnimationActive;return z.createElement(Os,{begin:l,duration:c,isActive:a,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var b=y.t,x=[],j=i&&i[0],S=j.startAngle;return i.forEach(function(C,E){var N=m&&m[E],P=E>0?rs(C,"paddingAngle",0):0;if(N){var O=cr(N.endAngle-N.startAngle,C.endAngle-C.startAngle),L=Vt(Vt({},C),{},{startAngle:S+P,endAngle:S+O(b)+P});x.push(L),S=L.endAngle}else{var A=C.endAngle,R=C.startAngle,M=cr(0,A-R),D=M(b),B=Vt(Vt({},C),{},{startAngle:S+P,endAngle:S+D+P});x.push(B),S=B.endAngle}}),z.createElement(at,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var a=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[a].focus(),s.setState({sectorToFocus:a});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,a=this.state.prevSectors;return i&&s&&s.length&&(!a||!xo(a,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,a=s.sectors,l=s.className,c=s.label,d=s.cx,f=s.cy,p=s.innerRadius,m=s.outerRadius,g=s.isAnimationActive,y=this.state.isAnimationFinished;if(i||!a||!a.length||!Ne(d)||!Ne(f)||!Ne(p)||!Ne(m))return null;var b=st("recharts-pie",l);return z.createElement(at,{tabIndex:this.props.rootTabIndex,className:b,ref:function(j){n.pieRef=j}},this.renderSectors(),c&&this.renderLabels(a),Gr.renderCallByParent(this.props,null,!1),(!g||y)&&ni.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(z.isValidElement(n))return z.cloneElement(n,s);if(Ze(n))return n(s);var a=st("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return z.createElement(lo,Ec({},s,{key:i,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(n,s,i){if(z.isValidElement(n))return z.cloneElement(n,s);var a=i;if(Ze(n)&&(a=n(s),z.isValidElement(a)))return a;var l=st("recharts-pie-label-text",typeof n!="boolean"&&!Ze(n)?n.className:"");return z.createElement(jl,Ec({},s,{alignmentBaseline:"middle",className:l}),a)}}])}(w.PureComponent);Wm=xa;Cs(xa,"displayName","Pie");Cs(xa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!va.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Cs(xa,"parseDeltaAngle",function(t,e){var r=wn(e-t),n=Math.min(Math.abs(e-t),360);return r*n});Cs(xa,"getRealPieData",function(t){var e=t.data,r=t.children,n=Ue(t,!1),s=Sn(r,Zh);return e&&e.length?e.map(function(i,a){return Vt(Vt(Vt({payload:i},n),i),s&&s[a]&&s[a].props)}):s&&s.length?s.map(function(i){return Vt(Vt({},n),i.props)}):[]});Cs(xa,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,s=e.width,i=e.height,a=ZU(s,i),l=n+_n(t.cx,s,s/2),c=r+_n(t.cy,i,i/2),d=_n(t.innerRadius,a,0),f=_n(t.outerRadius,a,a*.8),p=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:f,maxRadius:p}});Cs(xa,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?Vt(Vt({},e.type.defaultProps),e.props):e.props,s=Wm.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,a=n.startAngle,l=n.endAngle,c=n.paddingAngle,d=n.dataKey,f=n.nameKey,p=n.valueKey,m=n.tooltipType,g=Math.abs(n.minAngle),y=Wm.parseCoordinateOfPie(n,r),b=Wm.parseDeltaAngle(a,l),x=Math.abs(b),j=d;Xe(d)&&Xe(p)?(ri(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):Xe(d)&&(ri(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=p);var S=s.filter(function(L){return Jt(L,j,0)!==0}).length,C=(x>=360?S:S-1)*c,E=x-S*g-C,N=s.reduce(function(L,A){var R=Jt(A,j,0);return L+(Ne(R)?R:0)},0),P;if(N>0){var O;P=s.map(function(L,A){var R=Jt(L,j,0),M=Jt(L,f,A),D=(Ne(R)?R:0)/N,B;A?B=O.endAngle+wn(b)*c*(R!==0?1:0):B=a;var F=B+wn(b)*((R!==0?g:0)+D*E),V=(B+F)/2,J=(y.innerRadius+y.outerRadius)/2,G=[{name:M,value:R,payload:L,dataKey:j,type:m}],q=Gt(y.cx,y.cy,J,V);return O=Vt(Vt(Vt({percent:D,cornerRadius:i,name:M,tooltipPayload:G,midAngle:V,middleRadius:J,tooltipPosition:q},L),y),{},{value:Jt(L,j),startAngle:B,endAngle:F,payload:L,paddingAngle:wn(b)*c}),O})}return Vt(Vt({},y),{},{sectors:P,data:s})});var zj,q4;function N0e(){if(q4)return zj;q4=1;var t=Math.ceil,e=Math.max;function r(n,s,i,a){for(var l=-1,c=e(t((s-n)/(i||1)),0),d=Array(c);c--;)d[a?c:++l]=n,n+=i;return d}return zj=r,zj}var Uj,V4;function h8(){if(V4)return Uj;V4=1;var t=Dz(),e=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=t(s),s===e||s===-e){var i=s<0?-1:1;return i*r}return s===s?s:0}return Uj=n,Uj}var qj,W4;function E0e(){if(W4)return qj;W4=1;var t=N0e(),e=ly(),r=h8();function n(s){return function(i,a,l){return l&&typeof l!="number"&&e(i,a,l)&&(a=l=void 0),i=r(i),a===void 0?(a=i,i=0):a=r(a),l=l===void 0?i<a?1:-1:r(l),t(i,a,l,s)}}return qj=n,qj}var Vj,H4;function C0e(){if(H4)return Vj;H4=1;var t=E0e(),e=t();return Vj=e,Vj}var k0e=C0e();const dv=Pt(k0e);function Ch(t){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(t)}function G4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function K4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G4(Object(r),!0).forEach(function(n){p8(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p8(t,e,r){return e=P0e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P0e(t){var e=O0e(t,"string");return Ch(e)=="symbol"?e:e+""}function O0e(t,e){if(Ch(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var A0e=["Webkit","Moz","O","ms"],T0e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=A0e.reduce(function(i,a){return K4(K4({},i),{},p8({},a+n,r))},{});return s[e]=r,s};function cu(t){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(t)}function fv(){return fv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fv.apply(this,arguments)}function Z4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Wj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z4(Object(r),!0).forEach(function(n){Hn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function L0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g8(n.key),n)}}function M0e(t,e,r){return e&&X4(t.prototype,e),r&&X4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function R0e(t,e,r){return e=hv(e),D0e(t,m8()?Reflect.construct(e,r||[],hv(t).constructor):e.apply(t,r))}function D0e(t,e){if(e&&(cu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I0e(t)}function I0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m8=function(){return!!t})()}function hv(t){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hv(t)}function $0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oN(t,e)}function oN(t,e){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},oN(t,e)}function Hn(t,e,r){return e=g8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g8(t){var e=F0e(t,"string");return cu(e)=="symbol"?e:e+""}function F0e(t,e){if(cu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var B0e=function(e){var r=e.data,n=e.startIndex,s=e.endIndex,i=e.x,a=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=vf().domain(dv(0,c)).range([i,i+a-l]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(s),scale:d,scaleValues:f}},Y4=function(e){return e.changedTouches&&!!e.changedTouches.length},uu=function(t){function e(r){var n;return L0e(this,e),n=R0e(this,e,[r]),Hn(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Hn(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Hn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,a=s.onDragEnd,l=s.startIndex;a?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Hn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Hn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Hn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Hn(n,"handleSlideDragStart",function(s){var i=Y4(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return $0e(e,t),M0e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,a=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,p=Math.min(s,i),m=Math.max(s,i),g=e.getIndexInRange(a,p),y=e.getIndexInRange(a,m);return{startIndex:g-g%c,endIndex:y===f?f:y-y%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,a=s.tickFormatter,l=s.dataKey,c=Jt(i[n],l,n);return Ze(a)?a(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,a=s.startX,l=s.endX,c=this.props,d=c.x,f=c.width,p=c.travellerWidth,m=c.startIndex,g=c.endIndex,y=c.onChange,b=n.pageX-i;b>0?b=Math.min(b,d+f-p-l,d+f-p-a):b<0&&(b=Math.max(b,d-a,d-l));var x=this.getIndex({startX:a+b,endX:l+b});(x.startIndex!==m||x.endIndex!==g)&&y&&y(x),this.setState({startX:a+b,endX:l+b,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=Y4(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,a=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[a],f=this.props,p=f.x,m=f.width,g=f.travellerWidth,y=f.onChange,b=f.gap,x=f.data,j={startX:this.state.startX,endX:this.state.endX},S=n.pageX-i;S>0?S=Math.min(S,p+m-g-d):S<0&&(S=Math.max(S,p-d)),j[a]=d+S;var C=this.getIndex(j),E=C.startIndex,N=C.endIndex,P=function(){var L=x.length-1;return a==="startX"&&(l>c?E%b===0:N%b===0)||l<c&&N===L||a==="endX"&&(l>c?N%b===0:E%b===0)||l>c&&N===L};this.setState(Hn(Hn({},a,d+S),"brushMoveStartX",n.pageX),function(){y&&P()&&y(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,a=this.state,l=a.scaleValues,c=a.startX,d=a.endX,f=this.state[s],p=l.indexOf(f);if(p!==-1){var m=p+n;if(!(m===-1||m>=l.length)){var g=l[m];s==="startX"&&g>=d||s==="endX"&&g<=c||this.setState(Hn({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,a=n.width,l=n.height,c=n.fill,d=n.stroke;return z.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:a,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,a=n.width,l=n.height,c=n.data,d=n.children,f=n.padding,p=w.Children.only(d);return p?z.cloneElement(p,{x:s,y:i,width:a,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,a,l=this,c=this.props,d=c.y,f=c.travellerWidth,p=c.height,m=c.traveller,g=c.ariaLabel,y=c.data,b=c.startIndex,x=c.endIndex,j=Math.max(n,this.props.x),S=Wj(Wj({},Ue(this.props,!1)),{},{x:j,y:d,width:f,height:p}),C=g||"Min value: ".concat((i=y[b])===null||i===void 0?void 0:i.name,", Max value: ").concat((a=y[x])===null||a===void 0?void 0:a.name);return z.createElement(at,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(m,S))}},{key:"renderSlide",value:function(n,s){var i=this.props,a=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,f=Math.min(n,s)+d,p=Math.max(Math.abs(s-n)-d,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:a,width:p,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,a=n.y,l=n.height,c=n.travellerWidth,d=n.stroke,f=this.state,p=f.startX,m=f.endX,g=5,y={pointerEvents:"none",fill:d};return z.createElement(at,{className:"recharts-brush-texts"},z.createElement(jl,fv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,m)-g,y:a+l/2},y),this.getTextOfTick(s)),z.createElement(jl,fv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,m)+c+g,y:a+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,a=n.children,l=n.x,c=n.y,d=n.width,f=n.height,p=n.alwaysShowText,m=this.state,g=m.startX,y=m.endX,b=m.isTextActive,x=m.isSlideMoving,j=m.isTravellerMoving,S=m.isTravellerFocused;if(!s||!s.length||!Ne(l)||!Ne(c)||!Ne(d)||!Ne(f)||d<=0||f<=0)return null;var C=st("recharts-brush",i),E=z.Children.count(a)===1,N=T0e("userSelect","none");return z.createElement(at,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(g,y),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(y,"endX"),(b||x||j||S||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,a=n.width,l=n.height,c=n.stroke,d=Math.floor(i+l/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:s,y:i,width:a,height:l,fill:c,stroke:"none"}),z.createElement("line",{x1:s+1,y1:d,x2:s+a-1,y2:d,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:s+1,y1:d+2,x2:s+a-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return z.isValidElement(n)?i=z.cloneElement(n,s):Ze(n)?i=n(s):i=e.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,a=n.width,l=n.x,c=n.travellerWidth,d=n.updateId,f=n.startIndex,p=n.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return Wj({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:a},i&&i.length?B0e({data:i,width:a,x:l,travellerWidth:c,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(s.scale&&(a!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+a-c]);var m=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:a,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,a=0,l=i-1;l-a>1;){var c=Math.floor((a+l)/2);n[c]>s?l=c:a=c}return s>=n[l]?l:a}}])}(w.PureComponent);Hn(uu,"displayName","Brush");Hn(uu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Hj,J4;function z0e(){if(J4)return Hj;J4=1;var t=aC();function e(r,n){var s;return t(r,function(i,a,l){return s=n(i,a,l),!s}),!!s}return Hj=e,Hj}var Gj,Q4;function U0e(){if(Q4)return Gj;Q4=1;var t=hz(),e=Mi(),r=z0e(),n=Dn(),s=ly();function i(a,l,c){var d=n(a)?t:r;return c&&s(a,l,c)&&(l=void 0),d(a,e(l,3))}return Gj=i,Gj}var q0e=U0e();const V0e=Pt(q0e);var Ei=function(e,r){var n=e.alwaysShow,s=e.ifOverflow;return n&&(s="extendDomain"),s===r},Kj,e5;function W0e(){if(e5)return Kj;e5=1;var t=Az();function e(r,n,s){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return Kj=e,Kj}var Zj,t5;function H0e(){if(t5)return Zj;t5=1;var t=W0e(),e=Pz(),r=Mi();function n(s,i){var a={};return i=r(i,3),e(s,function(l,c,d){t(a,c,i(l,c,d))}),a}return Zj=n,Zj}var G0e=H0e();const K0e=Pt(G0e);var Xj,r5;function Z0e(){if(r5)return Xj;r5=1;function t(e,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!r(e[n],n,e))return!1;return!0}return Xj=t,Xj}var Yj,n5;function X0e(){if(n5)return Yj;n5=1;var t=aC();function e(r,n){var s=!0;return t(r,function(i,a,l){return s=!!n(i,a,l),s}),s}return Yj=e,Yj}var Jj,s5;function Y0e(){if(s5)return Jj;s5=1;var t=Z0e(),e=X0e(),r=Mi(),n=Dn(),s=ly();function i(a,l,c){var d=n(a)?t:e;return c&&s(a,l,c)&&(l=void 0),d(a,r(l,3))}return Jj=i,Jj}var J0e=Y0e();const v8=Pt(J0e);var Q0e=["x","y"];function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lN.apply(this,arguments)}function i5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Vd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i5(Object(r),!0).forEach(function(n){exe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function exe(t,e,r){return e=txe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function txe(t){var e=rxe(t,"string");return kh(e)=="symbol"?e:e+""}function rxe(t,e){if(kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nxe(t,e){if(t==null)return{};var r=sxe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ixe(t,e){var r=t.x,n=t.y,s=nxe(t,Q0e),i="".concat(r),a=parseInt(i,10),l="".concat(n),c=parseInt(l,10),d="".concat(e.height||s.height),f=parseInt(d,10),p="".concat(e.width||s.width),m=parseInt(p,10);return Vd(Vd(Vd(Vd(Vd({},e),s),a?{x:a}:{}),c?{y:c}:{}),{},{height:f,width:m,name:e.name,radius:e.radius})}function a5(t){return z.createElement(cv,lN({shapeType:"rectangle",propTransformer:ixe,activeClassName:"recharts-active-bar"},t))}var axe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof e=="number")return e;var i=typeof n=="number";return i?e(n,s):(i||Nl(),r)}},oxe=["value","background"],y8;function du(t){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(t)}function lxe(t,e){if(t==null)return{};var r=cxe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pv.apply(this,arguments)}function o5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Sr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o5(Object(r),!0).forEach(function(n){so(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b8(n.key),n)}}function dxe(t,e,r){return e&&l5(t.prototype,e),r&&l5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fxe(t,e,r){return e=mv(e),hxe(t,x8()?Reflect.construct(e,r||[],mv(t).constructor):e.apply(t,r))}function hxe(t,e){if(e&&(du(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pxe(t)}function pxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x8=function(){return!!t})()}function mv(t){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mv(t)}function mxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cN(t,e)}function cN(t,e){return cN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},cN(t,e)}function so(t,e,r){return e=b8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b8(t){var e=gxe(t,"string");return du(e)=="symbol"?e:e+""}function gxe(t,e){if(du(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ii=function(t){function e(){var r;uxe(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=fxe(this,e,[].concat(s)),so(r,"state",{isAnimationFinished:!1}),so(r,"id",Co("recharts-bar-")),so(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),so(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return mxe(e,t),dxe(e,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,a=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,f=Ue(this.props,!1);return n&&n.map(function(p,m){var g=m===c,y=g?d:a,b=Sr(Sr(Sr({},f),p),{},{isActive:g,option:y,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return z.createElement(at,pv({className:"recharts-bar-rectangle"},yo(s.props,p,m),{key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(m)}),z.createElement(a5,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,a=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,f=s.animationEasing,p=s.animationId,m=this.state.prevData;return z.createElement(Os,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var y=g.t,b=i.map(function(x,j){var S=m&&m[j];if(S){var C=cr(S.x,x.x),E=cr(S.y,x.y),N=cr(S.width,x.width),P=cr(S.height,x.height);return Sr(Sr({},x),{},{x:C(y),y:E(y),width:N(y),height:P(y)})}if(a==="horizontal"){var O=cr(0,x.height),L=O(y);return Sr(Sr({},x),{},{y:x.y+x.height-L,height:L})}var A=cr(0,x.width),R=A(y);return Sr(Sr({},x),{},{width:R})});return z.createElement(at,null,n.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,a=this.state.prevData;return i&&s&&s.length&&(!a||!xo(a,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,a=s.dataKey,l=s.activeIndex,c=Ue(this.props.background,!1);return i.map(function(d,f){d.value;var p=d.background,m=lxe(d,oxe);if(!p)return null;var g=Sr(Sr(Sr(Sr(Sr({},m),{},{fill:"#eee"},p),c),yo(n.props,d,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:f,className:"recharts-bar-background-rectangle"});return z.createElement(a5,pv({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},g))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,f=i.children,p=Sn(f,Fu);if(!p)return null;var m=d==="vertical"?a[0].height/2:a[0].width/2,g=function(x,j){var S=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:S,errorVal:Jt(x,j)}},y={clipPath:n?"url(#clipPath-".concat(s,")"):null};return z.createElement(at,y,p.map(function(b){return z.cloneElement(b,{key:"error-bar-".concat(s,"-").concat(b.props.dataKey),data:a,xAxis:l,yAxis:c,layout:d,offset:m,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,a=n.className,l=n.xAxis,c=n.yAxis,d=n.left,f=n.top,p=n.width,m=n.height,g=n.isAnimationActive,y=n.background,b=n.id;if(s||!i||!i.length)return null;var x=this.state.isAnimationFinished,j=st("recharts-bar",a),S=l&&l.allowDataOverflow,C=c&&c.allowDataOverflow,E=S||C,N=Xe(b)?this.id:b;return z.createElement(at,{className:j},S||C?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(N)},z.createElement("rect",{x:S?d:d-p/2,y:C?f:f-m/2,width:S?p:p*2,height:C?m:m*2}))):null,z.createElement(at,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(N,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,N),(!g||x)&&ni.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(w.PureComponent);y8=ii;so(ii,"displayName","Bar");so(ii,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!va.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});so(ii,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,s=t.bandSize,i=t.xAxis,a=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,m=t.offset,g=Wpe(n,r);if(!g)return null;var y=e.layout,b=r.type.defaultProps,x=b!==void 0?Sr(Sr({},b),r.props):r.props,j=x.dataKey,S=x.children,C=x.minPointSize,E=y==="horizontal"?a:i,N=d?E.scale.domain():null,P=Jpe({numericAxis:E}),O=Sn(S,Zh),L=p.map(function(A,R){var M,D,B,F,V,J;d?M=Hpe(d[f+R],N):(M=Jt(A,j),Array.isArray(M)||(M=[P,M]));var G=axe(C,y8.defaultProps.minPointSize)(M[1],R);if(y==="horizontal"){var q,U=[a.scale(M[0]),a.scale(M[1])],W=U[0],I=U[1];D=L$({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:A,index:R}),B=(q=I??W)!==null&&q!==void 0?q:void 0,F=g.size;var H=W-I;if(V=Number.isNaN(H)?0:H,J={x:D,y:a.y,width:F,height:a.height},Math.abs(G)>0&&Math.abs(V)<Math.abs(G)){var ne=wn(V||G)*(Math.abs(G)-Math.abs(V));B-=ne,V+=ne}}else{var ge=[i.scale(M[0]),i.scale(M[1])],K=ge[0],de=ge[1];if(D=K,B=L$({axis:a,ticks:c,bandSize:s,offset:g.offset,entry:A,index:R}),F=de-K,V=g.size,J={x:i.x,y:B,width:i.width,height:V},Math.abs(G)>0&&Math.abs(F)<Math.abs(G)){var ue=wn(F||G)*(Math.abs(G)-Math.abs(F));F+=ue}}return Sr(Sr(Sr({},A),{},{x:D,y:B,width:F,height:V,value:d?M:M[1],payload:A,background:J},O&&O[R]&&O[R].props),{},{tooltipPayload:[GU(r,A)],tooltipPosition:{x:D+F/2,y:B+V/2}})});return Sr({data:L,layout:y},m)});function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}function vxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w8(n.key),n)}}function yxe(t,e,r){return e&&c5(t.prototype,e),r&&c5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Gs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u5(Object(r),!0).forEach(function(n){Ny(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ny(t,e,r){return e=w8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w8(t){var e=xxe(t,"string");return Ph(e)=="symbol"?e:e+""}function xxe(t,e){if(Ph(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RC=function(e,r,n,s,i){var a=e.width,l=e.height,c=e.layout,d=e.children,f=Object.keys(r),p={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!Gn(d,ii);return f.reduce(function(g,y){var b=r[y],x=b.orientation,j=b.domain,S=b.padding,C=S===void 0?{}:S,E=b.mirror,N=b.reversed,P="".concat(x).concat(E?"Mirror":""),O,L,A,R,M;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var D=j[1]-j[0],B=1/0,F=b.categoricalDomain.sort(Mae);if(F.forEach(function(ge,K){K>0&&(B=Math.min((ge||0)-(F[K-1]||0),B))}),Number.isFinite(B)){var V=B/D,J=b.layout==="vertical"?n.height:n.width;if(b.padding==="gap"&&(O=V*J/2),b.padding==="no-gap"){var G=_n(e.barCategoryGap,V*J),q=V*J/2;O=q-G-(q-G)/J*G}}}s==="xAxis"?L=[n.left+(C.left||0)+(O||0),n.left+n.width-(C.right||0)-(O||0)]:s==="yAxis"?L=c==="horizontal"?[n.top+n.height-(C.bottom||0),n.top+(C.top||0)]:[n.top+(C.top||0)+(O||0),n.top+n.height-(C.bottom||0)-(O||0)]:L=b.range,N&&(L=[L[1],L[0]]);var U=qU(b,i,m),W=U.scale,I=U.realScaleType;W.domain(j).range(L),VU(W);var H=WU(W,Gs(Gs({},b),{},{realScaleType:I}));s==="xAxis"?(M=x==="top"&&!E||x==="bottom"&&E,A=n.left,R=p[P]-M*b.height):s==="yAxis"&&(M=x==="left"&&!E||x==="right"&&E,A=p[P]-M*b.width,R=n.top);var ne=Gs(Gs(Gs({},b),H),{},{realScaleType:I,x:A,y:R,scale:W,width:s==="xAxis"?n.width:b.width,height:s==="yAxis"?n.height:b.height});return ne.bandSize=Jg(ne,H),!b.hide&&s==="xAxis"?p[P]+=(M?-1:1)*ne.height:b.hide||(p[P]+=(M?-1:1)*ne.width),Gs(Gs({},g),{},Ny({},y,ne))},{})},_8=function(e,r){var n=e.x,s=e.y,i=r.x,a=r.y;return{x:Math.min(n,i),y:Math.min(s,a),width:Math.abs(i-n),height:Math.abs(a-s)}},bxe=function(e){var r=e.x1,n=e.y1,s=e.x2,i=e.y2;return _8({x:r,y:n},{x:s,y:i})},j8=function(){function t(e){vxe(this,t),this.scale=e}return yxe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new t(r)}}])}();Ny(j8,"EPS",1e-4);var DC=function(e){var r=Object.keys(e).reduce(function(n,s){return Gs(Gs({},n),{},Ny({},s,j8.create(e[s])))},{});return Gs(Gs({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.bandAware,l=i.position;return K0e(s,function(c,d){return r[d].apply(c,{bandAware:a,position:l})})},isInRange:function(s){return v8(s,function(i,a){return r[a].isInRange(i)})}})};function wxe(t){return(t%180+180)%180}var _xe=function(e){var r=e.width,n=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=wxe(s),a=i*Math.PI/180,l=Math.atan(n/r),c=a>l&&a<Math.PI-l?n/Math.sin(a):r/Math.cos(a);return Math.abs(c)},Qj,d5;function jxe(){if(d5)return Qj;d5=1;var t=Mi(),e=Kh(),r=ay();function n(s){return function(i,a,l){var c=Object(i);if(!e(i)){var d=t(a,3);i=r(i),a=function(p){return d(c[p],p,c)}}var f=s(i,a,l);return f>-1?c[d?i[f]:f]:void 0}}return Qj=n,Qj}var e1,f5;function Sxe(){if(f5)return e1;f5=1;var t=h8();function e(r){var n=t(r),s=n%1;return n===n?s?n-s:n:0}return e1=e,e1}var t1,h5;function Nxe(){if(h5)return t1;h5=1;var t=Sz(),e=Mi(),r=Sxe(),n=Math.max;function s(i,a,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:r(l);return d<0&&(d=n(c+d,0)),t(i,e(a,3),d)}return t1=s,t1}var r1,p5;function Exe(){if(p5)return r1;p5=1;var t=jxe(),e=Nxe(),r=t(e);return r1=r,r1}var Cxe=Exe();const kxe=Pt(Cxe);var Pxe=FB();const Oxe=Pt(Pxe);var Axe=Oxe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),IC=w.createContext(void 0),$C=w.createContext(void 0),S8=w.createContext(void 0),N8=w.createContext({}),E8=w.createContext(void 0),C8=w.createContext(0),k8=w.createContext(0),m5=function(e){var r=e.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,a=e.clipPathId,l=e.children,c=e.width,d=e.height,f=Axe(i);return z.createElement(IC.Provider,{value:n},z.createElement($C.Provider,{value:s},z.createElement(N8.Provider,{value:i},z.createElement(S8.Provider,{value:f},z.createElement(E8.Provider,{value:a},z.createElement(C8.Provider,{value:d},z.createElement(k8.Provider,{value:c},l)))))))},Txe=function(){return w.useContext(E8)},P8=function(e){var r=w.useContext(IC);r==null&&Nl();var n=r[e];return n==null&&Nl(),n},Lxe=function(){var e=w.useContext(IC);return to(e)},Mxe=function(){var e=w.useContext($C),r=kxe(e,function(n){return v8(n.domain,Number.isFinite)});return r||to(e)},O8=function(e){var r=w.useContext($C);r==null&&Nl();var n=r[e];return n==null&&Nl(),n},Rxe=function(){var e=w.useContext(S8);return e},Dxe=function(){return w.useContext(N8)},FC=function(){return w.useContext(k8)},BC=function(){return w.useContext(C8)};function fu(t){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fu(t)}function Ixe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $xe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T8(n.key),n)}}function Fxe(t,e,r){return e&&$xe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bxe(t,e,r){return e=gv(e),zxe(t,A8()?Reflect.construct(e,r||[],gv(t).constructor):e.apply(t,r))}function zxe(t,e){if(e&&(fu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uxe(t)}function Uxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A8=function(){return!!t})()}function gv(t){return gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gv(t)}function qxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uN(t,e)}function uN(t,e){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},uN(t,e)}function g5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function v5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g5(Object(r),!0).forEach(function(n){zC(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zC(t,e,r){return e=T8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T8(t){var e=Vxe(t,"string");return fu(e)=="symbol"?e:e+""}function Vxe(t,e){if(fu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Wxe(t,e){return Zxe(t)||Kxe(t,e)||Gxe(t,e)||Hxe()}function Hxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gxe(t,e){if(t){if(typeof t=="string")return y5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y5(t,e)}}function y5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Zxe(t){if(Array.isArray(t))return t}function dN(){return dN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dN.apply(this,arguments)}var Xxe=function(e,r){var n;return z.isValidElement(e)?n=z.cloneElement(e,r):Ze(e)?n=e(r):n=z.createElement("line",dN({},r,{className:"recharts-reference-line-line"})),n},Yxe=function(e,r,n,s,i,a,l,c,d){var f=i.x,p=i.y,m=i.width,g=i.height;if(n){var y=d.y,b=e.y.apply(y,{position:a});if(Ei(d,"discard")&&!e.y.isInRange(b))return null;var x=[{x:f+m,y:b},{x:f,y:b}];return c==="left"?x.reverse():x}if(r){var j=d.x,S=e.x.apply(j,{position:a});if(Ei(d,"discard")&&!e.x.isInRange(S))return null;var C=[{x:S,y:p+g},{x:S,y:p}];return l==="top"?C.reverse():C}if(s){var E=d.segment,N=E.map(function(P){return e.apply(P,{position:a})});return Ei(d,"discard")&&V0e(N,function(P){return!e.isInRange(P)})?null:N}return null};function Jxe(t){var e=t.x,r=t.y,n=t.segment,s=t.xAxisId,i=t.yAxisId,a=t.shape,l=t.className,c=t.alwaysShow,d=Txe(),f=P8(s),p=O8(i),m=Rxe();if(!d||!m)return null;ri(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=DC({x:f.scale,y:p.scale}),y=Mr(e),b=Mr(r),x=n&&n.length===2,j=Yxe(g,y,b,x,m,t.position,f.orientation,p.orientation,t);if(!j)return null;var S=Wxe(j,2),C=S[0],E=C.x,N=C.y,P=S[1],O=P.x,L=P.y,A=Ei(t,"hidden")?"url(#".concat(d,")"):void 0,R=v5(v5({clipPath:A},Ue(t,!0)),{},{x1:E,y1:N,x2:O,y2:L});return z.createElement(at,{className:st("recharts-reference-line",l)},Xxe(a,R),Gr.renderCallByParent(t,bxe({x1:E,y1:N,x2:O,y2:L})))}var UC=function(t){function e(){return Ixe(this,e),Bxe(this,e,arguments)}return qxe(e,t),Fxe(e,[{key:"render",value:function(){return z.createElement(Jxe,this.props)}}])}(z.Component);zC(UC,"displayName","ReferenceLine");zC(UC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function fN(){return fN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fN.apply(this,arguments)}function hu(t){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hu(t)}function x5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function b5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x5(Object(r),!0).forEach(function(n){Ey(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ebe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M8(n.key),n)}}function tbe(t,e,r){return e&&ebe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rbe(t,e,r){return e=vv(e),nbe(t,L8()?Reflect.construct(e,r||[],vv(t).constructor):e.apply(t,r))}function nbe(t,e){if(e&&(hu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sbe(t)}function sbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L8=function(){return!!t})()}function vv(t){return vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vv(t)}function ibe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hN(t,e)}function hN(t,e){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},hN(t,e)}function Ey(t,e,r){return e=M8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M8(t){var e=abe(t,"string");return hu(e)=="symbol"?e:e+""}function abe(t,e){if(hu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var obe=function(e){var r=e.x,n=e.y,s=e.xAxis,i=e.yAxis,a=DC({x:s.scale,y:i.scale}),l=a.apply({x:r,y:n},{bandAware:!0});return Ei(e,"discard")&&!a.isInRange(l)?null:l},Cy=function(t){function e(){return Qxe(this,e),rbe(this,e,arguments)}return ibe(e,t),tbe(e,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,a=n.r,l=n.alwaysShow,c=n.clipPathId,d=Mr(s),f=Mr(i);if(ri(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var p=obe(this.props);if(!p)return null;var m=p.x,g=p.y,y=this.props,b=y.shape,x=y.className,j=Ei(this.props,"hidden")?"url(#".concat(c,")"):void 0,S=b5(b5({clipPath:j},Ue(this.props,!0)),{},{cx:m,cy:g});return z.createElement(at,{className:st("recharts-reference-dot",x)},e.renderDot(b,S),Gr.renderCallByParent(this.props,{x:m-a,y:g-a,width:2*a,height:2*a}))}}])}(z.Component);Ey(Cy,"displayName","ReferenceDot");Ey(Cy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ey(Cy,"renderDot",function(t,e){var r;return z.isValidElement(t)?r=z.cloneElement(t,e):Ze(t)?r=t(e):r=z.createElement(ep,fN({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pN.apply(this,arguments)}function pu(t){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(t)}function w5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function _5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(r),!0).forEach(function(n){ky(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cbe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D8(n.key),n)}}function ube(t,e,r){return e&&cbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dbe(t,e,r){return e=yv(e),fbe(t,R8()?Reflect.construct(e,r||[],yv(t).constructor):e.apply(t,r))}function fbe(t,e){if(e&&(pu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hbe(t)}function hbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R8=function(){return!!t})()}function yv(t){return yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yv(t)}function pbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mN(t,e)}function mN(t,e){return mN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},mN(t,e)}function ky(t,e,r){return e=D8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D8(t){var e=mbe(t,"string");return pu(e)=="symbol"?e:e+""}function mbe(t,e){if(pu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gbe=function(e,r,n,s,i){var a=i.x1,l=i.x2,c=i.y1,d=i.y2,f=i.xAxis,p=i.yAxis;if(!f||!p)return null;var m=DC({x:f.scale,y:p.scale}),g={x:e?m.x.apply(a,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},y={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(d,{position:"end"}):m.y.rangeMax};return Ei(i,"discard")&&(!m.isInRange(g)||!m.isInRange(y))?null:_8(g,y)},Py=function(t){function e(){return lbe(this,e),dbe(this,e,arguments)}return pbe(e,t),ube(e,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,a=n.y1,l=n.y2,c=n.className,d=n.alwaysShow,f=n.clipPathId;ri(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Mr(s),m=Mr(i),g=Mr(a),y=Mr(l),b=this.props.shape;if(!p&&!m&&!g&&!y&&!b)return null;var x=gbe(p,m,g,y,this.props);if(!x&&!b)return null;var j=Ei(this.props,"hidden")?"url(#".concat(f,")"):void 0;return z.createElement(at,{className:st("recharts-reference-area",c)},e.renderRect(b,_5(_5({clipPath:j},Ue(this.props,!0)),x)),Gr.renderCallByParent(this.props,x))}}])}(z.Component);ky(Py,"displayName","ReferenceArea");ky(Py,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ky(Py,"renderRect",function(t,e){var r;return z.isValidElement(t)?r=z.cloneElement(t,e):Ze(t)?r=t(e):r=z.createElement(MC,pN({},e,{className:"recharts-reference-area-rect"})),r});function I8(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],s=0;s<t.length;s+=e)n.push(t[s]);return n}function vbe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return _xe(n,r)}function ybe(t,e,r){var n=r==="width",s=t.x,i=t.y,a=t.width,l=t.height;return e===1?{start:n?s:i,end:n?s+a:i+l}:{start:n?s+a:i+l,end:n?s:i}}function xv(t,e,r,n,s){if(t*e<t*n||t*e>t*s)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-s)<=0}function xbe(t,e){return I8(t,e+1)}function bbe(t,e,r,n,s){for(var i=(n||[]).slice(),a=e.start,l=e.end,c=0,d=1,f=a,p=function(){var y=n?.[c];if(y===void 0)return{v:I8(n,d)};var b=c,x,j=function(){return x===void 0&&(x=r(y,b)),x},S=y.coordinate,C=c===0||xv(t,S,j,f,l);C||(c=0,f=a,d+=1),C&&(f=S+t*(j()/2+s),c+=d)},m;d<=i.length;)if(m=p(),m)return m.v;return[]}function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}function j5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function dn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(r),!0).forEach(function(n){wbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wbe(t,e,r){return e=_be(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _be(t){var e=jbe(t,"string");return Oh(e)=="symbol"?e:e+""}function jbe(t,e){if(Oh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sbe(t,e,r,n,s){for(var i=(n||[]).slice(),a=i.length,l=e.start,c=e.end,d=function(m){var g=i[m],y,b=function(){return y===void 0&&(y=r(g,m)),y};if(m===a-1){var x=t*(g.coordinate+t*b()/2-c);i[m]=g=dn(dn({},g),{},{tickCoord:x>0?g.coordinate-x*t:g.coordinate})}else i[m]=g=dn(dn({},g),{},{tickCoord:g.coordinate});var j=xv(t,g.tickCoord,b,l,c);j&&(c=g.tickCoord-t*(b()/2+s),i[m]=dn(dn({},g),{},{isShow:!0}))},f=a-1;f>=0;f--)d(f);return i}function Nbe(t,e,r,n,s,i){var a=(n||[]).slice(),l=a.length,c=e.start,d=e.end;if(i){var f=n[l-1],p=r(f,l-1),m=t*(f.coordinate+t*p/2-d);a[l-1]=f=dn(dn({},f),{},{tickCoord:m>0?f.coordinate-m*t:f.coordinate});var g=xv(t,f.tickCoord,function(){return p},c,d);g&&(d=f.tickCoord-t*(p/2+s),a[l-1]=dn(dn({},f),{},{isShow:!0}))}for(var y=i?l-1:l,b=function(S){var C=a[S],E,N=function(){return E===void 0&&(E=r(C,S)),E};if(S===0){var P=t*(C.coordinate-t*N()/2-c);a[S]=C=dn(dn({},C),{},{tickCoord:P<0?C.coordinate-P*t:C.coordinate})}else a[S]=C=dn(dn({},C),{},{tickCoord:C.coordinate});var O=xv(t,C.tickCoord,N,c,d);O&&(c=C.tickCoord+t*(N()/2+s),a[S]=dn(dn({},C),{},{isShow:!0}))},x=0;x<y;x++)b(x);return a}function qC(t,e,r){var n=t.tick,s=t.ticks,i=t.viewBox,a=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,f=t.unit,p=t.angle;if(!s||!s.length||!n)return[];if(Ne(c)||va.isSsr)return xbe(s,typeof c=="number"&&Ne(c)?c:0);var m=[],g=l==="top"||l==="bottom"?"width":"height",y=f&&g==="width"?gf(f,{fontSize:e,letterSpacing:r}):{width:0,height:0},b=function(C,E){var N=Ze(d)?d(C.value,E):C.value;return g==="width"?vbe(gf(N,{fontSize:e,letterSpacing:r}),y,p):gf(N,{fontSize:e,letterSpacing:r})[g]},x=s.length>=2?wn(s[1].coordinate-s[0].coordinate):1,j=ybe(i,x,g);return c==="equidistantPreserveStart"?bbe(x,j,b,s,a):(c==="preserveStart"||c==="preserveStartEnd"?m=Nbe(x,j,b,s,a,c==="preserveStartEnd"):m=Sbe(x,j,b,s,a),m.filter(function(S){return S.isShow}))}var Ebe=["viewBox"],Cbe=["viewBox"],kbe=["ticks"];function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(t)}function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cc.apply(this,arguments)}function S5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function yn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(r),!0).forEach(function(n){VC(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function n1(t,e){if(t==null)return{};var r=Pbe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Obe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F8(n.key),n)}}function Abe(t,e,r){return e&&N5(t.prototype,e),r&&N5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tbe(t,e,r){return e=bv(e),Lbe(t,$8()?Reflect.construct(e,r||[],bv(t).constructor):e.apply(t,r))}function Lbe(t,e){if(e&&(mu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mbe(t)}function Mbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($8=function(){return!!t})()}function bv(t){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bv(t)}function Rbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gN(t,e)}function gN(t,e){return gN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},gN(t,e)}function VC(t,e,r){return e=F8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F8(t){var e=Dbe(t,"string");return mu(e)=="symbol"?e:e+""}function Dbe(t,e){if(mu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bu=function(t){function e(r){var n;return Obe(this,e),n=Tbe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return Rbe(e,t),Abe(e,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,a=n1(n,Ebe),l=this.props,c=l.viewBox,d=n1(l,Cbe);return!Rc(i,c)||!Rc(a,d)||!Rc(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,a=s.y,l=s.width,c=s.height,d=s.orientation,f=s.tickSize,p=s.mirror,m=s.tickMargin,g,y,b,x,j,S,C=p?-1:1,E=n.tickSize||f,N=Ne(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":g=y=n.coordinate,x=a+ +!p*c,b=x-C*E,S=b-C*m,j=N;break;case"left":b=x=n.coordinate,y=i+ +!p*l,g=y-C*E,j=g-C*m,S=N;break;case"right":b=x=n.coordinate,y=i+ +p*l,g=y+C*E,j=g+C*m,S=N;break;default:g=y=n.coordinate,x=a+ +p*c,b=x+C*E,S=b+C*m,j=N;break}return{line:{x1:g,y1:b,x2:y,y2:x},tick:{x:j,y:S}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,a;switch(s){case"left":a=i?"start":"end";break;case"right":a=i?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,a="end";switch(s){case"left":case"right":a="middle";break;case"top":a=i?"start":"end";break;default:a=i?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,a=n.width,l=n.height,c=n.orientation,d=n.mirror,f=n.axisLine,p=yn(yn(yn({},Ue(this.props,!1)),Ue(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!d||c==="bottom"&&d);p=yn(yn({},p),{},{x1:s,y1:i+m*l,x2:s+a,y2:i+m*l})}else{var g=+(c==="left"&&!d||c==="right"&&d);p=yn(yn({},p),{},{x1:s+g*a,y1:i,x2:s+g*a,y2:i+l})}return z.createElement("line",Cc({},p,{className:st("recharts-cartesian-axis-line",rs(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var a=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,p=l.tickFormatter,m=l.unit,g=qC(yn(yn({},this.props),{},{ticks:n}),s,i),y=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),x=Ue(this.props,!1),j=Ue(f,!1),S=yn(yn({},x),{},{fill:"none"},Ue(c,!1)),C=g.map(function(E,N){var P=a.getTickLineCoord(E),O=P.line,L=P.tick,A=yn(yn(yn(yn({textAnchor:y,verticalAnchor:b},x),{},{stroke:"none",fill:d},j),L),{},{index:N,payload:E,visibleTicksCount:g.length,tickFormatter:p});return z.createElement(at,Cc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},yo(a.props,E,N)),c&&z.createElement("line",Cc({},S,O,{className:st("recharts-cartesian-axis-tick-line",rs(c,"className"))})),f&&e.renderTickItem(f,A,"".concat(Ze(p)?p(E.value,N):E.value).concat(m||"")))});return z.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,a=s.width,l=s.height,c=s.ticksGenerator,d=s.className,f=s.hide;if(f)return null;var p=this.props,m=p.ticks,g=n1(p,kbe),y=m;return Ze(c)&&(y=m&&m.length>0?c(this.props):c(g)),a<=0||l<=0||!y||!y.length?null:z.createElement(at,{className:st("recharts-cartesian-axis",d),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Gr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var a;return z.isValidElement(n)?a=z.cloneElement(n,s):Ze(n)?a=n(s):a=z.createElement(jl,Cc({},s,{className:"recharts-cartesian-axis-tick-value"}),i),a}}])}(w.Component);VC(Bu,"displayName","CartesianAxis");VC(Bu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Ibe=["x1","y1","x2","y2","key"],$be=["offset"];function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function E5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function fn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E5(Object(r),!0).forEach(function(n){Fbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fbe(t,e,r){return e=Bbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bbe(t){var e=zbe(t,"string");return El(e)=="symbol"?e:e+""}function zbe(t,e){if(El(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(El(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ul.apply(this,arguments)}function C5(t,e){if(t==null)return{};var r=Ube(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ube(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qbe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,s=e.x,i=e.y,a=e.width,l=e.height,c=e.ry;return z.createElement("rect",{x:s,y:i,ry:c,width:a,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function B8(t,e){var r;if(z.isValidElement(t))r=z.cloneElement(t,e);else if(Ze(t))r=t(e);else{var n=e.x1,s=e.y1,i=e.x2,a=e.y2,l=e.key,c=C5(e,Ibe),d=Ue(c,!1);d.offset;var f=C5(d,$be);r=z.createElement("line",ul({},f,{x1:n,y1:s,x2:i,y2:a,fill:"none",key:l}))}return r}function Vbe(t){var e=t.x,r=t.width,n=t.horizontal,s=n===void 0?!0:n,i=t.horizontalPoints;if(!s||!i||!i.length)return null;var a=i.map(function(l,c){var d=fn(fn({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return B8(s,d)});return z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function Wbe(t){var e=t.y,r=t.height,n=t.vertical,s=n===void 0?!0:n,i=t.verticalPoints;if(!s||!i||!i.length)return null;var a=i.map(function(l,c){var d=fn(fn({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return B8(s,d)});return z.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Hbe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,s=t.y,i=t.width,a=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var f=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,g){return m-g});s!==f[0]&&f.unshift(0);var p=f.map(function(m,g){var y=!f[g+1],b=y?s+a-m:f[g+1]-m;if(b<=0)return null;var x=g%e.length;return z.createElement("rect",{key:"react-".concat(g),y:m,x:n,height:b,width:i,stroke:"none",fill:e[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function Gbe(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,s=t.fillOpacity,i=t.x,a=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!r||!n||!n.length)return null;var f=d.map(function(m){return Math.round(m+i-i)}).sort(function(m,g){return m-g});i!==f[0]&&f.unshift(0);var p=f.map(function(m,g){var y=!f[g+1],b=y?i+l-m:f[g+1]-m;if(b<=0)return null;var x=g%n.length;return z.createElement("rect",{key:"react-".concat(g),x:m,y:a,width:b,height:c,stroke:"none",fill:n[x],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Kbe=function(e,r){var n=e.xAxis,s=e.width,i=e.height,a=e.offset;return UU(qC(fn(fn(fn({},Bu.defaultProps),n),{},{ticks:ta(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),a.left,a.left+a.width,r)},Zbe=function(e,r){var n=e.yAxis,s=e.width,i=e.height,a=e.offset;return UU(qC(fn(fn(fn({},Bu.defaultProps),n),{},{ticks:ta(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),a.top,a.top+a.height,r)},pc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function wv(t){var e,r,n,s,i,a,l=FC(),c=BC(),d=Dxe(),f=fn(fn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:pc.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:pc.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:pc.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:pc.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:pc.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:pc.verticalFill,x:Ne(t.x)?t.x:d.left,y:Ne(t.y)?t.y:d.top,width:Ne(t.width)?t.width:d.width,height:Ne(t.height)?t.height:d.height}),p=f.x,m=f.y,g=f.width,y=f.height,b=f.syncWithTicks,x=f.horizontalValues,j=f.verticalValues,S=Lxe(),C=Mxe();if(!Ne(g)||g<=0||!Ne(y)||y<=0||!Ne(p)||p!==+p||!Ne(m)||m!==+m)return null;var E=f.verticalCoordinatesGenerator||Kbe,N=f.horizontalCoordinatesGenerator||Zbe,P=f.horizontalPoints,O=f.verticalPoints;if((!P||!P.length)&&Ze(N)){var L=x&&x.length,A=N({yAxis:C?fn(fn({},C),{},{ticks:L?x:C.ticks}):void 0,width:l,height:c,offset:d},L?!0:b);ri(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(El(A),"]")),Array.isArray(A)&&(P=A)}if((!O||!O.length)&&Ze(E)){var R=j&&j.length,M=E({xAxis:S?fn(fn({},S),{},{ticks:R?j:S.ticks}):void 0,width:l,height:c,offset:d},R?!0:b);ri(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(El(M),"]")),Array.isArray(M)&&(O=M)}return z.createElement("g",{className:"recharts-cartesian-grid"},z.createElement(qbe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),z.createElement(Vbe,ul({},f,{offset:d,horizontalPoints:P,xAxis:S,yAxis:C})),z.createElement(Wbe,ul({},f,{offset:d,verticalPoints:O,xAxis:S,yAxis:C})),z.createElement(Hbe,ul({},f,{horizontalPoints:P})),z.createElement(Gbe,ul({},f,{verticalPoints:O})))}wv.displayName="CartesianGrid";var Xbe=["type","layout","connectNulls","ref"],Ybe=["key"];function gu(t){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gu(t)}function k5(t,e){if(t==null)return{};var r=Jbe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _f(){return _f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_f.apply(this,arguments)}function P5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Vn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P5(Object(r),!0).forEach(function(n){Ks(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mc(t){return rwe(t)||twe(t)||ewe(t)||Qbe()}function Qbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ewe(t,e){if(t){if(typeof t=="string")return vN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vN(t,e)}}function twe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rwe(t){if(Array.isArray(t))return vN(t)}function vN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U8(n.key),n)}}function swe(t,e,r){return e&&O5(t.prototype,e),r&&O5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function iwe(t,e,r){return e=_v(e),awe(t,z8()?Reflect.construct(e,r||[],_v(t).constructor):e.apply(t,r))}function awe(t,e){if(e&&(gu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return owe(t)}function owe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z8=function(){return!!t})()}function _v(t){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_v(t)}function lwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yN(t,e)}function yN(t,e){return yN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},yN(t,e)}function Ks(t,e,r){return e=U8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U8(t){var e=cwe(t,"string");return gu(e)=="symbol"?e:e+""}function cwe(t,e){if(gu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fa=function(t){function e(){var r;nwe(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=iwe(this,e,[].concat(s)),Ks(r,"state",{isAnimationFinished:!0,totalLength:0}),Ks(r,"generateSimpleStrokeDasharray",function(a,l){return"".concat(l,"px ").concat(a-l,"px")}),Ks(r,"getStrokeDasharray",function(a,l,c){var d=c.reduce(function(j,S){return j+S});if(!d)return r.generateSimpleStrokeDasharray(l,a);for(var f=Math.floor(a/d),p=a%d,m=l-a,g=[],y=0,b=0;y<c.length;b+=c[y],++y)if(b+c[y]>p){g=[].concat(mc(c.slice(0,y)),[p-b]);break}var x=g.length%2===0?[0,m]:[m];return[].concat(mc(e.repeat(c,f)),mc(g),x).map(function(j){return"".concat(j,"px")}).join(", ")}),Ks(r,"id",Co("recharts-line-")),Ks(r,"pathRef",function(a){r.mainCurve=a}),Ks(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Ks(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return lwe(e,t),swe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,f=i.children,p=Sn(f,Fu);if(!p)return null;var m=function(b,x){return{x:b.x,y:b.y,value:b.value,errorVal:Jt(b.payload,x)}},g={clipPath:n?"url(#clipPath-".concat(s,")"):null};return z.createElement(at,g,p.map(function(y){return z.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:a,xAxis:l,yAxis:c,layout:d,dataPointFormatter:m})}))}},{key:"renderDots",value:function(n,s,i){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,f=l.dataKey,p=Ue(this.props,!1),m=Ue(c,!0),g=d.map(function(b,x){var j=Vn(Vn(Vn({key:"dot-".concat(x),r:3},p),m),{},{index:x,cx:b.x,cy:b.y,value:b.value,dataKey:f,payload:b.payload,points:d});return e.renderDotItem(c,j)}),y={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return z.createElement(at,_f({className:"recharts-line-dots",key:"dots"},y),g)}},{key:"renderCurveStatically",value:function(n,s,i,a){var l=this.props,c=l.type,d=l.layout,f=l.connectNulls;l.ref;var p=k5(l,Xbe),m=Vn(Vn(Vn({},Ue(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},a),{},{type:c,layout:d,connectNulls:f});return z.createElement(lo,_f({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,a=this.props,l=a.points,c=a.strokeDasharray,d=a.isAnimationActive,f=a.animationBegin,p=a.animationDuration,m=a.animationEasing,g=a.animationId,y=a.animateNewValues,b=a.width,x=a.height,j=this.state,S=j.prevPoints,C=j.totalLength;return z.createElement(Os,{begin:f,duration:p,isActive:d,easing:m,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var N=E.t;if(S){var P=S.length/l.length,O=l.map(function(D,B){var F=Math.floor(B*P);if(S[F]){var V=S[F],J=cr(V.x,D.x),G=cr(V.y,D.y);return Vn(Vn({},D),{},{x:J(N),y:G(N)})}if(y){var q=cr(b*2,D.x),U=cr(x/2,D.y);return Vn(Vn({},D),{},{x:q(N),y:U(N)})}return Vn(Vn({},D),{},{x:D.x,y:D.y})});return i.renderCurveStatically(O,n,s)}var L=cr(0,C),A=L(N),R;if(c){var M="".concat(c).split(/[,\s]+/gim).map(function(D){return parseFloat(D)});R=i.getStrokeDasharray(A,C,M)}else R=i.generateSimpleStrokeDasharray(C,A);return i.renderCurveStatically(l,n,s,{strokeDasharray:R})})}},{key:"renderCurve",value:function(n,s){var i=this.props,a=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,f=c.totalLength;return l&&a&&a.length&&(!d&&f>0||!xo(d,a))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(a,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,a=s.dot,l=s.points,c=s.className,d=s.xAxis,f=s.yAxis,p=s.top,m=s.left,g=s.width,y=s.height,b=s.isAnimationActive,x=s.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,S=l.length===1,C=st("recharts-line",c),E=d&&d.allowDataOverflow,N=f&&f.allowDataOverflow,P=E||N,O=Xe(x)?this.id:x,L=(n=Ue(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=L.r,R=A===void 0?3:A,M=L.strokeWidth,D=M===void 0?2:M,B=VB(a)?a:{},F=B.clipDot,V=F===void 0?!0:F,J=R*2+D;return z.createElement(at,{className:C},E||N?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(O)},z.createElement("rect",{x:E?m:m-g/2,y:N?p:p-y/2,width:E?g:g*2,height:N?y:y*2})),!V&&z.createElement("clipPath",{id:"clipPath-dots-".concat(O)},z.createElement("rect",{x:m-J/2,y:p-J/2,width:g+J,height:y+J}))):null,!S&&this.renderCurve(P,O),this.renderErrorBar(P,O),(S||a)&&this.renderDots(P,V,O),(!b||j)&&ni.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(mc(n),[0]):n,a=[],l=0;l<s;++l)a=[].concat(mc(a),mc(i));return a}},{key:"renderDotItem",value:function(n,s){var i;if(z.isValidElement(n))i=z.cloneElement(n,s);else if(Ze(n))i=n(s);else{var a=s.key,l=k5(s,Ybe),c=st("recharts-line-dot",typeof n!="boolean"?n.className:"");i=z.createElement(ep,_f({key:a},l,{className:c}))}return i}}])}(w.PureComponent);Ks(fa,"displayName","Line");Ks(fa,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!va.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ks(fa,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,s=t.xAxisTicks,i=t.yAxisTicks,a=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,f=e.layout,p=c.map(function(m,g){var y=Jt(m,a);return f==="horizontal"?{x:su({axis:r,ticks:s,bandSize:l,entry:m,index:g}),y:Xe(y)?null:n.scale(y),value:y,payload:m}:{x:Xe(y)?null:r.scale(y),y:su({axis:n,ticks:i,bandSize:l,entry:m,index:g}),value:y,payload:m}});return Vn({points:p,layout:f},d)});var uwe=["layout","type","stroke","connectNulls","isRange","ref"],dwe=["key"],q8;function vu(t){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(t)}function V8(t,e){if(t==null)return{};var r=fwe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dl(){return dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dl.apply(this,arguments)}function A5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ga(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A5(Object(r),!0).forEach(function(n){bi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H8(n.key),n)}}function pwe(t,e,r){return e&&T5(t.prototype,e),r&&T5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mwe(t,e,r){return e=jv(e),gwe(t,W8()?Reflect.construct(e,r||[],jv(t).constructor):e.apply(t,r))}function gwe(t,e){if(e&&(vu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vwe(t)}function vwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W8=function(){return!!t})()}function jv(t){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jv(t)}function ywe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xN(t,e)}function xN(t,e){return xN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},xN(t,e)}function bi(t,e,r){return e=H8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H8(t){var e=xwe(t,"string");return vu(e)=="symbol"?e:e+""}function xwe(t,e){if(vu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ml=function(t){function e(){var r;hwe(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=mwe(this,e,[].concat(s)),bi(r,"state",{isAnimationFinished:!0}),bi(r,"id",Co("recharts-area-")),bi(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ze(a)&&a()}),bi(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ze(a)&&a()}),r}return ywe(e,t),pwe(e,[{key:"renderDots",value:function(n,s,i){var a=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(a&&!l)return null;var c=this.props,d=c.dot,f=c.points,p=c.dataKey,m=Ue(this.props,!1),g=Ue(d,!0),y=f.map(function(x,j){var S=Ga(Ga(Ga({key:"dot-".concat(j),r:3},m),g),{},{index:j,cx:x.x,cy:x.y,dataKey:p,value:x.value,payload:x.payload,points:f});return e.renderDotItem(d,S)}),b={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return z.createElement(at,dl({className:"recharts-area-dots"},b),y)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,i=s.baseLine,a=s.points,l=s.strokeWidth,c=a[0].x,d=a[a.length-1].x,f=n*Math.abs(c-d),p=no(a.map(function(m){return m.y||0}));return Ne(i)&&typeof i=="number"?p=Math.max(i,p):i&&Array.isArray(i)&&i.length&&(p=Math.max(no(i.map(function(m){return m.y||0})),p)),Ne(p)?z.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(p+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,i=s.baseLine,a=s.points,l=s.strokeWidth,c=a[0].y,d=a[a.length-1].y,f=n*Math.abs(c-d),p=no(a.map(function(m){return m.x||0}));return Ne(i)&&typeof i=="number"?p=Math.max(i,p):i&&Array.isArray(i)&&i.length&&(p=Math.max(no(i.map(function(m){return m.x||0})),p)),Ne(p)?z.createElement("rect",{x:0,y:c<d?c:c-f,width:p+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,i,a){var l=this.props,c=l.layout,d=l.type,f=l.stroke,p=l.connectNulls,m=l.isRange;l.ref;var g=V8(l,uwe);return z.createElement(at,{clipPath:i?"url(#clipPath-".concat(a,")"):null},z.createElement(lo,dl({},Ue(g,!0),{points:n,connectNulls:p,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&z.createElement(lo,dl({},Ue(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:n})),f!=="none"&&m&&z.createElement(lo,dl({},Ue(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:p,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var i=this,a=this.props,l=a.points,c=a.baseLine,d=a.isAnimationActive,f=a.animationBegin,p=a.animationDuration,m=a.animationEasing,g=a.animationId,y=this.state,b=y.prevPoints,x=y.prevBaseLine;return z.createElement(Os,{begin:f,duration:p,isActive:d,easing:m,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var S=j.t;if(b){var C=b.length/l.length,E=l.map(function(L,A){var R=Math.floor(A*C);if(b[R]){var M=b[R],D=cr(M.x,L.x),B=cr(M.y,L.y);return Ga(Ga({},L),{},{x:D(S),y:B(S)})}return L}),N;if(Ne(c)&&typeof c=="number"){var P=cr(x,c);N=P(S)}else if(Xe(c)||Mu(c)){var O=cr(x,0);N=O(S)}else N=c.map(function(L,A){var R=Math.floor(A*C);if(x[R]){var M=x[R],D=cr(M.x,L.x),B=cr(M.y,L.y);return Ga(Ga({},L),{},{x:D(S),y:B(S)})}return L});return i.renderAreaStatically(E,N,n,s)}return z.createElement(at,null,z.createElement("defs",null,z.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(S))),z.createElement(at,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,n,s)))})}},{key:"renderArea",value:function(n,s){var i=this.props,a=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,f=d.prevPoints,p=d.prevBaseLine,m=d.totalLength;return c&&a&&a.length&&(!f&&m>0||!xo(f,a)||!xo(p,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(a,l,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,a=s.dot,l=s.points,c=s.className,d=s.top,f=s.left,p=s.xAxis,m=s.yAxis,g=s.width,y=s.height,b=s.isAnimationActive,x=s.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,S=l.length===1,C=st("recharts-area",c),E=p&&p.allowDataOverflow,N=m&&m.allowDataOverflow,P=E||N,O=Xe(x)?this.id:x,L=(n=Ue(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=L.r,R=A===void 0?3:A,M=L.strokeWidth,D=M===void 0?2:M,B=VB(a)?a:{},F=B.clipDot,V=F===void 0?!0:F,J=R*2+D;return z.createElement(at,{className:C},E||N?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(O)},z.createElement("rect",{x:E?f:f-g/2,y:N?d:d-y/2,width:E?g:g*2,height:N?y:y*2})),!V&&z.createElement("clipPath",{id:"clipPath-dots-".concat(O)},z.createElement("rect",{x:f-J/2,y:d-J/2,width:g+J,height:y+J}))):null,S?null:this.renderArea(P,O),(a||S)&&this.renderDots(P,V,O),(!b||j)&&ni.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(w.PureComponent);q8=Ml;bi(Ml,"displayName","Area");bi(Ml,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!va.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});bi(Ml,"getBaseValue",function(t,e,r,n){var s=t.layout,i=t.baseValue,a=e.props.baseValue,l=a??i;if(Ne(l)&&typeof l=="number")return l;var c=s==="horizontal"?n:r,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),p=Math.min(d[0],d[1]);return l==="dataMin"?p:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});bi(Ml,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,s=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,m=t.offset,g=e.layout,y=d&&d.length,b=q8.getBaseValue(e,r,n,s),x=g==="horizontal",j=!1,S=p.map(function(E,N){var P;y?P=d[f+N]:(P=Jt(E,c),Array.isArray(P)?j=!0:P=[b,P]);var O=P[1]==null||y&&Jt(E,c)==null;return x?{x:su({axis:n,ticks:i,bandSize:l,entry:E,index:N}),y:O?null:s.scale(P[1]),value:P,payload:E}:{x:O?null:n.scale(P[1]),y:su({axis:s,ticks:a,bandSize:l,entry:E,index:N}),value:P,payload:E}}),C;return y||j?C=S.map(function(E){var N=Array.isArray(E.value)?E.value[0]:null;return x?{x:E.x,y:N!=null&&E.y!=null?s.scale(N):null}:{x:N!=null?n.scale(N):null,y:E.y}}):C=x?s.scale(b):n.scale(b),Ga({points:S,baseLine:C,layout:g,isRange:j},m)});bi(Ml,"renderDotItem",function(t,e){var r;if(z.isValidElement(t))r=z.cloneElement(t,e);else if(Ze(t))r=t(e);else{var n=st("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,i=V8(e,dwe);r=z.createElement(ep,dl({},i,{key:s,className:n}))}return r});function yu(t){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(t)}function bwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z8(n.key),n)}}function _we(t,e,r){return e&&wwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jwe(t,e,r){return e=Sv(e),Swe(t,G8()?Reflect.construct(e,r||[],Sv(t).constructor):e.apply(t,r))}function Swe(t,e){if(e&&(yu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nwe(t)}function Nwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G8=function(){return!!t})()}function Sv(t){return Sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sv(t)}function Ewe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bN(t,e)}function bN(t,e){return bN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},bN(t,e)}function K8(t,e,r){return e=Z8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z8(t){var e=Cwe(t,"string");return yu(e)=="symbol"?e:e+""}function Cwe(t,e){if(yu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oy=function(t){function e(){return bwe(this,e),jwe(this,e,arguments)}return Ewe(e,t),_we(e,[{key:"render",value:function(){return null}}])}(z.Component);K8(Oy,"displayName","ZAxis");K8(Oy,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var kwe=["option","isActive"];function jf(){return jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jf.apply(this,arguments)}function Pwe(t,e){if(t==null)return{};var r=Owe(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Owe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Awe(t){var e=t.option,r=t.isActive,n=Pwe(t,kwe);return typeof e=="string"?z.createElement(cv,jf({option:z.createElement(iy,jf({type:e},n)),isActive:r,shapeType:"symbols"},n)):z.createElement(cv,jf({option:e,isActive:r,shapeType:"symbols"},n))}function xu(t){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xu(t)}function Sf(){return Sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sf.apply(this,arguments)}function L5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ss(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(r),!0).forEach(function(n){io(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Twe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y8(n.key),n)}}function Lwe(t,e,r){return e&&M5(t.prototype,e),r&&M5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mwe(t,e,r){return e=Nv(e),Rwe(t,X8()?Reflect.construct(e,r||[],Nv(t).constructor):e.apply(t,r))}function Rwe(t,e){if(e&&(xu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dwe(t)}function Dwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X8=function(){return!!t})()}function Nv(t){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nv(t)}function Iwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wN(t,e)}function wN(t,e){return wN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},wN(t,e)}function io(t,e,r){return e=Y8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y8(t){var e=$we(t,"string");return xu(e)=="symbol"?e:e+""}function $we(t,e){if(xu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ay=function(t){function e(){var r;Twe(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Mwe(this,e,[].concat(s)),io(r,"state",{isAnimationFinished:!1}),io(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),io(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),io(r,"id",Co("recharts-scatter-")),r}return Iwe(e,t),Lwe(e,[{key:"renderSymbolsStatically",value:function(n){var s=this,i=this.props,a=i.shape,l=i.activeShape,c=i.activeIndex,d=Ue(this.props,!1);return n.map(function(f,p){var m=c===p,g=m?l:a,y=Ss(Ss({},d),f);return z.createElement(at,Sf({className:"recharts-scatter-symbol",key:"symbol-".concat(f?.cx,"-").concat(f?.cy,"-").concat(f?.size,"-").concat(p)},yo(s.props,f,p),{role:"img"}),z.createElement(Awe,Sf({option:g,isActive:m,key:"symbol-".concat(p)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,s=this.props,i=s.points,a=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,d=s.animationEasing,f=s.animationId,p=this.state.prevPoints;return z.createElement(Os,{begin:l,duration:c,isActive:a,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,y=i.map(function(b,x){var j=p&&p[x];if(j){var S=cr(j.cx,b.cx),C=cr(j.cy,b.cy),E=cr(j.size,b.size);return Ss(Ss({},b),{},{cx:S(g),cy:C(g),size:E(g)})}var N=cr(0,b.size);return Ss(Ss({},b),{},{size:N(g)})});return z.createElement(at,null,n.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var n=this.props,s=n.points,i=n.isAnimationActive,a=this.state.prevPoints;return i&&s&&s.length&&(!a||!xo(a,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.points,a=s.xAxis,l=s.yAxis,c=s.children,d=Sn(c,Fu);return d?d.map(function(f,p){var m=f.props,g=m.direction,y=m.dataKey;return z.cloneElement(f,{key:"".concat(g,"-").concat(y,"-").concat(i[p]),data:i,xAxis:a,yAxis:l,layout:g==="x"?"vertical":"horizontal",dataPointFormatter:function(x,j){return{x:x.cx,y:x.cy,value:g==="x"?+x.node.x:+x.node.y,errorVal:Jt(x,j)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,s=n.points,i=n.line,a=n.lineType,l=n.lineJointType,c=Ue(this.props,!1),d=Ue(i,!1),f,p;if(a==="joint")f=s.map(function(C){return{x:C.cx,y:C.cy}});else if(a==="fitting"){var m=Lae(s),g=m.xmin,y=m.xmax,b=m.a,x=m.b,j=function(E){return b*E+x};f=[{x:g,y:j(g)},{x:y,y:j(y)}]}var S=Ss(Ss(Ss({},c),{},{fill:"none",stroke:c&&c.fill},d),{},{points:f});return z.isValidElement(i)?p=z.cloneElement(i,S):Ze(i)?p=i(S):p=z.createElement(lo,Sf({},S,{type:l})),z.createElement(at,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.points,a=n.line,l=n.className,c=n.xAxis,d=n.yAxis,f=n.left,p=n.top,m=n.width,g=n.height,y=n.id,b=n.isAnimationActive;if(s||!i||!i.length)return null;var x=this.state.isAnimationFinished,j=st("recharts-scatter",l),S=c&&c.allowDataOverflow,C=d&&d.allowDataOverflow,E=S||C,N=Xe(y)?this.id:y;return z.createElement(at,{className:j,clipPath:E?"url(#clipPath-".concat(N,")"):null},S||C?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(N)},z.createElement("rect",{x:S?f:f-m/2,y:C?p:p-g/2,width:S?m:m*2,height:C?g:g*2}))):null,a&&this.renderLine(),this.renderErrorBar(),z.createElement(at,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!b||x)&&ni.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}}])}(w.PureComponent);io(Ay,"displayName","Scatter");io(Ay,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!va.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});io(Ay,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,s=t.item,i=t.displayedData,a=t.xAxisTicks,l=t.yAxisTicks,c=t.offset,d=s.props.tooltipType,f=Sn(s.props.children,Zh),p=Xe(e.dataKey)?s.props.dataKey:e.dataKey,m=Xe(r.dataKey)?s.props.dataKey:r.dataKey,g=n&&n.dataKey,y=n?n.range:Oy.defaultProps.range,b=y&&y[0],x=e.scale.bandwidth?e.scale.bandwidth():0,j=r.scale.bandwidth?r.scale.bandwidth():0,S=i.map(function(C,E){var N=Jt(C,p),P=Jt(C,m),O=!Xe(g)&&Jt(C,g)||"-",L=[{name:Xe(e.dataKey)?s.props.name:e.name||e.dataKey,unit:e.unit||"",value:N,payload:C,dataKey:p,type:d},{name:Xe(r.dataKey)?s.props.name:r.name||r.dataKey,unit:r.unit||"",value:P,payload:C,dataKey:m,type:d}];O!=="-"&&L.push({name:n.name||n.dataKey,unit:n.unit||"",value:O,payload:C,dataKey:g,type:d});var A=su({axis:e,ticks:a,bandSize:x,entry:C,index:E,dataKey:p}),R=su({axis:r,ticks:l,bandSize:j,entry:C,index:E,dataKey:m}),M=O!=="-"?n.scale(O):b,D=Math.sqrt(Math.max(M,0)/Math.PI);return Ss(Ss({},C),{},{cx:A,cy:R,x:A-D,y:R-D,xAxis:e,yAxis:r,zAxis:n,width:2*D,height:2*D,size:M,node:{x:N,y:P,z:O},tooltipPayload:L,tooltipPosition:{x:A,y:R},payload:C},f&&f[E]&&f[E].props)});return Ss({points:S},c)});function bu(t){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(t)}function Fwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eq(n.key),n)}}function zwe(t,e,r){return e&&Bwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uwe(t,e,r){return e=Ev(e),qwe(t,J8()?Reflect.construct(e,r||[],Ev(t).constructor):e.apply(t,r))}function qwe(t,e){if(e&&(bu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vwe(t)}function Vwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J8=function(){return!!t})()}function Ev(t){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ev(t)}function Wwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_N(t,e)}function _N(t,e){return _N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_N(t,e)}function Q8(t,e,r){return e=eq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eq(t){var e=Hwe(t,"string");return bu(e)=="symbol"?e:e+""}function Hwe(t,e){if(bu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jN(){return jN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jN.apply(this,arguments)}function Gwe(t){var e=t.xAxisId,r=FC(),n=BC(),s=P8(e);return s==null?null:z.createElement(Bu,jN({},s,{className:st("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(a){return ta(a,!0)}}))}var bo=function(t){function e(){return Fwe(this,e),Uwe(this,e,arguments)}return Wwe(e,t),zwe(e,[{key:"render",value:function(){return z.createElement(Gwe,this.props)}}])}(z.Component);Q8(bo,"displayName","XAxis");Q8(bo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function wu(t){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(t)}function Kwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nq(n.key),n)}}function Xwe(t,e,r){return e&&Zwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ywe(t,e,r){return e=Cv(e),Jwe(t,tq()?Reflect.construct(e,r||[],Cv(t).constructor):e.apply(t,r))}function Jwe(t,e){if(e&&(wu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qwe(t)}function Qwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tq=function(){return!!t})()}function Cv(t){return Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cv(t)}function e_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SN(t,e)}function SN(t,e){return SN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},SN(t,e)}function rq(t,e,r){return e=nq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nq(t){var e=t_e(t,"string");return wu(e)=="symbol"?e:e+""}function t_e(t,e){if(wu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NN.apply(this,arguments)}var r_e=function(e){var r=e.yAxisId,n=FC(),s=BC(),i=O8(r);return i==null?null:z.createElement(Bu,NN({},i,{className:st("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return ta(l,!0)}}))},wo=function(t){function e(){return Kwe(this,e),Ywe(this,e,arguments)}return e_e(e,t),Xwe(e,[{key:"render",value:function(){return z.createElement(r_e,this.props)}}])}(z.Component);rq(wo,"displayName","YAxis");rq(wo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function R5(t){return a_e(t)||i_e(t)||s_e(t)||n_e()}function n_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s_e(t,e){if(t){if(typeof t=="string")return EN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EN(t,e)}}function i_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function a_e(t){if(Array.isArray(t))return EN(t)}function EN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var CN=function(e,r,n,s,i){var a=Sn(e,UC),l=Sn(e,Cy),c=[].concat(R5(a),R5(l)),d=Sn(e,Py),f="".concat(s,"Id"),p=s[0],m=r;if(c.length&&(m=c.reduce(function(b,x){if(x.props[f]===n&&Ei(x.props,"extendDomain")&&Ne(x.props[p])){var j=x.props[p];return[Math.min(b[0],j),Math.max(b[1],j)]}return b},m)),d.length){var g="".concat(p,"1"),y="".concat(p,"2");m=d.reduce(function(b,x){if(x.props[f]===n&&Ei(x.props,"extendDomain")&&Ne(x.props[g])&&Ne(x.props[y])){var j=x.props[g],S=x.props[y];return[Math.min(b[0],j,S),Math.max(b[1],j,S)]}return b},m)}return i&&i.length&&(m=i.reduce(function(b,x){return Ne(x)?[Math.min(b[0],x),Math.max(b[1],x)]:b},m)),m},s1={exports:{}},D5;function o_e(){return D5||(D5=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function i(c,d,f,p,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,p||c,m),y=r?r+d:d;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],g]:c._events[y].push(g):(c._events[y]=g,c._eventsCount++),c}function a(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=r?r+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var m=0,g=p.length,y=new Array(g);m<g;m++)y[m]=p[m].fn;return y},l.prototype.listenerCount=function(d){var f=r?r+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,m,g,y){var b=r?r+d:d;if(!this._events[b])return!1;var x=this._events[b],j=arguments.length,S,C;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),j){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,p),!0;case 4:return x.fn.call(x.context,f,p,m),!0;case 5:return x.fn.call(x.context,f,p,m,g),!0;case 6:return x.fn.call(x.context,f,p,m,g,y),!0}for(C=1,S=new Array(j-1);C<j;C++)S[C-1]=arguments[C];x.fn.apply(x.context,S)}else{var E=x.length,N;for(C=0;C<E;C++)switch(x[C].once&&this.removeListener(d,x[C].fn,void 0,!0),j){case 1:x[C].fn.call(x[C].context);break;case 2:x[C].fn.call(x[C].context,f);break;case 3:x[C].fn.call(x[C].context,f,p);break;case 4:x[C].fn.call(x[C].context,f,p,m);break;default:if(!S)for(N=1,S=new Array(j-1);N<j;N++)S[N-1]=arguments[N];x[C].fn.apply(x[C].context,S)}}return!0},l.prototype.on=function(d,f,p){return i(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return i(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,m){var g=r?r+d:d;if(!this._events[g])return this;if(!f)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!m||y.once)&&(!p||y.context===p)&&a(this,g);else{for(var b=0,x=[],j=y.length;b<j;b++)(y[b].fn!==f||m&&!y[b].once||p&&y[b].context!==p)&&x.push(y[b]);x.length?this._events[g]=x.length===1?x[0]:x:a(this,g)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&a(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l}(s1)),s1.exports}var l_e=o_e();const c_e=Pt(l_e);var i1=new c_e,a1="recharts.syncMouseEvents";function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function u_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d_e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sq(n.key),n)}}function f_e(t,e,r){return e&&d_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o1(t,e,r){return e=sq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sq(t){var e=h_e(t,"string");return Ah(e)=="symbol"?e:e+""}function h_e(t,e){if(Ah(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var p_e=function(){function t(){u_e(this,t),o1(this,"activeIndex",0),o1(this,"coordinateList",[]),o1(this,"layout","horizontal")}return f_e(t,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,a=r.container,l=a===void 0?null:a,c=r.layout,d=c===void 0?null:c,f=r.offset,p=f===void 0?null:f,m=r.mouseHandlerCallback,g=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,a=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=i+c+d,m=a+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:p,pageY:m})}}}])}();function m_e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t?.[0],s=t?.[1];if(n&&s&&Ne(n)&&Ne(s))return!0}return!1}function g_e(t,e,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-s,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function iq(t){var e=t.cx,r=t.cy,n=t.radius,s=t.startAngle,i=t.endAngle,a=Gt(e,r,n,s),l=Gt(e,r,n,i);return{points:[a,l],cx:e,cy:r,radius:n,startAngle:s,endAngle:i}}function v_e(t,e,r){var n,s,i,a;if(t==="horizontal")n=e.x,i=n,s=r.top,a=r.top+r.height;else if(t==="vertical")s=e.y,a=s,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,f=e.outerRadius,p=e.angle,m=Gt(l,c,d,p),g=Gt(l,c,f,p);n=m.x,s=m.y,i=g.x,a=g.y}else return iq(e);return[{x:n,y:s},{x:i,y:a}]}function Th(t){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function I5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Dm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(r),!0).forEach(function(n){y_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y_e(t,e,r){return e=x_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x_e(t){var e=b_e(t,"string");return Th(e)=="symbol"?e:e+""}function b_e(t,e){if(Th(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Th(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w_e(t){var e,r,n=t.element,s=t.tooltipEventType,i=t.isActive,a=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,f=t.tooltipAxisBandSize,p=t.layout,m=t.chartName,g=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!g||!i||!a||m!=="ScatterChart"&&s!=="axis")return null;var y,b=lo;if(m==="ScatterChart")y=a,b=pye;else if(m==="BarChart")y=g_e(p,a,c,f),b=MC;else if(p==="radial"){var x=iq(a),j=x.cx,S=x.cy,C=x.radius,E=x.startAngle,N=x.endAngle;y={cx:j,cy:S,startAngle:E,endAngle:N,innerRadius:C,outerRadius:C},b=QU}else y={points:v_e(p,a,c)},b=lo;var P=Dm(Dm(Dm(Dm({stroke:"#ccc",pointerEvents:"none"},c),y),Ue(g,!1)),{},{payload:l,payloadIndex:d,className:st("recharts-tooltip-cursor",g.className)});return w.isValidElement(g)?w.cloneElement(g,P):w.createElement(b,P)}var __e=["item"],j_e=["children","className","width","height","style","compact","title","desc"];function _u(t){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(t)}function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kc.apply(this,arguments)}function $5(t,e){return E_e(t)||N_e(t,e)||oq(t,e)||S_e()}function S_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N_e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,l=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function E_e(t){if(Array.isArray(t))return t}function F5(t,e){if(t==null)return{};var r=C_e(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C_e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function k_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P_e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lq(n.key),n)}}function O_e(t,e,r){return e&&P_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function A_e(t,e,r){return e=kv(e),T_e(t,aq()?Reflect.construct(e,r||[],kv(t).constructor):e.apply(t,r))}function T_e(t,e){if(e&&(_u(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L_e(t)}function L_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aq=function(){return!!t})()}function kv(t){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kv(t)}function M_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kN(t,e)}function kN(t,e){return kN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},kN(t,e)}function ju(t){return I_e(t)||D_e(t)||oq(t)||R_e()}function R_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oq(t,e){if(t){if(typeof t=="string")return PN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PN(t,e)}}function D_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I_e(t){if(Array.isArray(t))return PN(t)}function PN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function B5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function me(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B5(Object(r),!0).forEach(function(n){Ye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ye(t,e,r){return e=lq(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lq(t){var e=$_e(t,"string");return _u(e)=="symbol"?e:e+""}function $_e(t,e){if(_u(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F_e={xAxis:["bottom","top"],yAxis:["left","right"]},B_e={width:"100%",height:"100%"},cq={x:0,y:0};function Im(t){return t}var z_e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},U_e=function(e,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var a=i.coordinate,l=s.radius;return me(me(me({},s),Gt(s.cx,s.cy,l,a)),{},{angle:a,radius:l})}var c=i.coordinate,d=s.angle;return me(me(me({},s),Gt(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return cq},Ty=function(e,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,a=(n??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(ju(l),ju(d)):l},[]);return a.length>0?a:e&&e.length&&Ne(s)&&Ne(i)?e.slice(s,i+1):[]};function uq(t){return t==="number"?[0,"auto"]:void 0}var ON=function(e,r,n,s){var i=e.graphicalItems,a=e.tooltipAxis,l=Ty(r,e);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:r;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var m;if(a.dataKey&&!a.allowDuplicatedCategory){var g=p===void 0?l:p;m=Eg(g,a.dataKey,s)}else m=p&&p[n]||l[n];return m?[].concat(ju(c),[GU(d,m)]):c},[])},z5=function(e,r,n,s){var i=s||{x:e.chartX,y:e.chartY},a=z_e(i,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,f=Fpe(a,l,d,c);if(f>=0&&d){var p=d[f]&&d[f].value,m=ON(e,r,f,p),g=U_e(n,l,f,i);return{activeTooltipIndex:f,activeLabel:p,activePayload:m,activeCoordinate:g}}return null},q_e=function(e,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,a=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=e.layout,p=e.children,m=e.stackOffset,g=zU(f,i);return n.reduce(function(y,b){var x,j=b.type.defaultProps!==void 0?me(me({},b.type.defaultProps),b.props):b.props,S=j.type,C=j.dataKey,E=j.allowDataOverflow,N=j.allowDuplicatedCategory,P=j.scale,O=j.ticks,L=j.includeHidden,A=j[a];if(y[A])return y;var R=Ty(e.data,{graphicalItems:s.filter(function(H){var ne,ge=a in H.props?H.props[a]:(ne=H.type.defaultProps)===null||ne===void 0?void 0:ne[a];return ge===A}),dataStartIndex:c,dataEndIndex:d}),M=R.length,D,B,F;m_e(j.domain,E,S)&&(D=zS(j.domain,null,E),g&&(S==="number"||P!=="auto")&&(F=yf(R,C,"category")));var V=uq(S);if(!D||D.length===0){var J,G=(J=j.domain)!==null&&J!==void 0?J:V;if(C){if(D=yf(R,C,S),S==="category"&&g){var q=Tae(D);N&&q?(B=D,D=dv(0,M)):N||(D=D$(G,D,b).reduce(function(H,ne){return H.indexOf(ne)>=0?H:[].concat(ju(H),[ne])},[]))}else if(S==="category")N?D=D.filter(function(H){return H!==""&&!Xe(H)}):D=D$(G,D,b).reduce(function(H,ne){return H.indexOf(ne)>=0||ne===""||Xe(ne)?H:[].concat(ju(H),[ne])},[]);else if(S==="number"){var U=Vpe(R,s.filter(function(H){var ne,ge,K=a in H.props?H.props[a]:(ne=H.type.defaultProps)===null||ne===void 0?void 0:ne[a],de="hide"in H.props?H.props.hide:(ge=H.type.defaultProps)===null||ge===void 0?void 0:ge.hide;return K===A&&(L||!de)}),C,i,f);U&&(D=U)}g&&(S==="number"||P!=="auto")&&(F=yf(R,C,"category"))}else g?D=dv(0,M):l&&l[A]&&l[A].hasStack&&S==="number"?D=m==="expand"?[0,1]:HU(l[A].stackGroups,c,d):D=BU(R,s.filter(function(H){var ne=a in H.props?H.props[a]:H.type.defaultProps[a],ge="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return ne===A&&(L||!ge)}),S,f,!0);if(S==="number")D=CN(p,D,A,i,O),G&&(D=zS(G,D,E));else if(S==="category"&&G){var W=G,I=D.every(function(H){return W.indexOf(H)>=0});I&&(D=W)}}return me(me({},y),{},Ye({},A,me(me({},j),{},{axisType:i,domain:D,categoricalDomain:F,duplicateDomain:B,originalDomain:(x=j.domain)!==null&&x!==void 0?x:V,isCategorical:g,layout:f})))},{})},V_e=function(e,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,a=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=e.layout,p=e.children,m=Ty(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),g=m.length,y=zU(f,i),b=-1;return n.reduce(function(x,j){var S=j.type.defaultProps!==void 0?me(me({},j.type.defaultProps),j.props):j.props,C=S[a],E=uq("number");if(!x[C]){b++;var N;return y?N=dv(0,g):l&&l[C]&&l[C].hasStack?(N=HU(l[C].stackGroups,c,d),N=CN(p,N,C,i)):(N=zS(E,BU(m,n.filter(function(P){var O,L,A=a in P.props?P.props[a]:(O=P.type.defaultProps)===null||O===void 0?void 0:O[a],R="hide"in P.props?P.props.hide:(L=P.type.defaultProps)===null||L===void 0?void 0:L.hide;return A===C&&!R}),"number",f),s.defaultProps.allowDataOverflow),N=CN(p,N,C,i)),me(me({},x),{},Ye({},C,me(me({axisType:i},s.defaultProps),{},{hide:!0,orientation:rs(F_e,"".concat(i,".").concat(b%2),null),domain:N,originalDomain:E,isCategorical:y,layout:f})))}return x},{})},W_e=function(e,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,a=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=e.children,p="".concat(s,"Id"),m=Sn(f,i),g={};return m&&m.length?g=q_e(e,{axes:m,graphicalItems:a,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):a&&a.length&&(g=V_e(e,{Axis:i,graphicalItems:a,axisType:s,axisIdKey:p,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),g},H_e=function(e){var r=to(e),n=ta(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:oC(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Jg(r,n)}},U5=function(e){var r=e.children,n=e.defaultShowTooltip,s=Gn(r,uu),i=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(a=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},G_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=sa(r&&r.type);return n&&n.indexOf("Bar")>=0})},q5=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},K_e=function(e,r){var n=e.props,s=e.graphicalItems,i=e.xAxisMap,a=i===void 0?{}:i,l=e.yAxisMap,c=l===void 0?{}:l,d=n.width,f=n.height,p=n.children,m=n.margin||{},g=Gn(p,uu),y=Gn(p,Dc),b=Object.keys(c).reduce(function(N,P){var O=c[P],L=O.orientation;return!O.mirror&&!O.hide?me(me({},N),{},Ye({},L,N[L]+O.width)):N},{left:m.left||0,right:m.right||0}),x=Object.keys(a).reduce(function(N,P){var O=a[P],L=O.orientation;return!O.mirror&&!O.hide?me(me({},N),{},Ye({},L,rs(N,"".concat(L))+O.height)):N},{top:m.top||0,bottom:m.bottom||0}),j=me(me({},x),b),S=j.bottom;g&&(j.bottom+=g.props.height||uu.defaultProps.height),y&&r&&(j=Upe(j,s,n,r));var C=d-j.left-j.right,E=f-j.top-j.bottom;return me(me({brushBottom:S},j),{},{width:Math.max(C,0),height:Math.max(E,0)})},Z_e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},Ly=function(e){var r=e.chartName,n=e.GraphicalChild,s=e.defaultTooltipEventType,i=s===void 0?"axis":s,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,d=e.legendContent,f=e.formatAxisMap,p=e.defaultProps,m=function(j,S){var C=S.graphicalItems,E=S.stackGroups,N=S.offset,P=S.updateId,O=S.dataStartIndex,L=S.dataEndIndex,A=j.barSize,R=j.layout,M=j.barGap,D=j.barCategoryGap,B=j.maxBarSize,F=q5(R),V=F.numericAxisName,J=F.cateAxisName,G=G_e(C),q=[];return C.forEach(function(U,W){var I=Ty(j.data,{graphicalItems:[U],dataStartIndex:O,dataEndIndex:L}),H=U.type.defaultProps!==void 0?me(me({},U.type.defaultProps),U.props):U.props,ne=H.dataKey,ge=H.maxBarSize,K=H["".concat(V,"Id")],de=H["".concat(J,"Id")],ue={},he=c.reduce(function(Tt,Q){var ie=S["".concat(Q.axisType,"Map")],Z=H["".concat(Q.axisType,"Id")];ie&&ie[Z]||Q.axisType==="zAxis"||Nl();var ye=ie[Z];return me(me({},Tt),{},Ye(Ye({},Q.axisType,ye),"".concat(Q.axisType,"Ticks"),ta(ye)))},ue),ce=he[J],te=he["".concat(J,"Ticks")],pe=E&&E[K]&&E[K].hasStack&&Qpe(U,E[K].stackGroups),ae=sa(U.type).indexOf("Bar")>=0,Oe=Jg(ce,te),Ee=[],ke=G&&Bpe({barSize:A,stackGroups:E,totalSize:Z_e(he,J)});if(ae){var We,St,fr=Xe(ge)?B:ge,ir=(We=(St=Jg(ce,te,!0))!==null&&St!==void 0?St:fr)!==null&&We!==void 0?We:0;Ee=zpe({barGap:M,barCategoryGap:D,bandSize:ir!==Oe?ir:Oe,sizeList:ke[de],maxBarSize:fr}),ir!==Oe&&(Ee=Ee.map(function(Tt){return me(me({},Tt),{},{position:me(me({},Tt.position),{},{offset:Tt.position.offset-ir/2})})}))}var Bt=U&&U.type&&U.type.getComposedData;Bt&&q.push({props:me(me({},Bt(me(me({},he),{},{displayedData:I,props:j,dataKey:ne,item:U,bandSize:Oe,barPosition:Ee,offset:N,stackedData:pe,layout:R,dataStartIndex:O,dataEndIndex:L}))),{},Ye(Ye(Ye({key:U.key||"item-".concat(W)},V,he[V]),J,he[J]),"animationId",P)),childIndex:Wae(U,j.children),item:U})}),q},g=function(j,S){var C=j.props,E=j.dataStartIndex,N=j.dataEndIndex,P=j.updateId;if(!YM({props:C}))return null;var O=C.children,L=C.layout,A=C.stackOffset,R=C.data,M=C.reverseStackOrder,D=q5(L),B=D.numericAxisName,F=D.cateAxisName,V=Sn(O,n),J=Ype(R,V,"".concat(B,"Id"),"".concat(F,"Id"),A,M),G=c.reduce(function(H,ne){var ge="".concat(ne.axisType,"Map");return me(me({},H),{},Ye({},ge,W_e(C,me(me({},ne),{},{graphicalItems:V,stackGroups:ne.axisType===B&&J,dataStartIndex:E,dataEndIndex:N}))))},{}),q=K_e(me(me({},G),{},{props:C,graphicalItems:V}),S?.legendBBox);Object.keys(G).forEach(function(H){G[H]=f(C,G[H],q,H.replace("Map",""),r)});var U=G["".concat(F,"Map")],W=H_e(U),I=m(C,me(me({},G),{},{dataStartIndex:E,dataEndIndex:N,updateId:P,graphicalItems:V,stackGroups:J,offset:q}));return me(me({formattedGraphicalItems:I,graphicalItems:V,offset:q,stackGroups:J},W),G)},y=function(x){function j(S){var C,E,N;return k_e(this,j),N=A_e(this,j,[S]),Ye(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ye(N,"accessibilityManager",new p_e),Ye(N,"handleLegendBBoxUpdate",function(P){if(P){var O=N.state,L=O.dataStartIndex,A=O.dataEndIndex,R=O.updateId;N.setState(me({legendBBox:P},g({props:N.props,dataStartIndex:L,dataEndIndex:A,updateId:R},me(me({},N.state),{},{legendBBox:P}))))}}),Ye(N,"handleReceiveSyncEvent",function(P,O,L){if(N.props.syncId===P){if(L===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(O)}}),Ye(N,"handleBrushChange",function(P){var O=P.startIndex,L=P.endIndex;if(O!==N.state.dataStartIndex||L!==N.state.dataEndIndex){var A=N.state.updateId;N.setState(function(){return me({dataStartIndex:O,dataEndIndex:L},g({props:N.props,dataStartIndex:O,dataEndIndex:L,updateId:A},N.state))}),N.triggerSyncEvent({dataStartIndex:O,dataEndIndex:L})}}),Ye(N,"handleMouseEnter",function(P){var O=N.getMouseInfo(P);if(O){var L=me(me({},O),{},{isTooltipActive:!0});N.setState(L),N.triggerSyncEvent(L);var A=N.props.onMouseEnter;Ze(A)&&A(L,P)}}),Ye(N,"triggeredAfterMouseMove",function(P){var O=N.getMouseInfo(P),L=O?me(me({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(L),N.triggerSyncEvent(L);var A=N.props.onMouseMove;Ze(A)&&A(L,P)}),Ye(N,"handleItemMouseEnter",function(P){N.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Ye(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Ye(N,"handleMouseMove",function(P){P.persist(),N.throttleTriggeredAfterMouseMove(P)}),Ye(N,"handleMouseLeave",function(P){N.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};N.setState(O),N.triggerSyncEvent(O);var L=N.props.onMouseLeave;Ze(L)&&L(O,P)}),Ye(N,"handleOuterEvent",function(P){var O=Vae(P),L=rs(N.props,"".concat(O));if(O&&Ze(L)){var A,R;/.*touch.*/i.test(O)?R=N.getMouseInfo(P.changedTouches[0]):R=N.getMouseInfo(P),L((A=R)!==null&&A!==void 0?A:{},P)}}),Ye(N,"handleClick",function(P){var O=N.getMouseInfo(P);if(O){var L=me(me({},O),{},{isTooltipActive:!0});N.setState(L),N.triggerSyncEvent(L);var A=N.props.onClick;Ze(A)&&A(L,P)}}),Ye(N,"handleMouseDown",function(P){var O=N.props.onMouseDown;if(Ze(O)){var L=N.getMouseInfo(P);O(L,P)}}),Ye(N,"handleMouseUp",function(P){var O=N.props.onMouseUp;if(Ze(O)){var L=N.getMouseInfo(P);O(L,P)}}),Ye(N,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Ye(N,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&N.handleMouseDown(P.changedTouches[0])}),Ye(N,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&N.handleMouseUp(P.changedTouches[0])}),Ye(N,"handleDoubleClick",function(P){var O=N.props.onDoubleClick;if(Ze(O)){var L=N.getMouseInfo(P);O(L,P)}}),Ye(N,"handleContextMenu",function(P){var O=N.props.onContextMenu;if(Ze(O)){var L=N.getMouseInfo(P);O(L,P)}}),Ye(N,"triggerSyncEvent",function(P){N.props.syncId!==void 0&&i1.emit(a1,N.props.syncId,P,N.eventEmitterSymbol)}),Ye(N,"applySyncEvent",function(P){var O=N.props,L=O.layout,A=O.syncMethod,R=N.state.updateId,M=P.dataStartIndex,D=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)N.setState(me({dataStartIndex:M,dataEndIndex:D},g({props:N.props,dataStartIndex:M,dataEndIndex:D,updateId:R},N.state)));else if(P.activeTooltipIndex!==void 0){var B=P.chartX,F=P.chartY,V=P.activeTooltipIndex,J=N.state,G=J.offset,q=J.tooltipTicks;if(!G)return;if(typeof A=="function")V=A(q,P);else if(A==="value"){V=-1;for(var U=0;U<q.length;U++)if(q[U].value===P.activeLabel){V=U;break}}var W=me(me({},G),{},{x:G.left,y:G.top}),I=Math.min(B,W.x+W.width),H=Math.min(F,W.y+W.height),ne=q[V]&&q[V].value,ge=ON(N.state,N.props.data,V),K=q[V]?{x:L==="horizontal"?q[V].coordinate:I,y:L==="horizontal"?H:q[V].coordinate}:cq;N.setState(me(me({},P),{},{activeLabel:ne,activeCoordinate:K,activePayload:ge,activeTooltipIndex:V}))}else N.setState(P)}),Ye(N,"renderCursor",function(P){var O,L=N.state,A=L.isTooltipActive,R=L.activeCoordinate,M=L.activePayload,D=L.offset,B=L.activeTooltipIndex,F=L.tooltipAxisBandSize,V=N.getTooltipEventType(),J=(O=P.props.active)!==null&&O!==void 0?O:A,G=N.props.layout,q=P.key||"_recharts-cursor";return z.createElement(w_e,{key:q,activeCoordinate:R,activePayload:M,activeTooltipIndex:B,chartName:r,element:P,isActive:J,layout:G,offset:D,tooltipAxisBandSize:F,tooltipEventType:V})}),Ye(N,"renderPolarAxis",function(P,O,L){var A=rs(P,"type.axisType"),R=rs(N.state,"".concat(A,"Map")),M=P.type.defaultProps,D=M!==void 0?me(me({},M),P.props):P.props,B=R&&R[D["".concat(A,"Id")]];return w.cloneElement(P,me(me({},B),{},{className:st(A,B.className),key:P.key||"".concat(O,"-").concat(L),ticks:ta(B,!0)}))}),Ye(N,"renderPolarGrid",function(P){var O=P.props,L=O.radialLines,A=O.polarAngles,R=O.polarRadius,M=N.state,D=M.radiusAxisMap,B=M.angleAxisMap,F=to(D),V=to(B),J=V.cx,G=V.cy,q=V.innerRadius,U=V.outerRadius;return w.cloneElement(P,{polarAngles:Array.isArray(A)?A:ta(V,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(R)?R:ta(F,!0).map(function(W){return W.coordinate}),cx:J,cy:G,innerRadius:q,outerRadius:U,key:P.key||"polar-grid",radialLines:L})}),Ye(N,"renderLegend",function(){var P=N.state.formattedGraphicalItems,O=N.props,L=O.children,A=O.width,R=O.height,M=N.props.margin||{},D=A-(M.left||0)-(M.right||0),B=$U({children:L,formattedGraphicalItems:P,legendWidth:D,legendContent:d});if(!B)return null;var F=B.item,V=F5(B,__e);return w.cloneElement(F,me(me({},V),{},{chartWidth:A,chartHeight:R,margin:M,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Ye(N,"renderTooltip",function(){var P,O=N.props,L=O.children,A=O.accessibilityLayer,R=Gn(L,Kn);if(!R)return null;var M=N.state,D=M.isTooltipActive,B=M.activeCoordinate,F=M.activePayload,V=M.activeLabel,J=M.offset,G=(P=R.props.active)!==null&&P!==void 0?P:D;return w.cloneElement(R,{viewBox:me(me({},J),{},{x:J.left,y:J.top}),active:G,label:V,payload:G?F:[],coordinate:B,accessibilityLayer:A})}),Ye(N,"renderBrush",function(P){var O=N.props,L=O.margin,A=O.data,R=N.state,M=R.offset,D=R.dataStartIndex,B=R.dataEndIndex,F=R.updateId;return w.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Tm(N.handleBrushChange,P.props.onChange),data:A,x:Ne(P.props.x)?P.props.x:M.left,y:Ne(P.props.y)?P.props.y:M.top+M.height+M.brushBottom-(L.bottom||0),width:Ne(P.props.width)?P.props.width:M.width,startIndex:D,endIndex:B,updateId:"brush-".concat(F)})}),Ye(N,"renderReferenceElement",function(P,O,L){if(!P)return null;var A=N,R=A.clipPathId,M=N.state,D=M.xAxisMap,B=M.yAxisMap,F=M.offset,V=P.type.defaultProps||{},J=P.props,G=J.xAxisId,q=G===void 0?V.xAxisId:G,U=J.yAxisId,W=U===void 0?V.yAxisId:U;return w.cloneElement(P,{key:P.key||"".concat(O,"-").concat(L),xAxis:D[q],yAxis:B[W],viewBox:{x:F.left,y:F.top,width:F.width,height:F.height},clipPathId:R})}),Ye(N,"renderActivePoints",function(P){var O=P.item,L=P.activePoint,A=P.basePoint,R=P.childIndex,M=P.isRange,D=[],B=O.props.key,F=O.item.type.defaultProps!==void 0?me(me({},O.item.type.defaultProps),O.item.props):O.item.props,V=F.activeDot,J=F.dataKey,G=me(me({index:R,dataKey:J,cx:L.x,cy:L.y,r:4,fill:LC(O.item),strokeWidth:2,stroke:"#fff",payload:L.payload,value:L.value},Ue(V,!1)),Cg(V));return D.push(j.renderActiveDot(V,G,"".concat(B,"-activePoint-").concat(R))),A?D.push(j.renderActiveDot(V,me(me({},G),{},{cx:A.x,cy:A.y}),"".concat(B,"-basePoint-").concat(R))):M&&D.push(null),D}),Ye(N,"renderGraphicChild",function(P,O,L){var A=N.filterFormatItem(P,O,L);if(!A)return null;var R=N.getTooltipEventType(),M=N.state,D=M.isTooltipActive,B=M.tooltipAxis,F=M.activeTooltipIndex,V=M.activeLabel,J=N.props.children,G=Gn(J,Kn),q=A.props,U=q.points,W=q.isRange,I=q.baseLine,H=A.item.type.defaultProps!==void 0?me(me({},A.item.type.defaultProps),A.item.props):A.item.props,ne=H.activeDot,ge=H.hide,K=H.activeBar,de=H.activeShape,ue=!!(!ge&&D&&G&&(ne||K||de)),he={};R!=="axis"&&G&&G.props.trigger==="click"?he={onClick:Tm(N.handleItemMouseEnter,P.props.onClick)}:R!=="axis"&&(he={onMouseLeave:Tm(N.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Tm(N.handleItemMouseEnter,P.props.onMouseEnter)});var ce=w.cloneElement(P,me(me({},A.props),he));function te(Q){return typeof B.dataKey=="function"?B.dataKey(Q.payload):null}if(ue)if(F>=0){var pe,ae;if(B.dataKey&&!B.allowDuplicatedCategory){var Oe=typeof B.dataKey=="function"?te:"payload.".concat(B.dataKey.toString());pe=Eg(U,Oe,V),ae=W&&I&&Eg(I,Oe,V)}else pe=U?.[F],ae=W&&I&&I[F];if(de||K){var Ee=P.props.activeIndex!==void 0?P.props.activeIndex:F;return[w.cloneElement(P,me(me(me({},A.props),he),{},{activeIndex:Ee})),null,null]}if(!Xe(pe))return[ce].concat(ju(N.renderActivePoints({item:A,activePoint:pe,basePoint:ae,childIndex:F,isRange:W})))}else{var ke,We=(ke=N.getItemByXY(N.state.activeCoordinate))!==null&&ke!==void 0?ke:{graphicalItem:ce},St=We.graphicalItem,fr=St.item,ir=fr===void 0?P:fr,Bt=St.childIndex,Tt=me(me(me({},A.props),he),{},{activeIndex:Bt});return[w.cloneElement(ir,Tt),null,null]}return W?[ce,null,null]:[ce,null]}),Ye(N,"renderCustomized",function(P,O,L){return w.cloneElement(P,me(me({key:"recharts-customized-".concat(L)},N.props),N.state))}),Ye(N,"renderMap",{CartesianGrid:{handler:Im,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:Im},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:Im},YAxis:{handler:Im},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((C=S.id)!==null&&C!==void 0?C:Co("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=Iz(N.triggeredAfterMouseMove,(E=S.throttleDelay)!==null&&E!==void 0?E:1e3/60),N.state={},N}return M_e(j,x),O_e(j,[{key:"componentDidMount",value:function(){var C,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,E=C.children,N=C.data,P=C.height,O=C.layout,L=Gn(E,Kn);if(L){var A=L.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,M=ON(this.state,N,A,R),D=this.state.tooltipTicks[A].coordinate,B=(this.state.offset.top+P)/2,F=O==="horizontal",V=F?{x:D,y:B}:{y:D,x:B},J=this.state.formattedGraphicalItems.find(function(q){var U=q.item;return U.type.name==="Scatter"});J&&(V=me(me({},V),J.props.points[A].tooltipPosition),M=J.props.points[A].tooltipPayload);var G={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:R,activePayload:M,activeCoordinate:V};this.setState(G),this.renderCursor(L),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var N,P;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(C){cS([Gn(C.children,Kn)],[Gn(this.props.children,Kn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Gn(this.props.children,Kn);if(C&&typeof C.props.shared=="boolean"){var E=C.props.shared?"axis":"item";return l.indexOf(E)>=0?E:i}return i}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var E=this.container,N=E.getBoundingClientRect(),P=Aue(N),O={chartX:Math.round(C.pageX-P.left),chartY:Math.round(C.pageY-P.top)},L=N.width/E.offsetWidth||1,A=this.inRange(O.chartX,O.chartY,L);if(!A)return null;var R=this.state,M=R.xAxisMap,D=R.yAxisMap,B=this.getTooltipEventType(),F=z5(this.state,this.props.data,this.props.layout,A);if(B!=="axis"&&M&&D){var V=to(M).scale,J=to(D).scale,G=V&&V.invert?V.invert(O.chartX):null,q=J&&J.invert?J.invert(O.chartY):null;return me(me({},O),{},{xValue:G,yValue:q},F)}return F?me(me({},O),F):null}},{key:"inRange",value:function(C,E){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,O=C/N,L=E/N;if(P==="horizontal"||P==="vertical"){var A=this.state.offset,R=O>=A.left&&O<=A.left+A.width&&L>=A.top&&L<=A.top+A.height;return R?{x:O,y:L}:null}var M=this.state,D=M.angleAxisMap,B=M.radiusAxisMap;if(D&&B){var F=to(D);return F$({x:O,y:L},F)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,E=this.getTooltipEventType(),N=Gn(C,Kn),P={};N&&E==="axis"&&(N.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=Cg(this.props,this.handleOuterEvent);return me(me({},O),P)}},{key:"addListener",value:function(){i1.on(a1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){i1.removeListener(a1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,E,N){for(var P=this.state.formattedGraphicalItems,O=0,L=P.length;O<L;O++){var A=P[O];if(A.item===C||A.props.key===C.key||E===sa(A.item.type)&&N===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,E=this.state.offset,N=E.left,P=E.top,O=E.height,L=E.width;return z.createElement("defs",null,z.createElement("clipPath",{id:C},z.createElement("rect",{x:N,y:P,height:O,width:L})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(E,N){var P=$5(N,2),O=P[0],L=P[1];return me(me({},E),{},Ye({},O,L.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(E,N){var P=$5(N,2),O=P[0],L=P[1];return me(me({},E),{},Ye({},O,L.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[C])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(C){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[C])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(C){var E=this.state,N=E.formattedGraphicalItems,P=E.activeItem;if(N&&N.length)for(var O=0,L=N.length;O<L;O++){var A=N[O],R=A.props,M=A.item,D=M.type.defaultProps!==void 0?me(me({},M.type.defaultProps),M.props):M.props,B=sa(M.type);if(B==="Bar"){var F=(R.data||[]).find(function(q){return Kve(C,q)});if(F)return{graphicalItem:A,payload:F}}else if(B==="RadialBar"){var V=(R.data||[]).find(function(q){return F$(C,q)});if(V)return{graphicalItem:A,payload:V}}else if(jy(A,P)||Sy(A,P)||Eh(A,P)){var J=v0e({graphicalItem:A,activeTooltipItem:P,itemData:D.data}),G=D.activeIndex===void 0?J:D.activeIndex;return{graphicalItem:me(me({},A),{},{childIndex:G}),payload:Eh(A,P)?D.data[J]:A.props.data[J]}}}return null}},{key:"render",value:function(){var C=this;if(!YM(this))return null;var E=this.props,N=E.children,P=E.className,O=E.width,L=E.height,A=E.style,R=E.compact,M=E.title,D=E.desc,B=F5(E,j_e),F=Ue(B,!1);if(R)return z.createElement(m5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(dS,kc({},F,{width:O,height:L,title:M,desc:D}),this.renderClipPath(),QM(N,this.renderMap)));if(this.props.accessibilityLayer){var V,J;F.tabIndex=(V=this.props.tabIndex)!==null&&V!==void 0?V:0,F.role=(J=this.props.role)!==null&&J!==void 0?J:"application",F.onKeyDown=function(q){C.accessibilityManager.keyboardEvent(q)},F.onFocus=function(){C.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return z.createElement(m5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",kc({className:st("recharts-wrapper",P),style:me({position:"relative",cursor:"default",width:O,height:L},A)},G,{ref:function(U){C.container=U}}),z.createElement(dS,kc({},F,{width:O,height:L,title:M,desc:D,style:B_e}),this.renderClipPath(),QM(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(w.Component);Ye(y,"displayName",r),Ye(y,"defaultProps",me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Ye(y,"getDerivedStateFromProps",function(x,j){var S=x.dataKey,C=x.data,E=x.children,N=x.width,P=x.height,O=x.layout,L=x.stackOffset,A=x.margin,R=j.dataStartIndex,M=j.dataEndIndex;if(j.updateId===void 0){var D=U5(x);return me(me(me({},D),{},{updateId:0},g(me(me({props:x},D),{},{updateId:0}),j)),{},{prevDataKey:S,prevData:C,prevWidth:N,prevHeight:P,prevLayout:O,prevStackOffset:L,prevMargin:A,prevChildren:E})}if(S!==j.prevDataKey||C!==j.prevData||N!==j.prevWidth||P!==j.prevHeight||O!==j.prevLayout||L!==j.prevStackOffset||!Rc(A,j.prevMargin)){var B=U5(x),F={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},V=me(me({},z5(j,C,O)),{},{updateId:j.updateId+1}),J=me(me(me({},B),F),V);return me(me(me({},J),g(me({props:x},J),j)),{},{prevDataKey:S,prevData:C,prevWidth:N,prevHeight:P,prevLayout:O,prevStackOffset:L,prevMargin:A,prevChildren:E})}if(!cS(E,j.prevChildren)){var G,q,U,W,I=Gn(E,uu),H=I&&(G=(q=I.props)===null||q===void 0?void 0:q.startIndex)!==null&&G!==void 0?G:R,ne=I&&(U=(W=I.props)===null||W===void 0?void 0:W.endIndex)!==null&&U!==void 0?U:M,ge=H!==R||ne!==M,K=!Xe(C),de=K&&!ge?j.updateId:j.updateId+1;return me(me({updateId:de},g(me(me({props:x},j),{},{updateId:de,dataStartIndex:H,dataEndIndex:ne}),j)),{},{prevChildren:E,dataStartIndex:H,dataEndIndex:ne})}return null}),Ye(y,"renderActiveDot",function(x,j,S){var C;return w.isValidElement(x)?C=w.cloneElement(x,j):Ze(x)?C=x(j):C=z.createElement(ep,j),z.createElement(at,{className:"recharts-active-dot",key:S},C)});var b=w.forwardRef(function(j,S){return z.createElement(y,kc({},j,{ref:S}))});return b.displayName=y.displayName,b},X_e=Ly({chartName:"LineChart",GraphicalChild:fa,axisComponents:[{axisType:"xAxis",AxisComp:bo},{axisType:"yAxis",AxisComp:wo}],formatAxisMap:RC}),Y_e=Ly({chartName:"BarChart",GraphicalChild:ii,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:bo},{axisType:"yAxis",AxisComp:wo}],formatAxisMap:RC}),J_e=Ly({chartName:"PieChart",GraphicalChild:xa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:_y},{axisType:"radiusAxis",AxisComp:by}],formatAxisMap:cme,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Q_e=Ly({chartName:"ComposedChart",GraphicalChild:[fa,Ml,ii,Ay],axisComponents:[{axisType:"xAxis",AxisComp:bo},{axisType:"yAxis",AxisComp:wo},{axisType:"zAxis",AxisComp:Oy}],formatAxisMap:RC});const V5=["#1A5F7A","#E2E8F0"],eje=()=>{const{laboratories:t,selectedLaboratory:e,dateRange:r,isLoading:n,error:s,weeklyActivityData:i,marketShareData:a,stats:l,hasData:c,hasLaboratories:d,fetchLaboratories:f,setSelectedLaboratory:p,setDateRange:m,refreshStatistics:g,clearError:y}=IG();w.useEffect(()=>{f()},[f]);const b=j=>{const S=j.target.value;if(S){const C=t.find(E=>E.id===S);p(C||null)}else p(null)},x=(j,S)=>{const C={...r,[j]:S};m(C.start,C.end)};return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Statistiques laboratoire"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Analysez les performances de votre laboratoire"})]}),o.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[o.jsxs("select",{className:"h-10 rounded-lg border border-gray-300 bg-white px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-gray-100",value:e?.id||"",onChange:b,disabled:!d||n,children:[o.jsx("option",{value:"",children:n?"Chargement...":"Sélectionner un laboratoire"}),t.map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qe,{type:"date",value:r.start,onChange:j=>x("start",j.target.value),className:"w-40",disabled:n}),o.jsx("span",{className:"text-gray-500",children:"à"}),o.jsx(Qe,{type:"date",value:r.end,onChange:j=>x("end",j.target.value),className:"w-40",disabled:n})]}),e&&o.jsxs(ve,{onClick:g,disabled:n,size:"sm",variant:"outline",className:"flex items-center gap-2",children:[o.jsx(ff,{className:`h-4 w-4 ${n?"animate-spin":""}`}),"Actualiser"]})]}),s&&o.jsxs(Ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[o.jsx(ss,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-red-800 font-medium",children:"Erreur de chargement"}),o.jsx("p",{className:"text-red-600 text-sm",children:s})]}),o.jsx(ve,{onClick:y,size:"sm",variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-100",children:"Fermer"})]}),!e&&!n&&o.jsxs(_e,{className:"p-12 text-center",children:[o.jsx(Dt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun laboratoire sélectionné"}),o.jsx("p",{className:"text-gray-500",children:"Sélectionnez un laboratoire pour afficher ses statistiques"})]}),e&&n&&o.jsxs(_e,{className:"p-12 text-center",children:[o.jsx(ff,{className:"h-8 w-8 text-primary-500 mx-auto mb-4 animate-spin"}),o.jsxs("p",{className:"text-gray-600",children:["Chargement des statistiques de ",e.name,"..."]})]}),e&&!n&&!c&&!s&&o.jsxs(_e,{className:"p-12 text-center",children:[o.jsx(ut,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune donnée disponible"}),o.jsxs("p",{className:"text-gray-500",children:["Aucun shipment trouvé pour ",e.name," sur la période sélectionnée"]}),o.jsxs(ve,{onClick:g,className:"mt-4",variant:"outline",children:[o.jsx(ff,{className:"h-4 w-4 mr-2"}),"Réessayer"]})]}),e&&c&&!n&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-primary-600 mb-2",children:[o.jsx(G1,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Plus livré"})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.mostDelivered.name}),o.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[l.mostDelivered.count," visites"]})]})}),o.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-primary-600 mb-2",children:[o.jsx(G1,{className:"h-5 w-5 rotate-180"}),o.jsx("span",{className:"font-medium",children:"Moins livré"})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.leastDelivered.name}),o.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[l.leastDelivered.count," visites"]})]})}),o.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-success-600 mb-2",children:[o.jsx(er,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Taux de réussite"})]}),o.jsxs("div",{className:"text-2xl font-bold text-success-600",children:[l.successRate.toFixed(1),"%"]}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Livraisons réussies"})]})}),o.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-error-600 mb-2",children:[o.jsx(es,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Taux d'échec"})]}),o.jsxs("div",{className:"text-2xl font-bold text-error-600",children:[l.failureRate.toFixed(1),"%"]}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Livraisons échouées"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsx(Ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fo,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-medium",children:"Activité hebdomadaire"})]}),o.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-3 h-3 bg-primary-600 rounded-sm"}),o.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-sm"})]}),o.jsx("span",{children:"Votre labo"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-4 h-0.5 border-t-2 border-dashed border-rose-600"}),o.jsx("div",{className:"w-4 h-0.5 border-t-2 border-dashed border-emerald-600"})]}),o.jsx("span",{children:"Moy. autres labos"})]})]})]}),o.jsx("div",{className:"h-[300px]",children:i.length>0?o.jsx(Ig,{width:"100%",height:"100%",children:o.jsxs(Q_e,{data:i,children:[o.jsx(wv,{strokeDasharray:"3 3"}),o.jsx(bo,{dataKey:"name"}),o.jsx(wo,{}),o.jsx(Kn,{formatter:(j,S)=>{const C={deliveries:"Vos livraisons",pickups:"Vos récupérations",avgDeliveries:"Moy. autres labos (livraisons)",avgPickups:"Moy. autres labos (récupérations)"}[S]||S;return[j,C]}}),o.jsx(ii,{dataKey:"deliveries",name:"deliveries",fill:"#1A5F7A"}),o.jsx(ii,{dataKey:"pickups",name:"pickups",fill:"#FD841F"}),o.jsx(fa,{type:"monotone",dataKey:"avgDeliveries",name:"avgDeliveries",stroke:"#E11D48",strokeWidth:3,strokeDasharray:"8 4",dot:{fill:"#E11D48",strokeWidth:2,r:5},connectNulls:!1}),o.jsx(fa,{type:"monotone",dataKey:"avgPickups",name:"avgPickups",stroke:"#059669",strokeWidth:3,strokeDasharray:"8 4",dot:{fill:"#059669",strokeWidth:2,r:5},connectNulls:!1})]})}):o.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:o.jsxs("div",{className:"text-center",children:[o.jsx(fo,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:"Aucune activité sur la période"})]})})})]})}),o.jsx(Ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},children:o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx(IQ,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-medium",children:"Parts de marché"})]}),o.jsx("div",{className:"h-[300px]",children:o.jsx(Ig,{width:"100%",height:"100%",children:o.jsxs(J_e,{children:[o.jsx(xa,{data:a,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",paddingAngle:5,dataKey:"value",label:({name:j,value:S})=>`${j} (${S.toFixed(1)}%)`,children:a.map((j,S)=>o.jsx(Zh,{fill:V5[S%V5.length]},`cell-${S}`))}),o.jsx(Kn,{formatter:j=>[`${Number(j).toFixed(1)}%`,"Part"]})]})})})]})})]})]})]})};class ws{static async getDriverStatistics(e,r,n){try{let s=Y.from("v_driver_statistics_with_details").select("*").eq("driver_id",e);r&&n&&(s=s.eq("period_start",r).eq("period_end",n));const{data:i,error:a}=await s.order("calculated_at",{ascending:!1}).limit(1).single();return a?(console.error("Erreur lors de la récupération des statistiques livreur:",a),null):i}catch(s){return console.error("Erreur lors de la récupération des statistiques livreur:",s),null}}static async getRecentDriverStatistics(e){try{const{data:r,error:n}=await Y.from("v_recent_driver_statistics").select("*").eq("driver_id",e).limit(1).single();return n?(console.error("Erreur lors de la récupération des statistiques récentes:",n),null):r}catch(r){return console.error("Erreur lors de la récupération des statistiques récentes:",r),null}}static async getDriverPerformanceSummary(){try{const{data:e,error:r}=await Y.from("v_driver_performance_summary").select("*").order("routes_this_month",{ascending:!1});return r?(console.error("Erreur lors de la récupération du résumé des performances:",r),[]):e||[]}catch(e){return console.error("Erreur lors de la récupération du résumé des performances:",e),[]}}static async getAllDrivers(){try{const{data:e,error:r}=await Y.from("drivers").select("id, full_name, email, sector, vehicle_type").order("full_name");return r?(console.error("Erreur lors de la récupération des livreurs:",r),[]):e||[]}catch(e){return console.error("Erreur lors de la récupération des livreurs:",e),[]}}static async refreshDriverStatistics(e,r,n){try{const s=r||new Date(Date.now()-2592e6).toISOString().split("T")[0],i=n||new Date().toISOString().split("T")[0],{error:a}=await Y.rpc("calculate_driver_statistics",{p_driver_id:e,p_period_start:s,p_period_end:i});return a?(console.error("Erreur lors du recalcul des statistiques:",a),!1):!0}catch(s){return console.error("Erreur lors du recalcul des statistiques:",s),!1}}static async refreshAllDriverStatistics(e,r){try{const n=e||new Date(Date.now()-2592e6).toISOString().split("T")[0],s=r||new Date().toISOString().split("T")[0],{error:i}=await Y.rpc("refresh_all_driver_statistics",{p_period_start:n,p_period_end:s});return i?(console.error("Erreur lors du recalcul de toutes les statistiques:",i),!1):!0}catch(n){return console.error("Erreur lors du recalcul de toutes les statistiques:",n),!1}}static async getDriverComparisonData(e,r){try{const n=e||new Date(Date.now()-2592e6).toISOString().split("T")[0],s=r||new Date().toISOString().split("T")[0],{data:i,error:a}=await Y.rpc("get_driver_comparison_data",{p_period_start:n,p_period_end:s});return a?(console.error("Erreur lors de la récupération des données de comparaison:",a),[]):i||[]}catch(n){return console.error("Erreur lors de la récupération des données de comparaison:",n),[]}}static async getAllClientsByDrivers(){try{const{data:e,error:r}=await Y.rpc("get_all_clients_by_drivers");return r?(console.error("Erreur lors de la récupération de tous les clients:",r),[]):(console.log("✅ getAllClientsByDrivers - Données récupérées:",e?.length||0,"clients"),e||[])}catch(e){return console.error("Erreur lors de la récupération de tous les clients:",e),[]}}static async getGlobalDriverStatistics(e,r){try{const n=e||new Date(Date.now()-2592e6).toISOString().split("T")[0],s=r||new Date().toISOString().split("T")[0],{data:i,error:a}=await Y.rpc("get_global_driver_statistics",{period_start_param:n,period_end_param:s});if(a)return console.error("Erreur lors de la récupération des statistiques globales:",a),null;if(console.log("✅ getGlobalDriverStatistics - Données récupérées:",i?"OK":"NULL"),!i)return null;const l=i;return{period_start:n,period_end:s,is_global:!0,active_drivers_count:l.active_drivers_count,total_working_days:l.total_working_days,average_duration_hours:l.average_duration_hours,formatted_average_duration:l.formatted_average_duration,average_distance_per_day:l.average_distance_per_day,total_routes:l.total_routes,completed_routes:l.completed_routes,total_stops:l.total_stops,average_stops_per_day:l.average_stops_per_day,average_stops_per_route:l.average_stops_per_route,total_distance_km:l.total_distance_km,total_pickups:l.total_pickups,total_deliveries:l.total_deliveries,completed_pickups:l.completed_pickups,completed_deliveries:l.completed_deliveries,route_completion_rate:l.route_completion_rate,pickup_success_rate:l.pickup_success_rate,delivery_success_rate:l.delivery_success_rate,weekly_activity:l.weekly_activity,hourly_distribution:l.hourly_distribution,client_coverage:[],calculated_at:new Date().toISOString()}}catch(n){return console.error("Erreur lors de la récupération des statistiques globales:",n),null}}}const tje=(t={})=>{const{driverId:e,periodStart:r,periodEnd:n,autoRefresh:s=!1}=t,[i,a]=w.useState(null),[l,c]=w.useState([]),[d,f]=w.useState([]),[p,m]=w.useState([]),[g,y]=w.useState(!0),[b,x]=w.useState(null),j=w.useCallback(async()=>{try{y(!0),x(null);const[E,N,P]=await Promise.all([ws.getAllDrivers(),ws.getDriverPerformanceSummary(),ws.getDriverComparisonData(r,n)]);if(c(E),f(N),m(P),e){let O;r&&n?O=await ws.getDriverStatistics(e,r,n):O=await ws.getRecentDriverStatistics(e),a(O)}else{console.log("🔍 Mode global - récupération des données...");const[O,L]=await Promise.all([ws.getGlobalDriverStatistics(r,n),ws.getAllClientsByDrivers()]);console.log("🔍 Données récupérées:",{globalStats:O?"OK":"NULL",allClientsCount:L.length,allClientsFirst3:L.slice(0,3)});const A=O?{...O,client_coverage:L}:{is_global:!0,client_coverage:L,period_start:r||new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),period_end:n||new Date().toISOString().slice(0,10),total_working_days:30,average_duration_hours:0,formatted_average_duration:"0h 00min",average_distance_per_day:0,total_routes:0,completed_routes:0,total_stops:0,average_stops_per_day:0,average_stops_per_route:0,total_distance_km:0,total_pickups:0,total_deliveries:0,completed_pickups:0,completed_deliveries:0,route_completion_rate:0,pickup_success_rate:0,delivery_success_rate:0,weekly_activity:[{day:"Lun",hours:0},{day:"Mar",hours:0},{day:"Mer",hours:0},{day:"Jeu",hours:0},{day:"Ven",hours:0}],hourly_distribution:[{day:"Dim",deliveries:0,pickups:0},{day:"Lun",deliveries:0,pickups:0},{day:"Mar",deliveries:0,pickups:0},{day:"Mer",deliveries:0,pickups:0},{day:"Jeu",deliveries:0,pickups:0},{day:"Ven",deliveries:0,pickups:0},{day:"Sam",deliveries:0,pickups:0}],calculated_at:new Date().toISOString()};console.log("🔄 Stats finales créées avec client_coverage:",A.client_coverage.length),console.log("🔍 Premier client:",A.client_coverage[0]),a(A)}}catch(E){console.error("Erreur lors du chargement des statistiques livreurs:",E),x("Erreur lors du chargement des données")}finally{y(!1)}},[e,r,n]),S=w.useCallback(async()=>{if(e)try{if(y(!0),x(null),await ws.refreshDriverStatistics(e,r,n)){let N;r&&n?N=await ws.getDriverStatistics(e,r,n):N=await ws.getRecentDriverStatistics(e),a(N);const P=await ws.getDriverPerformanceSummary();f(P)}else x("Erreur lors du recalcul des statistiques")}catch(E){console.error("Erreur lors du rafraîchissement des statistiques:",E),x("Erreur lors du rafraîchissement des données")}finally{y(!1)}},[e,r,n]),C=w.useCallback(async()=>{try{y(!0),x(null),await ws.refreshAllDriverStatistics(r,n)?await j():x("Erreur lors du recalcul de toutes les statistiques")}catch(E){console.error("Erreur lors du rafraîchissement de toutes les statistiques:",E),x("Erreur lors du rafraîchissement des données")}finally{y(!1)}},[j,r,n]);return w.useEffect(()=>{j()},[j]),w.useEffect(()=>{if(!s)return;const E=setInterval(()=>{e?S():j()},300*1e3);return()=>clearInterval(E)},[s,e,S,j]),{statistics:i,allDrivers:l,performanceSummary:d,comparisonData:p,loading:g,error:b,refreshStatistics:S,refreshAllStatistics:C}},rje=[],nje=()=>{const[t,e]=w.useState(null),[r,n]=w.useState({start:new Date(Date.now()-720*60*60*1e3).toISOString().slice(0,10),end:new Date().toISOString().slice(0,10)}),{isLoaded:s}=Zv({googleMapsApiKey:"AIzaSyCu30a3EW9XpAmlucgPlh2D9hVLg3lUHd0",libraries:rje}),{statistics:i,allDrivers:a,comparisonData:l,loading:c,error:d,refreshStatistics:f,refreshAllStatistics:p}=tje({driverId:t||void 0,periodStart:r.start,periodEnd:r.end}),g=i?{averageDuration:i.formatted_average_duration,averageDistance:i.is_global?`${Math.round(i.total_distance_km)} km`:`${Math.round(i.average_distance_per_day)} km`,averageStartTime:"08:00",averageEndTime:i.average_duration_hours>0?new Date(new Date("2000-01-01 08:00:00").getTime()+i.average_duration_hours*60*60*1e3).toTimeString().slice(0,5):"--:--",averageStopsPerDay:(i.is_global,Math.round(i.total_stops/Math.max(i.total_working_days,1))),averageStopsPerWeek:(i.is_global,Math.round(i.total_stops/Math.max(i.total_working_days,1)*7)),totalDeliveries:i.completed_deliveries,totalPickups:i.completed_pickups}:{averageDuration:"0h 00min",averageDistance:"0 km",averageStartTime:"--:--",averageEndTime:"--:--",averageStopsPerDay:0,averageStopsPerWeek:0},y=i?.hourly_distribution||[{day:"Lun",deliveries:0,pickups:0},{day:"Mar",deliveries:0,pickups:0},{day:"Mer",deliveries:0,pickups:0},{day:"Jeu",deliveries:0,pickups:0},{day:"Ven",deliveries:0,pickups:0},{day:"Sam",deliveries:0,pickups:0},{day:"Dim",deliveries:0,pickups:0}],b=w.useMemo(()=>{const E=i?.weekly_activity||[{day:"Lun",hours:0},{day:"Mar",hours:0},{day:"Mer",hours:0},{day:"Jeu",hours:0},{day:"Ven",hours:0}];return i?.is_global?E.map(N=>({day:N.day,hours:N.hours,average:void 0})):E.map(N=>{const P=l.find(O=>O.day===N.day);return{day:N.day,hours:N.hours,average:P?.average_hours||0}})},[i,l]),x=i?.client_coverage||[];console.log("🗺️ Driver Statistics Component - Debug:",{selectedDriver:t,statisticsExists:!!i,isGlobal:i?.is_global,clientCoverageLength:i?.client_coverage?.length||0,clientsDataLength:x.length,clientsDataFirst3:x.slice(0,3)});const j=w.useMemo(()=>{const E=["#E11D48","#7C3AED","#059669","#DC2626","#1D4ED8","#B45309","#BE185D","#0891B2"],N=Array.from(new Set(x.map(O=>O.driver_id).filter(O=>O))),P={};return N.forEach((O,L)=>{P[O]=E[L%E.length]}),P},[x]),S=E=>`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`
      <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg">
        <circle cx="10" cy="10" r="8" fill="${E}" stroke="white" stroke-width="2"/>
      </svg>
    `)}`,C=async()=>{t?await f():await p()};return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t?"Statistiques livreur":"Statistiques globales"}),o.jsx("p",{className:"text-gray-500 mt-1",children:t?"Analysez les performances d'un livreur spécifique":`Analysez les performances de tous les livreurs${i?.active_drivers_count?` (${i.active_drivers_count} actifs)`:""}`})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("select",{className:"h-10 rounded-lg border border-gray-300 bg-white px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",value:t||"",onChange:E=>e(E.target.value||null),disabled:c,children:[o.jsx("option",{value:"",children:"Sélectionner un livreur"}),a.map(E=>o.jsxs("option",{value:E.id,children:[E.full_name," - ",E.sector]},E.id))]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qe,{type:"date",value:r.start,onChange:E=>n({...r,start:E.target.value}),className:"w-40",disabled:c}),o.jsx("span",{className:"text-gray-500",children:"à"}),o.jsx(Qe,{type:"date",value:r.end,onChange:E=>n({...r,end:E.target.value}),className:"w-40",disabled:c})]}),o.jsxs(ve,{onClick:C,disabled:c,className:"flex items-center gap-2",children:[o.jsx(ff,{className:`h-4 w-4 ${c?"animate-spin":""}`}),"Actualiser"]})]}),d&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsx("p",{className:"text-red-700 text-sm",children:d})}),c&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-blue-700 text-sm flex items-center gap-2",children:[o.jsx(ff,{className:"h-4 w-4 animate-spin"}),"Chargement des statistiques..."]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-primary-600 mb-2",children:[o.jsx(MF,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Durée moyenne"})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:g.averageDuration}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Par tournée"})]}),o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-primary-600 mb-2",children:[o.jsx(hl,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:i?.is_global?"Distance totale":"Distance moyenne"})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:g.averageDistance}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:i?.is_global?"Tous livreurs":"Par jour"})]}),o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-primary-600 mb-2",children:[o.jsx(bt,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Horaires moyens"})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:g.averageStartTime}),o.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Début ",g.averageStartTime," - Fin ",g.averageEndTime]})]}),o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-primary-600 mb-2",children:[o.jsx(it,{className:"h-5 w-5"}),o.jsx("span",{className:"font-medium",children:"Points visités"})]}),o.jsx("div",{className:"text-2xl font-bold text-gray-900",children:g.averageStopsPerDay}),o.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[g.averageStopsPerWeek," par semaine"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx(fo,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-medium",children:"Activité hebdomadaire"})]}),o.jsx("div",{className:"h-[300px]",children:o.jsx(Ig,{width:"100%",height:"100%",children:o.jsxs(Y_e,{data:y,children:[o.jsx(wv,{strokeDasharray:"3 3"}),o.jsx(bo,{dataKey:"day"}),o.jsx(wo,{}),o.jsx(Kn,{}),o.jsx(ii,{dataKey:"deliveries",name:"Livraisons",fill:"#1A5F7A"}),o.jsx(ii,{dataKey:"pickups",name:"Récupérations",fill:"#FD841F"})]})})})]}),o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx(bt,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-medium",children:i?.is_global?"Heures de travail moyennes":"Heures de travail par jour"}),t&&!i?.is_global&&o.jsxs("div",{className:"flex items-center gap-4 ml-auto text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-0.5 bg-blue-600"}),o.jsx("span",{children:"Ce livreur"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-0.5 bg-orange-500"}),o.jsx("span",{children:"Moyenne générale"})]})]})]}),o.jsx("div",{className:"h-[300px]",children:o.jsx(Ig,{width:"100%",height:"100%",children:o.jsxs(X_e,{data:b,children:[o.jsx(wv,{strokeDasharray:"3 3"}),o.jsx(bo,{dataKey:"day"}),o.jsx(wo,{}),o.jsx(Kn,{formatter:(E,N)=>N==="hours"?[`${E}h`,"Heures travaillées"]:N==="average"?[`${E}h`,"Moyenne générale"]:[E,N]}),o.jsx(fa,{type:"monotone",dataKey:"hours",name:"hours",stroke:"#1A5F7A",strokeWidth:3,dot:{fill:"#1A5F7A",strokeWidth:2,r:5}}),!i?.is_global&&o.jsx(fa,{type:"monotone",dataKey:"average",name:"average",stroke:"#FD841F",strokeWidth:3,dot:{fill:"#FD841F",strokeWidth:2,r:4}})]})})})]})]}),o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx(Hv,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-medium",children:t?"Clients assignés":"Tous les clients par livreur"}),x.length>0&&o.jsxs("span",{className:"text-sm text-gray-500",children:["(",x.length," clients",!t&&Object.keys(j).length>0&&` - ${Object.keys(j).length} livreurs`,")"]})]}),s?o.jsx("div",{className:"h-[400px] rounded-xl overflow-hidden",children:o.jsx(IE,{mapContainerClassName:"w-full h-full",options:{styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#6B7280"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#E0F2FE"}]}]},onLoad:E=>{if(console.log("🗺️ Google Map onLoad - clientsData.length:",x.length),x.length>0){const N=new google.maps.LatLngBounds;x.forEach(P=>{N.extend({lat:P.lat,lng:P.lng})}),console.log("🗺️ Setting bounds for",x.length,"clients"),E.fitBounds(N),E.panToBounds(N,{top:50,right:50,bottom:50,left:50})}else console.log("🗺️ No clients - using default center"),E.setCenter({lat:43.2965,lng:5.3698}),E.setZoom(10)},children:x.map((E,N)=>{const P=t?E.type==="laboratory"?"#059669":"#1D4ED8":E.driver_id&&j[E.driver_id]||"#6B7280";return N<3&&console.log(`🎯 Marqueur ${N}:`,{name:E.name,lat:E.lat,lng:E.lng,type:E.type,color:P,driverId:E.driver_id,driverName:E.driver_name}),o.jsx(rS,{position:{lat:E.lat,lng:E.lng},title:t?`${E.name} (${E.type==="dentist"?"Dentiste":"Laboratoire"})`:`${E.name} - ${E.driver_name} (${E.type==="dentist"?"Dentiste":"Laboratoire"})`,icon:{url:S(P),scaledSize:new google.maps.Size(20,20),anchor:new google.maps.Point(10,10)},onLoad:()=>console.log(`✅ Marqueur ${N} chargé pour ${E.name}`)},`marker-${N}-${E.driver_id}`)})})}):o.jsx("div",{className:"h-[400px] flex items-center justify-center bg-gray-100 rounded-xl",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}),!t&&x.length>0&&Object.keys(j).length>0&&o.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Livreurs :"}),o.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(j).map(([E,N])=>{const P=x.find(O=>O.driver_id===E);return P?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:N}}),o.jsxs("span",{className:"text-xs text-gray-600",children:[P.driver_name," (",P.driver_sector,")"]})]},E):null})}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-current"}),o.jsx("span",{children:"Dentistes"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 bg-current"}),o.jsx("span",{children:"Laboratoires"})]})]})]})]})]})},sje=async t=>{try{const e=t||new Date().toISOString().split("T")[0];console.log(`🔍 Récupération des départs depot pour le ${e}`);const{data:r,error:n}=await Y.from("driver_route_stops").select(`
        id,
        route_id,
        stop_type
      `).eq("stop_type","depot_pickup");if(n)throw console.error("❌ Erreur lors de la récupération des stops:",n),n;if(!r||r.length===0)return console.log("📭 Aucun stop depot_pickup trouvé"),[];const s=r.map(R=>R.id),{data:i,error:a}=await Y.from("driver_route_shipments").select(`
        id,
        shipment_ref,
        laboratory_id,
        shipment_type,
        pickup_status,
        delivery_status,
        pickup_time,
        delivery_time,
        route_id,
        pickup_stop_id,
        laboratory_client_id
      `).in("pickup_stop_id",s);if(a)throw console.error("❌ Erreur lors de la récupération des shipments:",a),a;if(!i||i.length===0)return console.log("📭 Aucun shipment trouvé pour les stops depot"),[];const l=[...new Set(i.map(R=>R.route_id))],{data:c,error:d}=await Y.from("driver_routes").select(`
        id,
        date,
        status,
        driver_id
      `).in("id",l).eq("date",e).in("status",["validated","in_progress","optimized"]);if(d)throw console.error("❌ Erreur lors de la récupération des routes:",d),d;if(!c||c.length===0)return console.log("📭 Aucune route trouvée pour cette date"),[];const f=c.map(R=>R.id),p=i.filter(R=>f.includes(R.route_id)),m=[...new Set(p.map(R=>R.laboratory_id))],{data:g,error:y}=await Y.from("laboratories").select("id, name").in("id",m);if(y)throw console.error("❌ Erreur lors de la récupération des laboratoires:",y),y;const b=[...new Set(p.map(R=>R.laboratory_client_id).filter(Boolean))],{data:x,error:j}=await Y.from("laboratory_clients").select("id, name").in("id",b);if(j)throw console.error("❌ Erreur lors de la récupération des clients:",j),j;const S=[...new Set(c.map(R=>R.driver_id))],{data:C,error:E}=await Y.from("drivers").select("id, full_name").in("id",S);if(E)throw console.error("❌ Erreur lors de la récupération des drivers:",E),E;const N=new Map(g?.map(R=>[R.id,R])||[]),P=new Map(x?.map(R=>[R.id,R])||[]),O=new Map(C?.map(R=>[R.id,R])||[]),L=new Map(c.map(R=>[R.id,R])),A=p.map(R=>{const M=L.get(R.route_id),D=N.get(R.laboratory_id),B=P.get(R.laboratory_client_id),F=O.get(M?.driver_id);return{id:R.id,shipment_ref:R.shipment_ref,laboratory_name:D?.name||"Laboratoire inconnu",laboratory_id:R.laboratory_id,client_name:B?.name||"Client inconnu",client_id:R.laboratory_client_id||"",shipment_type:R.shipment_type,pickup_status:R.pickup_status,delivery_status:R.delivery_status,pickup_time:R.pickup_time,delivery_time:R.delivery_time,route_date:M?.date||e,driver_name:F?.full_name||"Livreur inconnu",depot_status:R.pickup_status,depot_interaction:"pickup"}});return console.log(`✅ ${A.length} départs récupérés`),A}catch(e){throw console.error("❌ Erreur dans getDepotDepartures:",e),e}},ije=async t=>{try{if(t)return await l1(t);const e=new Date().toISOString().split("T")[0];console.log(`🔍 Tentative récupération des arrivées pour aujourd'hui: ${e}`);const r=await l1(e);if(r.length>0)return console.log(`✅ ${r.length} arrivées trouvées pour aujourd'hui`),r;const n=new Date;n.setDate(n.getDate()-1);const s=n.toISOString().split("T")[0];console.log(`🔍 Pas d'arrivées aujourd'hui, tentative pour la veille: ${s}`);const i=await l1(s);return i.length>0?console.log(`✅ ${i.length} arrivées trouvées pour la veille`):console.log("📭 Aucune arrivée trouvée ni aujourd'hui ni la veille"),i}catch(e){throw console.error("❌ Erreur dans getDepotArrivals:",e),e}},l1=async t=>{try{console.log(`🔍 Récupération des arrivées depot pour le ${t}`);const{data:e,error:r}=await Y.from("driver_route_stops").select(`
        id,
        route_id,
        stop_type
      `).eq("stop_type","depot_dropoff");if(r)throw console.error("❌ Erreur lors de la récupération des stops:",r),r;if(!e||e.length===0)return console.log("📭 Aucun stop depot_dropoff trouvé"),[];const n=e.map(A=>A.id),{data:s,error:i}=await Y.from("driver_route_shipments").select(`
        id,
        shipment_ref,
        laboratory_id,
        shipment_type,
        pickup_status,
        delivery_status,
        pickup_time,
        delivery_time,
        route_id,
        delivery_stop_id,
        laboratory_client_id
      `).in("delivery_stop_id",n);if(i)throw console.error("❌ Erreur lors de la récupération des shipments:",i),i;if(!s||s.length===0)return console.log("📭 Aucun shipment trouvé pour les stops depot"),[];const a=[...new Set(s.map(A=>A.route_id))],{data:l,error:c}=await Y.from("driver_routes").select(`
        id,
        date,
        status,
        driver_id
      `).in("id",a).eq("date",t).in("status",["validated","in_progress","completed","optimized"]);if(c)throw console.error("❌ Erreur lors de la récupération des routes:",c),c;if(!l||l.length===0)return console.log("📭 Aucune route trouvée pour cette date"),[];const d=l.map(A=>A.id),f=s.filter(A=>d.includes(A.route_id)),p=[...new Set(f.map(A=>A.laboratory_id))],{data:m,error:g}=await Y.from("laboratories").select("id, name").in("id",p);if(g)throw console.error("❌ Erreur lors de la récupération des laboratoires:",g),g;const y=[...new Set(f.map(A=>A.laboratory_client_id).filter(Boolean))],{data:b,error:x}=await Y.from("laboratory_clients").select("id, name").in("id",y);if(x)throw console.error("❌ Erreur lors de la récupération des clients:",x),x;const j=[...new Set(l.map(A=>A.driver_id))],{data:S,error:C}=await Y.from("drivers").select("id, full_name").in("id",j);if(C)throw console.error("❌ Erreur lors de la récupération des drivers:",C),C;const E=new Map(m?.map(A=>[A.id,A])||[]),N=new Map(b?.map(A=>[A.id,A])||[]),P=new Map(S?.map(A=>[A.id,A])||[]),O=new Map(l.map(A=>[A.id,A])),L=f.map(A=>{const R=O.get(A.route_id),M=E.get(A.laboratory_id),D=N.get(A.laboratory_client_id),B=P.get(R?.driver_id);return{id:A.id,shipment_ref:A.shipment_ref,laboratory_name:M?.name||"Laboratoire inconnu",laboratory_id:A.laboratory_id,client_name:D?.name||"Client inconnu",client_id:A.laboratory_client_id||"",shipment_type:A.shipment_type,pickup_status:A.pickup_status,delivery_status:A.delivery_status,pickup_time:A.pickup_time,delivery_time:A.delivery_time,route_date:R?.date||t,driver_name:B?.full_name||"Livreur inconnu",depot_status:A.delivery_status,depot_interaction:"dropoff"}});return console.log(`✅ ${L.length} arrivées récupérées pour le ${t}`),L}catch(e){throw console.error(`❌ Erreur lors de la récupération des arrivées pour le ${t}:`,e),e}},W5=t=>{const e=t.reduce((s,i)=>{const a=i.laboratory_name;return s[a]||(s[a]=[]),s[a].push(i),s},{}),r=Object.keys(e).sort(),n={};return r.forEach(s=>{n[s]=e[s]}),n},aje=(t,e)=>{const r=i=>{const a=i.length,l=i.filter(f=>f.depot_status==="completed").length,c=i.filter(f=>f.depot_status==="pending").length,d=i.filter(f=>f.depot_status==="failed").length;return{total:a,completed:l,pending:c,failed:d}},n=r(t),s=r(e);return{departures:n,arrivals:s,total:{total:n.total+s.total,completed:n.completed+s.completed,pending:n.pending+s.pending,failed:n.failed+s.failed}}},oje=as((t,e)=>({departures:[],arrivals:[],isLoading:!1,error:null,departuresByLab:{},arrivalsByLab:{},statistics:{departures:{total:0,completed:0,pending:0,failed:0},arrivals:{total:0,completed:0,pending:0,failed:0},total:{total:0,completed:0,pending:0,failed:0}},searchQuery:"",selectedLaboratory:null,fetchData:async(r,n)=>{t({isLoading:!0,error:null});try{console.log("🔍 Chargement des données Sac Marseille...");const[s,i]=await Promise.all([sje(r),ije(n)]),a=W5(s),l=W5(i),c=aje(s,i);t({departures:s,arrivals:i,departuresByLab:a,arrivalsByLab:l,statistics:c,isLoading:!1}),console.log(`✅ Données chargées: ${s.length} départs, ${i.length} arrivées`)}catch(s){console.error("❌ Erreur lors du chargement des données:",s),t({error:"Erreur lors du chargement des données du dépôt",isLoading:!1})}},setSearchQuery:r=>{t({searchQuery:r})},setSelectedLaboratory:r=>{t({selectedLaboratory:r})},getFilteredDepartures:()=>{const{departures:r,searchQuery:n,selectedLaboratory:s}=e();return r.filter(i=>{if(n){const a=n.toLowerCase(),l=i.shipment_ref.toLowerCase().includes(a),c=i.laboratory_name.toLowerCase().includes(a);if(!l&&!c)return!1}return!(s&&i.laboratory_id!==s)})},getFilteredArrivals:()=>{const{arrivals:r,searchQuery:n,selectedLaboratory:s}=e();return r.filter(i=>{if(n){const a=n.toLowerCase(),l=i.shipment_ref.toLowerCase().includes(a),c=i.laboratory_name.toLowerCase().includes(a);if(!l&&!c)return!1}return!(s&&i.laboratory_id!==s)})},getShipmentStatus:r=>{const n=r.depot_status;return n==="completed"?"green":n==="failed"?"red":"orange"}})),lje=()=>{const{departures:t,arrivals:e,departuresByLab:r,arrivalsByLab:n,statistics:s,isLoading:i,error:a,searchQuery:l,fetchData:c,setSearchQuery:d,getFilteredDepartures:f,getFilteredArrivals:p,getShipmentStatus:m}=oje(),[g,y]=w.useState("arrivals");w.useEffect(()=>{c()},[c]),g==="departures"?f():p();const b=g==="departures"?r:n,x=s[g],j=N=>{switch(N){case"green":return o.jsx(er,{className:"h-4 w-4 text-green-600"});case"red":return o.jsx(es,{className:"h-4 w-4 text-red-600"});default:return o.jsx(sr,{className:"h-4 w-4 text-orange-600"})}},S=N=>{switch(N){case"green":return"bg-green-100 text-green-800";case"red":return"bg-red-100 text-red-800";default:return"bg-orange-100 text-orange-800"}},C={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},E={hidden:{y:20,opacity:0},show:{y:0,opacity:1}};return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sac Marseille"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Gestion des départs et arrivées au dépôt central"})]}),a&&o.jsx(_e,{className:"p-4 border-red-200 bg-red-50",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"h-5 w-5 text-red-500"}),o.jsx("span",{className:"text-red-700",children:a})]})}),o.jsx("div",{className:"border-b border-gray-200",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsxs("button",{className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${g==="arrivals"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>y("arrivals"),children:["Arrivées (",s.arrivals.total,")"]}),o.jsxs("button",{className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${g==="departures"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>y("departures"),children:["Départs (",s.departures.total,")"]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsx(_e,{className:"p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(ut,{className:"h-8 w-8 text-gray-400"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:x.total})]})})]})}),o.jsx(_e,{className:"p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(er,{className:"h-8 w-8 text-green-400"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Terminé"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:x.completed})]})})]})}),o.jsx(_e,{className:"p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(sr,{className:"h-8 w-8 text-orange-400"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"En attente"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:x.pending})]})})]})}),o.jsx(_e,{className:"p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(es,{className:"h-8 w-8 text-red-400"})}),o.jsx("div",{className:"ml-5 w-0 flex-1",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Échoué"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900",children:x.failed})]})})]})})]}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:o.jsx("div",{className:"flex-1",children:o.jsx(Qe,{placeholder:"Rechercher par référence ou laboratoire...",value:l,onChange:N=>d(N.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"})})})}),i?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx(is,{className:"h-8 w-8 animate-spin text-primary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:"Chargement des données..."})]})}):Object.keys(b).length===0?o.jsx(_e,{className:"p-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ut,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Aucun ",g==="departures"?"départ":"arrivée"," trouvé"]}),o.jsx("p",{className:"text-gray-500",children:l?"Aucun colis ne correspond à votre recherche":`Aucun ${g==="departures"?"départ prévu pour aujourd'hui":"arrivée de la veille"}`})]})}):o.jsx(Ae.div,{variants:C,initial:"hidden",animate:"show",className:"space-y-6",children:Object.entries(b).map(([N,P])=>o.jsx(Ae.div,{variants:E,children:o.jsxs(_e,{children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Dt,{className:"h-5 w-5 text-primary-600"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:N}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:[P.length," ",(P.length>1,"colis")]})]})})}),o.jsx("div",{className:"divide-y divide-gray-200",children:P.map(O=>{const L=m(O);return o.jsx("div",{className:"px-6 py-5 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start gap-4 min-w-0 flex-1",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:j(L)}),o.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-base font-semibold text-gray-900 truncate",children:O.client_name}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:O.shipment_type==="client_delivery"?"Livraison":"Récupération"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center",children:o.jsx(Kr,{className:"h-3 w-3 text-primary-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Livreur:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900 ml-1",children:O.driver_name})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx(ut,{className:"h-3 w-3 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Type:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900 ml-1",children:O.shipment_type==="client_delivery"?"Livraison":"Récupération"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx(fo,{className:"h-3 w-3 text-green-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Date:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900 ml-1",children:new Date(O.route_date).toLocaleDateString("fr-FR")})]})]})]})]})]}),o.jsx("div",{className:"ml-4 flex-shrink-0",children:o.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${S(L)}`,children:L==="green"?"Terminé":L==="red"?"Échoué":"En attente"})})]})},O.id)})})]})},N))})]})},WC=async t=>{try{const{data:e,error:r}=await Y.from("laboratory_clients").select("*, locations(*,location_photos(*))").eq("laboratory_id",t).order("created_at",{ascending:!1});if(r)throw r;return e}catch(e){throw console.error(`Erreur lors de la récupération des clients du laboratoire ${t}:`,e),e}},dq=async t=>{try{const{count:e,error:r}=await Y.from("laboratory_clients").select("*",{count:"exact",head:!0}).eq("laboratory_id",t);if(r)throw r;return e||0}catch(e){return console.error(`Erreur lors de la récupération du nombre de clients du laboratoire ${t}:`,e),0}},HC=async t=>{try{const{data:e,error:r}=await Y.from("laboratory_clients").select("*, locations(*,location_photos(*))").eq("id",t).single();if(r)throw console.error("❌ Erreur lors de la récupération du client:",r),r;return e}catch(e){throw console.error(`Erreur lors de la récupération du client ${t}:`,e),e}},fq=async t=>{try{let e="";t.client_type==="dentist"?e="dentist_client":t.client_type==="laboratory"?e="lab_client":e="depot";const r={formatted_address:t.formatted_address,place_id:t.place_id||"",latitude:t.latitude||0,longitude:t.longitude||0,delivery_instructions:t.delivery_instructions||"",type:e},{data:n,error:s}=await Y.from("locations").insert(r).select().single();if(s)throw s;const i={laboratory_id:t.laboratory_id,location_id:n.id,client_type:t.client_type,name:t.name,is_pickup_depot:t.is_pickup_depot||!1,is_return_depot:t.is_return_depot||!1,is_return_next_day:t.is_return_next_day||!1,depot_is_dentist:t.depot_is_dentist||!1,depot_is_lab:t.depot_is_lab||!1},{data:a,error:l}=await Y.from("laboratory_clients").insert(i).select().single();if(l)throw l;if(t.photos&&t.photos.length>0){const c=t.photos.map(p=>({location_id:n.id,photo_url:p.url,description:p.description||""})),{data:d,error:f}=await Y.from("location_photos").insert(c).select();if(f)throw console.error("❌ Erreur lors de l'insertion des photos:",f),f}return HC(a.id)}catch(e){throw console.error("Erreur lors de la création du client complet:",e),e}},cje=async(t,e)=>{try{const{data:r,error:n}=await Y.from("laboratory_clients").select("location_id").eq("id",t).single();if(n)throw n;if(!r?.location_id)throw new Error(`Impossible de trouver la location associée au client ${t}`);const s=r.location_id,i={};if(e.name!==void 0&&(i.name=e.name),e.client_type!==void 0&&(i.client_type=e.client_type),e.is_pickup_depot!==void 0&&(i.is_pickup_depot=e.is_pickup_depot),e.is_return_depot!==void 0&&(i.is_return_depot=e.is_return_depot),e.is_return_next_day!==void 0&&(i.is_return_next_day=e.is_return_next_day),e.depot_is_dentist!==void 0&&(i.depot_is_dentist=e.depot_is_dentist),e.depot_is_lab!==void 0&&(i.depot_is_lab=e.depot_is_lab),Object.keys(i).length>0){const{error:l}=await Y.from("laboratory_clients").update(i).eq("id",t);if(l)throw l}const a={};if(e.delivery_instructions!==void 0&&(a.delivery_instructions=e.delivery_instructions),e.formatted_address!==void 0&&(a.formatted_address=e.formatted_address),e.place_id!==void 0&&(a.place_id=e.place_id),e.latitude!==void 0&&(a.latitude=e.latitude),e.longitude!==void 0&&(a.longitude=e.longitude),Object.keys(a).length>0){const{error:l}=await Y.from("locations").update(a).eq("id",s);if(l)throw l}if(e.photos!==void 0){const{data:l,error:c}=await Y.from("location_photos").select("*").eq("location_id",s);if(c)throw console.error("❌ Erreur lors de la récupération des photos existantes:",c),c;if(l&&l.length>0){const{error:d}=await Y.from("location_photos").delete().eq("location_id",s);if(d)throw console.error("❌ Erreur lors de la suppression des photos:",d),d}if(e.photos.length>0){const d=e.photos.map(m=>({location_id:s,photo_url:m.url,description:m.description||""})),{data:f,error:p}=await Y.from("location_photos").insert(d).select();if(p)throw console.error("❌ Erreur lors de l'insertion des nouvelles photos:",p),p}}return HC(t)}catch(r){throw console.error(`Erreur lors de la mise à jour complète du client ${t}:`,r),r}},hq=async(t,e)=>{try{const{data:r,error:n}=await Y.from("laboratory_clients").update({driver_id:e}).eq("id",t).select();if(n)throw n;return r[0]}catch(r){throw console.error(`Erreur lors de l'assignation du chauffeur au client ${t}:`,r),r}},pq=async t=>{try{const{data:e,error:r}=await Y.from("laboratory_clients").select("location_id").eq("id",t).single();if(r)throw r;if(!e?.location_id)throw new Error(`Impossible de trouver la location associée au client ${t}`);const n=e.location_id,{data:s,error:i}=await Y.from("laboratory_clients").select("id").eq("location_id",n).neq("id",t);if(i)throw i;const a=s&&s.length>0,{error:l}=await Y.from("laboratory_clients").delete().eq("id",t);if(l)throw l;if(a)console.log(`Location ${n} est encore utilisée par ${s.length} autre(s) client(s), conservation...`);else{console.log(`Location ${n} n'est plus utilisée par aucun client, suppression...`);const{error:c}=await Y.from("location_photos").delete().eq("location_id",n);c&&console.error("Erreur lors de la suppression des photos:",c);const{error:d}=await Y.from("locations").delete().eq("id",n);if(d)throw console.error("Erreur lors de la suppression de la location:",d),d}return!0}catch(e){throw console.error(`Erreur lors de la suppression du client ${t}:`,e),e}},uje=Object.freeze(Object.defineProperty({__proto__:null,assignDriverToClient:hq,createLaboratoryClientComplete:fq,deleteLaboratoryClient:pq,getLaboratoryClientById:HC,getLaboratoryClientCount:dq,getLaboratoryClients:WC,updateLaboratoryClientComplete:cje},Symbol.toStringTag,{value:"Module"})),mq=as((t,e)=>({laboratories:[],clients:[],selectedLaboratoryId:null,selectedLaboratory:void 0,isLoading:!1,error:null,fetchLaboratories:async()=>{t({isLoading:!0,error:null});try{const r=await MB(),n=await Promise.all(r.map(async a=>{try{const l=await dq(a.id);return{id:a.id,name:a.name,email:a.email,address:a.address||"",user_id:a.user_id,clientCount:l,depot_is_lab:a.depot_is_lab||!1,shared_pickup:a.shared_pickup||!1}}catch(l){return console.error(`Erreur lors du comptage des clients pour ${a.name}:`,l),{id:a.id,name:a.name,email:a.email,address:a.address||"",user_id:a.user_id,clientCount:0,depot_is_lab:a.depot_is_lab||!1,shared_pickup:a.shared_pickup||!1}}})),s=e().selectedLaboratoryId,i=s?n.find(a=>a.id===s):void 0;t({laboratories:n,selectedLaboratory:i,isLoading:!1})}catch(r){console.error("Erreur lors du chargement des laboratoires:",r),t({error:"Erreur lors du chargement des laboratoires",isLoading:!1})}},setSelectedLaboratoryId:r=>{const n=r?e().laboratories.find(s=>s.id===r):void 0;t({selectedLaboratoryId:r,selectedLaboratory:n,clients:[]}),r&&e().fetchClients(r)},fetchClients:async r=>{t({isLoading:!0,error:null});try{const n=await WC(r);console.log("📥 Données brutes de Supabase pour laboratoryId:",r),console.log("📥 clientsData:",n.map(a=>({id:a.id,name:a.name,depot_is_lab:a.depot_is_lab,depot_is_dentist:a.depot_is_dentist,is_pickup_depot:a.is_pickup_depot,is_return_depot:a.is_return_depot,is_return_next_day:a.is_return_next_day})));const s=n.filter(a=>a.locations).map(a=>({id:a.id,laboratoryId:a.laboratory_id,name:a.name||a.locations.formatted_address.split(",")[0],address:a.locations.formatted_address,type:a.client_type,instructions:a.locations.delivery_instructions||void 0,driverId:a.driver_id||null,depotActions:{delivery:!!a.is_pickup_depot,return:!!a.is_return_depot,nextDay:!!a.is_return_next_day,dentistInteraction:!!a.depot_is_dentist,labInteraction:!!a.depot_is_lab},photos:a.locations.location_photos?.map(l=>({url:l.photo_url,description:l.description||""}))||[],placeId:a.locations.place_id,latitude:a.locations.latitude,longitude:a.locations.longitude}));console.log("🔍 DEBUG fetchClients pour laboratoryId:",r),console.log("📊 Clients mappés:",s.map(a=>({id:a.id,name:a.name,depotActions:a.depotActions,depot_is_lab:a.depotActions.labInteraction})));const i=e().laboratories.find(a=>a.id===r);console.log("🎯 Flag laboratoire depot_is_lab:",i?.depot_is_lab),t({clients:s,isLoading:!1})}catch(n){console.error("Erreur lors du chargement des clients:",n),t({error:"Erreur lors du chargement des clients",isLoading:!1})}},addClient:async r=>{t({isLoading:!0,error:null});try{await fq({laboratory_id:r.laboratoryId,name:r.name,formatted_address:r.address,client_type:r.type,delivery_instructions:r.instructions,place_id:r.placeId,latitude:r.latitude,longitude:r.longitude,is_pickup_depot:!!r.depotActions?.delivery,is_return_depot:!!r.depotActions?.return,is_return_next_day:!!r.depotActions?.nextDay,depot_is_dentist:!!r.depotActions?.dentistInteraction,depot_is_lab:!!r.depotActions?.labInteraction,photos:r.photos||[]});const n=e().selectedLaboratoryId;n&&(await Promise.all([e().fetchClients(n),e().fetchLaboratories()]),await e().validateAndFixDepotLabMode(n)),t({isLoading:!1})}catch(n){throw console.error("Erreur lors de l'ajout du client:",n),t({error:"Erreur lors de l'ajout du client",isLoading:!1}),n}},updateClient:async(r,n)=>{t({isLoading:!0,error:null});try{const{updateLaboratoryClientComplete:s}=await Ci(async()=>{const{updateLaboratoryClientComplete:a}=await Promise.resolve().then(()=>uje);return{updateLaboratoryClientComplete:a}},void 0);await s(r,{name:n.name,client_type:n.type,is_pickup_depot:!!n.depotActions?.delivery,is_return_depot:!!n.depotActions?.return,is_return_next_day:!!n.depotActions?.nextDay,depot_is_dentist:!!n.depotActions?.dentistInteraction,depot_is_lab:!!n.depotActions?.labInteraction,delivery_instructions:n.instructions,formatted_address:n.address,place_id:n.placeId,latitude:n.latitude,longitude:n.longitude,photos:n.photos||[]});const i=e().selectedLaboratoryId;i&&await e().fetchClients(i),t({isLoading:!1})}catch(s){throw console.error("Erreur lors de la mise à jour du client:",s),t({error:"Erreur lors de la mise à jour du client",isLoading:!1}),s}},deleteClient:async r=>{t({isLoading:!0,error:null});try{await pq(r);const n=e().selectedLaboratoryId;n&&await Promise.all([e().fetchClients(n),e().fetchLaboratories()]),t({isLoading:!1})}catch(n){throw console.error("Erreur lors de la suppression du client:",n),t({error:"Erreur lors de la suppression du client",isLoading:!1}),n}},assignDriver:async(r,n)=>{t({isLoading:!0,error:null});try{await hq(r,n);const s=e().selectedLaboratoryId;s&&await e().fetchClients(s),t({isLoading:!1})}catch(s){throw console.error("Erreur lors de l'assignation du chauffeur:",s),t({error:"Erreur lors de l'assignation du chauffeur",isLoading:!1}),s}},toggleDepotAction:async(r,n)=>{const s=e().clients.find(a=>a.id===r);if(!s)return;const i={...s.depotActions,[n]:!s.depotActions[n]};await e().updateClient(r,{depotActions:i})},toggleDepotLabMode:async r=>{const n=e().laboratories.find(a=>a.id===r);if(!n){console.error("Laboratoire non trouvé:",r);return}const s=n.depot_is_lab,i=!s;console.log(`🔧 Toggle depot_is_lab pour ${n.name}: ${s} → ${i}`);try{await RB(r,i),t(l=>({laboratories:l.laboratories.map(c=>c.id===r?{...c,depot_is_lab:i}:c)}));const a=e().clients.filter(l=>l.laboratoryId===r);t(l=>({clients:l.clients.map(c=>c.laboratoryId===r?{...c,depotActions:{...c.depotActions,labInteraction:i,...i?{delivery:!1,return:!1,nextDay:!1,dentistInteraction:!1}:{}}}:c)}));for(const l of a){const c={...l.depotActions,labInteraction:i,...i?{delivery:!1,return:!1,nextDay:!1,dentistInteraction:!1}:{}};e().updateClient(l.id,{depotActions:c}).catch(d=>{console.error("Erreur lors de la mise à jour du client:",d)})}console.log(`✅ Mode depot_is_lab mis à jour avec succès pour ${n.name}`)}catch(a){console.error(`Erreur lors de la mise à jour du mode depot_is_lab pour ${n.name}:`,a)}},isDepotLabModeActive:r=>{const n=e().laboratories.find(i=>i.id===r),s=n?.depot_is_lab||!1;return console.log("🎪 isDepotLabModeActive appelé pour laboratoryId:",r),console.log("🎪 Laboratory found:",n?.name),console.log("🎪 depot_is_lab flag:",s),s},validateAndFixDepotLabMode:async r=>{const n=e().laboratories.find(a=>a.id===r);if(!n){console.error("🚨 validateAndFixDepotLabMode: Laboratoire non trouvé:",r);return}console.log(`🔍 Validation des règles métier pour ${n.name} (depot_is_lab: ${n.depot_is_lab})`);const s=e().clients.filter(a=>a.laboratoryId===r);if(s.length===0){console.log(`📝 Aucun client pour ${n.name}, validation terminée`);return}let i=[];if(n.depot_is_lab&&(i=s.filter(a=>!a.depotActions.labInteraction||a.depotActions.delivery||a.depotActions.return||a.depotActions.nextDay||a.depotActions.dentistInteraction)),i.length>0){console.log(`🔧 Correction de ${i.length} clients pour ${n.name}:`,i.map(a=>a.name)),t(a=>({clients:a.clients.map(l=>l.laboratoryId===r&&i.some(c=>c.id===l.id)?{...l,depotActions:{...l.depotActions,labInteraction:n.depot_is_lab,...n.depot_is_lab?{delivery:!1,return:!1,nextDay:!1,dentistInteraction:!1}:{}}}:l)}));for(const a of i){const l={...a.depotActions,labInteraction:n.depot_is_lab,...n.depot_is_lab?{delivery:!1,return:!1,nextDay:!1,dentistInteraction:!1}:{}};e().updateClient(a.id,{depotActions:l}).catch(c=>{console.error(`🚨 Erreur lors de la correction du client ${a.name}:`,c)})}console.log(`✅ Correction silencieuse terminée pour ${n.name}`)}else console.log(`✅ Tous les clients de ${n.name} respectent déjà les règles métier`)}})),H5=(t,e)=>({laboratoryId:e,name:t.name,address:t.address,type:t.type,instructions:t.instructions,placeId:t.placeId,latitude:t.latitude,longitude:t.longitude,photos:t.photos}),G5=()=>({name:"",address:"",type:"dentist",instructions:"",placeId:"",latitude:0,longitude:0,photos:[]}),dje=t=>({name:t.name,address:t.address,type:t.type,instructions:t.instructions||"",placeId:t.placeId||"",latitude:t.latitude||0,longitude:t.longitude||0,photos:t.photos||[]}),fje=(t,e,r,n)=>t.filter(s=>{const i=!e||s.laboratoryId===e;if(!r)return i;const a=r.toLowerCase(),l=s.name.toLowerCase().includes(a);let c=!1;if(s.driverId&&n){const d=n.find(f=>f.id===s.driverId);d&&(c=d.name.toLowerCase().includes(a))}return i&&(l||c)}).sort((s,i)=>{if(s.type!==i.type){if(s.type==="dentist"&&i.type==="laboratory")return-1;if(s.type==="laboratory"&&i.type==="dentist")return 1}return s.name.toLowerCase().localeCompare(i.name.toLowerCase())}),hje=t=>{const e=[];return t.name.trim()||e.push("Le nom du client est requis"),t.address.trim()||e.push("L'adresse est requise"),t.type||e.push("Le type de client est requis"),e},pje=t=>{switch(t){case"dentist":return"Dentiste";case"laboratory":return"Laboratoire";default:return"Inconnu"}},mje=()=>{const[t,e]=w.useState(G5()),[r,n]=w.useState(null);return{clientForm:t,editingClientId:r,isEditing:r!==null,updateForm:g=>{e(y=>({...y,...g}))},updateField:(g,y)=>{e(b=>({...b,[g]:y}))},addPhoto:g=>{e(y=>({...y,photos:[...y.photos,g]}))},removePhoto:g=>{e(y=>({...y,photos:y.photos.filter((b,x)=>x!==g)}))},updateAddress:(g,y)=>{e(b=>({...b,address:g,placeId:y?.placeId||"",latitude:y?.latLng?.lat||0,longitude:y?.latLng?.lng||0}))},resetForm:()=>{e(G5()),n(null)},populateFormForEdit:(g,y)=>{e(g),n(y)},validateForm:()=>{const g=hje(t);return{isValid:g.length===0,errors:g}},setClientForm:e,setEditingClientId:n}},gje=async(t,e,r,n)=>{try{let s=`
    SELECT 
        loc.id,
        loc.formatted_address,
        loc.place_id,
        loc.latitude,
        loc.longitude,
        loc.delivery_instructions,
        COALESCE(
            json_agg(
                DISTINCT jsonb_build_object(
                    'photo_url', lp.photo_url,
                    'description', COALESCE(lp.description, '')
                )
            ) FILTER (WHERE lp.id IS NOT NULL),
            '[]'::json
        ) as location_photos,
        COALESCE(
            json_agg(
                DISTINCT jsonb_build_object(
                    'id', lc.id,
                    'name', COALESCE(lc.name, ''),
                    'laboratory_id', lc.laboratory_id,
                    'laboratory_name', COALESCE(lab.name, '')
                )
            ) FILTER (WHERE lc.id IS NOT NULL),
            '[]'::json
        ) as laboratory_clients
    FROM locations loc
    LEFT JOIN location_photos lp ON loc.id = lp.location_id
    LEFT JOIN laboratory_clients lc ON loc.id = lc.location_id
    LEFT JOIN laboratories lab ON lc.laboratory_id = lab.id
    WHERE `;const i=[];let a=0;if(e)s+=`loc.place_id = $${++a}`,i.push(e);else if(r&&n)s+=`
        loc.latitude BETWEEN $${++a} AND $${++a}
        AND loc.longitude BETWEEN $${++a} AND $${++a}
      `,i.push(r-1e-4,r+1e-4,n-1e-4,n+1e-4);else{const c=t.toLowerCase().split(",")[0]?.trim();if(c)s+=`LOWER(loc.formatted_address) LIKE $${++a}`,i.push(`%${c}%`);else return[]}return s+=`
    AND lc.id IS NOT NULL  -- Seulement les locations qui ont des clients
    GROUP BY loc.id, loc.formatted_address, loc.place_id, loc.latitude, loc.longitude, loc.delivery_instructions
    LIMIT 5`,await K5(t,e,r,n)}catch(s){return console.error("Erreur lors de la recherche de locations similaires:",s),await K5(t,e,r,n)}},K5=async(t,e,r,n)=>{try{let s=Y.from("locations").select(`
        id,
        formatted_address,
        place_id,
        latitude,
        longitude,
        delivery_instructions,
        location_photos(
          photo_url,
          description
        ),
        laboratory_clients(
          id,
          name,
          laboratory_id,
          laboratories(
            id,
            name
          )
        )
      `);if(e)s=s.eq("place_id",e);else if(r&&n)s=s.gte("latitude",r-1e-4).lte("latitude",r+1e-4).gte("longitude",n-1e-4).lte("longitude",n+1e-4);else{const d=t.toLowerCase().split(",")[0]?.trim();d&&(s=s.ilike("formatted_address",`%${d}%`))}const{data:i,error:a}=await s;return a?(console.error("Erreur lors de la recherche de locations similaires (fallback):",a),[]):!i||i.length===0?[]:i.filter(c=>c.laboratory_clients&&c.laboratory_clients.length>0).map(c=>({locationId:c.id,address:c.formatted_address,placeId:c.place_id||"",latitude:c.latitude,longitude:c.longitude,deliveryInstructions:c.delivery_instructions||"",photos:c.location_photos?.map(d=>({url:d.photo_url,description:d.description||""}))||[],linkedClients:c.laboratory_clients?.map(d=>({clientId:d.id,clientName:d.name||"",laboratoryId:d.laboratory_id,laboratoryName:d.laboratories?.name||"Laboratoire inconnu"}))||[]}))}catch(s){return console.error("Erreur lors de la recherche fallback de locations similaires:",s),[]}},vje=async(t,e,r,n,s=!1,i=!1,a=!1,l=!1,c=!1)=>{try{const{data:d,error:f}=await Y.from("laboratory_clients").insert({laboratory_id:t,location_id:e,name:r,client_type:n,is_pickup_depot:s,is_return_depot:i,is_return_next_day:a,depot_is_dentist:l,depot_is_lab:c}).select(`
        *,
        locations(
          *,
          location_photos(*)
        )
      `).single();if(f)throw f;return d}catch(d){throw console.error("Erreur lors de la création du client avec location existante:",d),d}},yje=({onDuplicateFound:t,onNoDuplicateFound:e,onClientCreated:r})=>{const[n,s]=w.useState([]),[i,a]=w.useState(!1),l=async g=>{if(!g.address)return!1;a(!0);try{const y=await gje(g.address,g.placeId,g.latitude,g.longitude);return y.length>0?(s(y),t(y),!0):(e(),!1)}catch(y){return console.error("Erreur lors de la vérification des doublons:",y),e(),!1}finally{a(!1)}},c=async(g,y,b,x)=>{try{await vje(g,y.locationId,b,x,!1,!1,!1,!1,!1),r(),d()}catch(j){throw console.error("Erreur lors de la création du client avec location existante:",j),j}},d=()=>{s([]),a(!1)},f=()=>n.length>0?n[0]:null,p=n.length>0;return{state:{existingLocations:n,isCheckingDuplicates:i},existingLocations:n,isCheckingDuplicates:i,hasExistingLocations:p,checkForDuplicates:l,createClientWithExisting:c,clearState:d,getFirstLocation:f,setExistingLocations:s,setIsCheckingDuplicates:a}},xje=({onDuplicateFound:t,onNoDuplicateFound:e,onClientCreated:r})=>{const[n,s]=w.useState(!1),[i,a]=w.useState([]),[l,c]=w.useState(!1),[d,f]=w.useState(!1),p=mje(),m=yje({onDuplicateFound:S=>{a(S),c(!0),f(!1),t(S)},onNoDuplicateFound:()=>{a([]),c(!1),f(!1),e()},onClientCreated:r}),g=w.useCallback(async(S,C)=>{if(p.updateAddress(S,C),S&&C?.latLng&&C?.placeId){s(!0);try{const E={...p.clientForm,address:S,placeId:C.placeId,latitude:C.latLng.lat,longitude:C.latLng.lng};await m.checkForDuplicates(E)}catch(E){console.error("Erreur lors de la vérification des doublons:",E)}finally{s(!1)}}else a([]),c(!1),f(!1)},[p,m]),y=w.useCallback(async S=>{const C={instructions:S.deliveryInstructions||p.clientForm.instructions,photos:S.photos&&S.photos.length>0?S.photos:p.clientForm.photos};p.updateForm(C),c(!1),f(!0)},[p]),b=w.useCallback(()=>{c(!1),a([]),f(!1)},[]),x=w.useCallback(async S=>{if(i.length>0){const C=i[0];await m.createClientWithExisting(S,C,p.clientForm.name,p.clientForm.type)}},[i,m,p]),j=w.useCallback(()=>{s(!1),a([]),c(!1),f(!1)},[]);return{...p,updateAddress:g,isCheckingDuplicates:n,duplicatesDetected:i,showDuplicateWarning:l,useExistingLocationFlag:d,useExistingLocation:y,ignoreExistingAndContinue:b,createClientWithExisting:x,resetDuplicateDetection:j,duplicateDetection:m}},bje=()=>{const[t,e]=w.useState(null),[r,n]=w.useState(!1),[s,i]=w.useState(""),a=w.useRef(null),l=j=>{e(j)},c=()=>{e(null),i("")};return{state:{selectedFile:t,uploadingPhoto:r,newPhotoDescription:s},selectedFile:t,uploadingPhoto:r,newPhotoDescription:s,fileInputRef:a,isPhotoSelected:t!==null,canUpload:t!==null&&!r,selectFile:l,clearSelection:c,updateDescription:j=>{i(j)},uploadPhoto:async()=>{if(!t)return null;try{n(!0);const S={url:await zE(t),description:s};return c(),S}catch(j){throw console.error("Erreur lors de l'upload de l'image:",j),j}finally{n(!1)}},triggerFileSelection:()=>{a.current?.click()},handleFileInputChange:j=>{const S=j.target.files?.[0];S&&l(S)},getSelectedFilePreview:()=>t?URL.createObjectURL(t):null,setSelectedFile:e,setUploadingPhoto:n,setNewPhotoDescription:i}};function Z5(t,e){let r=null;const n=(...s)=>{r&&clearTimeout(r),r=setTimeout(()=>t(...s),e)};return n.cancel=()=>{r&&(clearTimeout(r),r=null)},n}const wje=()=>{const t=mq(),e=AB(),[r,n]=w.useState({showClientModal:!1,showDriverModal:!1,showDeleteConfirm:!1,showExistingClientsModal:!1}),[s,i]=w.useState({laboratoriesQuery:"",clientsQuery:"",debouncedLaboratoriesQuery:"",debouncedClientsQuery:""}),[a,l]=w.useState(null),[c,d]=w.useState(null),[f,p]=w.useState(!1),m=w.useRef(null),g=bje(),y=xje({onDuplicateFound:I=>{},onNoDuplicateFound:()=>{},onClientCreated:()=>{y.resetForm(),n(I=>({...I,showClientModal:!1}))}}),b=w.useMemo(()=>Z5(I=>{i(H=>({...H,debouncedLaboratoriesQuery:I}))},300),[]),x=w.useMemo(()=>Z5(I=>{i(H=>({...H,debouncedClientsQuery:I}))},300),[]);w.useEffect(()=>()=>{b.cancel(),x.cancel()},[b,x]),w.useEffect(()=>{t.fetchLaboratories(),e.fetchDrivers()},[]),w.useEffect(()=>()=>{document.body.style.overflow="",document.body.style.paddingRight=""},[]);const j=w.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),S=w.useCallback(I=>{i(H=>({...H,laboratoriesQuery:I})),b(I)},[b]),C=w.useCallback(I=>{i(H=>({...H,clientsQuery:I})),x(I)},[x]),E=w.useCallback(I=>{n(H=>({...H,[I]:!0}))},[]),N=w.useCallback(I=>{n(H=>({...H,[I]:!1})),I==="showClientModal"&&(y.resetDuplicateDetection?.(),y.resetForm()),setTimeout(()=>{document.body.style.overflow="",document.body.style.paddingRight=""},150)},[y]),P=w.useCallback(()=>{y.resetForm(),E("showClientModal")},[y,E]),O=w.useCallback(I=>{const H=t.clients.find(ne=>ne.id===I);if(H){const ne=dje(H);y.populateFormForEdit(ne,I),E("showClientModal")}},[t.clients,y,E]),L=w.useCallback(async()=>{if(t.selectedLaboratory)try{const I=H5(y.clientForm,t.selectedLaboratory.id);await t.addClient(I),y.resetForm(),N("showClientModal")}catch(I){console.error("Erreur lors de la création du client:",I)}},[t.selectedLaboratory,y,t,N]),A=w.useCallback(async I=>{if(t.selectedLaboratory)try{const H={instructions:I.deliveryInstructions||y.clientForm.instructions,photos:I.photos&&I.photos.length>0?I.photos:y.clientForm.photos};y.updateForm(H),y.useExistingLocation(I)}catch(H){console.error("Erreur lors du pré-remplissage avec location existante:",H)}},[t,y]),R=w.useCallback(async I=>{if(I.preventDefault(),!t.selectedLaboratory)return;const{isValid:H,errors:ne}=y.validateForm();if(!H){console.error("Erreurs de validation:",ne);return}if(y.isEditing){const ge=H5(y.clientForm,t.selectedLaboratory.id);await t.updateClient(y.editingClientId,ge),y.resetForm(),N("showClientModal")}else{if(y.showDuplicateWarning&&y.duplicatesDetected.length>0)return;if(y.useExistingLocationFlag&&y.duplicatesDetected.length>0)try{const ge=y.duplicatesDetected[0];await y.duplicateDetection.createClientWithExisting(t.selectedLaboratory.id,ge,y.clientForm.name,y.clientForm.type),await t.fetchClients(t.selectedLaboratory.id),y.resetForm(),N("showClientModal")}catch(ge){console.error("Erreur lors de la création du client avec location existante:",ge)}else await L()}},[t,y,N,L]),M=w.useCallback(async()=>{y.ignoreExistingAndContinue(),await L()},[y,L]),D=w.useCallback(async()=>{N("showExistingClientsModal"),await L()},[N,L]),B=w.useCallback(I=>{d(I),E("showDeleteConfirm")},[E]),F=w.useCallback(async()=>{if(c)try{p(!0),await t.deleteClient(c),N("showDeleteConfirm"),d(null)}catch(I){console.error("Erreur lors de la suppression:",I)}finally{p(!1)}},[c,t,N]),V=w.useCallback(I=>{l(I),E("showDriverModal")},[E]),J=w.useCallback(async I=>{if(a)try{await t.assignDriver(a,I),N("showDriverModal"),l(null)}catch(H){console.error("Erreur lors de l'assignation du chauffeur:",H)}},[a,t,N]),G=w.useCallback(async(I,H)=>{try{await t.toggleDepotAction(I,H)}catch(ne){console.error("Erreur lors de l'action dépôt:",ne)}},[t]),q=w.useCallback(async()=>{try{const I=await g.uploadPhoto();I&&y.addPhoto(I)}catch(I){console.error("Erreur lors de l'upload de la photo:",I)}},[g,y]),U=w.useCallback(I=>{t.setSelectedLaboratoryId(I),i(I===null?H=>({...H,clientsQuery:"",debouncedClientsQuery:""}):H=>({...H,clientsQuery:"",debouncedClientsQuery:""})),j()},[t,j]),W=w.useCallback(async()=>{try{await t.fetchLaboratories(),console.log("✅ Laboratoires rafraîchis après mise à jour")}catch(I){console.error("Erreur lors du rafraîchissement des laboratoires:",I)}},[t]);return{laboratories:t.laboratories,clients:t.clients,selectedLaboratoryId:t.selectedLaboratoryId,selectedLaboratory:t.selectedLaboratory,isLoading:t.isLoading,error:t.error,drivers:e.drivers,modalStates:r,laboratoriesSearchQuery:s.laboratoriesQuery,clientsSearchQuery:s.clientsQuery,debouncedLaboratoriesSearchQuery:s.debouncedLaboratoriesQuery,debouncedClientsSearchQuery:s.debouncedClientsQuery,selectingDriverForClientId:a,deletingClientId:c,isDeleting:f,clientForm:y,photoManagement:g,containerRef:m,handleNewClient:P,handleEditClient:O,handleClientSubmit:R,handleDeleteClient:B,handleConfirmDelete:F,handleAssignDriver:V,handleDriverSelection:J,handleDepotAction:G,handlePhotoUpload:q,handleLaboratorySelect:U,handleUseExistingLocation:A,handleCreateNewClient:D,handleIgnoreAndContinue:M,handleLaboratoryUpdate:W,openModal:E,closeModal:N,setLaboratoriesSearchQuery:S,setClientsSearchQuery:C,scrollToTop:j}},_je=({laboratories:t,searchQuery:e,onSearchChange:r,onLaboratorySelect:n,onLaboratoryUpdate:s})=>{const[i,a]=w.useState(!1),[l,c]=w.useState(new Set),d=t.filter(b=>{const x=b.name.toLowerCase().includes(e.toLowerCase())||b.address?.toLowerCase().includes(e.toLowerCase())||b.email?.toLowerCase().includes(e.toLowerCase()),j=!i||b.shared_pickup;return x&&j}),f=async(b,x)=>{if(x.stopPropagation(),!l.has(b))try{c(C=>new Set([...C,b]));const j=t.find(C=>C.id===b);if(!j)return;const S=!j.shared_pickup;await Bie(b,S),s&&await s(),console.log(`✅ Laboratoire ${j.name} - Récupération partagée: ${S}`)}catch(j){console.error("Erreur lors de la mise à jour:",j)}finally{c(j=>{const S=new Set(j);return S.delete(b),S})}},p=()=>{a(!i)},m=t.filter(b=>b.shared_pickup).length,g={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},y={hidden:{y:20,opacity:0},show:{y:0,opacity:1}};return o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Laboratoires"}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Gestion des laboratoires et de leurs clients"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsxs("button",{onClick:p,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${i?"bg-amber-500 text-white shadow-lg hover:bg-amber-600":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300"}`,children:[o.jsx(TF,{className:"w-4 h-4"}),o.jsx("span",{children:"Récupération partagée"}),m>0&&o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${i?"bg-amber-600 text-amber-100":"bg-amber-500 text-white"}`,children:m})]}),o.jsxs("div",{className:"relative max-w-md",children:[o.jsx(pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Qe,{type:"text",placeholder:"Rechercher un laboratoire...",value:e,onChange:b=>r(b.target.value),className:"pl-10"})]})]})]}),o.jsx(Ae.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:g,initial:"hidden",animate:"show",children:d.map(b=>{const x=b.shared_pickup,j=b.depot_is_lab,S=l.has(b.id),C=j;return o.jsx(Ae.div,{variants:y,children:o.jsx("div",{className:`cursor-pointer transition-all duration-300 rounded-xl border-2 shadow-lg hover:shadow-xl bg-white group ${x?"border-amber-400 hover:border-amber-500 ring-2 ring-amber-100":j?"border-indigo-400 hover:border-indigo-500 ring-2 ring-indigo-100":"border-gray-200 hover:border-blue-300"}`,onClick:()=>n(b.id),children:o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all ${x?"bg-gradient-to-br from-amber-500 to-amber-600":j?"bg-gradient-to-br from-indigo-500 to-indigo-600":"bg-gradient-to-br from-blue-500 to-blue-600"}`,children:o.jsx(Dt,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:`text-lg font-bold truncate transition-colors ${x?"text-amber-900 group-hover:text-amber-700":j?"text-indigo-900 group-hover:text-indigo-700":"text-gray-900 group-hover:text-blue-600"}`,children:b.name}),(x||j)&&o.jsx("div",{className:`text-xs font-medium mt-1 ${x?"text-amber-600":"text-indigo-600"}`,children:x?"🚛 Récupération partagée":"🏭 Mode Dépôt-Labo"})]})]}),b.address&&o.jsxs("div",{className:"flex items-start text-sm text-gray-600 mb-2",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"break-words leading-relaxed",children:b.address})]}),b.email&&o.jsxs("div",{className:"flex items-start text-sm text-gray-600 mb-3",children:[o.jsx(df,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"break-words leading-relaxed",children:b.email})]})]}),o.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 self-start mt-1",children:o.jsx(W1,{className:`w-5 h-5 ${x?"text-amber-500":j?"text-indigo-500":"text-blue-500"}`})})]}),o.jsx("div",{className:`rounded-xl p-3 border mb-3 ${x?"bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200":j?"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:`text-lg font-bold mb-0.5 ${x?"text-amber-700":j?"text-indigo-700":"text-blue-700"}`,children:b.clientCount||0}),o.jsxs("div",{className:`text-xs font-medium ${x?"text-amber-600":j?"text-indigo-600":"text-blue-600"}`,children:["Client",(b.clientCount||0)!==1?"s":""]})]}),o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shadow-lg ${x?"bg-amber-500":j?"bg-indigo-500":"bg-blue-500"}`,children:o.jsx(Ln,{className:"h-4 w-4 text-white"})})]})}),o.jsx("div",{className:"mb-3",children:o.jsxs("button",{onClick:E=>f(b.id,E),disabled:C||S,className:`relative w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-300 transform ${C?"opacity-50 cursor-not-allowed bg-gray-100 text-gray-400 border-2 border-gray-200":S?"opacity-70 cursor-wait":!C&&x?"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-lg hover:shadow-xl hover:from-amber-600 hover:to-amber-700 hover:scale-[1.02]":"bg-gradient-to-r from-amber-50 to-orange-50 text-amber-700 border-2 border-amber-200 hover:border-amber-300 hover:from-amber-100 hover:to-orange-100 shadow-sm hover:shadow-md hover:scale-[1.02]"}`,children:[o.jsx("div",{className:`p-1.5 rounded-lg ${C?"bg-gray-200":x?"bg-white/20":"bg-amber-200/50"}`,children:o.jsx(gt,{className:"w-4 h-4"})}),o.jsx("span",{className:"flex-1",children:C?"Incompatible (Mode Dépôt-Labo actif)":S?"Mise à jour...":x?"Récupération partagée":"Récupération standard"}),x&&!C&&o.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white shadow-sm"})]})}),o.jsx("div",{className:"text-center",children:o.jsx("span",{className:`text-xs transition-colors ${x?"text-amber-600 group-hover:text-amber-500":j?"text-indigo-600 group-hover:text-indigo-500":"text-gray-500 group-hover:text-blue-600"}`,children:"Cliquer pour gérer les clients"})})]})})},b.id)})}),d.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Dt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i?"Aucun laboratoire en récupération partagée":"Aucun laboratoire trouvé"}),o.jsx("p",{className:"text-gray-600",children:i?"Activez la récupération partagée sur des laboratoires pour les voir ici":"Essayez de modifier votre recherche"})]})]})},jje=({laboratory:t,onNewClient:e,isDepotLabMode:r,onToggleDepotLabMode:n})=>t?o.jsxs("div",{className:"space-y-4",children:[o.jsx(_e,{className:"p-6",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:o.jsx(Dt,{className:"w-7 h-7 text-white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),o.jsx("div",{children:t.address&&o.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[o.jsx(it,{className:"w-4 h-4 mr-2 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"break-words leading-relaxed",children:t.address})]})})]})]})})}),o.jsx("div",{className:"flex justify-center",children:o.jsx("button",{onClick:n,className:`px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 ${r?"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg hover:shadow-xl border-2 border-red-500":"bg-white hover:bg-gray-50 text-gray-700 hover:text-red-600 border-2 border-gray-200 hover:border-red-300 shadow-sm hover:shadow-md"}`,children:r?"🔴 Mika = Labo ACTIVÉ":"Mika = Labo"})}),r&&o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-800 text-sm",children:[o.jsx(AQ,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"font-medium",children:"Mode Dépôt → Laboratoire activé"})]}),o.jsx("p",{className:"text-red-700 text-xs mt-1",children:"Tous les clients de ce laboratoire livrent depuis le dépôt et récupèrent vers le dépôt. Les autres options de dépôt sont désactivées."})]}),o.jsxs("button",{onClick:e,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium px-6 py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center gap-3 group",children:[o.jsx(ho,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"text-lg",children:"Nouveau client"})]})]}):null,X5=["bg-red-500 text-white border-red-600","bg-blue-500 text-white border-blue-600","bg-green-500 text-white border-green-600","bg-purple-500 text-white border-purple-600","bg-orange-500 text-white border-orange-600","bg-teal-500 text-white border-teal-600","bg-indigo-500 text-white border-indigo-600","bg-pink-500 text-white border-pink-600","bg-yellow-500 text-white border-yellow-600","bg-cyan-500 text-white border-cyan-600"],Y5=["bg-red-200","bg-blue-200","bg-green-200","bg-purple-200","bg-orange-200","bg-teal-200","bg-indigo-200","bg-pink-200","bg-yellow-200","bg-emerald-200","bg-sky-200","bg-amber-200","bg-lime-200","bg-rose-200","bg-violet-200"],gq=t=>{const e=parseInt(t.substring(0,8),16)%X5.length;return X5[e]},Sje=t=>{const e=parseInt(t.substring(0,8),16)%Y5.length;return Y5[e]},vq=t=>{if(!t)return"??";const e=t.trim().split(/\s+/);return e.length===1?t.substring(0,2).toUpperCase():e.slice(0,2).map(r=>r.charAt(0)).join("").toUpperCase()},yq=w.memo(z.forwardRef(({client:t,drivers:e,onEditClient:r,onDeleteClient:n,onAssignDriver:s,onDepotAction:i,isDepotLabMode:a},l)=>o.jsx(Ae.div,{ref:l,initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},layout:!0,children:o.jsxs(_e,{className:"p-4 hover:shadow-lg transition-all duration-300 border-l-4 border-l-primary-500 bg-gradient-to-r from-white to-gray-50",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-sm font-semibold text-white shadow-md ${Sje(t.id)}`,children:vq(t.name)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"font-medium text-gray-900 truncate",children:t.name}),o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600",children:[t.type==="dentist"?o.jsx(Kr,{className:"h-3 w-3"}):o.jsx(If,{className:"h-3 w-3"}),pje(t.type)]})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.address}),t.instructions&&o.jsxs("p",{className:"text-xs text-gray-500 mb-3 italic bg-gray-50 p-2 rounded border-l-2 border-gray-200",children:['"',t.instructions.length>80?`${t.instructions.substring(0,80)}...`:t.instructions,'"']}),o.jsx("div",{className:"flex items-center gap-2 mb-3",children:t.driverId?o.jsxs("button",{onClick:()=>s(t.id),className:`px-3 py-2 rounded text-xs font-medium transition-all hover:shadow-md ${gq(t.driverId)} hover:scale-105`,title:"Cliquer pour changer de chauffeur",children:[o.jsx(gt,{className:"h-3 w-3 inline mr-1"}),e?.find(c=>c.id===t.driverId)?.name||"Chauffeur assigné"]}):o.jsxs("button",{onClick:()=>s(t.id),className:"px-3 py-2 rounded text-xs font-medium bg-red-100 text-red-700 border border-red-200 hover:bg-red-200 transition-all hover:shadow-md hover:scale-105",title:"Cliquer pour assigner un chauffeur",children:[o.jsx(gt,{className:"h-3 w-3 inline mr-1"}),"Aucun chauffeur assigné"]})}),t.photos&&t.photos.length>0&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mb-3",children:[o.jsx(Qn,{className:"h-3 w-3"}),t.photos.length," photo",t.photos.length>1?"s":""]})]})]}),o.jsxs("div",{className:"flex flex-col gap-1 ml-4",children:[o.jsx(ve,{variant:"ghost",size:"sm",onClick:()=>r(t),className:"p-2 hover:bg-blue-50 hover:text-blue-600 rounded-full transition-colors h-8 w-8",title:"Modifier le client",children:o.jsx(ig,{className:"h-4 w-4"})}),o.jsx(ve,{variant:"ghost",size:"sm",onClick:()=>n(t.id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-full transition-colors h-8 w-8",title:"Supprimer le client",children:o.jsx(Oc,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-gray-100",children:[a&&o.jsxs("div",{className:"w-full mb-3 p-3 bg-gradient-to-r from-red-50 to-red-100 border-2 border-red-200 rounded-xl shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-800 text-sm",children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx("span",{className:"font-semibold",children:'🔴 Mode "Mika = Labo" ACTIVÉ'})]}),o.jsx("p",{className:"text-red-700 text-xs mt-1 ml-4",children:"Les autres options dépôt sont automatiquement désactivées pour ce client."})]}),o.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>i(t.id,"delivery"),disabled:a,className:`text-xs rounded-full transition-all duration-200 flex items-center gap-1 ${a?"opacity-50 cursor-not-allowed bg-gray-100 border-gray-300 text-gray-400":t.depotActions?.delivery?"bg-green-100 border-green-400 text-green-800 shadow-md font-medium":"hover:bg-green-50 hover:border-green-200 text-gray-600"}`,children:[o.jsx(H1,{className:"h-3 w-3"}),"Livraison"]}),o.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>i(t.id,"return"),disabled:a,className:`text-xs rounded-full transition-all duration-200 flex items-center gap-1 ${a?"opacity-50 cursor-not-allowed bg-gray-100 border-gray-300 text-gray-400":t.depotActions?.return?"bg-blue-100 border-blue-400 text-blue-800 shadow-md font-medium":"hover:bg-blue-50 hover:border-blue-200 text-gray-600"}`,children:[o.jsx(H1,{className:"h-3 w-3"}),"Récupération"]}),o.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>i(t.id,"nextDay"),disabled:a,className:`text-xs rounded-full transition-all duration-200 flex items-center gap-1 ${a?"opacity-50 cursor-not-allowed bg-gray-100 border-gray-300 text-gray-400":t.depotActions?.nextDay?"bg-orange-100 border-orange-400 text-orange-800 shadow-md font-medium":"hover:bg-orange-50 hover:border-orange-200 text-gray-600"}`,children:[o.jsx(fo,{className:"h-3 w-3"}),"Retour J+1"]}),o.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>i(t.id,"dentistInteraction"),disabled:a,className:`text-xs rounded-full transition-all duration-200 flex items-center gap-1 ${a?"opacity-50 cursor-not-allowed bg-gray-100 border-gray-300 text-gray-400":t.depotActions?.dentistInteraction?"bg-purple-100 border-purple-400 text-purple-800 shadow-md font-medium":"hover:bg-purple-50 hover:border-purple-200 text-gray-600"}`,children:[o.jsx(kE,{className:"h-3 w-3"}),"Mika = dentiste"]})]})]})})));yq.displayName="ClientCard";const Nje=({clients:t,selectedLaboratoryId:e,searchQuery:r,drivers:n,onEditClient:s,onDeleteClient:i,onAssignDriver:a,onDepotAction:l,onSearchChange:c,onNewClient:d,isDepotLabMode:f})=>{const p={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}};return e?o.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[o.jsxs("div",{className:"p-6 border-b bg-white",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Clients"}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Recherche temps réel par nom de client ou nom de chauffeur • Tri automatique : dentistes puis laboratoires par ordre alphabétique"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(pn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx(Qe,{type:"text",placeholder:"Rechercher par nom de client ou de chauffeur...",value:r,onChange:m=>c?.(m.target.value),className:"pl-10"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:t.length===0?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Kr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r?"Aucun client trouvé":"Aucun client"}),o.jsx("p",{className:"text-gray-500",children:r?"La recherche n'a trouvé aucun résultat dans les noms de clients et de chauffeurs":'Utilisez le bouton "Nouveau client" ci-dessus pour ajouter le premier client'})]})}):o.jsx(Ae.div,{className:"p-6 space-y-4",variants:p,initial:"hidden",animate:"show",children:o.jsx(Rt,{mode:"popLayout",children:t.map((m,g)=>{const y=g===0,b=g>0?t[g-1]:null,x=!y&&b&&b.type!==m.type;return o.jsxs(z.Fragment,{children:[x&&o.jsx(Ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-center py-4",children:o.jsxs("div",{className:"flex items-center w-full max-w-md",children:[o.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-gray-300 to-gray-300"}),o.jsx("div",{className:"px-4 py-1 bg-gray-100 text-gray-600 text-xs font-medium rounded-full border",children:"LABORATOIRES"}),o.jsx("div",{className:"flex-1 h-px bg-gradient-to-l from-transparent via-gray-300 to-gray-300"})]})}),(y||x)&&o.jsxs(Ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:m.type==="dentist"?o.jsxs(o.Fragment,{children:[o.jsx(Kr,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{children:"DENTISTES"})]}):o.jsxs(o.Fragment,{children:[o.jsx(If,{className:"h-4 w-4 text-green-600"}),o.jsx("span",{children:"LABORATOIRES"})]})}),o.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),o.jsx(yq,{client:m,drivers:n,onEditClient:s,onDeleteClient:i,onAssignDriver:a,onDepotAction:l,isDepotLabMode:f})]},m.id)})})})}),t.length>0&&o.jsx("div",{className:"p-4 border-t bg-white",children:o.jsx("div",{className:"text-sm text-gray-600 text-center",children:(()=>{const m=t.filter(y=>y.type==="dentist"),g=t.filter(y=>y.type==="laboratory");return o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"font-medium text-green-600",children:[t.length," client",t.length!==1?"s":""," total"]}),m.length>0&&g.length>0&&o.jsxs("span",{className:"text-gray-400 ml-2",children:["• ",m.length," dentiste",m.length!==1?"s":""," • ",g.length," laboratoire",g.length!==1?"s":""]}),r&&o.jsx("span",{className:"text-gray-400 ml-2",children:"• Recherche par nom active"})]})})()})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(If,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sélectionnez un laboratoire"}),o.jsx("p",{className:"text-gray-500",children:"Choisissez un laboratoire dans la liste pour voir ses clients"})]})})},Eje=({isOpen:t,isDeleting:e,onClose:r,onConfirm:n})=>(z.useEffect(()=>{if(t)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[t]),t?o.jsx(Rt,{children:o.jsx(Ae.div,{className:"fixed inset-0 bg-black bg-opacity-60 z-[9999] flex items-center justify-center",onClick:()=>{e||r()},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:"1rem"},children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-md mx-auto relative",onClick:s=>s.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},style:{maxHeight:"calc(100vh - 2rem)",overflowY:"auto"},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center gap-2 text-error-600",children:[o.jsx(Oc,{className:"h-5 w-5"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Supprimer ce client"})]})}),o.jsxs("div",{className:"p-6",children:[o.jsx("p",{className:"text-gray-600 mb-4",children:"Vous êtes sur le point de supprimer définitivement ce client et toutes ses données associées. Cette action est irréversible."}),o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 p-4 rounded-lg text-sm mb-6",children:[o.jsx("strong",{children:"Attention :"})," Cette action supprimera :",o.jsxs("ul",{className:"list-disc ml-5 mt-2",children:[o.jsx("li",{children:"Les informations du client"}),o.jsx("li",{children:"Son adresse et coordonnées"}),o.jsx("li",{children:"Toutes les photos associées"}),o.jsx("li",{children:"Les assignations de livreur"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(ve,{variant:"outline",disabled:e,onClick:r,children:"Annuler"}),o.jsx(ve,{variant:"danger",disabled:e,onClick:n,className:"flex items-center gap-2",children:e?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Suppression..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Oc,{className:"h-4 w-4"}),"Supprimer définitivement"]})})]})]})]})})}):null),Cje=({isOpen:t,drivers:e,onClose:r,onSelectDriver:n})=>(z.useEffect(()=>{if(t)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[t]),t?o.jsx(Rt,{children:o.jsx(Ae.div,{className:"fixed inset-0 bg-black bg-opacity-60 z-[9999] flex items-center justify-center",onClick:r,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:"1rem"},children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-md mx-auto relative",onClick:s=>s.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},style:{maxHeight:"calc(100vh - 2rem)",overflowY:"auto"},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-primary-600",children:[o.jsx(gt,{className:"h-5 w-5"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Assigner un chauffeur"})]}),o.jsx(ve,{variant:"ghost",size:"sm",onClick:r,children:o.jsx(tr,{className:"h-4 w-4"})})]})}),o.jsx("div",{className:"p-6 overflow-y-auto",children:e.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(gt,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Aucun chauffeur disponible"})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{n(null),r()},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:o.jsx(tr,{className:"h-4 w-4 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:"Aucun chauffeur"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Désassigner le chauffeur"})]})]})}),e.map(s=>o.jsx("div",{className:"p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{n(s.id),r()},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${gq(s.id)}`,children:vq(s.name)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-gray-900 truncate",children:s.name}),s.email&&o.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.email})]}),o.jsx(gt,{className:"h-4 w-4 text-gray-400"})]})},s.id))]})}),o.jsx("div",{className:"p-4 border-t",children:o.jsx(ve,{variant:"outline",className:"w-full",onClick:r,children:"Annuler"})})]})})}):null),kje=({isVisible:t,existingLocations:e,isChecking:r,onUseExisting:n,onIgnoreAndContinue:s})=>{if(r)return o.jsx(Ae.div,{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"}),o.jsx("span",{className:"text-sm text-blue-700",children:"Vérification des doublons..."})]})});if(!t||e.length===0)return null;const i=e[0],a=i.linkedClients?.map(d=>d.laboratoryName).filter(Boolean)||[],l=[...new Set(a)],c=l.length===0?"Un laboratoire":l.length===1?`${l[0]}`:l.join(", ");return o.jsx(Rt,{children:o.jsx(Ae.div,{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-5 mb-4 shadow-sm border border-amber-200",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"bg-amber-100 p-2 rounded-full",children:o.jsx(sr,{className:"w-5 h-5 text-amber-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("h4",{className:"text-base font-semibold text-amber-900",children:"Client existant détecté"}),o.jsx("div",{className:"bg-amber-200 text-amber-800 px-2 py-1 rounded-full text-xs font-medium",children:"🔄 Réutilisable"})]}),o.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:[o.jsx("span",{className:"font-medium",children:c})," ",l.length<=1?"livre":"livrent"," déjà à cette adresse. S'agit-il du même client ?"]}),o.jsxs("div",{className:"space-y-3 mb-5",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"bg-blue-100 p-1.5 rounded-lg mt-0.5",children:o.jsx(it,{className:"w-4 h-4 text-blue-600"})}),o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"text-sm font-medium text-gray-900",children:i.address})})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"bg-purple-100 p-1.5 rounded-lg mt-0.5",children:o.jsx(Dt,{className:"w-4 h-4 text-purple-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Utilisé par :"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:l.map((d,f)=>o.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:["🧪 ",d]},f))})]})]}),i.deliveryInstructions&&o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"bg-green-100 p-1.5 rounded-lg mt-0.5",children:o.jsx(ji,{className:"w-4 h-4 text-green-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Instructions existantes :"}),o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2",children:o.jsxs("p",{className:"text-sm text-green-800 italic",children:['"',i.deliveryInstructions,'"']})})]})]}),i.photos.length>0&&o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"bg-pink-100 p-1.5 rounded-lg mt-0.5",children:o.jsx(LF,{className:"w-4 h-4 text-pink-600"})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-pink-100 text-pink-800 border border-pink-200",children:["📸 ",i.photos.length," photo",i.photos.length>1?"s":""," disponible",i.photos.length>1?"s":""]})})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(ve,{type:"button",onClick:()=>n(i),className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-medium px-6 py-3 rounded-xl shadow-sm transition-all duration-200 transform hover:scale-[1.02]",children:[o.jsx("span",{className:"mr-2",children:"✅"}),"Oui, même client"]}),o.jsxs(ve,{type:"button",variant:"outline",onClick:s,className:"w-full border-2 border-amber-300 text-amber-700 hover:bg-amber-100 font-medium px-6 py-3 rounded-xl transition-all duration-200 transform hover:scale-[1.02]",children:[o.jsx("span",{className:"mr-2",children:"❌"}),"Non, client différent"]})]}),o.jsx("div",{className:"mt-4 bg-amber-100 border border-amber-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),o.jsx("p",{className:"text-xs text-amber-700 font-medium",children:'✨ Astuce : Choisir "Oui" récupérera automatiquement les instructions et photos existantes'})]})})]})]})})})},Pje=({isOpen:t,isEditing:e,clientForm:r,isCheckingDuplicates:n,onClose:s,onSubmit:i,onFormChange:a,selectedFile:l,uploadingPhoto:c,newPhotoDescription:d,fileInputRef:f,onFileSelect:p,onPhotoDescriptionChange:m,onPhotoUpload:g,onPhotoClear:y,onPhotoRemove:b,onTriggerFileSelection:x,isCheckingDuplicatesRealtime:j=!1,duplicatesDetectedRealtime:S=[],showDuplicateWarningRealtime:C=!1,onUseExistingRealtime:E=()=>{},onIgnoreAndContinueRealtime:N=()=>{},onAddressChangeWithDuplicateCheck:P})=>{w.useEffect(()=>{if(!t)return;const A=document.body.style.overflow,R=document.body.style.paddingRight,M=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",M>0&&(document.body.style.paddingRight=`${M}px`),()=>{setTimeout(()=>{document.body.style.overflow=A||"",document.body.style.paddingRight=R||""},100)}},[t]);const O=w.useCallback(()=>{document.body.style.overflow="",document.body.style.paddingRight="",s()},[s]);if(w.useEffect(()=>{if(!t)return;const A=R=>{R.key==="Escape"&&O()};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[t,O]),!t)return null;const L=A=>{A.preventDefault(),i({clientData:r,isEditing:e,editingClientId:e?"editing":null})};return o.jsx(Rt,{mode:"wait",children:o.jsx(Ae.div,{className:"fixed inset-0 bg-black/60 z-[9999] flex items-start justify-center",onClick:O,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:"1rem"},children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-lg my-8 mx-auto relative shadow-2xl flex flex-col",onClick:A=>A.stopPropagation(),initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},style:{maxHeight:"calc(100vh - 2rem)",minHeight:"200px"},children:[o.jsxs("div",{className:"p-6 border-b flex items-center justify-between flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dt,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-semibold",children:e?"Modifier le client":"Nouveau client"})]}),o.jsx("button",{onClick:O,className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400 hover:text-gray-600",type:"button",children:o.jsx(tr,{className:"h-5 w-5"})})]}),o.jsxs("form",{onSubmit:L,className:"flex flex-col flex-1 min-h-0",children:[o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pb-0",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de client"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs(ve,{type:"button",variant:r.type==="dentist"?"primary":"outline",onClick:()=>a({type:"dentist"}),className:"flex items-center justify-center gap-2",children:[o.jsx(Kr,{className:"h-4 w-4"}),"Dentiste"]}),o.jsxs(ve,{type:"button",variant:r.type==="laboratory"?"primary":"outline",onClick:()=>a({type:"laboratory"}),className:"flex items-center justify-center gap-2",children:[o.jsx(If,{className:"h-4 w-4"}),"Laboratoire"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du client"}),o.jsx(Qe,{value:r.name,onChange:A=>a({name:A.target.value}),leftIcon:o.jsx(Kr,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),o.jsx(Mc,{value:r.address,onChange:(A,R)=>{P?P(A,R):a({address:A,placeId:R?.placeId||"",latitude:R?.latLng?.lat||0,longitude:R?.latLng?.lng||0})},placeholder:"Entrez l'adresse du client"})]}),o.jsx(kje,{isVisible:C,existingLocations:S,isChecking:j,onUseExisting:E,onIgnoreAndContinue:N}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions de livraison"}),o.jsx(Qe,{value:r.instructions,onChange:A=>a({instructions:A.target.value}),leftIcon:o.jsx(yl,{className:"h-4 w-4"}),placeholder:"ex: Sonner à l'interphone"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-sm font-medium",children:"Photos du lieu"}),r.photos.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h4",{className:"text-xs text-gray-500",children:["Photos ajoutées (",r.photos.length,")"]}),o.jsx("div",{className:"grid grid-cols-3 gap-3 max-h-64 overflow-y-auto",children:r.photos.map((A,R)=>o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:o.jsx("img",{src:A.url,alt:`Photo ${R+1}`,className:"w-full h-full object-cover"})}),A.description&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs p-1 rounded-b-lg line-clamp-1",children:A.description}),o.jsx("button",{type:"button",className:"absolute -top-2 -right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white shadow-md opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>b(R),children:o.jsx(tr,{className:"h-3 w-3"})})]},R))})]}),o.jsxs("div",{className:`mt-4 border border-dashed border-gray-300 rounded-md p-4 transition-colors ${l?"cursor-default":"cursor-pointer hover:border-gray-400 hover:bg-gray-50"}`,onClick:()=>{l||x()},children:[o.jsx("h4",{className:"text-xs text-gray-500 mb-3",children:"Ajouter une nouvelle photo"}),l?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"w-32 h-32 mx-auto rounded-lg overflow-hidden bg-gray-100 border",children:o.jsx("img",{src:URL.createObjectURL(l),alt:"Aperçu de la photo",className:"w-full h-full object-cover"})}),o.jsx(Qe,{value:d,onChange:A=>m(A.target.value),placeholder:"Description de la photo (optionnel)",leftIcon:o.jsx(yl,{className:"h-4 w-4"})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ve,{type:"button",variant:"outline",className:"flex-1",onClick:y,children:"Annuler"}),o.jsx(ve,{type:"button",className:"flex-1",disabled:c,onClick:g,children:c?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Upload..."]}):o.jsxs(o.Fragment,{children:[o.jsx(OE,{className:"h-4 w-4 mr-2"}),"Ajouter"]})})]})]}):o.jsxs("div",{className:"text-center py-4",children:[o.jsx(Qn,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Cliquez pour ajouter une photo"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Formats acceptés : JPG, PNG, WebP"}),o.jsxs(ve,{type:"button",variant:"outline",onClick:A=>{A.stopPropagation(),x()},className:"mt-3 opacity-0 h-0 overflow-hidden",children:[o.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Choisir une photo"]})]}),o.jsx("input",{type:"file",ref:f,onChange:p,accept:"image/*",className:"hidden"})]})]})," "]})," "]})," ",o.jsxs("div",{className:"flex gap-3 p-6 border-t bg-gray-50 flex-shrink-0",children:[o.jsx(ve,{type:"button",variant:"outline",className:"flex-1",onClick:O,children:"Annuler"}),o.jsx(ve,{type:"submit",className:"flex-1",disabled:n,children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Vérification..."]}):e?"Enregistrer":"Créer"})]})]})]})})})},Oje=w.memo(({laboratories:t,searchQuery:e,onSearchChange:r,onLaboratorySelect:n,onLaboratoryUpdate:s})=>{const i=w.useMemo(()=>{if(!e)return t;const a=e.toLowerCase();return t.filter(l=>l.name.toLowerCase().includes(a)||l.address?.toLowerCase().includes(a)||l.email?.toLowerCase().includes(a))},[t,e]);return o.jsx(_je,{laboratories:i,searchQuery:e,onSearchChange:r,onLaboratorySelect:n,onLaboratoryUpdate:s})}),Aje=w.memo(({selectedLaboratory:t,clients:e,searchQuery:r,debouncedSearchQuery:n,drivers:s,onNewClient:i,onSearchChange:a,onEditClient:l,onDeleteClient:c,onAssignDriver:d,onDepotAction:f,onBack:p,isDepotLabMode:m,onToggleDepotLabMode:g})=>{const y=w.useMemo(()=>fje(e,t?.id,n,s),[e,t?.id,n,s]);return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-900 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Retour aux laboratoires"]})}),o.jsx(jje,{laboratory:t,onNewClient:i,isDepotLabMode:m,onToggleDepotLabMode:g}),o.jsx(Nje,{clients:y,selectedLaboratoryId:t?.id,searchQuery:r,drivers:s,onEditClient:b=>l(b.id),onDeleteClient:c,onAssignDriver:d,onDepotAction:f,onSearchChange:a,onNewClient:i,isDepotLabMode:m})]})}),Tje=()=>{const t=wje(),e=mq(),r=w.useMemo(()=>t.laboratories,[t.laboratories]),n=w.useMemo(()=>t.clients,[t.clients]),s=w.useMemo(()=>t.drivers,[t.drivers]),i=w.useCallback(b=>{t.handleLaboratorySelect(b)},[t.handleLaboratorySelect]),a=w.useCallback(()=>{t.handleLaboratorySelect(null)},[t.handleLaboratorySelect]),l=w.useCallback(b=>{t.setLaboratoriesSearchQuery(b)},[t.setLaboratoriesSearchQuery]),c=w.useCallback(b=>{t.setClientsSearchQuery(b)},[t.setClientsSearchQuery]),d=w.useCallback(b=>{t.handleEditClient(b)},[t.handleEditClient]),f=w.useCallback(b=>{t.handleDeleteClient(b)},[t.handleDeleteClient]),p=w.useCallback(b=>{t.handleAssignDriver(b)},[t.handleAssignDriver]),m=w.useCallback((b,x)=>{t.handleDepotAction(b,x)},[t.handleDepotAction]),g=e.laboratories.find(b=>b.id===t.selectedLaboratoryId)?.depot_is_lab||!1,y=async()=>{if(t.selectedLaboratoryId&&t.selectedLaboratory)try{const b=!g;await RB(t.selectedLaboratoryId,b),await e.fetchLaboratories(),console.log(`✅ Mode Dépôt-Lab ${b?"activé":"désactivé"} pour ${t.selectedLaboratory.name}`)}catch(b){console.error("Erreur lors du toggle depot_is_lab:",b)}};return t.error?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsxs("div",{className:"text-red-500 text-center",children:[o.jsx("h2",{className:"text-xl font-bold mb-2",children:"Erreur"}),o.jsx("p",{children:t.error}),o.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Recharger la page"})]})}):t.isLoading&&t.laboratories.length===0?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Chargement des laboratoires..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"max-w-7xl mx-auto p-6",children:t.selectedLaboratoryId?o.jsx(Aje,{selectedLaboratory:t.selectedLaboratory,clients:n,searchQuery:t.clientsSearchQuery,debouncedSearchQuery:t.debouncedClientsSearchQuery,drivers:s||[],onNewClient:t.handleNewClient,onSearchChange:c,onEditClient:d,onDeleteClient:f,onAssignDriver:p,onDepotAction:m,onBack:a,isDepotLabMode:g,onToggleDepotLabMode:y}):o.jsx(Oje,{laboratories:r,searchQuery:t.debouncedLaboratoriesSearchQuery,onSearchChange:l,onLaboratorySelect:i,onLaboratoryUpdate:t.handleLaboratoryUpdate})}),o.jsx(Pje,{isOpen:t.modalStates?.showClientModal||!1,isEditing:t.clientForm?.isEditing||!1,clientForm:t.clientForm?.clientForm||{name:"",address:"",type:"dentist",instructions:"",placeId:"",latitude:0,longitude:0,photos:[]},isCheckingDuplicates:t.clientForm?.isCheckingDuplicates||!1,onClose:()=>t.closeModal("showClientModal"),onSubmit:b=>{const x={preventDefault:()=>{}};t.handleClientSubmit(x)},onFormChange:b=>t.clientForm?.updateForm?.(b),selectedFile:t.photoManagement?.selectedFile||null,uploadingPhoto:t.photoManagement?.uploadingPhoto||!1,newPhotoDescription:t.photoManagement?.newPhotoDescription||"",fileInputRef:t.photoManagement?.fileInputRef||{current:null},onFileSelect:t.photoManagement?.handleFileInputChange||(()=>{}),onPhotoDescriptionChange:t.photoManagement?.updateDescription||(()=>{}),onPhotoUpload:t.handlePhotoUpload,onPhotoClear:t.photoManagement?.clearSelection||(()=>{}),onPhotoRemove:b=>{const j=(t.clientForm?.clientForm?.photos||[]).filter((S,C)=>C!==b);t.clientForm?.updateForm?.({photos:j})},onTriggerFileSelection:t.photoManagement?.triggerFileSelection||(()=>{}),isCheckingDuplicatesRealtime:t.clientForm?.isCheckingDuplicates||!1,duplicatesDetectedRealtime:t.clientForm?.duplicatesDetected||[],showDuplicateWarningRealtime:t.clientForm?.showDuplicateWarning||!1,onUseExistingRealtime:t.handleUseExistingLocation,onIgnoreAndContinueRealtime:t.handleIgnoreAndContinue,onAddressChangeWithDuplicateCheck:(b,x)=>{t.clientForm?.updateAddress?.(b,x)}}),o.jsx(Eje,{isOpen:t.modalStates?.showDeleteConfirm||!1,onConfirm:t.handleConfirmDelete,onClose:()=>t.closeModal("showDeleteConfirm"),isDeleting:t.isDeleting||!1}),o.jsx(Cje,{isOpen:t.modalStates?.showDriverModal||!1,drivers:t.drivers||[],onSelectDriver:t.handleDriverSelection,onClose:()=>t.closeModal("showDriverModal")})]})},Lje=async t=>{try{const{data:e,error:r}=await Y.from("billing_configurations").select("*").eq("laboratory_id",t).eq("is_active",!0).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){throw console.error("Erreur lors de la récupération des configurations de facturation:",e),e}},Mje=async(t,e,r,n)=>{try{await Y.from("billing_configurations").update({is_active:!1,effective_to:new Date().toISOString().split("T")[0]}).eq("laboratory_id",t).eq("client_id",e).eq("is_active",!0);const s={laboratory_id:t,client_id:e,billing_type:r,...r==="per_visit"?{price_per_visit:n,monthly_flat_rate:null}:{monthly_flat_rate:n,price_per_visit:null},is_active:!0,effective_from:new Date().toISOString().split("T")[0]},{data:i,error:a}=await Y.from("billing_configurations").insert(s).select().single();if(a)throw a;return i}catch(s){throw console.error("Erreur lors de la création/mise à jour de la configuration:",s),s}},Rje=async t=>{try{const{error:e}=await Y.from("billing_configurations").update({is_active:!1,effective_to:new Date().toISOString().split("T")[0]}).eq("id",t);if(e)throw e}catch(e){throw console.error("Erreur lors de la suppression de la configuration:",e),e}},Dje=async(t,e)=>{try{const{data:r,error:n}=await Y.from("billing_reports").select("*").eq("laboratory_id",t).eq("billing_month",e).order("client_name");if(n)throw n;return r||[]}catch(r){throw console.error("Erreur lors de la récupération du rapport de facturation:",r),r}},Ije=async t=>{try{const{data:e,error:r}=await Y.from("billing_reports").select("*").eq("laboratory_id",t).order("billing_month",{ascending:!1}).order("client_name");if(r)throw r;return e||[]}catch(e){throw console.error("Erreur lors de la récupération des rapports de facturation:",e),e}},$je=async t=>{try{const{data:e,error:r}=await Y.from("billing_invoices").select("*").eq("laboratory_id",t).order("billing_period_start",{ascending:!1});if(r)throw r;return e||[]}catch(e){throw console.error("Erreur lors de la récupération des factures:",e),e}},Fje=async t=>{try{const{data:e,error:r}=await Y.from("billing_invoices").select(`
        *,
        laboratories(name)
      `).eq("id",t).single();if(r)throw r;if(!e)return null;const{data:n,error:s}=await Y.from("billing_invoice_items").select("*").eq("invoice_id",t).order("created_at");if(s)throw s;return{...e,laboratory_name:e.laboratories?.name||"",items:n||[]}}catch(e){throw console.error("Erreur lors de la récupération de la facture détaillée:",e),e}},Bje=async t=>{try{const{data:e,error:r}=await Y.rpc("generate_monthly_invoice",{lab_id:t.laboratory_id,billing_month:t.billing_month});if(r)throw r;return e}catch(e){throw console.error("Erreur lors de la génération de la facture:",e),e}},zje=async t=>{try{const{error:e}=await Y.rpc("mark_invoice_as_sent",{invoice_id:t});if(e)throw e}catch(e){throw console.error("Erreur lors du marquage de la facture comme envoyée:",e),e}},Uje=async(t,e)=>{try{const{error:r}=await Y.from("billing_invoices").update({notes:e}).eq("id",t);if(r)throw r}catch(r){throw console.error("Erreur lors de la mise à jour des notes de la facture:",r),r}},qje=async(t,e)=>{try{const r=e+"-01",{data:n,error:s}=await Y.from("billing_invoices").select("id").eq("laboratory_id",t).eq("billing_period_start",r).limit(1);if(s)throw s;return(n?.length||0)>0}catch(r){throw console.error("Erreur lors de la vérification d'existence de facture:",r),r}},Vje=async t=>{try{const{data:e,error:r}=await Y.from("billing_reports").select("total_amount_euros, billing_month, total_visits").eq("laboratory_id",t);if(r)throw r;return{totalRevenue:e?.reduce((s,i)=>s+i.total_amount_euros,0)||0,totalVisits:e?.reduce((s,i)=>s+i.total_visits,0)||0,monthlyBreakdown:e?.reduce((s,i)=>{const a=i.billing_month;return s[a]||(s[a]={revenue:0,visits:0}),s[a].revenue+=i.total_amount_euros,s[a].visits+=i.total_visits,s},{})||{}}}catch(e){throw console.error("Erreur lors de la récupération des statistiques:",e),e}},GC=as((t,e)=>({configurations:[],reports:[],invoices:[],selectedInvoice:null,isLoading:!1,error:null,fetchConfigurations:async r=>{t({isLoading:!0,error:null});try{const n=await Lje(r);t({configurations:n,isLoading:!1})}catch(n){console.error("Erreur lors du chargement des configurations:",n),t({error:"Erreur lors du chargement des configurations de facturation",isLoading:!1})}},updateConfiguration:async(r,n,s,i)=>{t({isLoading:!0,error:null});try{const a=await Mje(r,n,s,i);t(l=>({configurations:[a,...l.configurations.filter(c=>c.client_id!==n)],isLoading:!1}))}catch(a){throw console.error("Erreur lors de la mise à jour de la configuration:",a),t({error:"Erreur lors de la mise à jour de la configuration",isLoading:!1}),a}},deleteConfiguration:async r=>{t({isLoading:!0,error:null});try{await Rje(r),t(n=>({configurations:n.configurations.filter(s=>s.id!==r),isLoading:!1}))}catch(n){throw console.error("Erreur lors de la suppression de la configuration:",n),t({error:"Erreur lors de la suppression de la configuration",isLoading:!1}),n}},fetchBillingReport:async(r,n)=>{t({isLoading:!0,error:null});try{const s=await Dje(r,n);t({reports:s,isLoading:!1})}catch(s){console.error("Erreur lors du chargement du rapport de facturation:",s),t({error:"Erreur lors du chargement du rapport de facturation",isLoading:!1})}},fetchAllReports:async r=>{t({isLoading:!0,error:null});try{const n=await Ije(r);t({reports:n,isLoading:!1})}catch(n){console.error("Erreur lors du chargement des rapports:",n),t({error:"Erreur lors du chargement des rapports de facturation",isLoading:!1})}},fetchInvoices:async r=>{t({isLoading:!0,error:null});try{const n=await $je(r);t({invoices:n,isLoading:!1})}catch(n){console.error("Erreur lors du chargement des factures:",n),t({error:"Erreur lors du chargement des factures",isLoading:!1})}},fetchInvoiceWithItems:async r=>{t({isLoading:!0,error:null});try{const n=await Fje(r);t({selectedInvoice:n,isLoading:!1})}catch(n){console.error("Erreur lors du chargement de la facture détaillée:",n),t({error:"Erreur lors du chargement de la facture",isLoading:!1})}},generateInvoice:async r=>{t({isLoading:!0,error:null});try{const n=await Bje(r);return await e().fetchInvoices(r.laboratory_id),t({isLoading:!1}),n}catch(n){throw console.error("Erreur lors de la génération de la facture:",n),t({error:"Erreur lors de la génération de la facture. Vérifiez qu'une facture n'existe pas déjà pour cette période.",isLoading:!1}),n}},markInvoiceSent:async r=>{t({isLoading:!0,error:null});try{await zje(r),t(n=>({invoices:n.invoices.map(s=>s.id===r?{...s,status:"envoyee",sent_at:new Date().toISOString()}:s),selectedInvoice:n.selectedInvoice?.id===r?{...n.selectedInvoice,status:"envoyee",sent_at:new Date().toISOString()}:n.selectedInvoice,isLoading:!1}))}catch(n){throw console.error("Erreur lors du marquage de la facture comme envoyée:",n),t({error:"Erreur lors du marquage de la facture comme envoyée",isLoading:!1}),n}},updateInvoiceNotes:async(r,n)=>{t({isLoading:!0,error:null});try{await Uje(r,n),t(s=>({invoices:s.invoices.map(i=>i.id===r?{...i,notes:n}:i),selectedInvoice:s.selectedInvoice?.id===r?{...s.selectedInvoice,notes:n}:s.selectedInvoice,isLoading:!1}))}catch(s){throw console.error("Erreur lors de la mise à jour des notes:",s),t({error:"Erreur lors de la mise à jour des notes",isLoading:!1}),s}},checkInvoiceExists:async(r,n)=>{try{return await qje(r,n)}catch(s){return console.error("Erreur lors de la vérification d'existence de la facture:",s),!1}},getStats:async r=>{try{return await Vje(r)}catch(n){return console.error("Erreur lors du chargement des statistiques:",n),t({error:"Erreur lors du chargement des statistiques"}),null}},clearError:()=>t({error:null}),clearSelectedInvoice:()=>t({selectedInvoice:null})})),Wje=()=>{const{reports:t,configurations:e,invoices:r,isLoading:n,error:s,fetchBillingReport:i,fetchConfigurations:a,fetchInvoices:l,checkInvoiceExists:c,clearError:d}=GC(),[f,p]=w.useState(null),[m,g]=w.useState(new Date().toISOString().slice(0,7)),[y,b]=w.useState(""),[x,j]=w.useState(!1),[S,C]=w.useState([]),[E,N]=w.useState(!1);w.useEffect(()=>{f&&(console.log("🔍 Chargement des données pour le laboratoire:",f),a(f),l(f),P(f))},[f]),w.useEffect(()=>{if(f&&m){console.log("📊 Chargement du rapport pour:",f,m);const F=m+"-01";i(f,F)}},[f,m]),w.useEffect(()=>{f&&m&&(console.log("🔍 Vérification existence facture:",f,m),c(f,m+"-01").then(F=>{console.log("✅ Facture existe:",F),j(F)}).catch(F=>{console.error("❌ Erreur vérification facture:",F),j(!1)}))},[f,m]);const P=async F=>{try{N(!0),console.log("👥 Chargement des clients pour:",F);const V=await WC(F);console.log("✅ Clients chargés:",V.length),C(V)}catch(V){console.error("❌ Erreur chargement clients:",V),C([])}finally{N(!1)}},O=t.filter(F=>F.client_name.toLowerCase().includes(y.toLowerCase())),L=r.filter(F=>F.invoice_number.toLowerCase().includes(y.toLowerCase())),A=S.filter(F=>F.name?.toLowerCase().includes(y.toLowerCase())||!y),R=f?e.filter(F=>F.laboratory_id===f):[];console.log("🔧 Configurations laboratoire:",{selectedLaboratory:f,totalConfigurations:e.length,laboratoryConfigurations:R.length,configIds:R.map(F=>({clientId:F.client_id,type:F.billing_type}))});const M=A.map(F=>{const V=R.find(J=>J.client_id===F.id);return console.log(`👤 Client ${F.name}:`,{id:F.id,laboratory_id:F.laboratory_id,hasConfig:!!V,configType:V?.billing_type,configPrice:V?.price_per_visit||V?.monthly_flat_rate}),{...F,billingConfig:V,hasConfig:!!V}}),D=F=>R.find(V=>V.client_id===F),B={totalClients:O.length,totalVisits:O.reduce((F,V)=>F+V.total_visits,0),unconfiguredClients:O.filter(F=>!F.has_billing_config).length,totalAmount:O.reduce((F,V)=>F+(V.total_amount_euros||0),0)};return{selectedLaboratory:f,selectedMonth:m,searchQuery:y,invoiceExists:x,reports:O,configurations:e,invoices:L,laboratoryClients:M,isLoading:n,clientsLoading:E,error:s,stats:B,setSelectedLaboratory:p,setSelectedMonth:g,setSearchQuery:b,getClientConfiguration:D,clearError:d,debugInfo:{totalReports:t.length,totalConfigurations:e.length,laboratoryConfigurations:R.length,totalInvoices:r.length,totalClients:S.length,clientsWithConfig:M.filter(F=>F.hasConfig).length,clientsWithoutConfig:M.filter(F=>!F.hasConfig).length,selectedLaboratory:f,selectedMonth:m}}},Hje=()=>{const{updateConfiguration:t,isLoading:e}=GC(),[r,n]=w.useState(!1),[s,i]=w.useState(null),[a,l]=w.useState(null),[c,d]=w.useState({billingType:"per_visit",price:""}),f=async(y,b,x,j)=>{try{console.log("💾 Mise à jour configuration inline:",{laboratoryId:y,clientId:b,billingType:x,price:j}),await t(y,b,x,j),console.log("✅ Configuration mise à jour avec succès")}catch(S){throw console.error("❌ Erreur lors de la mise à jour de la configuration:",S),S}},p=(y,b)=>{console.log("🔧 Ouverture modal configuration pour client:",y,b),l(y),b?(d({billingType:b.billing_type,price:(b.price_per_visit||b.monthly_flat_rate||0).toString()}),i(b)):(d({billingType:"per_visit",price:""}),i(null)),n(!0)},m=()=>{n(!1),i(null),l(null),d({billingType:"per_visit",price:""})};return{showConfigModal:r,editingConfig:s,selectedClientId:a,configForm:c,isLoading:e,openConfigModal:p,closeConfigModal:m,handleConfigSubmit:async(y,b)=>{if(y.preventDefault(),!a||!b){console.error("❌ ID client ou laboratoire manquant");return}try{const x=parseFloat(c.price);if(isNaN(x)||x<=0){alert("Veuillez entrer un prix valide");return}console.log("💾 Sauvegarde configuration modal:",{laboratoryId:b,clientId:a,billingType:c.billingType,price:x}),await t(b,a,c.billingType,x),m(),alert("Configuration sauvegardée avec succès !")}catch(x){console.error("❌ Erreur lors de la configuration:",x),alert("Erreur lors de la sauvegarde de la configuration")}},setConfigForm:d,updateClientConfiguration:f}},Gje=()=>{const{generateInvoice:t,markInvoiceSent:e,fetchBillingReport:r,reports:n,isLoading:s}=GC(),[i,a]=w.useState(!1),[l,c]=w.useState([]),d=async(y,b)=>{console.log("📋 Préparation génération facture:",y,b);try{const x=b+"-01";await r(y,x),c(n),a(!0)}catch(x){console.error("❌ Erreur préparation facture:",x),alert("Erreur lors de la préparation de la facture")}},f=()=>{a(!1),c([])};return{showGenerateModal:i,generatePreview:l,isLoading:s,prepareInvoiceGeneration:d,closeGenerateModal:f,confirmInvoiceGeneration:async(y,b)=>{try{console.log("✅ Génération facture confirmée:",y,b);const x=await t({laboratory_id:y,billing_month:b+"-01"});return f(),alert("Facture générée avec succès !"),x}catch(x){throw console.error("❌ Erreur génération facture:",x),alert("Erreur lors de la génération de la facture"),x}},markInvoiceAsSent:async y=>{try{console.log("📧 Marquage facture comme envoyée:",y),await e(y),alert("Facture marquée comme envoyée !")}catch(b){console.error("❌ Erreur marquage facture:",b),alert("Erreur lors du marquage de la facture")}},getGenerationStats:()=>{const y=l.filter(x=>x.has_billing_config&&x.total_visits>0),b=l.filter(x=>!x.has_billing_config&&x.total_visits>0);return{configurableCount:y.length,unconfiguredCount:b.length,totalAmount:y.reduce((x,j)=>x+(j.total_amount_euros||0),0),configurableReports:y,unconfiguredReports:b}}}},Kje=({laboratories:t,selectedLaboratory:e,selectedLaboratoryName:r,labsLoading:n,activeTab:s,onLaboratoryChange:i,onTabChange:a})=>o.jsxs(o.Fragment,{children:[o.jsxs(_e,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Facturation"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Gestion de la facturation des laboratoires"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("select",{className:"h-10 rounded-lg border border-gray-300 bg-white px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 min-w-64",value:e||"",onChange:l=>{console.log("🏥 Laboratoire sélectionné:",l.target.value),i(l.target.value)},disabled:n,children:[o.jsx("option",{value:"",children:n?"Chargement...":"Sélectionner un laboratoire"}),t.map(l=>o.jsx("option",{value:l.id,children:l.name},l.id))]}),n&&o.jsx(Wc,{className:"h-5 w-5 animate-spin text-gray-400"})]})]}),e&&o.jsx("div",{className:"mt-4 p-4 bg-primary-50 rounded-lg border border-primary-200",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dt,{className:"h-5 w-5 text-primary-600"}),o.jsx("span",{className:"font-medium text-primary-800",children:r})]})}),t.length===0&&!n&&o.jsx("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"h-5 w-5 text-yellow-600"}),o.jsx("span",{className:"text-yellow-800",children:"Aucun laboratoire trouvé dans la base de données"})]})})]}),e&&o.jsx(_e,{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ve,{variant:s==="report"?"primary":"ghost",onClick:()=>a("report"),className:"flex items-center gap-2",children:[o.jsx(ji,{className:"h-4 w-4"}),"Compte rendu"]}),o.jsxs(ve,{variant:s==="configuration"?"primary":"ghost",onClick:()=>a("configuration"),className:"flex items-center gap-2",children:[o.jsx(pl,{className:"h-4 w-4"}),"Configuration"]}),o.jsxs(ve,{variant:s==="invoices"?"primary":"ghost",onClick:()=>a("invoices"),className:"flex items-center gap-2",children:[o.jsx(AF,{className:"h-4 w-4"}),"Factures"]})]})})]}),Zje=({selectedMonth:t,searchQuery:e,invoiceExists:r,reports:n,stats:s,onMonthChange:i,onSearchChange:a,onGenerateInvoice:l,onConfigureClient:c,getClientConfiguration:d})=>o.jsxs("div",{className:"space-y-6",children:[o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Période"}),o.jsx(Qe,{type:"month",value:t,onChange:f=>{console.log("📅 Mois sélectionné:",f.target.value),i(f.target.value)},className:"w-48"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recherche"}),o.jsx(Qe,{placeholder:"Rechercher un client...",value:e,onChange:f=>a(f.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"}),className:"w-64"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[r&&o.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[o.jsx(er,{className:"h-4 w-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Facture générée"})]}),o.jsxs(ve,{onClick:l,disabled:n.length===0,className:"flex items-center gap-2",children:[o.jsx(ho,{className:"h-4 w-4"}),r?"Régénérer":"Générer facture"]})]})]})}),o.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Kr,{className:"h-5 w-5 text-blue-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Clients"}),o.jsx("div",{className:"text-2xl font-bold",children:s.totalClients})]})]})}),o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ut,{className:"h-5 w-5 text-green-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Total passages"}),o.jsx("div",{className:"text-2xl font-bold",children:s.totalVisits})]})]})}),o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"h-5 w-5 text-orange-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Non configurés"}),o.jsx("div",{className:"text-2xl font-bold",children:s.unconfiguredClients})]})]})}),o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wv,{className:"h-5 w-5 text-primary-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Total"}),o.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:[s.totalAmount.toFixed(2)," €"]})]})]})})]}),o.jsx(_e,{children:o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Détail par client"}),n.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx(ji,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"Aucune donnée de facturation pour cette période"}),o.jsx("p",{className:"text-sm mt-2",children:"Vérifiez que des livraisons ont eu lieu ce mois-ci"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left py-3 font-medium text-gray-500",children:"Client"}),o.jsx("th",{className:"text-center py-3 font-medium text-gray-500",children:"Livraisons"}),o.jsx("th",{className:"text-center py-3 font-medium text-gray-500",children:"Récupérations"}),o.jsx("th",{className:"text-center py-3 font-medium text-gray-500",children:"Mixtes"}),o.jsx("th",{className:"text-left py-3 font-medium text-gray-500",children:"Configuration"}),o.jsx("th",{className:"text-right py-3 font-medium text-gray-500",children:"Montant"}),o.jsx("th",{className:"text-center py-3 font-medium text-gray-500",children:"Actions"})]})}),o.jsx("tbody",{children:n.map(f=>{const p=d(f.client_id),m=f.has_billing_config;return o.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[o.jsx("td",{className:"py-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${m?"bg-green-400":"bg-red-400"}`}),o.jsx("span",{className:"font-medium",children:f.client_name})]})}),o.jsx("td",{className:"py-4 text-center",children:o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-600 rounded-lg text-sm",children:[o.jsx(ut,{className:"h-3 w-3"}),f.delivery_count]})}),o.jsx("td",{className:"py-4 text-center",children:o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-50 text-orange-600 rounded-lg text-sm",children:[o.jsx(Rn,{className:"h-3 w-3"}),f.pickup_count]})}),o.jsx("td",{className:"py-4 text-center",children:o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-600 rounded-lg text-sm",children:[o.jsx(AF,{className:"h-3 w-3"}),f.both_count]})}),o.jsx("td",{className:"py-4",children:m?o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium",children:f.billing_type==="monthly_flat_rate"?"Forfait mensuel":"Par passage"}),o.jsx("div",{className:"text-gray-500",children:f.billing_type==="monthly_flat_rate"?`${f.monthly_flat_rate} €/mois`:`${f.price_per_visit} €/passage`})]}):o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-600 rounded-lg text-sm",children:[o.jsx(sr,{className:"h-3 w-3"}),"Non configuré"]})}),o.jsx("td",{className:"py-4 text-right",children:o.jsx("span",{className:`font-bold ${m?"text-primary-600":"text-gray-400"}`,children:m?`${f.total_amount_euros.toFixed(2)} €`:"0 €"})}),o.jsx("td",{className:"py-4 text-center",children:o.jsx(ve,{variant:"ghost",size:"sm",onClick:()=>c(f.client_id,p),className:"text-primary-600 hover:text-primary-700",children:o.jsx(pl,{className:"h-4 w-4"})})})]},f.client_id)})})]})})]})})]}),Xje=({laboratoryClients:t,clientsLoading:e,searchQuery:r,onSearchChange:n,onUpdateClientConfig:s})=>{const[i,a]=w.useState({});w.useEffect(()=>{const g={};t.forEach(y=>{i[y.id]||(g[y.id]={billingType:y.billingConfig?.billing_type||"per_visit",price:y.billingConfig?(y.billingConfig.price_per_visit||y.billingConfig.monthly_flat_rate||"").toString():"",isEditing:!1,isSaving:!1})}),Object.keys(g).length>0&&a(y=>({...y,...g}))},[t]);const l=(g,y)=>{a(b=>({...b,[g]:{...b[g],...y}}))},c=(g,y)=>{l(g,{billingType:y,isEditing:!0,price:i[g]?.price||""})},d=(g,y)=>{l(g,{price:y,isEditing:!0})},f=async g=>{const y=i[g];if(!y||!y.price)return;const b=parseFloat(y.price);if(isNaN(b)||b<=0){alert("Veuillez entrer un prix valide");return}try{l(g,{isSaving:!0}),await s(g,y.billingType,b),l(g,{isEditing:!1,isSaving:!1})}catch(x){console.error("Erreur sauvegarde:",x),l(g,{isSaving:!1})}},p=g=>{const y=t.find(b=>b.id===g);l(g,{billingType:y?.billingConfig?.billing_type||"per_visit",price:y?.billingConfig?(y.billingConfig.price_per_visit||y.billingConfig.monthly_flat_rate||"").toString():"",isEditing:!1})},m=g=>{switch(g){case"dentist":return{emoji:"🦷",label:"Dentiste",color:"bg-blue-50 text-blue-700 border-blue-200"};case"laboratory":return{emoji:"🧪",label:"Laboratoire",color:"bg-purple-50 text-purple-700 border-purple-200"};case"depot":return{emoji:"📦",label:"Dépôt",color:"bg-orange-50 text-orange-700 border-orange-200"};default:return{emoji:"📋",label:"Client",color:"bg-gray-50 text-gray-700 border-gray-200"}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configuration des tarifs"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Définissez les tarifs de facturation pour chaque client"})]}),o.jsx("div",{className:"w-80",children:o.jsx(Qe,{placeholder:"Rechercher un client...",value:r,onChange:g=>n(g.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"})})})]}),e&&o.jsxs("div",{className:"flex items-center justify-center py-12",children:[o.jsx(Wc,{className:"h-8 w-8 animate-spin text-primary-500"}),o.jsx("span",{className:"ml-3 text-gray-600",children:"Chargement des clients..."})]}),!e&&o.jsxs(o.Fragment,{children:[t.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx(Kr,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun client trouvé"}),o.jsx("p",{className:"text-gray-600",children:"Ce laboratoire n'a pas encore de clients enregistrés"})]}):o.jsx("div",{className:"space-y-4",children:t.map(g=>{const y=i[g.id],b=m(g.client_type),x=g.hasConfig,j=y?.isEditing||!1,S=y?.isSaving||!1,C=j&&y?.price;return o.jsx(_e,{className:`p-6 transition-colors ${x&&!j?"border border-gray-200 hover:border-gray-300":"border-2 border-red-300 hover:border-red-400 bg-red-50/30"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${x&&!j?"bg-green-100":"bg-gray-100"}`,children:x&&!j?o.jsx(Er,{className:"h-5 w-5 text-green-600"}):o.jsx(Kr,{className:"h-5 w-5 text-gray-400"})})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:g.name||"Client sans nom"}),o.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${b.color}`,children:[o.jsx("span",{className:"mr-1",children:b.emoji}),b.label]})]}),x&&!j&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.billingConfig?.billing_type==="monthly_flat_rate"?`Forfait mensuel : ${g.billingConfig.monthly_flat_rate} €`:`Prix par passage : ${g.billingConfig?.price_per_visit} €`})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[o.jsx(ve,{size:"sm",variant:"ghost",className:`px-4 py-2 text-sm font-medium transition-all ${y?.billingType==="per_visit"?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>c(g.id,"per_visit"),disabled:S,children:"Au passage"}),o.jsx(ve,{size:"sm",variant:"ghost",className:`px-4 py-2 text-sm font-medium transition-all ${y?.billingType==="monthly_flat_rate"?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,onClick:()=>c(g.id,"monthly_flat_rate"),disabled:S,children:"Forfait"})]}),o.jsx("div",{className:"w-32",children:o.jsx(Qe,{type:"number",min:"0",step:"0.01",placeholder:"0.00",value:y?.price||"",onChange:E=>d(g.id,E.target.value),leftIcon:o.jsx(Wv,{className:"h-4 w-4"}),className:"text-right",disabled:S})}),o.jsx("div",{className:"flex items-center space-x-2",children:C&&o.jsxs(o.Fragment,{children:[o.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>p(g.id),disabled:S,className:"text-gray-500 hover:text-gray-700",children:"Annuler"}),o.jsx(ve,{size:"sm",onClick:()=>f(g.id),disabled:S,className:"bg-primary-600 hover:bg-primary-700 text-white",children:S?o.jsx(Wc,{className:"h-4 w-4 animate-spin"}):"Enregistrer"})]})})]})]})},g.id)})}),t.length>0&&o.jsx(_e,{className:"p-6 bg-gray-50 border-gray-200",children:o.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:t.length}),o.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Total clients"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:t.filter(g=>g.hasConfig).length}),o.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Configurés"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-1",children:t.filter(g=>!g.hasConfig).length}),o.jsx("div",{className:"text-sm font-medium text-gray-600",children:"À configurer"})]})]})})]})]})},Yje=({invoices:t,searchQuery:e,onSearchChange:r,onMarkAsSent:n,onViewInvoice:s})=>o.jsxs("div",{className:"space-y-6",children:[o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Factures générées"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Historique et gestion des factures"})]}),o.jsx(Qe,{placeholder:"Rechercher une facture...",value:e,onChange:i=>r(i.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"}),className:"w-64"})]})}),t.length===0?o.jsx(_e,{className:"p-12",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx(ji,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"Aucune facture générée"}),o.jsx("p",{className:"text-sm mt-2",children:`Générez votre première facture depuis l'onglet "Compte rendu"`})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ji,{className:"h-5 w-5 text-blue-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Total factures"}),o.jsx("div",{className:"text-2xl font-bold",children:t.length})]})]})}),o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bt,{className:"h-5 w-5 text-yellow-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Éditées"}),o.jsx("div",{className:"text-2xl font-bold",children:t.filter(i=>i.status==="editee").length})]})]})}),o.jsx(_e,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(er,{className:"h-5 w-5 text-green-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Envoyées"}),o.jsx("div",{className:"text-2xl font-bold",children:t.filter(i=>i.status==="envoyee").length})]})]})})]}),o.jsx("div",{className:"grid gap-4",children:t.map(i=>o.jsxs(_e,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:o.jsx(ji,{className:"h-6 w-6 text-primary-600"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:i.invoice_number}),o.jsxs("div",{className:"text-sm text-gray-600",children:[new Date(i.billing_period_start).toLocaleDateString("fr-FR")," - "," ",new Date(i.billing_period_end).toLocaleDateString("fr-FR")]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${i.status==="envoyee"?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700"}`,children:i.status==="envoyee"?o.jsxs(o.Fragment,{children:[o.jsx(er,{className:"h-3 w-3"}),"Envoyée"]}):o.jsxs(o.Fragment,{children:[o.jsx(bt,{className:"h-3 w-3"}),"Éditée"]})}),o.jsxs("span",{className:"text-sm font-medium text-primary-600",children:[i.total_amount_euros.toFixed(2)," €"]}),i.sent_at&&o.jsxs("span",{className:"text-xs text-gray-500",children:["Envoyée le ",new Date(i.sent_at).toLocaleDateString("fr-FR")]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>s(i.id),children:[o.jsx(kE,{className:"h-4 w-4 mr-2"}),"Voir"]}),i.status==="editee"&&o.jsxs(ve,{size:"sm",onClick:()=>n(i.id),className:"bg-green-600 hover:bg-green-700",children:[o.jsx(BQ,{className:"h-4 w-4 mr-2"}),"Marquer envoyée"]})]})]}),i.notes&&o.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:"Notes :"})," ",i.notes]})})]},i.id))}),o.jsxs(_e,{className:"p-4",children:[o.jsx("h4",{className:"font-medium mb-3",children:"Résumé financier"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Montant total facturé"}),o.jsxs("div",{className:"text-xl font-bold text-primary-600",children:[t.reduce((i,a)=>i+a.total_amount_euros,0).toFixed(2)," €"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Montant envoyé"}),o.jsxs("div",{className:"text-xl font-bold text-green-600",children:[t.filter(i=>i.status==="envoyee").reduce((i,a)=>i+a.total_amount_euros,0).toFixed(2)," €"]})]})]})]})]})]}),Jje=({isOpen:t,isLoading:e,editingConfig:r,configForm:n,onClose:s,onSubmit:i,onFormChange:a})=>o.jsx(Rt,{children:t&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-lg",onClick:l=>l.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pl,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-semibold",children:r?"Modifier la configuration":"Nouvelle configuration"})]}),o.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(tr,{className:"h-5 w-5"})})]})}),o.jsxs("form",{onSubmit:i,className:"p-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Type de facturation"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs(ve,{type:"button",variant:n.billingType==="monthly_flat_rate"?"primary":"outline",onClick:()=>a({...n,billingType:"monthly_flat_rate"}),className:"h-16 flex flex-col items-center justify-center gap-1",children:[o.jsx(fo,{className:"h-5 w-5"}),o.jsx("span",{className:"text-sm",children:"Forfait mensuel"})]}),o.jsxs(ve,{type:"button",variant:n.billingType==="per_visit"?"primary":"outline",onClick:()=>a({...n,billingType:"per_visit"}),className:"h-16 flex flex-col items-center justify-center gap-1",children:[o.jsx(ut,{className:"h-5 w-5"}),o.jsx("span",{className:"text-sm",children:"Par passage"})]})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Prix ",n.billingType==="monthly_flat_rate"?"mensuel":"par passage"," (€)"]}),o.jsx(Qe,{type:"number",min:"0",step:"0.01",value:n.price,onChange:l=>a({...n,price:l.target.value}),leftIcon:o.jsx(Wv,{className:"h-4 w-4"}),required:!0,className:"text-lg"})]})]}),o.jsxs("div",{className:"flex gap-3 mt-8",children:[o.jsx(ve,{type:"button",variant:"outline",className:"flex-1",onClick:s,children:"Annuler"}),o.jsxs(ve,{type:"submit",className:"flex-1",disabled:e,children:[e?o.jsx(Wc,{className:"h-4 w-4 animate-spin mr-2"}):null,r?"Enregistrer":"Créer"]})]})]})]})})}),Qje=({isOpen:t,isLoading:e,invoiceExists:r,selectedLaboratoryName:n,selectedMonth:s,generationStats:i,onClose:a,onConfirm:l})=>o.jsx(Rt,{children:t&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs(Ae.div,{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",onClick:c=>c.stopPropagation(),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ji,{className:"h-5 w-5 text-primary-500"}),o.jsx("h2",{className:"text-lg font-semibold",children:r?"Régénérer la facture":"Générer une facture"})]}),o.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(tr,{className:"h-5 w-5"})})]})}),o.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(yl,{className:"h-5 w-5 text-blue-600"}),o.jsx("span",{className:"font-medium text-blue-900",children:"Aperçu de la facture"})]}),o.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Laboratoire :"})," ",n]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Période :"})," ",new Date(s).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Clients concernés :"})," ",i.configurableCount]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Total :"})," ",i.totalAmount.toFixed(2)," €"]})]})]})}),r&&o.jsx("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"h-5 w-5 text-orange-600"}),o.jsx("span",{className:"font-medium text-orange-900",children:"Une facture existe déjà pour cette période. La régénération remplacera la facture existante."})]})}),i.configurableCount>0&&o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsx("h3",{className:"font-medium text-gray-900",children:"Détail des lignes de facturation"}),o.jsx("div",{className:"space-y-2",children:i.configurableReports.map(c=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:c.client_name}),o.jsxs("div",{className:"text-sm text-gray-600",children:[c.total_visits," passages - ",c.billing_type==="monthly_flat_rate"?"Forfait mensuel":`${c.price_per_visit} € par passage`]})]}),o.jsxs("div",{className:"font-bold text-primary-600",children:[c.total_amount_euros.toFixed(2)," €"]})]},c.client_id))})]}),i.unconfiguredCount>0&&o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(sr,{className:"h-5 w-5 text-red-600"}),o.jsx("span",{className:"font-medium text-red-900",children:"Clients non configurés"})]}),o.jsx("div",{className:"text-sm text-red-800 mb-2",children:"Les clients suivants ont des passages mais aucune configuration de prix :"}),o.jsx("div",{className:"space-y-1",children:i.unconfiguredReports.map(c=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-red-100 rounded text-sm",children:[o.jsx("span",{children:c.client_name}),o.jsxs("span",{className:"text-red-700 font-medium",children:[c.total_visits," passages"]})]},c.client_id))})]})}),i.configurableCount===0&&o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(sr,{className:"h-5 w-5 text-yellow-600"}),o.jsx("span",{className:"font-medium text-yellow-900",children:"Aucun client facturable"})]}),o.jsx("div",{className:"text-sm text-yellow-800",children:"Aucun client n'a de configuration de prix pour cette période. Veuillez configurer les tarifs avant de générer une facture."})]})})]}),o.jsx("div",{className:"p-6 border-t bg-gray-50",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx(ve,{variant:"outline",className:"flex-1",onClick:a,disabled:e,children:"Annuler"}),o.jsxs(ve,{onClick:l,className:"flex-1 bg-green-600 hover:bg-green-700",disabled:e||i.configurableCount===0,children:[e?o.jsx(Wc,{className:"h-4 w-4 animate-spin mr-2"}):o.jsx(Er,{className:"h-4 w-4 mr-2"}),r?"Régénérer":"Confirmer génération"]})]})})]})})}),e1e=()=>{const{laboratories:t,fetchLaboratories:e,isLoading:r}=DB(),[n,s]=w.useState("report");w.useEffect(()=>{console.log("🔄 Chargement des laboratoires depuis Supabase..."),e()},[]);const{selectedLaboratory:i,selectedMonth:a,searchQuery:l,invoiceExists:c,reports:d,invoices:f,laboratoryClients:p,isLoading:m,clientsLoading:g,error:y,stats:b,setSelectedLaboratory:x,setSelectedMonth:j,setSearchQuery:S,getClientConfiguration:C,clearError:E,debugInfo:N}=Wje(),{showConfigModal:P,editingConfig:O,configForm:L,openConfigModal:A,closeConfigModal:R,handleConfigSubmit:M,setConfigForm:D,updateClientConfiguration:B}=Hje(),{showGenerateModal:F,prepareInvoiceGeneration:V,closeGenerateModal:J,confirmInvoiceGeneration:G,markInvoiceAsSent:q,getGenerationStats:U}=Gje(),W=t.find(K=>K.id===i)?.name,I=U();console.log("🔍 Debug Billing Page:",N),console.log("🏥 Laboratoires chargés:",t.length,t.map(K=>({id:K.id,name:K.name})));const H=K=>{console.log("📄 Affichage facture:",K),alert("Vue détaillée de la facture à implémenter")},ne=()=>{i&&V(i,a)},ge=()=>{i&&G(i,a)};return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsx(Kje,{laboratories:t,selectedLaboratory:i,selectedLaboratoryName:W,labsLoading:r,activeTab:n,onLaboratoryChange:x,onTabChange:s}),y&&o.jsx(_e,{className:"p-4 border-red-200 bg-red-50",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{className:"h-5 w-5 text-red-500"}),o.jsx("span",{className:"text-red-700",children:y}),o.jsx(ve,{variant:"ghost",size:"sm",onClick:E,className:"ml-auto",children:o.jsx(tr,{className:"h-4 w-4"})})]})}),m&&o.jsx(_e,{className:"p-8",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx(Wc,{className:"h-8 w-8 animate-spin text-primary-500"}),o.jsx("span",{className:"ml-2 text-gray-600",children:"Chargement..."})]})}),!m&&i&&o.jsxs(o.Fragment,{children:[n==="report"&&o.jsx(Zje,{selectedMonth:a,searchQuery:l,invoiceExists:c,reports:d,stats:b,onMonthChange:j,onSearchChange:S,onGenerateInvoice:ne,onConfigureClient:A,getClientConfiguration:C}),n==="configuration"&&o.jsx(Xje,{laboratoryClients:p,clientsLoading:g,searchQuery:l,onSearchChange:S,onUpdateClientConfig:(K,de,ue)=>i?B(i,K,de,ue):Promise.reject("No laboratory selected")}),n==="invoices"&&o.jsx(Yje,{invoices:f,searchQuery:l,onSearchChange:S,onMarkAsSent:q,onViewInvoice:H})]}),o.jsx(Jje,{isOpen:P,isLoading:m,editingConfig:O,configForm:L,onClose:R,onSubmit:K=>i&&M(K,i),onFormChange:D}),o.jsx(Qje,{isOpen:F,isLoading:m,invoiceExists:c,selectedLaboratoryName:W,selectedMonth:a,generationStats:I,onClose:J,onConfirm:ge})]})};function t1e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return w.useMemo(()=>n=>{e.forEach(s=>s(n))},e)}const My=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zu(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function KC(t){return"nodeType"in t}function In(t){var e,r;return t?zu(t)?t:KC(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function ZC(t){const{Document:e}=In(t);return t instanceof e}function tp(t){return zu(t)?!1:t instanceof In(t).HTMLElement}function xq(t){return t instanceof In(t).SVGElement}function Uu(t){return t?zu(t)?t.document:KC(t)?ZC(t)?t:tp(t)||xq(t)?t.ownerDocument:document:document:document}const Ti=My?w.useLayoutEffect:w.useEffect;function XC(t){const e=w.useRef(t);return Ti(()=>{e.current=t}),w.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.current==null?void 0:e.current(...n)},[])}function r1e(){const t=w.useRef(null),e=w.useCallback((n,s)=>{t.current=setInterval(n,s)},[]),r=w.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Lh(t,e){e===void 0&&(e=[t]);const r=w.useRef(t);return Ti(()=>{r.current!==t&&(r.current=t)},e),r}function rp(t,e){const r=w.useRef();return w.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Pv(t){const e=XC(t),r=w.useRef(null),n=w.useCallback(s=>{s!==r.current&&e?.(s,r.current),r.current=s},[]);return[r,n]}function AN(t){const e=w.useRef();return w.useEffect(()=>{e.current=t},[t]),e.current}let c1={};function np(t,e){return w.useMemo(()=>{if(e)return e;const r=c1[t]==null?0:c1[t]+1;return c1[t]=r,t+"-"+r},[t,e])}function bq(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((i,a)=>{const l=Object.entries(a);for(const[c,d]of l){const f=i[c];f!=null&&(i[c]=f+t*d)}return i},{...e})}}const Fc=bq(1),Mh=bq(-1);function n1e(t){return"clientX"in t&&"clientY"in t}function YC(t){if(!t)return!1;const{KeyboardEvent:e}=In(t.target);return e&&t instanceof e}function s1e(t){if(!t)return!1;const{TouchEvent:e}=In(t.target);return e&&t instanceof e}function TN(t){if(s1e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return n1e(t)?{x:t.clientX,y:t.clientY}:null}const Rh=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Rh.Translate.toString(t),Rh.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),J5="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function i1e(t){return t.matches(J5)?t:t.querySelector(J5)}const a1e={display:"none"};function o1e(t){let{id:e,value:r}=t;return z.createElement("div",{id:e,style:a1e},r)}function l1e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return z.createElement("div",{id:e,style:s,role:"status","aria-live":n,"aria-atomic":!0},r)}function c1e(){const[t,e]=w.useState("");return{announce:w.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const wq=w.createContext(null);function u1e(t){const e=w.useContext(wq);w.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function d1e(){const[t]=w.useState(()=>new Set),e=w.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[w.useCallback(n=>{let{type:s,event:i}=n;t.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[t]),e]}const f1e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},h1e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function p1e(t){let{announcements:e=h1e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:s=f1e}=t;const{announce:i,announcement:a}=c1e(),l=np("DndLiveRegion"),[c,d]=w.useState(!1);if(w.useEffect(()=>{d(!0)},[]),u1e(w.useMemo(()=>({onDragStart(p){let{active:m}=p;i(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:g}=p;e.onDragMove&&i(e.onDragMove({active:m,over:g}))},onDragOver(p){let{active:m,over:g}=p;i(e.onDragOver({active:m,over:g}))},onDragEnd(p){let{active:m,over:g}=p;i(e.onDragEnd({active:m,over:g}))},onDragCancel(p){let{active:m,over:g}=p;i(e.onDragCancel({active:m,over:g}))}}),[i,e])),!c)return null;const f=z.createElement(z.Fragment,null,z.createElement(o1e,{id:n,value:s.draggable}),z.createElement(l1e,{id:l,announcement:a}));return r?Js.createPortal(f,r):f}var Lr;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Lr||(Lr={}));function Ov(){}function Q5(t,e){return w.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function m1e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return w.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const ai=Object.freeze({x:0,y:0});function _q(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function jq(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function g1e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function e3(t){let{left:e,top:r,height:n,width:s}=t;return[{x:e,y:r},{x:e+s,y:r},{x:e,y:r+n},{x:e+s,y:r+n}]}function Sq(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function t3(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const v1e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const s=t3(e,e.left,e.top),i=[];for(const a of n){const{id:l}=a,c=r.get(l);if(c){const d=_q(t3(c),s);i.push({id:l,data:{droppableContainer:a,value:d}})}}return i.sort(jq)},y1e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const s=e3(e),i=[];for(const a of n){const{id:l}=a,c=r.get(l);if(c){const d=e3(c),f=s.reduce((m,g,y)=>m+_q(d[y],g),0),p=Number((f/4).toFixed(4));i.push({id:l,data:{droppableContainer:a,value:p}})}}return i.sort(jq)};function x1e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-n,l=i-r;if(n<s&&r<i){const c=e.width*e.height,d=t.width*t.height,f=a*l,p=f/(c+d-f);return Number(p.toFixed(4))}return 0}const b1e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const s=[];for(const i of n){const{id:a}=i,l=r.get(a);if(l){const c=x1e(l,e);c>0&&s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(g1e)};function w1e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function Nq(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ai}function _1e(t){return function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+t*l.y,bottom:a.bottom+t*l.y,left:a.left+t*l.x,right:a.right+t*l.x}),{...r})}}const j1e=_1e(1);function S1e(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function N1e(t,e,r){const n=S1e(e);if(!n)return t;const{scaleX:s,scaleY:i,x:a,y:l}=n,c=t.left-a-(1-s)*parseFloat(r),d=t.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),f=s?t.width/s:t.width,p=i?t.height/i:t.height;return{width:f,height:p,top:d,right:c+f,bottom:d+p,left:c}}const E1e={ignoreTransform:!1};function qu(t,e){e===void 0&&(e=E1e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:f}=In(t).getComputedStyle(t);d&&(r=N1e(r,d,f))}const{top:n,left:s,width:i,height:a,bottom:l,right:c}=r;return{top:n,left:s,width:i,height:a,bottom:l,right:c}}function r3(t){return qu(t,{ignoreTransform:!0})}function C1e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function k1e(t,e){return e===void 0&&(e=In(t).getComputedStyle(t)),e.position==="fixed"}function P1e(t,e){e===void 0&&(e=In(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?r.test(i):!1})}function Ry(t,e){const r=[];function n(s){if(e!=null&&r.length>=e||!s)return r;if(ZC(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!tp(s)||xq(s)||r.includes(s))return r;const i=In(t).getComputedStyle(s);return s!==t&&P1e(s,i)&&r.push(s),k1e(s,i)?r:n(s.parentNode)}return t?n(t):r}function Eq(t){const[e]=Ry(t,1);return e??null}function u1(t){return!My||!t?null:zu(t)?t:KC(t)?ZC(t)||t===Uu(t).scrollingElement?window:tp(t)?t:null:null}function Cq(t){return zu(t)?t.scrollX:t.scrollLeft}function kq(t){return zu(t)?t.scrollY:t.scrollTop}function LN(t){return{x:Cq(t),y:kq(t)}}var Wr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Wr||(Wr={}));function Pq(t){return!My||!t?!1:t===document.scrollingElement}function Oq(t){const e={x:0,y:0},r=Pq(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=n.y,l=t.scrollLeft>=n.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:n,minScroll:e}}const O1e={x:.2,y:.2};function A1e(t,e,r,n,s){let{top:i,left:a,right:l,bottom:c}=r;n===void 0&&(n=10),s===void 0&&(s=O1e);const{isTop:d,isBottom:f,isLeft:p,isRight:m}=Oq(t),g={x:0,y:0},y={x:0,y:0},b={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+b.height?(g.y=Wr.Backward,y.y=n*Math.abs((e.top+b.height-i)/b.height)):!f&&c>=e.bottom-b.height&&(g.y=Wr.Forward,y.y=n*Math.abs((e.bottom-b.height-c)/b.height)),!m&&l>=e.right-b.width?(g.x=Wr.Forward,y.x=n*Math.abs((e.right-b.width-l)/b.width)):!p&&a<=e.left+b.width&&(g.x=Wr.Backward,y.x=n*Math.abs((e.left+b.width-a)/b.width)),{direction:g,speed:y}}function T1e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:r,right:n,bottom:s}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Aq(t){return t.reduce((e,r)=>Fc(e,LN(r)),ai)}function L1e(t){return t.reduce((e,r)=>e+Cq(r),0)}function M1e(t){return t.reduce((e,r)=>e+kq(r),0)}function R1e(t,e){if(e===void 0&&(e=qu),!t)return;const{top:r,left:n,bottom:s,right:i}=e(t);Eq(t)&&(s<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const D1e=[["x",["left","right"],L1e],["y",["top","bottom"],M1e]];class JC{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Ry(r),s=Aq(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,l]of D1e)for(const c of a)Object.defineProperty(this,c,{get:()=>{const d=l(n),f=s[i]-d;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Nf{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var s;(s=this.target)==null||s.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function I1e(t){const{EventTarget:e}=In(t);return t instanceof e?t:Uu(t)}function d1(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Ns;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ns||(Ns={}));function n3(t){t.preventDefault()}function $1e(t){t.stopPropagation()}var wt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(wt||(wt={}));const Tq={start:[wt.Space,wt.Enter],cancel:[wt.Esc],end:[wt.Space,wt.Enter,wt.Tab]},F1e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case wt.Right:return{...r,x:r.x+25};case wt.Left:return{...r,x:r.x-25};case wt.Down:return{...r,y:r.y+25};case wt.Up:return{...r,y:r.y-25}}};class QC{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Nf(Uu(r)),this.windowListeners=new Nf(In(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ns.Resize,this.handleCancel),this.windowListeners.add(Ns.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ns.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&R1e(n),r(ai)}handleKeyDown(e){if(YC(e)){const{active:r,context:n,options:s}=this.props,{keyboardCodes:i=Tq,coordinateGetter:a=F1e,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:d}=n.current,f=d?{x:d.left,y:d.top}:ai;this.referenceCoordinates||(this.referenceCoordinates=f);const p=a(e,{active:r,context:n.current,currentCoordinates:f});if(p){const m=Mh(p,f),g={x:0,y:0},{scrollableAncestors:y}=n.current;for(const b of y){const x=e.code,{isTop:j,isRight:S,isLeft:C,isBottom:E,maxScroll:N,minScroll:P}=Oq(b),O=T1e(b),L={x:Math.min(x===wt.Right?O.right-O.width/2:O.right,Math.max(x===wt.Right?O.left:O.left+O.width/2,p.x)),y:Math.min(x===wt.Down?O.bottom-O.height/2:O.bottom,Math.max(x===wt.Down?O.top:O.top+O.height/2,p.y))},A=x===wt.Right&&!S||x===wt.Left&&!C,R=x===wt.Down&&!E||x===wt.Up&&!j;if(A&&L.x!==p.x){const M=b.scrollLeft+m.x,D=x===wt.Right&&M<=N.x||x===wt.Left&&M>=P.x;if(D&&!m.y){b.scrollTo({left:M,behavior:l});return}D?g.x=b.scrollLeft-M:g.x=x===wt.Right?b.scrollLeft-N.x:b.scrollLeft-P.x,g.x&&b.scrollBy({left:-g.x,behavior:l});break}else if(R&&L.y!==p.y){const M=b.scrollTop+m.y,D=x===wt.Down&&M<=N.y||x===wt.Up&&M>=P.y;if(D&&!m.x){b.scrollTo({top:M,behavior:l});return}D?g.y=b.scrollTop-M:g.y=x===wt.Down?b.scrollTop-N.y:b.scrollTop-P.y,g.y&&b.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,Fc(Mh(p,this.referenceCoordinates),g))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}QC.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=Tq,onActivation:s}=e,{active:i}=r;const{code:a}=t.nativeEvent;if(n.start.includes(a)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s?.({event:t.nativeEvent}),!0)}return!1}}];function s3(t){return!!(t&&"distance"in t)}function i3(t){return!!(t&&"delay"in t)}class ek{constructor(e,r,n){var s;n===void 0&&(n=I1e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:a}=i;this.props=e,this.events=r,this.document=Uu(a),this.documentListeners=new Nf(this.document),this.listeners=new Nf(n),this.windowListeners=new Nf(In(a)),this.initialCoordinates=(s=TN(i))!=null?s:ai,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ns.Resize,this.handleCancel),this.windowListeners.add(Ns.DragStart,n3),this.windowListeners.add(Ns.VisibilityChange,this.handleCancel),this.windowListeners.add(Ns.ContextMenu,n3),this.documentListeners.add(Ns.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(i3(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(s3(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:s}=this.props;s(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ns.Click,$1e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ns.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const c=(r=TN(e))!=null?r:ai,d=Mh(s,c);if(!n&&l){if(s3(l)){if(l.tolerance!=null&&d1(d,l.tolerance))return this.handleCancel();if(d1(d,l.distance))return this.handleStart()}if(i3(l)&&d1(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}e.cancelable&&e.preventDefault(),a(c)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===wt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const B1e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class tk extends ek{constructor(e){const{event:r}=e,n=Uu(r.target);super(e,B1e,n)}}tk.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n?.({event:r}),!0)}}];const z1e={move:{name:"mousemove"},end:{name:"mouseup"}};var MN;(function(t){t[t.RightClick=2]="RightClick"})(MN||(MN={}));class U1e extends ek{constructor(e){super(e,z1e,Uu(e.event.target))}}U1e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===MN.RightClick?!1:(n?.({event:r}),!0)}}];const f1={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class q1e extends ek{constructor(e){super(e,f1)}static setup(){return window.addEventListener(f1.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(f1.move.name,e)};function e(){}}}q1e.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:s}=r;return s.length>1?!1:(n?.({event:r}),!0)}}];var Ef;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Ef||(Ef={}));var Av;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Av||(Av={}));function V1e(t){let{acceleration:e,activator:r=Ef.Pointer,canScroll:n,draggingRect:s,enabled:i,interval:a=5,order:l=Av.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:f,delta:p,threshold:m}=t;const g=H1e({delta:p,disabled:!i}),[y,b]=r1e(),x=w.useRef({x:0,y:0}),j=w.useRef({x:0,y:0}),S=w.useMemo(()=>{switch(r){case Ef.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ef.DraggableRect:return s}},[r,s,c]),C=w.useRef(null),E=w.useCallback(()=>{const P=C.current;if(!P)return;const O=x.current.x*j.current.x,L=x.current.y*j.current.y;P.scrollBy(O,L)},[]),N=w.useMemo(()=>l===Av.TreeOrder?[...d].reverse():d,[l,d]);w.useEffect(()=>{if(!i||!d.length||!S){b();return}for(const P of N){if(n?.(P)===!1)continue;const O=d.indexOf(P),L=f[O];if(!L)continue;const{direction:A,speed:R}=A1e(P,L,S,e,m);for(const M of["x","y"])g[M][A[M]]||(R[M]=0,A[M]=0);if(R.x>0||R.y>0){b(),C.current=P,y(E,a),x.current=R,j.current=A;return}}x.current={x:0,y:0},j.current={x:0,y:0},b()},[e,E,n,b,i,a,JSON.stringify(S),JSON.stringify(g),y,d,N,f,JSON.stringify(m)])}const W1e={x:{[Wr.Backward]:!1,[Wr.Forward]:!1},y:{[Wr.Backward]:!1,[Wr.Forward]:!1}};function H1e(t){let{delta:e,disabled:r}=t;const n=AN(e);return rp(s=>{if(r||!n||!s)return W1e;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Wr.Backward]:s.x[Wr.Backward]||i.x===-1,[Wr.Forward]:s.x[Wr.Forward]||i.x===1},y:{[Wr.Backward]:s.y[Wr.Backward]||i.y===-1,[Wr.Forward]:s.y[Wr.Forward]||i.y===1}}},[r,e,n])}function G1e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return rp(s=>{var i;return e==null?null:(i=n??s)!=null?i:null},[n,e])}function K1e(t,e){return w.useMemo(()=>t.reduce((r,n)=>{const{sensor:s}=n,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,n)}));return[...r,...i]},[]),[t,e])}var Dh;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Dh||(Dh={}));var RN;(function(t){t.Optimized="optimized"})(RN||(RN={}));const a3=new Map;function Z1e(t,e){let{dragging:r,dependencies:n,config:s}=e;const[i,a]=w.useState(null),{frequency:l,measure:c,strategy:d}=s,f=w.useRef(t),p=x(),m=Lh(p),g=w.useCallback(function(j){j===void 0&&(j=[]),!m.current&&a(S=>S===null?j:S.concat(j.filter(C=>!S.includes(C))))},[m]),y=w.useRef(null),b=rp(j=>{if(p&&!r)return a3;if(!j||j===a3||f.current!==t||i!=null){const S=new Map;for(let C of t){if(!C)continue;if(i&&i.length>0&&!i.includes(C.id)&&C.rect.current){S.set(C.id,C.rect.current);continue}const E=C.node.current,N=E?new JC(c(E),E):null;C.rect.current=N,N&&S.set(C.id,N)}return S}return j},[t,i,r,p,c]);return w.useEffect(()=>{f.current=t},[t]),w.useEffect(()=>{p||g()},[r,p]),w.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),w.useEffect(()=>{p||typeof l!="number"||y.current!==null||(y.current=setTimeout(()=>{g(),y.current=null},l))},[l,p,g,...n]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function x(){switch(d){case Dh.Always:return!1;case Dh.BeforeDragging:return r;default:return!r}}}function Lq(t,e){return rp(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function X1e(t,e){return Lq(t,e)}function Y1e(t){let{callback:e,disabled:r}=t;const n=XC(e),s=w.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return w.useEffect(()=>()=>s?.disconnect(),[s]),s}function Dy(t){let{callback:e,disabled:r}=t;const n=XC(e),s=w.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return w.useEffect(()=>()=>s?.disconnect(),[s]),s}function J1e(t){return new JC(qu(t),t)}function o3(t,e,r){e===void 0&&(e=J1e);const[n,s]=w.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=c??r)!=null?d:null}const f=e(t);return JSON.stringify(c)===JSON.stringify(f)?c:f})}const a=Y1e({callback(c){if(t)for(const d of c){const{type:f,target:p}=d;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),l=Dy({callback:i});return Ti(()=>{i(),t?(l?.observe(t),a?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),a?.disconnect())},[t]),n}function Q1e(t){const e=Lq(t);return Nq(t,e)}const l3=[];function eSe(t){const e=w.useRef(t),r=rp(n=>t?n&&n!==l3&&t&&e.current&&t.parentNode===e.current.parentNode?n:Ry(t):l3,[t]);return w.useEffect(()=>{e.current=t},[t]),r}function tSe(t){const[e,r]=w.useState(null),n=w.useRef(t),s=w.useCallback(i=>{const a=u1(i.target);a&&r(l=>l?(l.set(a,LN(a)),new Map(l)):null)},[]);return w.useEffect(()=>{const i=n.current;if(t!==i){a(i);const l=t.map(c=>{const d=u1(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,LN(d)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=t}return()=>{a(t),a(i)};function a(l){l.forEach(c=>{const d=u1(c);d?.removeEventListener("scroll",s)})}},[s,t]),w.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>Fc(i,a),ai):Aq(t):ai,[t,e])}function c3(t,e){e===void 0&&(e=[]);const r=w.useRef(null);return w.useEffect(()=>{r.current=null},e),w.useEffect(()=>{const n=t!==ai;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?Mh(t,r.current):ai}function rSe(t){w.useEffect(()=>{if(!My)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r?.()}},t.map(e=>{let{sensor:r}=e;return r}))}function nSe(t,e){return w.useMemo(()=>t.reduce((r,n)=>{let{eventName:s,handler:i}=n;return r[s]=a=>{i(a,e)},r},{}),[t,e])}function Mq(t){return w.useMemo(()=>t?C1e(t):null,[t])}const u3=[];function sSe(t,e){e===void 0&&(e=qu);const[r]=t,n=Mq(r?In(r):null),[s,i]=w.useState(u3);function a(){i(()=>t.length?t.map(c=>Pq(c)?n:new JC(e(c),c)):u3)}const l=Dy({callback:a});return Ti(()=>{l?.disconnect(),a(),t.forEach(c=>l?.observe(c))},[t]),s}function iSe(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return tp(e)?e:t}function aSe(t){let{measure:e}=t;const[r,n]=w.useState(null),s=w.useCallback(d=>{for(const{target:f}of d)if(tp(f)){n(p=>{const m=e(f);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),i=Dy({callback:s}),a=w.useCallback(d=>{const f=iSe(d);i?.disconnect(),f&&i?.observe(f),n(f?e(f):null)},[e,i]),[l,c]=Pv(a);return w.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const oSe=[{sensor:tk,options:{}},{sensor:QC,options:{}}],lSe={current:{}},Hm={draggable:{measure:r3},droppable:{measure:r3,strategy:Dh.WhileDragging,frequency:RN.Optimized},dragOverlay:{measure:qu}};class Cf extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const cSe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ov},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Hm,measureDroppableContainers:Ov,windowRect:null,measuringScheduled:!1},uSe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ov,draggableNodes:new Map,over:null,measureDroppableContainers:Ov},Iy=w.createContext(uSe),Rq=w.createContext(cSe);function dSe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cf}}}function fSe(t,e){switch(e.type){case Lr.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Lr.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Lr.DragEnd:case Lr.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Lr.RegisterDroppable:{const{element:r}=e,{id:n}=r,s=new Cf(t.droppable.containers);return s.set(n,r),{...t,droppable:{...t.droppable,containers:s}}}case Lr.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const a=new Cf(t.droppable.containers);return a.set(r,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case Lr.UnregisterDroppable:{const{id:r,key:n}=e,s=t.droppable.containers.get(r);if(!s||n!==s.key)return t;const i=new Cf(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function hSe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:s}=w.useContext(Iy),i=AN(n),a=AN(r?.id);return w.useEffect(()=>{if(!e&&!n&&i&&a!=null){if(!YC(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const f of[c.current,d.current]){if(!f)continue;const p=i1e(f);if(p){p.focus();break}}})}},[n,e,s,a,i]),null}function pSe(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...n}),r):r}function mSe(t){return w.useMemo(()=>({draggable:{...Hm.draggable,...t?.draggable},droppable:{...Hm.droppable,...t?.droppable},dragOverlay:{...Hm.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function gSe(t){let{activeNode:e,measure:r,initialRect:n,config:s=!0}=t;const i=w.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Ti(()=>{if(!a&&!l||!e){i.current=!1;return}if(i.current||!n)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const f=r(d),p=Nq(f,n);if(a||(p.x=0),l||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=Eq(d);m&&m.scrollBy({top:p.y,left:p.x})}},[e,a,l,n,r])}const Dq=w.createContext({...ai,scaleX:1,scaleY:1});var Ya;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ya||(Ya={}));const vSe=w.memo(function(e){var r,n,s,i;let{id:a,accessibility:l,autoScroll:c=!0,children:d,sensors:f=oSe,collisionDetection:p=b1e,measuring:m,modifiers:g,...y}=e;const b=w.useReducer(fSe,void 0,dSe),[x,j]=b,[S,C]=d1e(),[E,N]=w.useState(Ya.Uninitialized),P=E===Ya.Initialized,{draggable:{active:O,nodes:L,translate:A},droppable:{containers:R}}=x,M=O!=null?L.get(O):null,D=w.useRef({initial:null,translated:null}),B=w.useMemo(()=>{var zt;return O!=null?{id:O,data:(zt=M?.data)!=null?zt:lSe,rect:D}:null},[O,M]),F=w.useRef(null),[V,J]=w.useState(null),[G,q]=w.useState(null),U=Lh(y,Object.values(y)),W=np("DndDescribedBy",a),I=w.useMemo(()=>R.getEnabled(),[R]),H=mSe(m),{droppableRects:ne,measureDroppableContainers:ge,measuringScheduled:K}=Z1e(I,{dragging:P,dependencies:[A.x,A.y],config:H.droppable}),de=G1e(L,O),ue=w.useMemo(()=>G?TN(G):null,[G]),he=Ls(),ce=X1e(de,H.draggable.measure);gSe({activeNode:O!=null?L.get(O):null,config:he.layoutShiftCompensation,initialRect:ce,measure:H.draggable.measure});const te=o3(de,H.draggable.measure,ce),pe=o3(de?de.parentElement:null),ae=w.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Oe=R.getNodeFor((r=ae.current.over)==null?void 0:r.id),Ee=aSe({measure:H.dragOverlay.measure}),ke=(n=Ee.nodeRef.current)!=null?n:de,We=P?(s=Ee.rect)!=null?s:te:null,St=!!(Ee.nodeRef.current&&Ee.rect),fr=Q1e(St?null:te),ir=Mq(ke?In(ke):null),Bt=eSe(P?Oe??de:null),Tt=sSe(Bt),Q=pSe(g,{transform:{x:A.x-fr.x,y:A.y-fr.y,scaleX:1,scaleY:1},activatorEvent:G,active:B,activeNodeRect:te,containerNodeRect:pe,draggingNodeRect:We,over:ae.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:Bt,scrollableAncestorRects:Tt,windowRect:ir}),ie=ue?Fc(ue,A):null,Z=tSe(Bt),ye=c3(Z),Pe=c3(Z,[te]),xe=Fc(Q,ye),Te=We?j1e(We,Q):null,nt=B&&Te?p({active:B,collisionRect:Te,droppableRects:ne,droppableContainers:I,pointerCoordinates:ie}):null,Nt=Sq(nt,"id"),[yt,Ri]=w.useState(null),$n=St?Q:Fc(Q,Pe),Ts=w1e($n,(i=yt?.rect)!=null?i:null,te),os=w.useRef(null),ls=w.useCallback((zt,gr)=>{let{sensor:kr,options:rn}=gr;if(F.current==null)return;const Ir=L.get(F.current);if(!Ir)return;const vr=zt.nativeEvent,Xr=new kr({active:F.current,activeNode:Ir,event:vr,options:rn,context:ae,onAbort(Lt){if(!L.get(Lt))return;const{onDragAbort:nn}=U.current,Rs={id:Lt};nn?.(Rs),S({type:"onDragAbort",event:Rs})},onPending(Lt,He,nn,Rs){if(!L.get(Lt))return;const{onDragPending:ci}=U.current,Fn={id:Lt,constraint:He,initialCoordinates:nn,offset:Rs};ci?.(Fn),S({type:"onDragPending",event:Fn})},onStart(Lt){const He=F.current;if(He==null)return;const nn=L.get(He);if(!nn)return;const{onDragStart:Rs}=U.current,Ds={activatorEvent:vr,active:{id:He,data:nn.data,rect:D}};Js.unstable_batchedUpdates(()=>{Rs?.(Ds),N(Ya.Initializing),j({type:Lr.DragStart,initialCoordinates:Lt,active:He}),S({type:"onDragStart",event:Ds}),J(os.current),q(vr)})},onMove(Lt){j({type:Lr.DragMove,coordinates:Lt})},onEnd:Ms(Lr.DragEnd),onCancel:Ms(Lr.DragCancel)});os.current=Xr;function Ms(Lt){return async function(){const{active:nn,collisions:Rs,over:Ds,scrollAdjustedTranslate:ci}=ae.current;let Fn=null;if(nn&&ci){const{cancelDrop:Di}=U.current;Fn={activatorEvent:vr,active:nn,collisions:Rs,delta:ci,over:Ds},Lt===Lr.DragEnd&&typeof Di=="function"&&await Promise.resolve(Di(Fn))&&(Lt=Lr.DragCancel)}F.current=null,Js.unstable_batchedUpdates(()=>{j({type:Lt}),N(Ya.Uninitialized),Ri(null),J(null),q(null),os.current=null;const Di=Lt===Lr.DragEnd?"onDragEnd":"onDragCancel";if(Fn){const Vu=U.current[Di];Vu?.(Fn),S({type:Di,event:Fn})}})}}},[L]),cs=w.useCallback((zt,gr)=>(kr,rn)=>{const Ir=kr.nativeEvent,vr=L.get(rn);if(F.current!==null||!vr||Ir.dndKit||Ir.defaultPrevented)return;const Xr={active:vr};zt(kr,gr.options,Xr)===!0&&(Ir.dndKit={capturedBy:gr.sensor},F.current=rn,ls(kr,gr))},[L,ls]),us=K1e(f,cs);rSe(f),Ti(()=>{te&&E===Ya.Initializing&&N(Ya.Initialized)},[te,E]),w.useEffect(()=>{const{onDragMove:zt}=U.current,{active:gr,activatorEvent:kr,collisions:rn,over:Ir}=ae.current;if(!gr||!kr)return;const vr={active:gr,activatorEvent:kr,collisions:rn,delta:{x:xe.x,y:xe.y},over:Ir};Js.unstable_batchedUpdates(()=>{zt?.(vr),S({type:"onDragMove",event:vr})})},[xe.x,xe.y]),w.useEffect(()=>{const{active:zt,activatorEvent:gr,collisions:kr,droppableContainers:rn,scrollAdjustedTranslate:Ir}=ae.current;if(!zt||F.current==null||!gr||!Ir)return;const{onDragOver:vr}=U.current,Xr=rn.get(Nt),Ms=Xr&&Xr.rect.current?{id:Xr.id,rect:Xr.rect.current,data:Xr.data,disabled:Xr.disabled}:null,Lt={active:zt,activatorEvent:gr,collisions:kr,delta:{x:Ir.x,y:Ir.y},over:Ms};Js.unstable_batchedUpdates(()=>{Ri(Ms),vr?.(Lt),S({type:"onDragOver",event:Lt})})},[Nt]),Ti(()=>{ae.current={activatorEvent:G,active:B,activeNode:de,collisionRect:Te,collisions:nt,droppableRects:ne,draggableNodes:L,draggingNode:ke,draggingNodeRect:We,droppableContainers:R,over:yt,scrollableAncestors:Bt,scrollAdjustedTranslate:xe},D.current={initial:We,translated:Te}},[B,de,nt,Te,L,ke,We,ne,R,yt,Bt,xe]),V1e({...he,delta:A,draggingRect:Te,pointerCoordinates:ie,scrollableAncestors:Bt,scrollableAncestorRects:Tt});const li=w.useMemo(()=>({active:B,activeNode:de,activeNodeRect:te,activatorEvent:G,collisions:nt,containerNodeRect:pe,dragOverlay:Ee,draggableNodes:L,droppableContainers:R,droppableRects:ne,over:yt,measureDroppableContainers:ge,scrollableAncestors:Bt,scrollableAncestorRects:Tt,measuringConfiguration:H,measuringScheduled:K,windowRect:ir}),[B,de,te,G,nt,pe,Ee,L,R,ne,yt,ge,Bt,Tt,H,K,ir]),ba=w.useMemo(()=>({activatorEvent:G,activators:us,active:B,activeNodeRect:te,ariaDescribedById:{draggable:W},dispatch:j,draggableNodes:L,over:yt,measureDroppableContainers:ge}),[G,us,B,te,j,W,L,yt,ge]);return z.createElement(wq.Provider,{value:C},z.createElement(Iy.Provider,{value:ba},z.createElement(Rq.Provider,{value:li},z.createElement(Dq.Provider,{value:Ts},d)),z.createElement(hSe,{disabled:l?.restoreFocus===!1})),z.createElement(p1e,{...l,hiddenTextDescribedById:W}));function Ls(){const zt=V?.autoScrollEnabled===!1,gr=typeof c=="object"?c.enabled===!1:c===!1,kr=P&&!zt&&!gr;return typeof c=="object"?{...c,enabled:kr}:{enabled:kr}}}),ySe=w.createContext(null),d3="button",xSe="Draggable";function bSe(t){let{id:e,data:r,disabled:n=!1,attributes:s}=t;const i=np(xSe),{activators:a,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:f,draggableNodes:p,over:m}=w.useContext(Iy),{role:g=d3,roleDescription:y="draggable",tabIndex:b=0}=s??{},x=c?.id===e,j=w.useContext(x?Dq:ySe),[S,C]=Pv(),[E,N]=Pv(),P=nSe(a,e),O=Lh(r);Ti(()=>(p.set(e,{id:e,key:i,node:S,activatorNode:E,data:O}),()=>{const A=p.get(e);A&&A.key===i&&p.delete(e)}),[p,e]);const L=w.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":n,"aria-pressed":x&&g===d3?!0:void 0,"aria-roledescription":y,"aria-describedby":f.draggable}),[n,g,b,x,y,f.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:L,isDragging:x,listeners:n?void 0:P,node:S,over:m,setNodeRef:C,setActivatorNodeRef:N,transform:j}}function wSe(){return w.useContext(Rq)}const _Se="Droppable",jSe={timeout:25};function SSe(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:s}=t;const i=np(_Se),{active:a,dispatch:l,over:c,measureDroppableContainers:d}=w.useContext(Iy),f=w.useRef({disabled:r}),p=w.useRef(!1),m=w.useRef(null),g=w.useRef(null),{disabled:y,updateMeasurementsFor:b,timeout:x}={...jSe,...s},j=Lh(b??n),S=w.useCallback(()=>{if(!p.current){p.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(j.current)?j.current:[j.current]),g.current=null},x)},[x]),C=Dy({callback:S,disabled:y||!a}),E=w.useCallback((L,A)=>{C&&(A&&(C.unobserve(A),p.current=!1),L&&C.observe(L))},[C]),[N,P]=Pv(E),O=Lh(e);return w.useEffect(()=>{!C||!N.current||(C.disconnect(),p.current=!1,C.observe(N.current))},[N,C]),w.useEffect(()=>(l({type:Lr.RegisterDroppable,element:{id:n,key:i,disabled:r,node:N,rect:m,data:O}}),()=>l({type:Lr.UnregisterDroppable,key:i,id:n})),[n]),w.useEffect(()=>{r!==f.current.disabled&&(l({type:Lr.SetDroppableDisabled,id:n,key:i,disabled:r}),f.current.disabled=r)},[n,i,r,l]),{active:a,rect:m,isOver:c?.id===n,node:N,over:c,setNodeRef:P}}function kf(t,e,r){const n=t.slice();return n.splice(r<0?n.length+r:r,0,n.splice(e,1)[0]),n}function NSe(t,e){return t.reduce((r,n,s)=>{const i=e.get(n);return i&&(r[s]=i),r},Array(t.length))}function $m(t){return t!==null&&t>=0}function ESe(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function CSe(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Iq=t=>{let{rects:e,activeIndex:r,overIndex:n,index:s}=t;const i=kf(e,n,r),a=e[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},Fm={scaleX:1,scaleY:1},kSe=t=>{var e;let{activeIndex:r,activeNodeRect:n,index:s,rects:i,overIndex:a}=t;const l=(e=i[r])!=null?e:n;if(!l)return null;if(s===r){const d=i[a];return d?{x:0,y:r<a?d.top+d.height-(l.top+l.height):d.top-l.top,...Fm}:null}const c=PSe(i,s,r);return s>r&&s<=a?{x:0,y:-l.height-c,...Fm}:s<r&&s>=a?{x:0,y:l.height+c,...Fm}:{x:0,y:0,...Fm}};function PSe(t,e,r){const n=t[e],s=t[e-1],i=t[e+1];return n?r<e?s?n.top-(s.top+s.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}const $q="Sortable",Fq=z.createContext({activeIndex:-1,containerId:$q,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Iq,disabled:{draggable:!1,droppable:!1}});function OSe(t){let{children:e,id:r,items:n,strategy:s=Iq,disabled:i=!1}=t;const{active:a,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:f}=wSe(),p=np($q,r),m=l.rect!==null,g=w.useMemo(()=>n.map(P=>typeof P=="object"&&"id"in P?P.id:P),[n]),y=a!=null,b=a?g.indexOf(a.id):-1,x=d?g.indexOf(d.id):-1,j=w.useRef(g),S=!ESe(g,j.current),C=x!==-1&&b===-1||S,E=CSe(i);Ti(()=>{S&&y&&f(g)},[S,g,y,f]),w.useEffect(()=>{j.current=g},[g]);const N=w.useMemo(()=>({activeIndex:b,containerId:p,disabled:E,disableTransforms:C,items:g,overIndex:x,useDragOverlay:m,sortedRects:NSe(g,c),strategy:s}),[b,p,E.draggable,E.droppable,C,g,x,c,m,s]);return z.createElement(Fq.Provider,{value:N},e)}const ASe=t=>{let{id:e,items:r,activeIndex:n,overIndex:s}=t;return kf(r,n,s).indexOf(e)},TSe=t=>{let{containerId:e,isSorting:r,wasDragging:n,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:c,transition:d}=t;return!d||!n||l!==i&&s===a?!1:r?!0:a!==s&&e===c},LSe={duration:200,easing:"ease"},Bq="transform",MSe=Rh.Transition.toString({property:Bq,duration:0,easing:"linear"}),RSe={roleDescription:"sortable"};function DSe(t){let{disabled:e,index:r,node:n,rect:s}=t;const[i,a]=w.useState(null),l=w.useRef(r);return Ti(()=>{if(!e&&r!==l.current&&n.current){const c=s.current;if(c){const d=qu(n.current,{ignoreTransform:!0}),f={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(f.x||f.y)&&a(f)}}r!==l.current&&(l.current=r)},[e,r,n,s]),w.useEffect(()=>{i&&a(null)},[i]),i}function ISe(t){let{animateLayoutChanges:e=TSe,attributes:r,disabled:n,data:s,getNewIndex:i=ASe,id:a,strategy:l,resizeObserverConfig:c,transition:d=LSe}=t;const{items:f,containerId:p,activeIndex:m,disabled:g,disableTransforms:y,sortedRects:b,overIndex:x,useDragOverlay:j,strategy:S}=w.useContext(Fq),C=$Se(n,g),E=f.indexOf(a),N=w.useMemo(()=>({sortable:{containerId:p,index:E,items:f},...s}),[p,s,E,f]),P=w.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:O,node:L,isOver:A,setNodeRef:R}=SSe({id:a,data:N,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...c}}),{active:M,activatorEvent:D,activeNodeRect:B,attributes:F,setNodeRef:V,listeners:J,isDragging:G,over:q,setActivatorNodeRef:U,transform:W}=bSe({id:a,data:N,attributes:{...RSe,...r},disabled:C.draggable}),I=t1e(R,V),H=!!M,ne=H&&!y&&$m(m)&&$m(x),ge=!j&&G,K=ge&&ne?W:null,ue=ne?K??(l??S)({rects:b,activeNodeRect:B,activeIndex:m,overIndex:x,index:E}):null,he=$m(m)&&$m(x)?i({id:a,items:f,activeIndex:m,overIndex:x}):E,ce=M?.id,te=w.useRef({activeId:ce,items:f,newIndex:he,containerId:p}),pe=f!==te.current.items,ae=e({active:M,containerId:p,isDragging:G,isSorting:H,id:a,index:E,items:f,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:d,wasDragging:te.current.activeId!=null}),Oe=DSe({disabled:!ae,index:E,node:L,rect:O});return w.useEffect(()=>{H&&te.current.newIndex!==he&&(te.current.newIndex=he),p!==te.current.containerId&&(te.current.containerId=p),f!==te.current.items&&(te.current.items=f)},[H,he,p,f]),w.useEffect(()=>{if(ce===te.current.activeId)return;if(ce!=null&&te.current.activeId==null){te.current.activeId=ce;return}const ke=setTimeout(()=>{te.current.activeId=ce},50);return()=>clearTimeout(ke)},[ce]),{active:M,activeIndex:m,attributes:F,data:N,rect:O,index:E,newIndex:he,items:f,isOver:A,isSorting:H,isDragging:G,listeners:J,node:L,overIndex:x,over:q,setNodeRef:I,setActivatorNodeRef:U,setDroppableNodeRef:R,setDraggableNodeRef:V,transform:Oe??ue,transition:Ee()};function Ee(){if(Oe||pe&&te.current.newIndex===E)return MSe;if(!(ge&&!YC(D)||!d)&&(H||ae))return Rh.Transition.toString({...d,property:Bq})}}function $Se(t,e){var r,n;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t?.draggable)!=null?r:e.draggable,droppable:(n=t?.droppable)!=null?n:e.droppable}}function Tv(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const FSe=[wt.Down,wt.Right,wt.Up,wt.Left],BSe=(t,e)=>{let{context:{active:r,collisionRect:n,droppableRects:s,droppableContainers:i,over:a,scrollableAncestors:l}}=e;if(FSe.includes(t.code)){if(t.preventDefault(),!r||!n)return;const c=[];i.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const m=s.get(p.id);if(m)switch(t.code){case wt.Down:n.top<m.top&&c.push(p);break;case wt.Up:n.top>m.top&&c.push(p);break;case wt.Left:n.left>m.left&&c.push(p);break;case wt.Right:n.left<m.left&&c.push(p);break}});const d=y1e({collisionRect:n,droppableRects:s,droppableContainers:c});let f=Sq(d,"id");if(f===a?.id&&d.length>1&&(f=d[1].id),f!=null){const p=i.get(r.id),m=i.get(f),g=m?s.get(m.id):null,y=m?.node.current;if(y&&g&&p&&m){const x=Ry(y).some((P,O)=>l[O]!==P),j=zq(p,m),S=zSe(p,m),C=x||!j?{x:0,y:0}:{x:S?n.width-g.width:0,y:S?n.height-g.height:0},E={x:g.left,y:g.top};return C.x&&C.y?E:Mh(E,C)}}}};function zq(t,e){return!Tv(t)||!Tv(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function zSe(t,e){return!Tv(t)||!Tv(e)||!zq(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const USe=({stop:t,index:e,totalStops:r,onMoveUp:n,onMoveDown:s,onValidateMove:i,onCancelMove:a,isMoving:l=!1,globalIsMoving:c=!1,isInMoveMode:d=!1,hasUnsavedChanges:f=!1})=>{const[p,m]=w.useState(!1),[g,y]=w.useState(null),[b,x]=w.useState(!1),[j,S]=w.useState(!1),[C,E]=w.useState(!1),{attributes:N,listeners:P,setNodeRef:O,transform:L,transition:A,isDragging:R}=ISe({id:t.id});w.useEffect(()=>{const I=()=>{const H=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768||"ontouchstart"in window;x(H)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]);const M={transform:Rh.Transform.toString(L),transition:A,opacity:R?.5:1},D=()=>t.stop_type.includes("depot")?o.jsx(ut,{className:"w-4 h-4"}):t.stop_type.includes("lab")?o.jsx(ut,{className:"w-4 h-4"}):o.jsx(it,{className:"w-4 h-4"}),B=()=>t.stop_type.includes("depot")?"bg-blue-100 text-blue-700 border-blue-200":t.stop_type.includes("lab")?"bg-purple-100 text-purple-700 border-purple-200":"bg-green-100 text-green-700 border-green-200",F=()=>{const I=b?400:600;b&&S(!0);const H=setTimeout(()=>{m(!0),S(!1),navigator.vibrate&&b&&navigator.vibrate([50,100,50])},I);y(H)},V=()=>{g&&(clearTimeout(g),y(null)),S(!1)},J=()=>{g&&(clearTimeout(g),y(null)),S(!1)},G=I=>{I.stopPropagation(),n()},q=I=>{I.stopPropagation(),s()},U=async I=>{I.stopPropagation(),E(!0),await i()&&m(!1),E(!1)},W=I=>{I.stopPropagation(),a(),m(!1)};return w.useEffect(()=>{if(p&&!f){const I=H=>{const ne=H.target,ge=document.querySelector(`[data-sortable-id="${t.id}"]`);ge&&!ge.contains(ne)&&m(!1)};return document.addEventListener("click",I),()=>{document.removeEventListener("click",I)}}},[p,f,t.id]),o.jsxs(o.Fragment,{children:[o.jsxs("div",{ref:O,style:M,"data-sortable-id":t.id,className:`
          group relative flex items-center gap-2 sm:gap-3 p-2.5 sm:p-3 bg-white rounded-lg border border-gray-200
          hover:shadow-lg no-select stop-transition
          ${b?"cursor-pointer":"cursor-grab active:cursor-grabbing"}
          ${R?"shadow-xl ring-2 ring-primary-500 ring-opacity-50 dragging scale-105":""}
          ${p||d?"ring-2 ring-primary-300 bg-primary-25":""}
          ${j?"ring-2 ring-blue-400 bg-blue-25 scale-[1.02]":""}
          ${l?"moving-stop ring-2 ring-green-400":""}
          ${f?"unsaved-changes":""}
          ${c&&!l?"opacity-60 scale-[0.98]":""}
          ${b?"touch-manipulation":""}
        `,...b?{}:{...N,...P},onPointerDown:F,onPointerUp:V,onPointerLeave:J,children:[o.jsxs("div",{className:`
        flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 bg-primary-50 rounded-lg text-xs sm:text-sm font-bold text-primary-700 flex-shrink-0 border border-primary-200
        ${b?"relative":""}
      `,children:[e+1,b&&!p&&!j&&!d&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-blue-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"⋯"})}),f&&o.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),b&&j&&o.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]}),o.jsx("div",{className:`flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-lg border-2 flex-shrink-0 ${B()}`,children:D()}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-sm sm:text-base font-bold text-gray-900 leading-tight mb-1",children:t.displayName}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.estimated_arrival_time&&o.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[o.jsx(bt,{className:"w-3 h-3 flex-shrink-0"}),o.jsx("span",{className:"font-medium",children:t.estimated_arrival_time})]}),t.isMerged&&o.jsx("span",{className:"px-1.5 py-0.5 text-xs font-bold bg-primary-100 text-primary-700 rounded-full border border-primary-200 whitespace-nowrap",children:t.mergedStopsCount})]})]}),o.jsx("div",{className:"flex-shrink-0",children:o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-md border whitespace-nowrap ${t.displayAction==="pickup"?"bg-yellow-50 text-yellow-700 border-yellow-200":t.displayAction==="delivery"?"bg-blue-50 text-blue-700 border-blue-200":t.displayAction==="both"?"bg-green-50 text-green-700 border-green-200":t.stop_type?.includes("lab_pickup")?"bg-orange-50 text-orange-700 border-orange-200":t.stop_type?.includes("lab_dropoff")?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:t.displayAction==="pickup"?"Récup.":t.displayAction==="delivery"?"Livr.":t.displayAction==="both"?"R+L":t.stop_type?.includes("lab_pickup")?"Récup.":t.stop_type?.includes("lab_dropoff")||t.stop_type?.includes("depot_dropoff")?"Retour":"Arrêt"})})]}),o.jsx("div",{className:"flex-shrink-0 flex items-center justify-center",children:t.completed?o.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-green-100 border-2 border-green-300 rounded-full flex items-center justify-center",children:o.jsx(er,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600"})}):o.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-gray-300 rounded-full hover:border-gray-400 transition-colors"})}),l&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-100 to-blue-100 rounded-lg border-2 border-green-300 flex items-center justify-center z-5",children:o.jsxs("div",{className:"flex items-center gap-2 text-green-700 font-medium",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-sm",children:"Déplacement..."})]})})]}),o.jsx(Rt,{children:(p||d)&&!c&&o.jsxs(Ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"w-full mt-2 mb-4 flex items-center justify-between gap-2 sm:gap-3 px-1",children:[o.jsxs("div",{className:"flex gap-1.5 sm:gap-2 flex-1",children:[o.jsxs("button",{onClick:G,disabled:e===0,className:`
                  arrow-button flex-1 min-w-[100px] h-12 rounded-lg flex items-center justify-center shadow-lg border-2 transition-all duration-200 font-medium
                  ${e===0?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-primary-300 text-primary-600 hover:bg-primary-50 hover:scale-105 active:scale-95 hover:shadow-xl"}
                `,children:[o.jsx(EQ,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),o.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Monter"})]}),o.jsxs("button",{onClick:q,disabled:e>=r-1,className:`
                  arrow-button flex-1 min-w-[100px] h-12 rounded-lg flex items-center justify-center shadow-lg border-2 transition-all duration-200 font-medium
                  ${e>=r-1?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":"bg-white border-primary-300 text-primary-600 hover:bg-primary-50 hover:scale-105 active:scale-95 hover:shadow-xl"}
                `,children:[o.jsx(SQ,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2"}),o.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Descendre"})]})]}),f&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:W,disabled:C,className:`
                    cancel-button w-12 h-12 rounded-lg flex items-center justify-center shadow-lg border-0 text-white transition-all duration-200
                    disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 active:scale-95
                  `,title:"Annuler les changements",children:o.jsx(tr,{className:"w-5 h-5"})}),o.jsx("button",{onClick:U,disabled:C,className:`
                    validate-button w-12 h-12 rounded-lg flex items-center justify-center shadow-lg border-0 text-white transition-all duration-200
                    disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 active:scale-95
                  `,title:"Valider les changements",children:C?o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsx(Er,{className:"w-5 h-5"})})]})]})})]})},qSe=({route:t,onStopsReorder:e,onMoveStopUp:r,onMoveStopDown:n,onValidateRoute:s,onReverseRoute:i,isValidating:a=!1,isReversing:l=!1})=>{const[c,d]=w.useState(!1),[f,p]=w.useState(t.stops),[m,g]=w.useState(t.stops),[y,b]=w.useState(!1),[x,j]=w.useState(null),[S,C]=w.useState(null),[E,N]=w.useState(!1),[P,O]=w.useState(!1),[L,A]=w.useState(!1);w.useEffect(()=>{const K=()=>{const de=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768||"ontouchstart"in window;A(de)};return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]);const R=m1e(Q5(tk,{activationConstraint:{delay:L?300:150,tolerance:L?10:5,distance:L?8:3}}),Q5(QC,{coordinateGetter:BSe})),M=K=>{if(K){document.body.classList.add("drag-active");const de=document.querySelector(`[data-route-id="${t.id}"]`);de&&de.classList.add("drag-active")}else{document.body.classList.remove("drag-active");const de=document.querySelector(`[data-route-id="${t.id}"]`);de&&de.classList.remove("drag-active")}},D=K=>{const{active:de,over:ue}=K;if(!de||!ue)return;const he=document.querySelector(`[data-route-id="${t.id}"] .space-y-2`)?.parentElement;if(!he)return;const ce=he.getBoundingClientRect(),te=80,pe=15,ae=document.querySelector(`[data-sortable-id="${de.id}"]`);if(!ae)return;const Oe=ae.getBoundingClientRect(),Ee=Oe.top+Oe.height/2;Ee-ce.top<te&&he.scrollTop>0?he.scrollBy({top:-pe,behavior:"auto"}):ce.bottom-Ee<te&&he.scrollBy({top:pe,behavior:"auto"})};w.useEffect(()=>{!E&&!P&&(p(t.stops),g(t.stops))},[t.stops,E,P]),w.useEffect(()=>{l&&!c&&d(!0)},[l,c]);const B=()=>{b(!0),M(!0)},F=()=>{b(!1),M(!1)},V=async K=>{const{active:de,over:ue}=K;if(b(!1),M(!1),de.id!==ue?.id){const he=f.findIndex(te=>te.id===de.id),ce=f.findIndex(te=>te.id===ue?.id);if(he!==-1&&ce!==-1){N(!0),j(de.id);const te=kf(f,he,ce);p(te),await e(he,ce)||p(t.stops),setTimeout(()=>{j(null),N(!1)},300)}}},J=K=>{setTimeout(()=>{const de=document.querySelector(`[data-sortable-id="${K}"]`);de&&de.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100)},G=K=>{if(K<=0)return;const de=kf(f,K,K-1);p(de),O(!0),C(K-1);const ue=f[K];ue&&J(ue.id)},q=K=>{if(K>=f.length-1)return;const de=kf(f,K,K+1);p(de),O(!0),C(K+1);const ue=f[K];ue&&J(ue.id)},U=async K=>{if(!P||S===null)return!1;N(!0);const de=m.findIndex(ce=>ce.id===f[K].id);if(de===-1)return N(!1),!1;const he=await e(de,K);return he?(O(!1),C(null),g(f)):(p(m),O(!1),C(null)),N(!1),he},W=()=>{p(m),O(!1),C(null)},I=f.filter(K=>K.completed).length,H=f.length>0?I/f.length*100:0,ne=()=>{switch(t.status){case"optimized":return"bg-orange-100 text-orange-700 border-orange-200";case"validated":return"bg-green-100 text-green-700 border-green-200";case"in_progress":return"bg-blue-100 text-blue-700 border-blue-200";case"completed":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},ge=()=>{switch(t.status){case"optimized":return"Optimisée";case"validated":return"Validée";case"in_progress":return"En cours";case"completed":return"Terminée";default:return t.status}};return o.jsxs(_e,{className:"shadow-sm border border-gray-200 hover:shadow-md transition-shadow","data-route-id":t.id,children:[o.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[o.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0",children:o.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:t.driver.full_name}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-gray-500 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Kr,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),o.jsx("span",{children:"Livreur"})]}),o.jsx("span",{className:"text-gray-300 hidden sm:inline",children:"•"}),o.jsxs("span",{className:"whitespace-nowrap",children:[f.length," arrêts"]}),t.total_distance_km&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-gray-300 hidden sm:inline",children:"•"}),o.jsxs("span",{className:"whitespace-nowrap",children:[t.total_distance_km.toFixed(0)," km"]})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-3 flex-shrink-0",children:[o.jsx("span",{className:`px-2 py-1 text-xs sm:text-sm font-medium rounded-full border ${ne()} whitespace-nowrap`,children:ge()}),o.jsx(ve,{variant:"ghost",size:"sm",onClick:()=>d(!c),className:"p-1 sm:p-2 min-w-0",children:c?o.jsx(CE,{className:"w-3 h-3 sm:w-4 sm:h-4"}):o.jsx(Es,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),o.jsxs("div",{className:"mt-2 sm:mt-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-gray-600 mb-1 sm:mb-2",children:[o.jsx("span",{children:"Progression"}),o.jsxs("span",{className:"whitespace-nowrap",children:[I,"/",f.length," arrêts"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 sm:h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-1.5 sm:h-2 rounded-full transition-all duration-300",style:{width:`${H}%`}})})]})]}),o.jsx(Rt,{children:c&&o.jsx(Ae.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:o.jsxs("div",{className:"p-3 sm:p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[o.jsx("h4",{className:"text-sm sm:text-md font-medium text-gray-900",children:"Liste des arrêts"}),o.jsxs("div",{className:"text-xs text-gray-500",children:[P?o.jsx("span",{className:"text-orange-600 font-medium",children:"⚙️ Mode déplacement: Utilisez ↑↓ pour ajuster, puis ✓ valider ou ✗ annuler"}):L?o.jsx("span",{children:"Appui long (400ms) → flèches pour déplacer"}):o.jsx("span",{children:"Glissez-déposez ou appui long → flèches pour réorganiser"}),(y||E)&&o.jsx("span",{className:"ml-2 text-primary-600 font-medium animate-pulse",children:"🔄 Déplacement en cours..."}),P&&o.jsxs("span",{className:"ml-2 text-orange-600 font-medium flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),o.jsx("span",{children:"Position modifiée - Cliquez ✓ pour valider"})]})]})]}),!P&&!y&&!E&&o.jsx("div",{className:"mb-4",children:o.jsx(ve,{onClick:i,disabled:l,className:"w-full h-12 bg-orange-50 border-2 border-orange-200 text-orange-700 hover:bg-orange-100 hover:border-orange-300 disabled:opacity-50 font-medium text-sm transition-all duration-200 shadow-sm hover:shadow-md",title:"Inverser l'ordre de tous les arrêts",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-orange-600 border-t-transparent rounded-full animate-spin mr-2"}),"Inversion en cours..."]}):o.jsxs(o.Fragment,{children:[o.jsx($Q,{className:"w-4 h-4 mr-2"}),"Inverser l'ordre de la tournée"]})})}),o.jsxs("div",{className:"relative",children:[l&&o.jsx("div",{className:"absolute inset-0 bg-white/95 backdrop-blur-sm rounded-lg border-2 border-orange-200 flex flex-col items-center justify-center z-10 min-h-[200px]",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-orange-700 mb-2",children:"Inversion des stops"}),o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Réorganisation de la tournée en cours..."}),o.jsx("p",{className:"text-xs text-gray-500",children:"Les groupes de stops consécutifs sont préservés"})]})}),o.jsx(vSe,{sensors:R,collisionDetection:v1e,onDragStart:B,onDragEnd:V,onDragCancel:F,onDragOver:D,children:o.jsx(OSe,{items:f.map(K=>K.id),strategy:kSe,children:o.jsx("div",{className:"space-y-2 sm:space-y-3",children:f.map((K,de)=>o.jsx(USe,{stop:K,index:de,totalStops:f.length,onMoveUp:()=>G(de),onMoveDown:()=>q(de),onValidateMove:()=>U(de),onCancelMove:()=>W(),isMoving:x===K.id,globalIsMoving:E,isInMoveMode:S===de,hasUnsavedChanges:P&&S===de},K.id))})})})]}),t.status==="optimized"&&o.jsx("div",{className:"mt-4 sm:mt-6 pt-3 sm:pt-4 border-t border-gray-100",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[o.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 flex items-center",children:[o.jsx(sr,{className:"w-3 h-3 sm:w-4 sm:h-4 inline mr-1 text-orange-500 flex-shrink-0"}),o.jsx("span",{children:"Cette tournée doit être validée"})]}),o.jsx(ve,{onClick:s,disabled:a,className:"bg-green-500 hover:bg-green-600 text-white px-4 sm:px-6 py-2 rounded-lg shadow-sm text-sm w-full sm:w-auto",children:a?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Validation..."]}):o.jsxs(o.Fragment,{children:[o.jsx(er,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Valider"]})})]})})]})})})]})},VSe=()=>{const{routes:t,isLoading:e,error:r,searchQuery:n,fetchRoutes:s,setSearchQuery:i,clearError:a,getFilteredRoutes:l,reorderStops:c,moveStopUp:d,moveStopDown:f,validateRoute:p,reverseRoute:m}=zG(),[g,y]=w.useState(new Set),[b,x]=w.useState(new Set);w.useEffect(()=>{s()},[s]);const j=async(R,M,D)=>{try{const B=await c(R,M,D);return B?Ur.success("Ordre des arrêts mis à jour"):Ur.error("Erreur lors de la réorganisation"),B}catch{return Ur.error("Erreur lors de la réorganisation"),!1}},S=async(R,M)=>{try{const D=await d(R,M);return D?Ur.success("Stop déplacé vers le haut"):Ur.error("Impossible de déplacer le stop"),D}catch{return Ur.error("Erreur lors du déplacement"),!1}},C=async(R,M)=>{try{const D=await f(R,M);return D?Ur.success("Stop déplacé vers le bas"):Ur.error("Impossible de déplacer le stop"),D}catch{return Ur.error("Erreur lors du déplacement"),!1}},E=async R=>{try{y(D=>new Set(D).add(R));const M=await p(R);return M?Ur.success("Tournée validée avec succès"):Ur.error("Erreur lors de la validation"),M}catch{return Ur.error("Erreur lors de la validation"),!1}finally{y(M=>{const D=new Set(M);return D.delete(R),D})}},N=async R=>{try{x(D=>new Set(D).add(R));const M=await m(R);return M?Ur.success("Tournée inversée avec succès"):Ur.error("Erreur lors de l'inversion"),M}catch{return Ur.error("Erreur lors de l'inversion"),!1}finally{x(M=>{const D=new Set(M);return D.delete(R),D})}},P=l(),O={totalRoutes:t.length,optimizedRoutes:t.filter(R=>R.status==="optimized").length,validatedRoutes:t.filter(R=>R.status==="validated").length,totalStops:t.reduce((R,M)=>R+M.totalStops,0),totalDistance:t.reduce((R,M)=>R+(M.total_distance_km||0),0)},L={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},A={hidden:{y:20,opacity:0},show:{y:0,opacity:1}};return r?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tournées Optimisées"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Gestion et validation des tournées optimisées"})]}),o.jsx(_e,{className:"border-red-200 shadow-lg",children:o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(ss,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Erreur de chargement"}),o.jsx("p",{className:"text-gray-600 mb-6",children:r}),o.jsxs(ve,{onClick:()=>{a(),s()},className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl shadow-lg",children:[o.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Réessayer"]})]})})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-slate-100",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-2 sm:px-4 py-4 sm:py-6 lg:py-8",children:[o.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 sm:gap-4 mb-3 sm:mb-4 md:mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 mb-1 sm:mb-2",children:"Tournées Optimisées"}),o.jsx("p",{className:"text-xs sm:text-sm md:text-base text-gray-600 leading-tight",children:"Gestion et validation des tournées optimisées - PROVENCE COURSES"}),o.jsx("div",{className:"mt-1 sm:mt-2 text-xs sm:text-sm",children:o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 text-primary-600",children:[o.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-primary-500 rounded-full animate-pulse"}),o.jsxs("span",{children:["Tournées du ",new Date().toLocaleDateString("fr-FR")]})]})})]}),o.jsx("div",{className:"w-full lg:w-auto",children:o.jsx(Qe,{placeholder:"Rechercher un livreur...",value:n,onChange:R=>i(R.target.value),leftIcon:o.jsx(pn,{className:"h-4 w-4"}),className:"w-full lg:w-80 h-9 sm:h-10 text-sm"})})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6 md:mb-8",children:[o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-2 sm:p-3 md:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-0.5 sm:mb-1 truncate",children:"Tournées"}),o.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:O.totalRoutes})]}),o.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0 ml-2",children:o.jsx(gt,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 text-primary-600"})})]})})}),o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-2 sm:p-3 md:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-0.5 sm:mb-1 truncate",children:"Optimisées"}),o.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-orange-600",children:O.optimizedRoutes})]}),o.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0 ml-2",children:o.jsx(hl,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 text-orange-600"})})]})})}),o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-2 sm:p-3 md:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-0.5 sm:mb-1 truncate",children:"Validées"}),o.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-green-600",children:O.validatedRoutes})]}),o.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0 ml-2",children:o.jsx(er,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 text-green-600"})})]})})}),o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-2 sm:p-3 md:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-0.5 sm:mb-1 truncate",children:"Arrêts"}),o.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:O.totalStops})]}),o.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0 ml-2",children:o.jsx(it,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 text-gray-600"})})]})})}),o.jsx(_e,{className:"bg-white shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx("div",{className:"p-2 sm:p-3 md:p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-0.5 sm:mb-1 truncate",children:"Distance"}),o.jsxs("p",{className:"text-sm sm:text-base md:text-lg font-bold text-blue-600",children:[O.totalDistance.toFixed(0)," km"]})]}),o.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 md:w-10 md:h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0 ml-2",children:o.jsx(ki,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5 text-blue-600"})})]})})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:o.jsx(gt,{className:"w-5 h-5 text-primary-600"})}),o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Tournées à gérer (",P.length,")"]}),e&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx(Qs,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{children:"Chargement..."})]})]})}),e?o.jsx(_e,{className:"shadow-sm border border-gray-200",children:o.jsxs("div",{className:"p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Chargement des tournées..."}),o.jsx("p",{className:"text-gray-600",children:"Récupération des données optimisées"})]})}):P.length===0?o.jsx(_e,{className:"shadow-sm border border-gray-200",children:o.jsxs("div",{className:"p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(gt,{className:"h-8 w-8 text-gray-400"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune tournée trouvée"}),o.jsx("p",{className:"text-gray-600",children:n?`Aucune tournée ne correspond à "${n}"`:"Aucune tournée optimisée ou validée pour aujourd'hui"}),n&&o.jsx(ve,{onClick:()=>i(""),variant:"ghost",className:"mt-4",children:"Effacer la recherche"})]})}):o.jsx(Ae.div,{variants:L,initial:"hidden",animate:"show",className:"grid gap-6",children:P.map(R=>o.jsx(Ae.div,{variants:A,children:o.jsx(qSe,{route:R,onStopsReorder:(M,D)=>j(R.id,M,D),onMoveStopUp:M=>S(R.id,M),onMoveStopDown:M=>C(R.id,M),onValidateRoute:()=>E(R.id),onReverseRoute:()=>N(R.id),isValidating:g.has(R.id),isReversing:b.has(R.id)})},R.id))})]})]})})},WSe=async()=>{try{const t=await HSe(),e=await GSe(),r=await KSe(),n=await ZSe(),s=await XSe(),i=[t,e,r,n].filter(l=>l.count>0),a={duplicatesCount:t.count,missingGpsCount:e.count,orphanedCount:n.count,validLocationsPercentage:Math.round(s.healthyLocations/s.totalLocations*100)};return{totalLocations:s.totalLocations,healthyLocations:s.healthyLocations,issues:i,summary:a}}catch(t){throw console.error("Erreur lors de l'analyse des locations:",t),t}},HSe=async()=>{const{data:t,error:e}=await Y.rpc("analyze_location_duplicates",{});if(e){const{data:r}=await Y.from("locations").select(`
        id,
        formatted_address,
        latitude,
        longitude,
        place_id,
        laboratory_clients(
          id,
          name,
          laboratories(name)
        ),
        laboratories(name)
      `),n=new Map;r?.forEach(i=>{const a=`${i.formatted_address}-${i.latitude}-${i.longitude}-${i.place_id}`;n.has(a)||n.set(a,[]),n.get(a).push(i)});const s=Array.from(n.values()).filter(i=>i.length>1).filter(i=>{const a=i.flatMap(d=>d.laboratories?.name?[d.laboratories.name]:[]),l=i.flatMap(d=>d.laboratory_clients?.map(f=>f.name)||[]);return!a.some(d=>l.includes(d))}).map(i=>({id:i[0].id,address:i[0].formatted_address,issue:`${i.length} locations identiques`,clients:i.flatMap(a=>a.laboratory_clients?.map(l=>`${l.name} (client de ${l.laboratories?.name||"laboratoire inconnu"})`)||[]),laboratories:i.flatMap(a=>a.laboratories?.name?[`${a.laboratories.name} (laboratoire)`]:[])}));return{type:"duplicates",severity:s.length>0?"warning":"info",count:s.length,details:s}}return{type:"duplicates",severity:"info",count:0,details:[]}},GSe=async()=>{const{data:t,error:e}=await Y.from("locations").select(`
      id,
      formatted_address,
      latitude,
      longitude,
      laboratory_clients(
        name,
        laboratories(name)
      ),
      laboratories(name)
    `).or("latitude.is.null,longitude.is.null,latitude.eq.0,longitude.eq.0,latitude.lt.41,latitude.gt.51.5,longitude.lt.-5.5,longitude.gt.10");if(e)throw e;const r=t?.map(n=>({id:n.id,address:n.formatted_address,issue:YSe(n.latitude,n.longitude),clients:n.laboratory_clients?.map(s=>`${s.name} (client de ${s.laboratories?.name||"laboratoire inconnu"})`)||[],laboratories:n.laboratories?.name?[`${n.laboratories.name} (laboratoire)`]:[]}))||[];return{type:"missing_gps",severity:r.length>0?"critical":"info",count:r.length,details:r}},KSe=async()=>{const{data:t,error:e}=await Y.from("locations").select(`
      id,
      formatted_address,
      place_id,
      laboratory_clients(
        name,
        laboratories(name)
      ),
      laboratories(name)
    `).or("place_id.is.null,place_id.eq.");if(e)throw e;const r=t?.map(n=>({id:n.id,address:n.formatted_address,issue:"Place ID Google manquant",clients:n.laboratory_clients?.map(s=>`${s.name} (client de ${s.laboratories?.name||"laboratoire inconnu"})`)||[],laboratories:n.laboratories?.name?[`${n.laboratories.name} (laboratoire)`]:[]}))||[];return{type:"missing_place_id",severity:r.length>0?"warning":"info",count:r.length,details:r}},ZSe=async()=>{const{data:t,error:e}=await Y.from("locations").select(`
      id,
      formatted_address,
      laboratory_clients(id),
      laboratories(id),
      depot(id)
    `);if(e)throw e;const n=(t?.filter(s=>!s.laboratory_clients?.length&&!s.laboratories?.length&&!s.depot?.length)||[]).map(s=>({id:s.id,address:s.formatted_address,issue:"Location sans entité associée",clients:[],laboratories:[]}));return{type:"orphaned",severity:(n.length>0,"info"),count:n.length,details:n}},XSe=async()=>{const{data:t,error:e}=await Y.from("locations").select(`
      id,
      latitude,
      longitude,
      place_id,
      laboratory_clients(id),
      laboratories(id),
      depot(id)
    `);if(e)throw e;const r=t?.length||0,n=t?.filter(s=>s.latitude&&s.longitude&&s.latitude!==0&&s.longitude!==0&&s.place_id&&(s.laboratory_clients?.length||s.laboratories?.length||s.depot?.length)).length||0;return{totalLocations:r,healthyLocations:n}},YSe=(t,e)=>!t||!e?"Coordonnées GPS manquantes":t===0&&e===0?"Coordonnées GPS invalides (0,0)":t<41||t>51.5||e<-5.5||e>10?"Coordonnées GPS hors de France":"Problème de coordonnées GPS",JSe=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState(null),[s,i]=w.useState(null),[a,l]=w.useState(!1);return{isAnalyzing:t,analysisResult:r,error:s,showModal:a,runAnalysis:async()=>{e(!0),i(null);try{const p=await WSe();n(p),l(!0)}catch(p){console.error("Erreur lors de l'analyse:",p),i("Erreur lors de l'analyse des locations. Veuillez réessayer.")}finally{e(!1)}},closeModal:()=>{l(!1)},clearError:()=>{i(null)}}},QSe=async()=>{try{const{data:t,error:e}=await Y.from("laboratory_clients").select(`
        id,
        name,
        laboratory_id,
        location_id,
        laboratory:laboratories!laboratory_clients_laboratory_id_fkey (
          id,
          name
        ),
        location:locations!laboratory_clients_location_id_fkey (
          id,
          formatted_address,
          delivery_instructions
        )
      `).order("name",{ascending:!0});if(e)throw e;const r=await Promise.all((t||[]).map(async a=>{const{data:l,error:c}=await Y.from("location_photos").select("id").eq("location_id",a.location_id),d=Array.isArray(a.location)?a.location[0]:a.location,f=Array.isArray(a.laboratory)?a.laboratory[0]:a.laboratory,p=l?.length||0,m=p===0,g=!d?.delivery_instructions||d.delivery_instructions.trim()==="";return{...a,location:d,laboratory:f,photos_count:p,missing_photos:m,missing_instructions:g}})),n=r.filter(a=>a.missing_photos),s=r.filter(a=>a.missing_instructions),i=r.filter(a=>a.missing_photos&&a.missing_instructions);return{total_clients:r.length,clients_missing_photos:n,clients_missing_instructions:s,clients_missing_both:i,summary:{missing_photos_count:n.length,missing_instructions_count:s.length,missing_both_count:i.length}}}catch(t){throw console.error("Erreur lors de l'analyse des clients:",t),t}},eNe=()=>{const[t,e]=w.useState(null),[r,n]=w.useState(!1),[s,i]=w.useState(null),[a,l]=w.useState(!1),[c,d]=w.useState(null),[f,p]=w.useState(!1),m=w.useCallback(async()=>{n(!0),i(null);try{const S=await QSe();e(S),l(!0)}catch(S){i("Erreur lors de l'analyse des clients"),console.error(S)}finally{n(!1)}},[]),g=w.useCallback(()=>{l(!1)},[]),y=w.useCallback(()=>{i(null)},[]),b=w.useCallback(S=>{d(S),p(!0)},[]),x=w.useCallback(()=>{d(null),p(!1)},[]),j=w.useCallback(async()=>{t&&await m()},[t,m]);return{analysisResult:t,isAnalyzing:r,error:s,showModal:a,selectedClient:c,showClientModal:f,runAnalysis:m,closeModal:g,clearError:y,openClientModal:b,closeClientModal:x,refreshAnalysis:j}},tNe=()=>{const{isAnalyzing:t,analysisResult:e,error:r,showModal:n,runAnalysis:s,closeModal:i,clearError:a}=JSe(),{showModal:l,openModal:c,closeModal:d}=NB(),{analysisResult:f,isAnalyzing:p,error:m,showModal:g,runAnalysis:y,closeModal:b,clearError:x}=eNe(),[j,S]=w.useState({locations:!1,routes:!1,clients:!1,depot:!1,startLocation:!1,other:!1}),C=E=>{S(N=>({...N,[E]:!N[E]}))};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(pl,{className:"h-8 w-8 text-blue-500"}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Paramètres Système"})]}),o.jsx("p",{className:"text-gray-600",children:"Outils d'administration et de maintenance du système PROVENCE COURSES"})]}),r&&o.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(sr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"text-red-700",children:r})}),o.jsx("button",{onClick:a,className:"text-red-400 hover:text-red-600 transition-colors",children:"×"})]})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx("button",{onClick:()=>C("locations"),className:"w-full p-6 text-left hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(it,{className:"h-6 w-6 text-blue-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gestion des Locations"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Outils de vérification et d'analyse des données de localisation"})]})]}),j.locations?o.jsx(Es,{className:"h-5 w-5 text-gray-400"}):o.jsx(Zn,{className:"h-5 w-5 text-gray-400"})]})}),j.locations&&o.jsxs("div",{className:"border-t border-gray-200 p-6",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(pn,{className:"h-5 w-5 text-blue-500 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Analyse des Doublons et Problèmes"}),o.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Vérifiez la qualité de vos données de localisation : détection des doublons, coordonnées GPS manquantes, locations orphelines, etc."}),o.jsxs("div",{className:"text-xs text-blue-600 space-y-1",children:[o.jsxs("div",{children:["• ",o.jsx("strong",{children:"Doublons :"})," Même adresse avec plusieurs IDs différents"]}),o.jsxs("div",{children:["• ",o.jsx("strong",{children:"GPS manquant :"})," Coordonnées nulles ou invalides (0,0)"]}),o.jsxs("div",{children:["• ",o.jsx("strong",{children:"Place ID :"})," Identifiants Google Maps manquants"]}),o.jsxs("div",{children:["• ",o.jsx("strong",{children:"Orphelines :"})," Locations sans clients ni laboratoires associés"]})]})]})]})}),o.jsx("button",{onClick:s,disabled:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t?o.jsxs(o.Fragment,{children:[o.jsx(is,{className:"h-4 w-4 animate-spin"}),"Analyse en cours..."]}):o.jsxs(o.Fragment,{children:[o.jsx(pn,{className:"h-4 w-4"}),"Vérifier les Locations"]})})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx("button",{onClick:()=>C("clients"),className:"w-full p-6 text-left hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ln,{className:"h-6 w-6 text-green-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Analyse des Données Clients"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Identifier les clients sans photos ou instructions"})]})]}),j.clients?o.jsx(Es,{className:"h-5 w-5 text-gray-400"}):o.jsx(Zn,{className:"h-5 w-5 text-gray-400"})]})}),j.clients&&o.jsxs("div",{className:"border-t border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Analysez tous les clients pour identifier ceux qui manquent de photos ou d'instructions de livraison. Vous pourrez ensuite les modifier directement depuis les résultats."}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[o.jsx(Ln,{className:"h-3 w-3"}),o.jsx("span",{children:"Photos • Instructions • Adresses"})]})]}),o.jsx("button",{onClick:y,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md font-medium transition-colors disabled:opacity-50",children:p?o.jsxs(o.Fragment,{children:[o.jsx(is,{className:"h-4 w-4 animate-spin"}),"Analyse..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Qn,{className:"h-4 w-4"}),"Analyser les clients"]})})]}),m&&o.jsxs("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sr,{className:"h-4 w-4"}),o.jsx("span",{children:m})]}),o.jsx("button",{onClick:x,className:"text-red-500 hover:text-red-700",children:"✕"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx("button",{onClick:()=>C("routes"),className:"w-full p-6 text-left hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(hl,{className:"h-6 w-6 text-purple-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gestion des Tournées"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Marquer des tournées ou des arrêts comme terminés"})]})]}),j.routes?o.jsx(Es,{className:"h-5 w-5 text-gray-400"}):o.jsx(Zn,{className:"h-5 w-5 text-gray-400"})]})}),j.routes&&o.jsx("div",{className:"border-t border-gray-200 p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Accédez à la gestion des tournées actives pour marquer manuellement des tournées complètes ou des arrêts individuels comme terminés."}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[o.jsx(hl,{className:"h-3 w-3"}),o.jsx("span",{children:"Tournées • Arrêts • Statuts de livraison"})]})]}),o.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-md font-medium transition-colors",children:[o.jsx(hl,{className:"h-4 w-4"}),"Voir tournées actives"]})]})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx("button",{onClick:()=>C("depot"),className:"w-full p-6 text-left hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(gt,{className:"h-6 w-6 text-blue-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Paramètres du Dépôt Central"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Configuration de l'adresse et des informations du dépôt central"})]})]}),j.depot?o.jsx(Es,{className:"h-5 w-5 text-gray-400"}):o.jsx(Zn,{className:"h-5 w-5 text-gray-400"})]})}),j.depot&&o.jsx("div",{className:"border-t border-gray-200 p-6",children:o.jsx(Bse,{})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx("button",{onClick:()=>C("startLocation"),className:"w-full p-6 text-left hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ki,{className:"h-6 w-6 text-emerald-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Point de Rendez-vous Livreurs"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Créer un point de rendez-vous central pour les livreurs"})]})]}),j.startLocation?o.jsx(Es,{className:"h-5 w-5 text-gray-400"}):o.jsx(Zn,{className:"h-5 w-5 text-gray-400"})]})}),j.startLocation&&o.jsx("div",{className:"border-t border-gray-200 p-6",children:o.jsx(Zse,{})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx("button",{onClick:()=>C("other"),className:"w-full p-6 text-left hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(pl,{className:"h-6 w-6 text-gray-400"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Autres Paramètres"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Fonctionnalités additionnelles à venir"})]})]}),j.other?o.jsx(Es,{className:"h-5 w-5 text-gray-400"}):o.jsx(Zn,{className:"h-5 w-5 text-gray-400"})]})}),j.other&&o.jsx("div",{className:"border-t border-gray-200 p-6",children:o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(pl,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"D'autres outils d'administration seront ajoutés ici"})]})})]})]})]}),o.jsx(Cse,{isOpen:n,onClose:i,result:e}),o.jsx(Wse,{isOpen:l,onClose:d}),o.jsx(Hse,{isOpen:g,onClose:b,analysisResult:f,error:m,onClearError:x})]})},rNe=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState(null),s=async()=>{try{e(!0),n(null),await new Promise(i=>setTimeout(i,1e4)),n({success:!0,message:"Les tournées ont été optimisées avec succès! 🎉"})}catch{n({success:!1,message:"Une erreur est survenue lors de l'optimisation."})}finally{e(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"🎭 Test Animation Moonwalk"}),o.jsx("p",{className:"text-xl text-purple-200",children:"Michael Jackson pendant l'optimisation des tournées"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-3xl p-8 border border-white/20",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Génération des Tournées Livreurs"}),o.jsxs(ve,{onClick:s,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white w-full max-w-md mx-auto h-12 font-medium shadow-lg hover:shadow-xl transition-all duration-200",disabled:t,children:[!t&&o.jsx(gt,{className:"h-4 w-4"}),t?"Optimisation en cours...":"Générer les tournées"]})]}),t&&o.jsx("div",{className:"moonwalk-container",children:o.jsxs("div",{className:"moonwalk-stage",children:[o.jsx("div",{className:"spotlight"}),o.jsx("div",{className:"mj-gif-container",children:o.jsx("img",{src:"/Michael Jackson Rainbow Sticker by Alba Paris.gif",alt:"Michael Jackson Moonwalk",className:"mj-gif"})}),o.jsx("div",{className:"stage-floor"}),o.jsxs("div",{className:"loading-text",children:[o.jsx("span",{className:"text-sparkle",children:"✨"}),o.jsx("span",{children:"Michael Jackson optimise vos tournées"}),o.jsx("span",{className:"text-sparkle",children:"✨"})]}),o.jsxs("div",{className:"music-notes",children:[o.jsx("span",{className:"note note-1",children:"♪"}),o.jsx("span",{className:"note note-2",children:"♫"}),o.jsx("span",{className:"note note-3",children:"♪"}),o.jsx("span",{className:"note note-4",children:"♫"}),o.jsx("span",{className:"note note-5",children:"🎵"}),o.jsx("span",{className:"note note-6",children:"🎶"})]})]})}),r&&o.jsxs("div",{className:`flex items-center justify-center gap-2 px-6 py-4 rounded-xl text-lg font-medium mt-6 ${r.success?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:[r.success?o.jsx(er,{className:"h-5 w-5"}):o.jsx(es,{className:"h-5 w-5"}),r.message]}),o.jsxs("div",{className:"mt-8 p-6 bg-white/5 rounded-xl border border-white/10",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"💡 Comment ça marche :"}),o.jsxs("ul",{className:"text-purple-200 space-y-2",children:[o.jsx("li",{children:`• Cliquez sur "Générer les tournées" pour voir l'animation`}),o.jsx("li",{children:"• Michael Jackson fait le moonwalk pendant l'optimisation"}),o.jsx("li",{children:"• L'animation dure 3 secondes (temps de simulation)"}),o.jsx("li",{children:"• Projecteurs, notes de musique et effets inclus !"})]})]})]})]})})},nNe=({element:t,allowedRoles:e})=>{const r=G3(),n=HN(),s=WN();return!n||s?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):r?e&&!e.includes(r.role)?o.jsx(Km,{to:"/admin",replace:!0}):t:o.jsx(Km,{to:"/login",replace:!0})};function sNe(){const t=HN(),{hydrate:e}=nK();return w.useEffect(()=>{t||e()},[t,e]),w.useEffect(()=>{sK()},[]),t?o.jsxs(V7,{children:[o.jsx(KK,{}),o.jsx(jee,{}),o.jsxs(D7,{children:[o.jsx(jr,{element:o.jsx(See,{}),children:o.jsx(jr,{path:"/login",element:o.jsx(ire,{})})}),o.jsxs(jr,{path:"/admin",element:o.jsx(nNe,{element:o.jsx(Nee,{}),allowedRoles:["admin"]}),children:[o.jsx(jr,{index:!0,element:o.jsx(fre,{})}),o.jsx(jr,{path:"validate-labs",element:o.jsx(Pre,{})}),o.jsx(jr,{path:"validate-routes",element:o.jsx(lie,{})}),o.jsx(jr,{path:"evening-routes",element:o.jsx(VSe,{})}),o.jsx(jr,{path:"accounts",element:o.jsx(Vie,{})}),o.jsx(jr,{path:"laboratories",element:o.jsx(Tje,{})}),o.jsx(jr,{path:"depots",element:o.jsx(lje,{})}),o.jsx(jr,{path:"billing",element:o.jsx(e1e,{})}),o.jsx(jr,{path:"driver-history",element:o.jsx(Lie,{})}),o.jsx(jr,{path:"monitoring",element:o.jsx(_ie,{})}),o.jsx(jr,{path:"monitoring-optimized",element:o.jsx(Pie,{})}),o.jsx(jr,{path:"statistics/laboratory",element:o.jsx(eje,{})}),o.jsx(jr,{path:"statistics/driver",element:o.jsx(nje,{})}),o.jsx(jr,{path:"settings",element:o.jsx(tNe,{})}),o.jsx(jr,{path:"moonwalk-test",element:o.jsx(rNe,{})})]}),o.jsx(jr,{path:"*",element:o.jsx(Km,{to:"/admin",replace:!0})})]})]}):o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."})}function iNe(t={}){const{immediate:e=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:s,onRegisteredSW:i,onRegisterError:a}=t;let l,c,d;const f=async(m=!0)=>{await c,d?.()};async function p(){if("serviceWorker"in navigator){if(l=await Ci(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/sw.js",{scope:"/",type:"classic"})).catch(m=>{a?.(m)}),!l)return;d=()=>{l?.messageSkipWaiting()};{let m=!1;const g=()=>{m=!0,l?.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()}),r?.()};l.addEventListener("installed",y=>{typeof y.isUpdate>"u"?typeof y.isExternal<"u"&&y.isExternal?g():!m&&n?.():y.isUpdate||n?.()}),l.addEventListener("waiting",g)}l.register({immediate:e}).then(m=>{i?i("/sw.js",m):s?.(m)}).catch(m=>{a?.(m)})}}return c=p(),f}const aNe=iNe({immediate:!0,onNeedRefresh(){console.log("🔄 Mise à jour PWA détectée !"),window.dispatchEvent(new CustomEvent("pwa-update-available",{detail:{updateSW:aNe}}))},onOfflineReady(){console.log("📱 PWA prête pour utilisation hors ligne")},onRegistered(t){console.log("✅ Service Worker enregistré"),t&&(setTimeout(()=>t.update(),2e3),setInterval(()=>{console.log("🔍 Vérification des mises à jour..."),t.update()},3e4))},onRegisterError(t){console.error("❌ Erreur SW:",t)}});await EB();W9.createRoot(document.getElementById("root")).render(o.jsx(z.StrictMode,{children:o.jsx(sNe,{})}));export{Pt as g};
